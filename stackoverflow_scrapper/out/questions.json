[
    {
        "_id": 0,
        "titulo": "How to make good reproducible pandas examples",
        "fecha": { "$date" : "2017-05-23 11:54:58Z" },
        "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question's answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nHaving spent a decent amount of time watching both the r and pandas tags on SO, the impression that I get is that pandas questions are less likely to contain reproducible data. This is something that the R community has been pretty good about encouraging, and thanks to guides like this, newcomers are able to get some help on putting together these examples. People who are able to read these guides and come back with reproducible data will often have much better luck getting answers to their questions.\n\nHow can we create good reproducible examples for pandas questions? Simple dataframes can be put together, e.g.:\n\nimport pandas as pd\ndf = pd.DataFrame({'user': ['Bob', 'Jane', 'Alice'], \n                   'income': [40000, 50000, 42000]})\n\n\nBut many example datasets need more complicated structure, e.g.:\n\n\ndatetime indices or data\nMultiple categorical variables (is there an equivalent to R's expand.grid() function, which produces all possible combinations of some given variables?)\nMultiIndex or Panel data\n\n\nFor datasets that are hard to mock up using a few lines of code, is there an equivalent to R's dput() that allows you to generate copy-pasteable code to regenerate your datastructure?\n    ",
        "votes": 220,
        "tags": [
            "python",
            "r",
            "pandas"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 0,
            "fecha": { "$date" : "2021-07-24 20:43:05Z" },
            "decripcion": "\nNote: The ideas here are pretty generic for Stack Overflow, indeed questions.\nDisclaimer: Writing a good question is hard.\nThe Good:\n\ndo include small* example DataFrame, either as runnable code:\n  In [1]: df = pd.DataFrame([[1, 2], [1, 3], [4, 6]], columns=['A', 'B'])\n\nor make it \"copy and pasteable\" using pd.read_clipboard(sep='\\s\\s+'), you can format the text for Stack Overflow highlight and use Ctrl+K (or prepend four spaces to each line), or place three tildes above and below your code with your code unindented:\n  In [2]: df\n  Out[2]:\n     A  B\n  0  1  2\n  1  1  3\n  2  4  6\n\ntest pd.read_clipboard(sep='\\s\\s+') yourself.\n* I really do mean small, the vast majority of example DataFrames could be fewer than 6 rowscitation needed, and I bet I can do it in 5 rows. Can you reproduce the error with df = df.head(), if not fiddle around to see if you can make up a small DataFrame which exhibits the issue you are facing.\n* Every rule has an exception, the obvious one is for performance issues  (in which case definitely use %timeit and possibly %prun), where you should generate (consider using np.random.seed so we have the exact same frame): df = pd.DataFrame(np.random.randn(100000000, 10)). Saying that, \"make this code fast for me\" is not strictly on topic for the site...\n\nwrite out the outcome you desire (similarly to above)\n  In [3]: iwantthis\n  Out[3]:\n     A  B\n  0  1  5\n  1  4  6\n\nExplain what the numbers come from: the 5 is sum of the B column for the rows where A is 1.\n\ndo show the code you've tried:\n  In [4]: df.groupby('A').sum()\n  Out[4]:\n     B\n  A\n  1  5\n  4  6\n\nBut say what's incorrect: the A column is in the index rather than a column.\n\ndo show you've done some research (search the documentation, search Stack\u00a0Overflow), and give a summary:\n\nThe docstring for sum simply states \"Compute sum of group values\"\n\n\nThe groupby documentation doesn't give any examples for this.\n\nAside: the answer here is to use df.groupby('A', as_index=False).sum().\n\nif it's relevant that you have Timestamp columns, e.g. you're resampling or something, then be explicit and apply pd.to_datetime to them for good measure**.\n  df['date'] = pd.to_datetime(df['date']) # this column ought to be date..\n\n** Sometimes this is the issue itself: they were strings.\n\n\nThe Bad:\n\ndon't include a MultiIndex, which we can't copy and paste (see above). This is kind of a grievance with Pandas' default display, but nonetheless annoying:\n  In [11]: df\n  Out[11]:\n       C\n  A B\n  1 2  3\n    2  6\n\nThe correct way is to include an ordinary DataFrame with a set_index call:\n  In [12]: df = pd.DataFrame([[1, 2, 3], [1, 2, 6]], columns=['A', 'B', 'C']).set_index(['A', 'B'])\n\n  In [13]: df\n  Out[13]:\n       C\n  A B\n  1 2  3\n    2  6\n\n\ndo provide insight to what it is when giving the outcome you want:\n     B\n  A\n  1  1\n  5  0\n\nBe specific about how you got the numbers (what are they)... double check they're correct.\n\nIf your code throws an error, do include the entire stack trace (this can be edited out later if it's too noisy). Show the line number (and the corresponding line of your code which it's raising against).\n\n\nThe Ugly:\n\ndon't link to a CSV file we don't have access to (ideally don't link to an external source at all...)\n  df = pd.read_csv('my_secret_file.csv')  # ideally with lots of parsing options\n\nMost data is proprietary we get that: Make up similar data and see if you can reproduce the problem (something small).\n\ndon't explain the situation vaguely in words, like you have a DataFrame which is \"large\", mention some of the column names in passing (be sure not to mention their dtypes). Try and go into lots of detail about something which is completely meaningless without seeing the actual context. Presumably no one is even going to read to the end of this paragraph.\nEssays are bad, it's easier with small examples.\n\ndon't include 10+ (100+??) lines of data munging before getting to your actual question.\nPlease, we see enough of this in our day jobs. We want to help, but not like this....\nCut the intro, and just show the relevant DataFrames (or small versions of them) in the step which is causing you trouble.\n\n\nAnyway, have fun learning Python, NumPy and Pandas!\n    ",
            "votes": 402,
            "comentarios": [
                {
                    "decripcion": "+1 for the pd.read_clipboard(sep='\\s\\s+') tip. When I post SO questions that need a special but easily shared dataframe, like this one I build it in excel, copy it to my clipboard, then instruct SOers to do the same. Saves so much time!",
                    "fecha": { "$date" : "2016-04-13 17:32:12Z" },
                    "usuario": "zelusp",
                    "usuario_id": 0
                },
                {
                    "decripcion": "the pd.read_clipboard(sep='\\s\\s+') suggestion does not seem to work if you're using Python on a remote server, which is where a lot of large data sets live.",
                    "fecha": { "$date" : "2016-12-09 17:50:15Z" },
                    "usuario": "user5359531",
                    "usuario_id": 1
                },
                {
                    "decripcion": "Why pd.read_clipboard(sep='\\s\\s+'), and not a simpler pd.read_clipboard() (with the default \u2018s+\u2019)? The first need at least 2 whitespace characters, which may cause problems if there is only 1 (e. g. see such in the @JohnE 's answer).",
                    "fecha": { "$date" : "2018-12-26 22:32:33Z" },
                    "usuario": "MarianD",
                    "usuario_id": 2
                },
                {
                    "decripcion": "@MarianD the reason that \\s\\s+ is so popular is that there is often one e.g. in a column name, but multiple is rarer, and pandas output nicely puts in at least two between columns. Since this is just for toy/small datasets it's pretty powerful/majority of cases. Note: tabs separated would be a different story, though stackoverflow replaces tabs with spaces, but if you have a tsv then just use \\t.",
                    "fecha": { "$date" : "2018-12-27 20:45:57Z" },
                    "usuario": "Andy Hayden",
                    "usuario_id": 3
                },
                {
                    "decripcion": "Ugh, i always use pd.read_clipboard(), when their are spaces, i do: pd.read_clipboard(sep='\\s+{2,}', engine='python') :P",
                    "fecha": { "$date" : "2019-06-10 11:26:36Z" },
                    "usuario": "U12-Forward",
                    "usuario_id": 4
                }
            ],
            "usuario": "Andy Hayden",
            "usuario_id": 3
        },
        "respuestas": [
            0,
            1,
            2,
            3,
            4
        ],
        "comentarios": [
            {
                "decripcion": "If you copy the output of printing, most of the time answerers can use read_clipboard()... except for MultiIndex :s. Saying that, dict is good addition",
                "fecha": { "$date" : "2013-11-20 23:39:54Z" },
                "usuario": "Andy Hayden",
                "usuario_id": 3
            },
            {
                "decripcion": "In addition to what Andy said, I think copy-pasting df.head(N).to_dict(), where N is some reasonable number is a good way to go. Bonus +1's for adding pretty-line breaks to the output. For timestamps, you'll typically just need to add from pandas import Timestamp to the top of the code.",
                "fecha": { "$date" : "2013-11-20 23:51:38Z" },
                "usuario": "Paul H",
                "usuario_id": 10
            }
        ],
        "usuario": "Marius",
        "usuario_id": 5
    },
    {
        "_id": 1,
        "titulo": "How to test multiple variables against a single value?",
        "fecha": { "$date" : "2021-04-11 18:39:47Z" },
        "decripcion": "\n                \nI'm trying to make a function that will compare multiple variables to an integer and output a string of three letters. I was wondering if there was a way to translate this into Python. So say:\n\nx = 0\ny = 1\nz = 3\nmylist = []\n\nif x or y or z == 0 :\n    mylist.append(\"c\")\nif x or y or z == 1 :\n    mylist.append(\"d\")\nif x or y or z == 2 :\n    mylist.append(\"e\")\nif x or y or z == 3 : \n    mylist.append(\"f\")\n\n\nwhich would return a list of:\n\n[\"c\", \"d\", \"f\"]\n\n\nIs something like this possible?\n    ",
        "votes": 744,
        "tags": [
            "match",
            "python",
            "comparison",
            "boolean-logic",
            "if-statement"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 5,
            "fecha": { "$date" : "2021-04-02 01:51:27Z" },
            "decripcion": "\nYou misunderstand how boolean expressions work; they don't work like an English sentence and guess that you are talking about the same comparison for all names here. You are looking for:\nif x == 1 or y == 1 or z == 1:\n\nx and y are otherwise evaluated on their own (False if 0, True otherwise).\nYou can shorten that using a containment test against a tuple:\nif 1 in (x, y, z):\n\nor better still:\nif 1 in {x, y, z}:\n\nusing a set to take advantage of the constant-cost membership test (i.e. in takes a fixed amount of time whatever the left-hand operand is).\nExplanation\nWhen you use or, python sees each side of the operator as separate expressions. The expression x or y == 1 is treated as first a boolean test for x, then if that is False, the expression y == 1 is tested.\nThis is due to operator precedence. The or operator has a lower precedence than the == test, so the latter is evaluated first.\nHowever, even if this were not the case, and the expression x or y or z == 1 was actually interpreted as (x or y or z) == 1 instead, this would still not do what you expect it to do.\nx or y or z would evaluate to the first argument that is 'truthy', e.g. not False, numeric 0 or empty (see boolean expressions for details on what Python considers false in a boolean context).\nSo for the values x = 2; y = 1; z = 0, x or y or z would resolve to 2, because that is the first true-like value in the arguments. Then 2 == 1 would be False, even though y == 1 would be True.\nThe same would apply to the inverse; testing multiple values against a single variable; x == 1 or 2 or 3 would fail for the same reasons. Use x == 1 or x == 2 or x == 3 or x in {1, 2, 3}.\n    ",
            "votes": 991,
            "comentarios": [
                {
                    "decripcion": "I wouldn't be so quick to go for the set version.  Tuple's are very cheap to create and iterate over.  On my machine at least, tuples are faster than sets so long as the size of the tuple is around 4-8 elements.  If you have to scan more than that, use a set, but if you are looking for an item out of 2-4 possibilities, a tuple is still faster!  If you can arrange for the most likely case to be first in the tuple, the win is even bigger: (my test: timeit.timeit('0 in {seq}'.format(seq=tuple(range(9, -1, -1)))))",
                    "fecha": { "$date" : "2013-10-24 15:27:12Z" },
                    "usuario": "SingleNegationElimination",
                    "usuario_id": 12
                },
                {
                    "decripcion": "@dequestarmappartialsetattr: In Python 3.3 and up, the set is stored as a constant, bypassing the creation time altogether, eliminating the creation time. Tuples can be cheap to create as Python caches a bundle of them to avoid memory churn, making that the biggest difference with sets here.",
                    "fecha": { "$date" : "2013-10-24 15:29:51Z" },
                    "usuario": "Martijn Pieters\u2666",
                    "usuario_id": 13
                },
                {
                    "decripcion": "@dequestarmappartialsetattr: If you time just the membership test, for integers sets and tuples are equally fast for the ideal scenario; matching the first element. After that tuples lose out to sets.",
                    "fecha": { "$date" : "2013-10-24 15:37:11Z" },
                    "usuario": "Martijn Pieters\u2666",
                    "usuario_id": 13
                },
                {
                    "decripcion": "@MartijnPieters: Using the set literal notation for this test isn't a savings unless the contents of the set literal are also literals, right? if 1 in {x, y, z}: can't cache the set, because x, y and z could change, so either solution needs to build a tuple or set from scratch, and I suspect whatever lookup savings you might get when checking for membership would be swamped by greater set creation time.",
                    "fecha": { "$date" : "2016-09-04 00:37:09Z" },
                    "usuario": "ShadowRanger",
                    "usuario_id": 14
                },
                {
                    "decripcion": "@ShadowRanger: yes, peephole optimisation (be it for in [...] or in {...}) only works if the contents of the list or set are immutable literals too.",
                    "fecha": { "$date" : "2016-09-04 07:58:07Z" },
                    "usuario": "Martijn Pieters\u2666",
                    "usuario_id": 13
                }
            ],
            "usuario": "Martijn Pieters",
            "usuario_id": 15
        },
        "respuestas": [
            5,
            6,
            7,
            8,
            9,
            10,
            11,
            12,
            13,
            14,
            15,
            16,
            17,
            18,
            19,
            20,
            21,
            22,
            23,
            24,
            25,
            26,
            27,
            28,
            29,
            30,
            31
        ],
        "comentarios": [
            {
                "decripcion": "use 1 in (tuple)",
                "fecha": { "$date" : "2017-12-05 21:49:51Z" },
                "usuario": "NA",
                "usuario_id": 53
            },
            {
                "decripcion": "When you want to evaluate a list of statements in a any/all manner you can use any/all functions. For example: all([1, 2, 3, 4, False]) will return False all([True, 1, 2, 3]) will return True any([False, 0, 0, False]) will return False any([False, 0, True, False]) will return True",
                "fecha": { "$date" : "2018-06-04 16:17:30Z" },
                "usuario": "eddd",
                "usuario_id": 54
            },
            {
                "decripcion": "This question is a very popular duplicate target, but I think it's suboptimal for that purpose. Most people try to do something like if x == 0 or 1:, which is of course similar to if x or y == 0:, but might be a little confusing for newbies nonetheless. Given the sheer volume of \"Why isn't my x == 0 or 1 working?\" questions, I would much rather use this question as our canonical duplicate target for these questions.",
                "fecha": { "$date" : "2019-04-10 10:06:05Z" },
                "usuario": "Aran-Fey",
                "usuario_id": 55
            },
            {
                "decripcion": "Take extra care when comparing to \"falsey\" values like 0, 0.0 or False. You can easily write wrong code which gives the \"right\" answer.",
                "fecha": { "$date" : "2019-04-10 10:09:25Z" },
                "usuario": "smci",
                "usuario_id": 56
            },
            {
                "decripcion": "For the opposite, see Comparing a string to multiple items in Python",
                "fecha": { "$date" : "2020-01-08 10:27:08Z" },
                "usuario": "tripleee",
                "usuario_id": 57
            }
        ],
        "usuario": "user1877442",
        "usuario_id": 58
    },
    {
        "_id": 2,
        "titulo": "Asking the user for input until they give a valid response",
        "fecha": { "$date" : "2021-03-31 17:54:23Z" },
        "decripcion": "\n                \nI am writing a program that accepts an input from the user.\n\n#note: Python 2.7 users should use `raw_input`, the equivalent of 3.X's `input`\nage = int(input(\"Please enter your age: \"))\nif age >= 18: \n    print(\"You are able to vote in the United States!\")\nelse:\n    print(\"You are not able to vote in the United States.\")\n\n\nThe program works as expected as long as the the user enters meaningful data. \n\nC:\\Python\\Projects> canyouvote.py\nPlease enter your age: 23\nYou are able to vote in the United States!\n\n\nBut it fails if the user enters invalid data:\n\nC:\\Python\\Projects> canyouvote.py\nPlease enter your age: dickety six\nTraceback (most recent call last):\n  File \"canyouvote.py\", line 1, in <module>\n    age = int(input(\"Please enter your age: \"))\nValueError: invalid literal for int() with base 10: 'dickety six'\n\n\nInstead of crashing, I would like the program to ask for the input again. Like this:\n\nC:\\Python\\Projects> canyouvote.py\nPlease enter your age: dickety six\nSorry, I didn't understand that.\nPlease enter your age: 26\nYou are able to vote in the United States!\n\n\nHow can I make the program ask for valid inputs instead of crashing when non-sensical data is entered?\n\nHow can I reject values like -1, which is a valid int, but nonsensical in this context?\n    ",
        "votes": 656,
        "tags": [
            "python"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 32,
            "fecha": { "$date" : "2020-06-06 17:56:58Z" },
            "decripcion": "\nThe simplest way to accomplish this is to put the input method in a while loop. Use continue when you get bad input, and break out of the loop when you're satisfied.\n\nWhen Your Input Might Raise an Exception\n\nUse try and except to detect when the user enters data that can't be parsed.\n\nwhile True:\n    try:\n        # Note: Python 2.x users should use raw_input, the equivalent of 3.x's input\n        age = int(input(\"Please enter your age: \"))\n    except ValueError:\n        print(\"Sorry, I didn't understand that.\")\n        #better try again... Return to the start of the loop\n        continue\n    else:\n        #age was successfully parsed!\n        #we're ready to exit the loop.\n        break\nif age >= 18: \n    print(\"You are able to vote in the United States!\")\nelse:\n    print(\"You are not able to vote in the United States.\")\n\n\nImplementing Your Own Validation Rules\n\nIf you want to reject values that Python can successfully parse, you can add your own validation logic.\n\nwhile True:\n    data = input(\"Please enter a loud message (must be all caps): \")\n    if not data.isupper():\n        print(\"Sorry, your response was not loud enough.\")\n        continue\n    else:\n        #we're happy with the value given.\n        #we're ready to exit the loop.\n        break\n\nwhile True:\n    data = input(\"Pick an answer from A to D:\")\n    if data.lower() not in ('a', 'b', 'c', 'd'):\n        print(\"Not an appropriate choice.\")\n    else:\n        break\n\n\nCombining Exception Handling and Custom Validation\n\nBoth of the above techniques can be combined into one loop.\n\nwhile True:\n    try:\n        age = int(input(\"Please enter your age: \"))\n    except ValueError:\n        print(\"Sorry, I didn't understand that.\")\n        continue\n\n    if age < 0:\n        print(\"Sorry, your response must not be negative.\")\n        continue\n    else:\n        #age was successfully parsed, and we're happy with its value.\n        #we're ready to exit the loop.\n        break\nif age >= 18: \n    print(\"You are able to vote in the United States!\")\nelse:\n    print(\"You are not able to vote in the United States.\")\n\n\nEncapsulating it All in a Function\n\nIf you need to ask your user for a lot of different values, it might be useful to put this code in a function, so you don't have to retype it every time.\n\ndef get_non_negative_int(prompt):\n    while True:\n        try:\n            value = int(input(prompt))\n        except ValueError:\n            print(\"Sorry, I didn't understand that.\")\n            continue\n\n        if value < 0:\n            print(\"Sorry, your response must not be negative.\")\n            continue\n        else:\n            break\n    return value\n\nage = get_non_negative_int(\"Please enter your age: \")\nkids = get_non_negative_int(\"Please enter the number of children you have: \")\nsalary = get_non_negative_int(\"Please enter your yearly earnings, in dollars: \")\n\n\nPutting It All Together\n\nYou can extend this idea to make a very generic input function:\n\ndef sanitised_input(prompt, type_=None, min_=None, max_=None, range_=None):\n    if min_ is not None and max_ is not None and max_ < min_:\n        raise ValueError(\"min_ must be less than or equal to max_.\")\n    while True:\n        ui = input(prompt)\n        if type_ is not None:\n            try:\n                ui = type_(ui)\n            except ValueError:\n                print(\"Input type must be {0}.\".format(type_.__name__))\n                continue\n        if max_ is not None and ui > max_:\n            print(\"Input must be less than or equal to {0}.\".format(max_))\n        elif min_ is not None and ui < min_:\n            print(\"Input must be greater than or equal to {0}.\".format(min_))\n        elif range_ is not None and ui not in range_:\n            if isinstance(range_, range):\n                template = \"Input must be between {0.start} and {0.stop}.\"\n                print(template.format(range_))\n            else:\n                template = \"Input must be {0}.\"\n                if len(range_) == 1:\n                    print(template.format(*range_))\n                else:\n                    expected = \" or \".join((\n                        \", \".join(str(x) for x in range_[:-1]),\n                        str(range_[-1])\n                    ))\n                    print(template.format(expected))\n        else:\n            return ui\n\n\nWith usage such as:\n\nage = sanitised_input(\"Enter your age: \", int, 1, 101)\nanswer = sanitised_input(\"Enter your answer: \", str.lower, range_=('a', 'b', 'c', 'd'))\n\n\nCommon Pitfalls, and Why you Should Avoid Them\n\nThe Redundant Use of Redundant input Statements\n\nThis method works but is generally considered poor style:\n\ndata = input(\"Please enter a loud message (must be all caps): \")\nwhile not data.isupper():\n    print(\"Sorry, your response was not loud enough.\")\n    data = input(\"Please enter a loud message (must be all caps): \")\n\n\nIt might look attractive initially because it's shorter than the while True method, but it violates the Don't Repeat Yourself principle of software development. This increases the likelihood of bugs in your system. What if you want to backport to 2.7 by changing input to raw_input, but accidentally change only the first input above? It's a SyntaxError just waiting to happen.\n\nRecursion Will Blow Your Stack\n\nIf you've just learned about recursion, you might be tempted to use it in get_non_negative_int so you can dispose of the while loop.\n\ndef get_non_negative_int(prompt):\n    try:\n        value = int(input(prompt))\n    except ValueError:\n        print(\"Sorry, I didn't understand that.\")\n        return get_non_negative_int(prompt)\n\n    if value < 0:\n        print(\"Sorry, your response must not be negative.\")\n        return get_non_negative_int(prompt)\n    else:\n        return value\n\n\nThis appears to work fine most of the time, but if the user enters invalid data enough times, the script will terminate with a RuntimeError: maximum recursion depth exceeded. You may think \"no fool would make 1000 mistakes in a row\", but you're underestimating the ingenuity of fools!\n    ",
            "votes": 852,
            "comentarios": [
                {
                    "decripcion": "Its fun reading it with many examples, kudos. Underrated lesson: \"Don't underestimate the ingenuity of fools!\"",
                    "fecha": { "$date" : "2017-01-03 02:02:47Z" },
                    "usuario": "vpibano",
                    "usuario_id": 59
                },
                {
                    "decripcion": "Not only would I have upvoted both the Q&A anyway, as they're great, but you sealed the deal with \"dickety six\". Well done, @Kevin.",
                    "fecha": { "$date" : "2018-02-02 15:58:58Z" },
                    "usuario": "erekalper",
                    "usuario_id": 60
                },
                {
                    "decripcion": "Don't estimate the ingenuity of fools... and clever attackers. A DOS attack would be easiest for this sort of thing, but others may be possible.",
                    "fecha": { "$date" : "2019-04-28 02:53:37Z" },
                    "usuario": "Solomon Ucko",
                    "usuario_id": 61
                },
                {
                    "decripcion": "@JArunMani I don't think it would be poor style, but might be a little less readable. You will indeed have only one input per loop and the loop will become very short, but the condition might become pretty long...",
                    "fecha": { "$date" : "2020-05-09 08:40:15Z" },
                    "usuario": "Tomerikoo",
                    "usuario_id": 51
                },
                {
                    "decripcion": "@laundmo,certainly I release the code blocks that I wrote into the public domain. Feel free to use them in any context, without my explicit permission or knowledge. Regarding the non-code-block segments, If you want to paste my entire answer into a \"Learn Python\" book you're writing, let's talk royalties ;-)",
                    "fecha": { "$date" : "2020-07-24 13:50:12Z" },
                    "usuario": "Kevin",
                    "usuario_id": 62
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            32,
            33,
            34,
            35,
            36,
            37,
            38,
            39,
            40,
            41,
            42,
            43,
            44,
            45,
            46,
            47,
            48,
            49,
            50,
            51,
            52,
            53
        ],
        "comentarios": [
            {
                "decripcion": "I think there's a bug in one of your comments, it should read #note: Python 2.7 users should damn-well get their act together and update :-)",
                "fecha": { "$date" : "2020-09-08 02:05:21Z" },
                "usuario": "paxdiablo",
                "usuario_id": 78
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 3,
        "titulo": "How do I create variable variables?",
        "fecha": { "$date" : "2021-01-13 02:01:54Z" },
        "decripcion": "\n                \nHow do I accomplish variable variables in Python?\nHere is an elaborative manual entry, for instance: Variable variables\nI hear this is a bad idea in general though, and it is a security hole in PHP. Is that true?\n    ",
        "votes": 452,
        "tags": [
            "variable-variables",
            "python"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 54,
            "fecha": { "$date" : "2020-06-12 16:56:19Z" },
            "decripcion": "\nYou can use dictionaries to accomplish this. Dictionaries are stores of keys and values. \n\n>>> dct = {'x': 1, 'y': 2, 'z': 3}\n>>> dct\n{'y': 2, 'x': 1, 'z': 3}\n>>> dct[\"y\"]\n2\n\n\nYou can use variable key names to achieve the effect of variable variables without the security risk.\n\n>>> x = \"spam\"\n>>> z = {x: \"eggs\"}\n>>> z[\"spam\"]\n'eggs'\n\n\nFor cases where you're thinking of doing something like\n\nvar1 = 'foo'\nvar2 = 'bar'\nvar3 = 'baz'\n...\n\n\na list may be more appropriate than a dict. A list represents an ordered sequence of objects, with integer indices:\n\nlst = ['foo', 'bar', 'baz']\nprint(lst[1])           # prints bar, because indices start at 0\nlst.append('potatoes')  # lst is now ['foo', 'bar', 'baz', 'potatoes']\n\n\nFor ordered sequences, lists are more convenient than dicts with integer keys, because lists support iteration in index order, slicing, append, and other operations that would require awkward key management with a dict.\n    ",
            "votes": 365,
            "comentarios": [],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            54,
            55,
            56,
            57,
            58,
            59,
            60,
            61,
            62,
            63,
            64,
            65,
            66,
            67,
            68,
            69
        ],
        "comentarios": [
            {
                "decripcion": "it's the maintainance and debugging aspects that cause the horror. Imagine trying to find out where variable 'foo' changed when there's no place in your code where you actually change 'foo'. Imagine further that it's someone else's code that you have to maintain... OK, you can go to your happy place now.",
                "fecha": { "$date" : "2009-09-03 14:28:55Z" },
                "usuario": "glenn jackman",
                "usuario_id": 99
            },
            {
                "decripcion": "A further pitfall that hasn't been mentioned so far is if such a dynamically-created variable has the same name as a variable used in your logic. You essentially open up your software as a hostage to the input it is given.",
                "fecha": { "$date" : "2014-12-19 10:50:29Z" },
                "usuario": "holdenweb",
                "usuario_id": 100
            },
            {
                "decripcion": "All the responses here assume you have access to the base variables you want to access dynamically by name, which is not always the case. I think the most general approach to reproduce the example behaviour in PHP is to use eval() like this:  var_name = 'foo'; bar = 5; output = eval(var_name)",
                "fecha": { "$date" : "2019-10-23 17:18:58Z" },
                "usuario": "Luis Vazquez",
                "usuario_id": 101
            },
            {
                "decripcion": "You can modify your global and local variables by accessing the underlying dictionaries for them; it's a horrible idea from a maintenance perspective ... but it can be done via globals().update() and locals().update() (or by saving the dict reference from either of those and using it like any other dictionary).  NOT RECOMMENDED ... but you should know that it's possible.",
                "fecha": { "$date" : "2020-03-19 09:13:59Z" },
                "usuario": "Jim Dennis",
                "usuario_id": 80
            },
            {
                "decripcion": "@JimDennis actually, no it can't. Modifications to the dict returned by locals will not affect local namespaces in CPython. Which is another reason not to do it.",
                "fecha": { "$date" : "2020-05-18 22:27:27Z" },
                "usuario": "juanpa.arrivillaga",
                "usuario_id": 102
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 4,
        "titulo": "Understanding slice notation",
        "fecha": { "$date" : "2019-05-08 16:03:58Z" },
        "decripcion": "\n                \nI need a good explanation (references are a plus) on Python's slice notation. \n\nTo me, this notation needs a bit of picking up. \n\nIt looks extremely powerful, but I haven't quite got my head around it.\n    ",
        "votes": 3959,
        "tags": [
            "python",
            "iterable",
            "list",
            "slice"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 70,
            "fecha": { "$date" : "2020-02-24 19:27:21Z" },
            "decripcion": "\nIt's pretty simple really:\n\na[start:stop]  # items start through stop-1\na[start:]      # items start through the rest of the array\na[:stop]       # items from the beginning through stop-1\na[:]           # a copy of the whole array\n\n\nThere is also the step value, which can be used with any of the above:\n\na[start:stop:step] # start through not past stop, by step\n\n\nThe key point to remember is that the :stop value represents the first value that is not in the selected slice. So, the difference between stop and start is the number of elements selected (if step is 1, the default).\n\nThe other feature is that start or stop may be a negative number, which means it counts from the end of the array instead of the beginning. So:\n\na[-1]    # last item in the array\na[-2:]   # last two items in the array\na[:-2]   # everything except the last two items\n\n\nSimilarly, step may be a negative number:\n\na[::-1]    # all items in the array, reversed\na[1::-1]   # the first two items, reversed\na[:-3:-1]  # the last two items, reversed\na[-3::-1]  # everything except the last two items, reversed\n\n\nPython is kind to the programmer if there are fewer items than you ask for. For example, if you ask for a[:-2] and a only contains one element, you get an empty list instead of an error. Sometimes you would prefer the error, so you have to be aware that this may happen.\n\nRelation to slice() object\n\nThe slicing operator [] is actually being used in the above code with a slice() object using the : notation (which is only valid within []), i.e.:\n\na[start:stop:step]\n\n\nis equivalent to:\n\na[slice(start, stop, step)]\n\n\nSlice objects also behave slightly differently depending on the number of arguments, similarly to range(), i.e. both slice(stop) and slice(start, stop[, step]) are supported.\nTo skip specifying a given argument, one might use None, so that e.g. a[start:] is equivalent to a[slice(start, None)] or a[::-1] is equivalent to a[slice(None, None, -1)].\n\nWhile the :-based notation is very helpful for simple slicing, the explicit use of slice() objects simplifies the programmatic generation of slicing.\n    ",
            "votes": 5551,
            "comentarios": [
                {
                    "decripcion": "Slicing builtin types returns a copy but that's not universal.  Notably, slicing NumPy arrays returns a view that shares memory with the original.",
                    "fecha": { "$date" : "2013-09-23 00:13:06Z" },
                    "usuario": "Beni Cherniavsky-Paskin",
                    "usuario_id": 103
                },
                {
                    "decripcion": "This is a beautiful answer with the votes to prove it, but it misses one thing: you can substitute None for any of the empty spaces. For example [None:None] makes a whole copy. This is useful when you need to specify the end of the range using a variable and need to include the last item.",
                    "fecha": { "$date" : "2019-01-16 18:49:18Z" },
                    "usuario": "Mark Ransom",
                    "usuario_id": 104
                },
                {
                    "decripcion": "Note that contrary to usual Python slices (see above), in Pandas Dataframes both the start and the stop are included when present in the index. For further info see the Pandas indexing documentation.",
                    "fecha": { "$date" : "2019-05-29 12:54:33Z" },
                    "usuario": "vreyespue",
                    "usuario_id": 105
                },
                {
                    "decripcion": "What really annoys me is that python says that when you don't set the start and the end, they default to 0 and the length of sequence. So, in theory, when you use \"abcdef\"[::-1] it should be transformed to \"abcdef\"[0:6:-1], but these two expressions does not get the same output. I feel that something is missing in python documentation since the creation of the language.",
                    "fecha": { "$date" : "2019-06-30 14:00:10Z" },
                    "usuario": "axell-brendow",
                    "usuario_id": 106
                },
                {
                    "decripcion": "And I know that \"abcdef\"[::-1] is transformed to \"abcdef\"[6:-7:-1], so, the best way to explain would be: let len be the length of the sequence. If step is positive, the defaults for start and end are 0 and len. Else if step is negative, the defaults for start and end are len and -len - 1.",
                    "fecha": { "$date" : "2019-06-30 14:22:35Z" },
                    "usuario": "axell-brendow",
                    "usuario_id": 106
                }
            ],
            "usuario": "Greg Hewgill",
            "usuario_id": 107
        },
        "respuestas": [
            70,
            71,
            72,
            73,
            74,
            75,
            76,
            77,
            78,
            79,
            80,
            81,
            82,
            83,
            84,
            85,
            86,
            87,
            88,
            89,
            90,
            91,
            92,
            93,
            94,
            95,
            96,
            97,
            98,
            99
        ],
        "comentarios": [],
        "usuario": "Simon",
        "usuario_id": 124
    },
    {
        "_id": 5,
        "titulo": "\"Least Astonishment\" and the Mutable Default Argument",
        "fecha": { "$date" : "2021-07-30 23:36:37Z" },
        "decripcion": "\n                \nAnyone tinkering with Python long enough has been bitten (or torn to pieces) by the following issue:\ndef foo(a=[]):\n    a.append(5)\n    return a\n\nPython novices would expect this function to always return a list with only one element: [5]. The result is instead very different, and very astonishing (for a novice):\n>>> foo()\n[5]\n>>> foo()\n[5, 5]\n>>> foo()\n[5, 5, 5]\n>>> foo()\n[5, 5, 5, 5]\n>>> foo()\n\nA manager of mine once had his first encounter with this feature, and called it \"a dramatic design flaw\" of the language. I replied that the behavior had an underlying explanation, and it is indeed very puzzling and unexpected if you don't understand the internals. However, I was not able to answer (to myself) the following question: what is the reason for binding the default argument at function definition, and not at function execution? I doubt the experienced behavior has a practical use (who really used static variables in C, without breeding bugs?)\nEdit:\nBaczek made an interesting example. Together with most of your comments and Utaal's in particular, I elaborated further:\n>>> def a():\n...     print(\"a executed\")\n...     return []\n... \n>>>            \n>>> def b(x=a()):\n...     x.append(5)\n...     print(x)\n... \na executed\n>>> b()\n[5]\n>>> b()\n[5, 5]\n\nTo me, it seems that the design decision was relative to where to put the scope of parameters: inside the function, or \"together\" with it?\nDoing the binding inside the function would mean that x is effectively bound to the specified default when the function is called, not defined, something that would present a deep flaw: the def line would be \"hybrid\" in the sense that part of the binding (of the function object) would happen at definition, and part (assignment of default parameters) at function invocation time.\nThe actual behavior is more consistent: everything of that line gets evaluated when that line is executed, meaning at function definition.\n    ",
        "votes": 2948,
        "tags": [
            "python",
            "default-parameters",
            "least-astonishment",
            "language-design"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 100,
            "fecha": { "$date" : "2021-07-30 23:41:21Z" },
            "decripcion": "\nActually, this is not a design flaw, and it is not because of internals or performance.\nIt comes simply from the fact that functions in Python are first-class objects, and not only a piece of code.\nAs soon as you think of it this way, then it completely makes sense: a function is an object being evaluated on its definition; default parameters are kind of \"member data\" and therefore their state may change from one call to the other - exactly as in any other object.\nIn any case, Effbot has a very nice explanation of the reasons for this behavior in Default Parameter Values in Python.\nI found it very clear, and I really suggest reading it for a better knowledge of how function objects work.\n    ",
            "votes": 1761,
            "comentarios": [
                {
                    "decripcion": "To anyone reading the above answer, I strongly recommend you take the time to read through the linked Effbot article. As well as all the other useful info, the part on how this language feature can be used for result caching/memoisation is very handy to know!",
                    "fecha": { "$date" : "2011-10-14 00:05:52Z" },
                    "usuario": "Cam Jackson",
                    "usuario_id": 146
                },
                {
                    "decripcion": "Even if it's a first-class object, one might still envision a design where the code for each default value is stored along with the object and re-evaluated each time the function is called. I'm not saying that would be better, just that functions being first-class objects does not fully preclude it.",
                    "fecha": { "$date" : "2013-01-11 10:55:25Z" },
                    "usuario": "gerrit",
                    "usuario_id": 147
                },
                {
                    "decripcion": "Sorry, but anything considered \"The biggest WTF in Python\" is most definitely a design flaw.  This is a source of bugs for everyone at some point, because no one expects that behavior at first - which means it should not have been designed that way to begin with.  I don't care what hoops they had to jump through, they should have designed Python so that default arguments are non-static.",
                    "fecha": { "$date" : "2013-06-07 21:28:27Z" },
                    "usuario": "BlueRaja - Danny Pflughoeft",
                    "usuario_id": 148
                },
                {
                    "decripcion": "Whether or not it's a design flaw, your answer seems to imply that this behaviour is somehow necessary, natural and obvious given that functions are first-class objects, and that simply isn't the case. Python has closures. If you replace the default argument with an assignment on the first line of the function, it evaluates the expression each call (potentially using names declared in an enclosing scope). There is no reason at all that it wouldn't be possible or reasonable to have default arguments evaluated each time the function is called in exactly the same way.",
                    "fecha": { "$date" : "2014-01-08 22:16:13Z" },
                    "usuario": "Mark Amery",
                    "usuario_id": 149
                },
                {
                    "decripcion": "The design doesn't directly follow from functions are objects. In your paradigm, the proposal would be to implement functions' default values as properties rather than attributes.",
                    "fecha": { "$date" : "2014-05-03 20:46:09Z" },
                    "usuario": "bukzor",
                    "usuario_id": 150
                }
            ],
            "usuario": "rob",
            "usuario_id": 151
        },
        "respuestas": [
            100,
            101,
            102,
            103,
            104,
            105,
            106,
            107,
            108,
            109,
            110,
            111,
            112,
            113,
            114,
            115,
            116,
            117,
            118,
            119,
            120,
            121,
            122,
            123,
            124,
            125,
            126,
            127,
            128,
            129
        ],
        "comentarios": [
            {
                "decripcion": "Complementary question - Good uses for mutable default arguments",
                "fecha": { "$date" : "2012-02-06 20:54:07Z" },
                "usuario": "Jonathan",
                "usuario_id": 206
            },
            {
                "decripcion": "I have not doubt mutable arguments violate least astonishment principle for an average person, and I have seen beginners stepping there, then heroically replacing mailing lists with mailing tuples. Nevertheless mutable arguments are still in line with Python Zen (Pep 20) and falls into \"obvious for Dutch\" (understood/exploited by hard core python programmers) clause.  The recommended  workaround with doc string is the best, yet resistance to doc strings and any (written) docs is not so uncommon nowadays. Personally, I would prefer a decorator (say @fixed_defaults).",
                "fecha": { "$date" : "2017-04-06 16:04:44Z" },
                "usuario": "Serge",
                "usuario_id": 207
            },
            {
                "decripcion": "My argument when I come across this is:  \"Why do you need to create a function that returns a mutable that could optionally be a mutable you would pass to the function?  Either it alters a mutable or creates a new one.  Why do you need to do both with one function?  And why should the interpreter be rewritten to allow you to do that without adding three lines to your code?\" Because we are talking about rewriting the way the interpreter handles function definitions and evocations here.  That's a lot to do for a barely necessary use case.",
                "fecha": { "$date" : "2017-06-01 21:22:20Z" },
                "usuario": "Alan Leuthard",
                "usuario_id": 208
            },
            {
                "decripcion": "\"Python novices would expect this function to always return a list with only one element: [5].\" I'm a Python novice, and I wouldn't expect this, because obviously foo([1]) will return [1, 5], not [5]. What you meant to say is that a novice would expect the function called with no parameter will always return [5].",
                "fecha": { "$date" : "2017-07-06 16:08:22Z" },
                "usuario": "symplectomorphic",
                "usuario_id": 209
            },
            {
                "decripcion": "This question asks \"Why did this [the wrong way] get implemented so?\" It doesn't ask \"What's the right way?\", which is covered by [Why does using arg=None fix Python's mutable default argument issue?]*(stackoverflow.com/questions/10676729/\u2026). New users are almost always less interested in the former and much more in the latter, so that's sometimes a very useful link/dupe to cite.",
                "fecha": { "$date" : "2019-04-21 08:48:07Z" },
                "usuario": "smci",
                "usuario_id": 56
            }
        ],
        "usuario": "Stefano Borini",
        "usuario_id": 152
    },
    {
        "_id": 6,
        "titulo": "List of lists changes reflected across sublists unexpectedly",
        "fecha": { "$date" : "2021-06-18 16:29:25Z" },
        "decripcion": "\n                \nI needed to create a list of lists in Python, so I typed the following:\nmy_list = [[1] * 4] * 3\n\nThe list looked like this:\n[[1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 1, 1]]  \n\nThen I changed one of the innermost values:\nmy_list[0][0] = 5\n\nNow my list looks like this:\n[[5, 1, 1, 1], [5, 1, 1, 1], [5, 1, 1, 1]]  \n\nwhich is not what I wanted or expected. Can someone please explain what's going on, and how to get around it?\n    ",
        "votes": 794,
        "tags": [
            "python",
            "list",
            "nested-lists",
            "mutable"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 130,
            "fecha": { "$date" : "2020-01-18 21:04:41Z" },
            "decripcion": "\nWhen you write [x]*3 you get, essentially, the list [x, x, x]. That is, a list with 3 references to the same x. When you then modify this single x it is visible via all three references to it:\n\nx = [1] * 4\nl = [x] * 3\nprint(f\"id(x): {id(x)}\")\n# id(x): 140560897920048\nprint(\n    f\"id(l[0]): {id(l[0])}\\n\"\n    f\"id(l[1]): {id(l[1])}\\n\"\n    f\"id(l[2]): {id(l[2])}\"\n)\n# id(l[0]): 140560897920048\n# id(l[1]): 140560897920048\n# id(l[2]): 140560897920048\n\nx[0] = 42\nprint(f\"x: {x}\")\n# x: [42, 1, 1, 1]\nprint(f\"l: {l}\")\n# l: [[42, 1, 1, 1], [42, 1, 1, 1], [42, 1, 1, 1]]\n\n\nTo fix it, you need to make sure that you create a new list at each position. One way to do it is\n\n[[1]*4 for _ in range(3)]\n\n\nwhich will reevaluate [1]*4 each time instead of evaluating it once and making 3 references to 1 list.\n\n\n\nYou might wonder why * can't make independent objects the way the list comprehension does. That's because the multiplication operator * operates on objects, without seeing expressions. When you use * to multiply [[1] * 4] by 3, * only sees the 1-element list [[1] * 4] evaluates to, not the [[1] * 4 expression text. * has no idea how to make copies of that element, no idea how to reevaluate [[1] * 4], and no idea you even want copies, and in general, there might not even be a way to copy the element.\n\nThe only option * has is to make new references to the existing sublist instead of trying to make new sublists. Anything else would be inconsistent or require major redesigning of fundamental language design decisions.\n\nIn contrast, a list comprehension reevaluates the element expression on every iteration. [[1] * 4 for n in range(3)] reevaluates [1] * 4 every time for the same reason [x**2 for x in range(3)] reevaluates x**2 every time. Every evaluation of [1] * 4 generates a new list, so the list comprehension does what you wanted.\n\nIncidentally, [1] * 4 also doesn't copy the elements of [1], but that doesn't matter, since integers are immutable. You can't do something like 1.value = 2 and turn a 1 into a 2.\n    ",
            "votes": 686,
            "comentarios": [
                {
                    "decripcion": "I am surprised that no body points out  that, the answer here is misleading. [x]*3 store 3 references like [x, x, x] is only right when x is mutable. This does't work for e.g. a=[4]*3, where after a[0]=5, a=[5,4,4].",
                    "fecha": { "$date" : "2015-05-22 00:16:41Z" },
                    "usuario": "Allanqunzi",
                    "usuario_id": 210
                },
                {
                    "decripcion": "Technically, it's still correct. [4]*3 is essentially equivalent to x = 4; [x, x, x]. It's true, though, that this will never cause any problem since 4 is immutable. Also, your other example isn't really a different case. a = [x]*3; a[0] = 5 won't cause problems even if x is mutable, since you're not modifying x, only modifying a. I wouldn't describe my answer as misleading or incorrect - you just can't shoot yourself in the foot if you're dealing with immutable objects.",
                    "fecha": { "$date" : "2015-05-22 08:04:09Z" },
                    "usuario": "CAdaker",
                    "usuario_id": 211
                },
                {
                    "decripcion": "@Allanqunzi you are wrong. Do x = 1000; lst = [x]*2; lst[0] is lst[1] -> True. Python does not distinguish between mutable and immutable objects here whatsoever.",
                    "fecha": { "$date" : "2016-04-17 18:08:26Z" },
                    "usuario": "timgeb",
                    "usuario_id": 212
                }
            ],
            "usuario": "CAdaker",
            "usuario_id": 211
        },
        "respuestas": [
            130,
            131,
            132,
            133,
            134,
            135,
            136,
            137,
            138,
            139,
            140,
            141,
            142,
            143,
            144,
            145,
            146
        ],
        "comentarios": [],
        "usuario": "Charles Anderson",
        "usuario_id": 230
    },
    {
        "_id": 7,
        "titulo": "List changes unexpectedly after assignment. Why is this and how can I prevent it?",
        "fecha": { "$date" : "2021-05-11 21:32:23Z" },
        "decripcion": "\n                \nWhile using new_list = my_list, any modifications to new_list changes my_list every time. Why is this, and how can I clone or copy the list to prevent it?\n    ",
        "votes": 2914,
        "tags": [
            "copy",
            "python",
            "clone",
            "list",
            "reference"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 147,
            "fecha": { "$date" : "2020-03-09 01:52:34Z" },
            "decripcion": "\nWith new_list = my_list, you don't actually have two lists. The assignment just copies the reference to the list, not the actual list, so both new_list and my_list refer to the same list after the assignment.\n\nTo actually copy the list, you have various possibilities:\n\n\nYou can use the builtin list.copy() method (available since Python 3.3):\n\nnew_list = old_list.copy()\n\nYou can slice it: \n\nnew_list = old_list[:]\n\n\nAlex Martelli's opinion (at least back in 2007) about this is, that it is a weird syntax and it does not make sense to use it ever. ;) (In his opinion, the next one is more readable).\nYou can use the built in list() function:\n\nnew_list = list(old_list)\n\nYou can use generic copy.copy():\n\nimport copy\nnew_list = copy.copy(old_list)\n\n\nThis is a little slower than list() because it has to find out the datatype of old_list first.\nIf the list contains objects and you want to copy them as well, use generic copy.deepcopy():\n\nimport copy\nnew_list = copy.deepcopy(old_list)\n\n\nObviously the slowest and most memory-needing method, but sometimes unavoidable.\n\n\nExample:\n\nimport copy\n\nclass Foo(object):\n    def __init__(self, val):\n         self.val = val\n\n    def __repr__(self):\n        return 'Foo({!r})'.format(self.val)\n\nfoo = Foo(1)\n\na = ['foo', foo]\nb = a.copy()\nc = a[:]\nd = list(a)\ne = copy.copy(a)\nf = copy.deepcopy(a)\n\n# edit orignal list and instance \na.append('baz')\nfoo.val = 5\n\nprint('original: %r\\nlist.copy(): %r\\nslice: %r\\nlist(): %r\\ncopy: %r\\ndeepcopy: %r'\n      % (a, b, c, d, e, f))\n\n\nResult:\n\noriginal: ['foo', Foo(5), 'baz']\nlist.copy(): ['foo', Foo(5)]\nslice: ['foo', Foo(5)]\nlist(): ['foo', Foo(5)]\ncopy: ['foo', Foo(5)]\ndeepcopy: ['foo', Foo(1)]\n\n    ",
            "votes": 3690,
            "comentarios": [
                {
                    "decripcion": "As @Georgy points out correctly in the answer below, any changes to the new_list values will also change the values in my_list. So actually the copy.deepcopy() method is the only real copy without reference to the original list and it's values.",
                    "fecha": { "$date" : "2020-12-21 17:27:56Z" },
                    "usuario": "moojen",
                    "usuario_id": 231
                },
                {
                    "decripcion": "@Erri I think you made a mistake. I didn't post any answers or comments here :)",
                    "fecha": { "$date" : "2020-12-21 17:33:34Z" },
                    "usuario": "Georgy",
                    "usuario_id": 70
                },
                {
                    "decripcion": "You're right, it was edited by you, but posted by @cryo Sorry for the mixup!",
                    "fecha": { "$date" : "2020-12-21 17:52:36Z" },
                    "usuario": "moojen",
                    "usuario_id": 231
                },
                {
                    "decripcion": "Which one is fastest?",
                    "fecha": { "$date" : "2021-05-04 18:10:13Z" },
                    "usuario": "zzz777",
                    "usuario_id": 232
                },
                {
                    "decripcion": "I was having the same issue with a list of json (each element of a list was a json) and the only one that worked was new_list = copy.deepcopy(old_list) ; I'm writing this since anyone can encounter the same issue. Thanks!",
                    "fecha": { "$date" : "2021-05-11 15:23:44Z" },
                    "usuario": "Tom",
                    "usuario_id": 233
                }
            ],
            "usuario": "Felix Kling",
            "usuario_id": 234
        },
        "respuestas": [
            147,
            148,
            149,
            150,
            151,
            152,
            153,
            154,
            155,
            156,
            157,
            158,
            159,
            160,
            161,
            162,
            163,
            164,
            165,
            166,
            167,
            168
        ],
        "comentarios": [],
        "usuario": "aF.",
        "usuario_id": 264
    },
    {
        "_id": 8,
        "titulo": "How can I pivot a dataframe?",
        "fecha": { "$date" : "2021-07-31 18:10:56Z" },
        "decripcion": "\n                \n\nWhat is pivot?\nHow do I pivot?\nIs this a pivot?\nLong format to wide format?\n\nI've seen a lot of questions that ask about pivot tables.  Even if they don't know that they are asking about pivot tables, they usually are.  It is virtually impossible to write a canonical question and answer that encompasses all aspects of pivoting...\n... But I'm going to give it a go.\n\nThe problem with existing questions and answers is that often the question is focused on a nuance that the OP has trouble generalizing in order to use a number of the existing good answers.  However, none of the answers attempt to give a comprehensive explanation (because it's a daunting task)\nLook a few examples from my Google Search\n\nHow to pivot a dataframe in Pandas?\n\n\nGood question and answer.  But the answer only answers the specific question with little explanation.\n\n\npandas pivot table to data frame\n\n\nIn this question, the OP is concerned with the output of the pivot.  Namely how the columns look.  OP wanted it to look like R.  This isn't very helpful for pandas users.\n\n\npandas pivoting a dataframe, duplicate rows\n\n\nAnother decent question but the answer focuses on one method, namely pd.DataFrame.pivot\n\nSo whenever someone searches for pivot they get sporadic results that are likely not going to answer their specific question.\n\nSetup\nYou may notice that I conspicuously named my columns and relevant column values to correspond with how I'm going to pivot in the answers below.\nimport numpy as np\nimport pandas as pd\nfrom numpy.core.defchararray import add\n\nnp.random.seed([3,1415])\nn = 20\n\ncols = np.array(['key', 'row', 'item', 'col'])\narr1 = (np.random.randint(5, size=(n, 4)) // [2, 1, 2, 1]).astype(str)\n\ndf = pd.DataFrame(\n    add(cols, arr1), columns=cols\n).join(\n    pd.DataFrame(np.random.rand(n, 2).round(2)).add_prefix('val')\n)\nprint(df)\n\n     key   row   item   col  val0  val1\n0   key0  row3  item1  col3  0.81  0.04\n1   key1  row2  item1  col2  0.44  0.07\n2   key1  row0  item1  col0  0.77  0.01\n3   key0  row4  item0  col2  0.15  0.59\n4   key1  row0  item2  col1  0.81  0.64\n5   key1  row2  item2  col4  0.13  0.88\n6   key2  row4  item1  col3  0.88  0.39\n7   key1  row4  item1  col1  0.10  0.07\n8   key1  row0  item2  col4  0.65  0.02\n9   key1  row2  item0  col2  0.35  0.61\n10  key2  row0  item2  col1  0.40  0.85\n11  key2  row4  item1  col2  0.64  0.25\n12  key0  row2  item2  col3  0.50  0.44\n13  key0  row4  item1  col4  0.24  0.46\n14  key1  row3  item2  col3  0.28  0.11\n15  key0  row3  item1  col1  0.31  0.23\n16  key0  row0  item2  col3  0.86  0.01\n17  key0  row4  item0  col3  0.64  0.21\n18  key2  row2  item2  col0  0.13  0.45\n19  key0  row2  item0  col4  0.37  0.70\n\nQuestion(s)\n\nWhy do I get ValueError: Index contains duplicate entries, cannot reshape\n\nHow do I pivot df such that the col values are columns, row values are the index, and mean of val0 are the values?\n col   col0   col1   col2   col3  col4\n row\n row0  0.77  0.605    NaN  0.860  0.65\n row2  0.13    NaN  0.395  0.500  0.25\n row3   NaN  0.310    NaN  0.545   NaN\n row4   NaN  0.100  0.395  0.760  0.24\n\n\nHow do I pivot df such that the col values are columns, row values are the index, mean of val0 are the values, and missing values are 0?\n col   col0   col1   col2   col3  col4\n row\n row0  0.77  0.605  0.000  0.860  0.65\n row2  0.13  0.000  0.395  0.500  0.25\n row3  0.00  0.310  0.000  0.545  0.00\n row4  0.00  0.100  0.395  0.760  0.24\n\n\nCan I get something other than mean, like maybe sum?\n col   col0  col1  col2  col3  col4\n row\n row0  0.77  1.21  0.00  0.86  0.65\n row2  0.13  0.00  0.79  0.50  0.50\n row3  0.00  0.31  0.00  1.09  0.00\n row4  0.00  0.10  0.79  1.52  0.24\n\n\nCan I do more that one aggregation at a time?\n        sum                          mean\n col   col0  col1  col2  col3  col4  col0   col1   col2   col3  col4\n row\n row0  0.77  1.21  0.00  0.86  0.65  0.77  0.605  0.000  0.860  0.65\n row2  0.13  0.00  0.79  0.50  0.50  0.13  0.000  0.395  0.500  0.25\n row3  0.00  0.31  0.00  1.09  0.00  0.00  0.310  0.000  0.545  0.00\n row4  0.00  0.10  0.79  1.52  0.24  0.00  0.100  0.395  0.760  0.24\n\n\nCan I aggregate over multiple value columns?\n       val0                             val1\n col   col0   col1   col2   col3  col4  col0   col1  col2   col3  col4\n row\n row0  0.77  0.605  0.000  0.860  0.65  0.01  0.745  0.00  0.010  0.02\n row2  0.13  0.000  0.395  0.500  0.25  0.45  0.000  0.34  0.440  0.79\n row3  0.00  0.310  0.000  0.545  0.00  0.00  0.230  0.00  0.075  0.00\n row4  0.00  0.100  0.395  0.760  0.24  0.00  0.070  0.42  0.300  0.46\n\n\nCan Subdivide by multiple columns?\n item item0             item1                         item2\n col   col2  col3  col4  col0  col1  col2  col3  col4  col0   col1  col3  col4\n row\n row0  0.00  0.00  0.00  0.77  0.00  0.00  0.00  0.00  0.00  0.605  0.86  0.65\n row2  0.35  0.00  0.37  0.00  0.00  0.44  0.00  0.00  0.13  0.000  0.50  0.13\n row3  0.00  0.00  0.00  0.00  0.31  0.00  0.81  0.00  0.00  0.000  0.28  0.00\n row4  0.15  0.64  0.00  0.00  0.10  0.64  0.88  0.24  0.00  0.000  0.00  0.00\n\n\nOr\n item      item0             item1                         item2\n col        col2  col3  col4  col0  col1  col2  col3  col4  col0  col1  col3  col4\n key  row\n key0 row0  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.86  0.00\n      row2  0.00  0.00  0.37  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.50  0.00\n      row3  0.00  0.00  0.00  0.00  0.31  0.00  0.81  0.00  0.00  0.00  0.00  0.00\n      row4  0.15  0.64  0.00  0.00  0.00  0.00  0.00  0.24  0.00  0.00  0.00  0.00\n key1 row0  0.00  0.00  0.00  0.77  0.00  0.00  0.00  0.00  0.00  0.81  0.00  0.65\n      row2  0.35  0.00  0.00  0.00  0.00  0.44  0.00  0.00  0.00  0.00  0.00  0.13\n      row3  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.28  0.00\n      row4  0.00  0.00  0.00  0.00  0.10  0.00  0.00  0.00  0.00  0.00  0.00  0.00\n key2 row0  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.40  0.00  0.00\n      row2  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.13  0.00  0.00  0.00\n      row4  0.00  0.00  0.00  0.00  0.00  0.64  0.88  0.00  0.00  0.00  0.00  0.00\n\n\nCan I aggregate the frequency in which the column and rows occur together, aka \"cross tabulation\"?\n col   col0  col1  col2  col3  col4\n row\n row0     1     2     0     1     1\n row2     1     0     2     1     2\n row3     0     1     0     2     0\n row4     0     1     2     2     1\n\n\nHow do I convert a DataFrame from long to wide by pivoting on ONLY two columns? Given,\nnp.random.seed([3, 1415])\ndf2 = pd.DataFrame({'A': list('aaaabbbc'), 'B': np.random.choice(15, 8)})\ndf2\n   A   B\n0  a   0\n1  a  11\n2  a   2\n3  a  11\n4  b  10\n5  b  10\n6  b  14\n7  c   7\n\nThe expected should look something like\n      a     b    c\n0   0.0  10.0  7.0\n1  11.0  10.0  NaN\n2   2.0  14.0  NaN\n3  11.0   NaN  NaN\n\n\nHow do I flatten the multiple index to single index after pivot?\nFrom\n   1  2\n   1  1  2\na  2  1  1\nb  2  1  0\nc  1  0  0\n\nTo\n   1|1  2|1  2|2\na    2    1    1\nb    2    1    0\nc    1    0    0\n\n\n\n    ",
        "votes": 474,
        "tags": [
            "pandas",
            "pandas-groupby",
            "python",
            "group-by",
            "pivot"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 169,
            "fecha": { "$date" : "2021-08-07 11:42:55Z" },
            "decripcion": "\nWe start by answering the first question:\nQuestion 1\n\nWhy do I get ValueError: Index contains duplicate entries, cannot reshape\n\nThis occurs because pandas is attempting to reindex either a columns or index object with duplicate entries.  There are varying methods to use that can perform a pivot.  Some of them are not well suited to when there are duplicates of the keys in which it is being asked to pivot on.  For example.  Consider pd.DataFrame.pivot.  I know there are duplicate entries that share the row and col values:\ndf.duplicated(['row', 'col']).any()\n\nTrue\n\nSo when I pivot using\ndf.pivot(index='row', columns='col', values='val0')\n\nI get the error mentioned above.  In fact, I get the same error when I try to perform the same task with:\ndf.set_index(['row', 'col'])['val0'].unstack()\n\nHere is a list of idioms we can use to pivot\n\npd.DataFrame.groupby + pd.DataFrame.unstack\n\nGood general approach for doing just about any type of pivot\nYou specify all columns that will constitute the pivoted row levels and column levels in one group by.  You follow that by selecting the remaining columns you want to aggregate and the function(s) you want to perform the aggregation.  Finally, you unstack the levels that you want to be in the column index.\n\n\npd.DataFrame.pivot_table\n\nA glorified version of groupby with more intuitive API.  For many people, this is the preferred approach.  And is the intended approach by the developers.\nSpecify row level, column levels, values to be aggregated, and function(s) to perform aggregations.\n\n\npd.DataFrame.set_index + pd.DataFrame.unstack\n\nConvenient and intuitive for some (myself included).  Cannot handle duplicate grouped keys.\nSimilar to the groupby paradigm, we specify all columns that will eventually be either row or column levels and set those to be the index.  We then unstack the levels we want in the columns.  If either the remaining index levels or column levels are not unique, this method will fail.\n\n\npd.DataFrame.pivot\n\nVery similar to set_index in that it shares the duplicate key limitation.  The API is very limited as well.  It only takes scalar values for index, columns, values.\nSimilar to the pivot_table method in that we select rows, columns, and values on which to pivot.  However, we cannot aggregate and if either rows or columns are not unique, this method will fail.\n\n\npd.crosstab\n\nThis a specialized version of pivot_table and in its purest form is the most intuitive way to perform several tasks.\n\n\npd.factorize + np.bincount\n\nThis is a highly advanced technique that is very obscure but is very fast.  It cannot be used in all circumstances, but when it can be used and you are comfortable using it, you will reap the performance rewards.\n\n\npd.get_dummies + pd.DataFrame.dot\n\nI use this for cleverly performing cross tabulation.\n\n\n\n\nExamples\nWhat I'm going to do for each subsequent answer and question is to answer it using pd.DataFrame.pivot_table.  Then I'll provide alternatives to perform the same task.\nQuestion 3\n\nHow do I pivot df such that the col values are columns, row values are the index, mean of val0 are the values, and missing values are 0?\n\n\npd.DataFrame.pivot_table\n\nfill_value is not set by default.  I tend to set it appropriately.  In this case I set it to 0.  Notice I skipped question 2 as it's the same as this answer without the fill_value\n\naggfunc='mean' is the default and I didn't have to set it.  I included it to be explicit.\n    df.pivot_table(\n        values='val0', index='row', columns='col',\n        fill_value=0, aggfunc='mean')\n\n    col   col0   col1   col2   col3  col4\n    row\n    row0  0.77  0.605  0.000  0.860  0.65\n    row2  0.13  0.000  0.395  0.500  0.25\n    row3  0.00  0.310  0.000  0.545  0.00\n    row4  0.00  0.100  0.395  0.760  0.24\n\n\n\n\npd.DataFrame.groupby\n  df.groupby(['row', 'col'])['val0'].mean().unstack(fill_value=0)\n\n\npd.crosstab\n  pd.crosstab(\n      index=df['row'], columns=df['col'],\n      values=df['val0'], aggfunc='mean').fillna(0)\n\n\n\n\nQuestion 4\n\nCan I get something other than mean, like maybe sum?\n\n\npd.DataFrame.pivot_table\n  df.pivot_table(\n      values='val0', index='row', columns='col',\n      fill_value=0, aggfunc='sum')\n\n  col   col0  col1  col2  col3  col4\n  row\n  row0  0.77  1.21  0.00  0.86  0.65\n  row2  0.13  0.00  0.79  0.50  0.50\n  row3  0.00  0.31  0.00  1.09  0.00\n  row4  0.00  0.10  0.79  1.52  0.24\n\n\npd.DataFrame.groupby\n  df.groupby(['row', 'col'])['val0'].sum().unstack(fill_value=0)\n\n\npd.crosstab\n  pd.crosstab(\n      index=df['row'], columns=df['col'],\n      values=df['val0'], aggfunc='sum').fillna(0)\n\n\n\n\nQuestion 5\n\nCan I do more that one aggregation at a time?\n\nNotice that for pivot_table and crosstab I needed to pass list of callables.  On the other hand, groupby.agg is able to take strings for a limited number of special functions.  groupby.agg would also have taken the same callables we passed to the others, but it is often more efficient to leverage the string function names as there are efficiencies to be gained.\n\npd.DataFrame.pivot_table\n  df.pivot_table(\n      values='val0', index='row', columns='col',\n      fill_value=0, aggfunc=[np.size, np.mean])\n\n       size                      mean\n  col  col0 col1 col2 col3 col4  col0   col1   col2   col3  col4\n  row\n  row0    1    2    0    1    1  0.77  0.605  0.000  0.860  0.65\n  row2    1    0    2    1    2  0.13  0.000  0.395  0.500  0.25\n  row3    0    1    0    2    0  0.00  0.310  0.000  0.545  0.00\n  row4    0    1    2    2    1  0.00  0.100  0.395  0.760  0.24\n\n\npd.DataFrame.groupby\n  df.groupby(['row', 'col'])['val0'].agg(['size', 'mean']).unstack(fill_value=0)\n\n\npd.crosstab\n  pd.crosstab(\n      index=df['row'], columns=df['col'],\n      values=df['val0'], aggfunc=[np.size, np.mean]).fillna(0, downcast='infer')\n\n\n\n\nQuestion 6\n\nCan I aggregate over multiple value columns?\n\n\npd.DataFrame.pivot_table we pass values=['val0', 'val1'] but we could've left that off completely\n  df.pivot_table(\n      values=['val0', 'val1'], index='row', columns='col',\n      fill_value=0, aggfunc='mean')\n\n        val0                             val1\n  col   col0   col1   col2   col3  col4  col0   col1  col2   col3  col4\n  row\n  row0  0.77  0.605  0.000  0.860  0.65  0.01  0.745  0.00  0.010  0.02\n  row2  0.13  0.000  0.395  0.500  0.25  0.45  0.000  0.34  0.440  0.79\n  row3  0.00  0.310  0.000  0.545  0.00  0.00  0.230  0.00  0.075  0.00\n  row4  0.00  0.100  0.395  0.760  0.24  0.00  0.070  0.42  0.300  0.46\n\n\npd.DataFrame.groupby\n  df.groupby(['row', 'col'])['val0', 'val1'].mean().unstack(fill_value=0)\n\n\n\n\nQuestion 7\n\nCan Subdivide by multiple columns?\n\n\npd.DataFrame.pivot_table\n  df.pivot_table(\n      values='val0', index='row', columns=['item', 'col'],\n      fill_value=0, aggfunc='mean')\n\n  item item0             item1                         item2\n  col   col2  col3  col4  col0  col1  col2  col3  col4  col0   col1  col3  col4\n  row\n  row0  0.00  0.00  0.00  0.77  0.00  0.00  0.00  0.00  0.00  0.605  0.86  0.65\n  row2  0.35  0.00  0.37  0.00  0.00  0.44  0.00  0.00  0.13  0.000  0.50  0.13\n  row3  0.00  0.00  0.00  0.00  0.31  0.00  0.81  0.00  0.00  0.000  0.28  0.00\n  row4  0.15  0.64  0.00  0.00  0.10  0.64  0.88  0.24  0.00  0.000  0.00  0.00\n\n\npd.DataFrame.groupby\n  df.groupby(\n      ['row', 'item', 'col']\n  )['val0'].mean().unstack(['item', 'col']).fillna(0).sort_index(1)\n\n\n\n\nQuestion 8\n\nCan Subdivide by multiple columns?\n\n\npd.DataFrame.pivot_table\n  df.pivot_table(\n      values='val0', index=['key', 'row'], columns=['item', 'col'],\n      fill_value=0, aggfunc='mean')\n\n  item      item0             item1                         item2\n  col        col2  col3  col4  col0  col1  col2  col3  col4  col0  col1  col3  col4\n  key  row\n  key0 row0  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.86  0.00\n       row2  0.00  0.00  0.37  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.50  0.00\n       row3  0.00  0.00  0.00  0.00  0.31  0.00  0.81  0.00  0.00  0.00  0.00  0.00\n       row4  0.15  0.64  0.00  0.00  0.00  0.00  0.00  0.24  0.00  0.00  0.00  0.00\n  key1 row0  0.00  0.00  0.00  0.77  0.00  0.00  0.00  0.00  0.00  0.81  0.00  0.65\n       row2  0.35  0.00  0.00  0.00  0.00  0.44  0.00  0.00  0.00  0.00  0.00  0.13\n       row3  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.28  0.00\n       row4  0.00  0.00  0.00  0.00  0.10  0.00  0.00  0.00  0.00  0.00  0.00  0.00\n  key2 row0  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.40  0.00  0.00\n       row2  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.13  0.00  0.00  0.00\n       row4  0.00  0.00  0.00  0.00  0.00  0.64  0.88  0.00  0.00  0.00  0.00  0.00\n\n\npd.DataFrame.groupby\n  df.groupby(\n      ['key', 'row', 'item', 'col']\n  )['val0'].mean().unstack(['item', 'col']).fillna(0).sort_index(1)\n\n\npd.DataFrame.set_index because the set of keys are unique for both rows and columns\n  df.set_index(\n      ['key', 'row', 'item', 'col']\n  )['val0'].unstack(['item', 'col']).fillna(0).sort_index(1)\n\n\n\n\nQuestion 9\n\nCan I aggregate the frequency in which the column and rows occur together, aka \"cross tabulation\"?\n\n\npd.DataFrame.pivot_table\n  df.pivot_table(index='row', columns='col', fill_value=0, aggfunc='size')\n\n      col   col0  col1  col2  col3  col4\n  row\n  row0     1     2     0     1     1\n  row2     1     0     2     1     2\n  row3     0     1     0     2     0\n  row4     0     1     2     2     1\n\n\npd.DataFrame.groupby\n  df.groupby(['row', 'col'])['val0'].size().unstack(fill_value=0)\n\n\npd.crosstab\n  pd.crosstab(df['row'], df['col'])\n\n\npd.factorize + np.bincount\n  # get integer factorization `i` and unique values `r`\n  # for column `'row'`\n  i, r = pd.factorize(df['row'].values)\n  # get integer factorization `j` and unique values `c`\n  # for column `'col'`\n  j, c = pd.factorize(df['col'].values)\n  # `n` will be the number of rows\n  # `m` will be the number of columns\n  n, m = r.size, c.size\n  # `i * m + j` is a clever way of counting the\n  # factorization bins assuming a flat array of length\n  # `n * m`.  Which is why we subsequently reshape as `(n, m)`\n  b = np.bincount(i * m + j, minlength=n * m).reshape(n, m)\n  # BTW, whenever I read this, I think 'Bean, Rice, and Cheese'\n  pd.DataFrame(b, r, c)\n\n        col3  col2  col0  col1  col4\n  row3     2     0     0     1     0\n  row2     1     2     1     0     2\n  row0     1     0     1     2     1\n  row4     2     2     0     1     1\n\n\npd.get_dummies\n  pd.get_dummies(df['row']).T.dot(pd.get_dummies(df['col']))\n\n        col0  col1  col2  col3  col4\n  row0     1     2     0     1     1\n  row2     1     0     2     1     2\n  row3     0     1     0     2     0\n  row4     0     1     2     2     1\n\n\n\n\nQuestion 10\n\nHow do I convert a DataFrame from long to wide by pivoting on ONLY two\ncolumns?\n\n\nDataFrame.pivot\nThe first step is to assign a number to each row - this number will be the row index of that value in the pivoted result. This is done using GroupBy.cumcount:\n  df2.insert(0, 'count', df2.groupby('A').cumcount())\n  df2\n\n     count  A   B\n  0      0  a   0\n  1      1  a  11\n  2      2  a   2\n  3      3  a  11\n  4      0  b  10\n  5      1  b  10\n  6      2  b  14\n  7      0  c   7\n\nThe second step is to use the newly created column as the index to call DataFrame.pivot.\n  df2.pivot(*df2)\n  # df2.pivot(index='count', columns='A', values='B')\n\n  A         a     b    c\n  count\n  0       0.0  10.0  7.0\n  1      11.0  10.0  NaN\n  2       2.0  14.0  NaN\n  3      11.0   NaN  NaN\n\n\nDataFrame.pivot_table\nWhereas DataFrame.pivot only accepts columns, DataFrame.pivot_table also accepts arrays, so the GroupBy.cumcount can be passed directly as the index without creating an explicit column.\n  df2.pivot_table(index=df2.groupby('A').cumcount(), columns='A', values='B')\n\n  A         a     b    c\n  0       0.0  10.0  7.0\n  1      11.0  10.0  NaN\n  2       2.0  14.0  NaN\n  3      11.0   NaN  NaN\n\n\n\n\nQuestion 11\n\nHow do I flatten the multiple index to single index after pivot\n\nIf columns type object with string join\ndf.columns = df.columns.map('|'.join)\n\nelse format\ndf.columns = df.columns.map('{0[0]}|{0[1]}'.format)\n\n    ",
            "votes": 373,
            "comentarios": [
                {
                    "decripcion": "Could you please consider extending official docs?",
                    "fecha": { "$date" : "2017-12-15 10:31:13Z" },
                    "usuario": "MaxU",
                    "usuario_id": 265
                },
                {
                    "decripcion": "what happened with the answer to Question #10? I get KeyError: 'A'. Is there more to the answer?",
                    "fecha": { "$date" : "2019-09-27 18:06:51Z" },
                    "usuario": "Monica Heddneck",
                    "usuario_id": 266
                },
                {
                    "decripcion": "@MonicaHeddneck I'll review it again and update if necessary.  However, 'A' is assuming there is a column 'A' in your dataframe to group by.",
                    "fecha": { "$date" : "2019-09-27 20:19:45Z" },
                    "usuario": "piRSquared",
                    "usuario_id": 8
                },
                {
                    "decripcion": "it is not necessary to insert the column in question 10, it can be passed directly as an argument in the pivot table",
                    "fecha": { "$date" : "2020-04-01 18:03:56Z" },
                    "usuario": "ansev",
                    "usuario_id": 267
                },
                {
                    "decripcion": "@MonicaHeddneck I believe the references to df should be changed to df2. If you were following along like I was df is the earlier dataframe created.",
                    "fecha": { "$date" : "2020-04-14 06:16:50Z" },
                    "usuario": "CopOnTheRun",
                    "usuario_id": 268
                }
            ],
            "usuario": "piRSquared",
            "usuario_id": 8
        },
        "respuestas": [
            169,
            170,
            171
        ],
        "comentarios": [],
        "usuario": "piRSquared",
        "usuario_id": 8
    },
    {
        "_id": 9,
        "titulo": "Pandas Merging 101",
        "fecha": { "$date" : "2021-07-31 17:38:31Z" },
        "decripcion": "\n                \n\nHow can I perform a (INNER| (LEFT|RIGHT|FULL) OUTER) JOIN with pandas?\nHow do I add NaNs for missing rows after a merge?\nHow do I get rid of NaNs after merging?\nCan I merge on the index?\nHow do I merge multiple DataFrames?\nCross join with pandas\nmerge? join? concat? update? Who? What? Why?!\n\n... and more. I've seen these recurring questions asking about various facets of the pandas merge functionality. Most of the information regarding merge and its various use cases today is fragmented across dozens of badly worded, unsearchable posts. The aim here is to collate some of the more important points for posterity.\nThis Q&A is meant to be the next installment in a series of helpful user guides on common pandas idioms (see this post on pivoting, and this post on concatenation, which I will be touching on, later).\nPlease note that this post is not meant to be a replacement for the documentation, so please read that as well! Some of the examples are taken from there.\n\nTable of Contents\nFor ease of access.\n\nMerging basics - basic types of joins (read this first)\n\nIndex-based joins\n\nGeneralizing to multiple DataFrames\n\nCross join\n\n\n    ",
        "votes": 622,
        "tags": [
            "join",
            "merge",
            "pandas",
            "python",
            "concatenation"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 172,
            "fecha": { "$date" : "2021-07-31 17:38:01Z" },
            "decripcion": "\nThis post aims to give readers a primer on SQL-flavored merging with Pandas, how to use it, and when not to use it.\nIn particular, here's what this post will go through:\n\nThe basics - types of joins (LEFT, RIGHT, OUTER, INNER)\n\nmerging with different column names\nmerging with multiple columns\navoiding duplicate merge key column in output\n\n\n\nWhat this post (and other posts by me on this thread) will not go through:\n\nPerformance-related discussions and timings (for now). Mostly notable mentions of better alternatives, wherever appropriate.\nHandling suffixes, removing extra columns, renaming outputs, and other specific use cases. There are other (read: better) posts that deal with that, so figure it out!\n\n\nNote\nMost examples default to INNER JOIN operations while demonstrating various features, unless otherwise specified.\nFurthermore, all the DataFrames here can be copied and replicated so\nyou can play with them. Also, see this\npost\non how to read DataFrames from your clipboard.\nLastly, all visual representation of JOIN operations have been hand-drawn using Google Drawings. Inspiration from here.\n\n\n\nEnough talk - just show me how to use merge!\nSetup & Basics\nnp.random.seed(0)\nleft = pd.DataFrame({'key': ['A', 'B', 'C', 'D'], 'value': np.random.randn(4)})\nright = pd.DataFrame({'key': ['B', 'D', 'E', 'F'], 'value': np.random.randn(4)})\n\nleft\n\n  key     value\n0   A  1.764052\n1   B  0.400157\n2   C  0.978738\n3   D  2.240893\n\nright\n\n  key     value\n0   B  1.867558\n1   D -0.977278\n2   E  0.950088\n3   F -0.151357\n\nFor the sake of simplicity, the key column has the same name (for now).\nAn INNER JOIN is represented by\n\n\nNote\nThis, along with the forthcoming figures all follow this convention:\n\nblue indicates rows that are present in the merge result\nred indicates rows that are excluded from the result (i.e., removed)\ngreen indicates missing values that are replaced with NaNs in the result\n\n\nTo perform an INNER JOIN, call merge on the left DataFrame, specifying the right DataFrame and the join key (at the very least) as arguments.\nleft.merge(right, on='key')\n# Or, if you want to be explicit\n# left.merge(right, on='key', how='inner')\n\n  key   value_x   value_y\n0   B  0.400157  1.867558\n1   D  2.240893 -0.977278\n\nThis returns only rows from left and right which share a common key (in this example, \"B\" and \"D).\nA LEFT OUTER JOIN, or LEFT JOIN  is represented by\n\nThis can be performed by specifying how='left'.\nleft.merge(right, on='key', how='left')\n\n  key   value_x   value_y\n0   A  1.764052       NaN\n1   B  0.400157  1.867558\n2   C  0.978738       NaN\n3   D  2.240893 -0.977278\n\nCarefully note the placement of NaNs here. If you specify how='left', then only keys from left are used, and missing data from right is replaced by NaN.\nAnd similarly, for a RIGHT OUTER JOIN, or RIGHT JOIN which is...\n\n...specify how='right':\nleft.merge(right, on='key', how='right')\n\n  key   value_x   value_y\n0   B  0.400157  1.867558\n1   D  2.240893 -0.977278\n2   E       NaN  0.950088\n3   F       NaN -0.151357\n\nHere, keys from right are used, and missing data from left is replaced by NaN.\nFinally, for the FULL OUTER JOIN, given by\n\nspecify how='outer'.\nleft.merge(right, on='key', how='outer')\n\n  key   value_x   value_y\n0   A  1.764052       NaN\n1   B  0.400157  1.867558\n2   C  0.978738       NaN\n3   D  2.240893 -0.977278\n4   E       NaN  0.950088\n5   F       NaN -0.151357\n\nThis uses the keys from both frames, and NaNs are inserted for missing rows in both.\nThe documentation summarizes these various merges nicely:\n\n\nOther JOINs - LEFT-Excluding, RIGHT-Excluding, and FULL-Excluding/ANTI JOINs\nIf you need LEFT-Excluding JOINs and RIGHT-Excluding JOINs in two steps.\nFor LEFT-Excluding JOIN, represented as\n\nStart by performing a LEFT OUTER JOIN and then filtering (excluding!) rows coming from left only,\n(left.merge(right, on='key', how='left', indicator=True)\n     .query('_merge == \"left_only\"')\n     .drop('_merge', 1))\n\n  key   value_x  value_y\n0   A  1.764052      NaN\n2   C  0.978738      NaN\n\nWhere,\nleft.merge(right, on='key', how='left', indicator=True)\n\n  key   value_x   value_y     _merge\n0   A  1.764052       NaN  left_only\n1   B  0.400157  1.867558       both\n2   C  0.978738       NaN  left_only\n3   D  2.240893 -0.977278       both\nAnd similarly, for a RIGHT-Excluding JOIN,\n\n(left.merge(right, on='key', how='right', indicator=True)\n     .query('_merge == \"right_only\"')\n     .drop('_merge', 1))\n\n  key  value_x   value_y\n2   E      NaN  0.950088\n3   F      NaN -0.151357\nLastly, if you are required to do a merge that only retains keys from the left or right, but not both (IOW, performing an ANTI-JOIN),\n\nYou can do this in similar fashion\u2014\n(left.merge(right, on='key', how='outer', indicator=True)\n     .query('_merge != \"both\"')\n     .drop('_merge', 1))\n\n  key   value_x   value_y\n0   A  1.764052       NaN\n2   C  0.978738       NaN\n4   E       NaN  0.950088\n5   F       NaN -0.151357\n\n\nDifferent names for key columns\nIf the key columns are named differently\u2014for example, left has keyLeft, and right has keyRight instead of key\u2014then you will have to specify left_on and right_on as arguments instead of on:\nleft2 = left.rename({'key':'keyLeft'}, axis=1)\nright2 = right.rename({'key':'keyRight'}, axis=1)\n\nleft2\n\n  keyLeft     value\n0       A  1.764052\n1       B  0.400157\n2       C  0.978738\n3       D  2.240893\n\nright2\n\n  keyRight     value\n0        B  1.867558\n1        D -0.977278\n2        E  0.950088\n3        F -0.151357\n\n\nleft2.merge(right2, left_on='keyLeft', right_on='keyRight', how='inner')\n\n  keyLeft   value_x keyRight   value_y\n0       B  0.400157        B  1.867558\n1       D  2.240893        D -0.977278\n\n\nAvoiding duplicate key column in output\nWhen merging on keyLeft from left and keyRight from right, if you only want either of the keyLeft or keyRight (but not both) in the output, you can start by setting the index as a preliminary step.\nleft3 = left2.set_index('keyLeft')\nleft3.merge(right2, left_index=True, right_on='keyRight')\n\n    value_x keyRight   value_y\n0  0.400157        B  1.867558\n1  2.240893        D -0.977278\n\nContrast this with the output of the command just before (that is, the output of left2.merge(right2, left_on='keyLeft', right_on='keyRight', how='inner')), you'll notice keyLeft is missing. You can figure out what column to keep based on which frame's index is set as the key. This may matter when, say, performing some OUTER JOIN operation.\n\nMerging only a single column from one of the DataFrames\nFor example, consider\nright3 = right.assign(newcol=np.arange(len(right)))\nright3\n  key     value  newcol\n0   B  1.867558       0\n1   D -0.977278       1\n2   E  0.950088       2\n3   F -0.151357       3\n\nIf you are required to merge only \"new_val\" (without any of the other columns), you can usually just subset columns before merging:\nleft.merge(right3[['key', 'newcol']], on='key')\n\n  key     value  newcol\n0   B  0.400157       0\n1   D  2.240893       1\n\nIf you're doing a LEFT OUTER JOIN, a more performant solution would involve map:\n# left['newcol'] = left['key'].map(right3.set_index('key')['newcol']))\nleft.assign(newcol=left['key'].map(right3.set_index('key')['newcol']))\n\n  key     value  newcol\n0   A  1.764052     NaN\n1   B  0.400157     0.0\n2   C  0.978738     NaN\n3   D  2.240893     1.0\n\nAs mentioned, this is similar to, but faster than\nleft.merge(right3[['key', 'newcol']], on='key', how='left')\n\n  key     value  newcol\n0   A  1.764052     NaN\n1   B  0.400157     0.0\n2   C  0.978738     NaN\n3   D  2.240893     1.0\n\n\nMerging on multiple columns\nTo join on more than one column, specify a list for on (or left_on and right_on, as appropriate).\nleft.merge(right, on=['key1', 'key2'] ...)\n\nOr, in the event the names are different,\nleft.merge(right, left_on=['lkey1', 'lkey2'], right_on=['rkey1', 'rkey2'])\n\n\nOther useful merge* operations and functions\n\nMerging a DataFrame with Series on index: See this answer.\n\nBesides merge, DataFrame.update and DataFrame.combine_first are also used in certain cases to update one DataFrame with another.\n\npd.merge_ordered is a useful function for ordered JOINs.\n\npd.merge_asof (read: merge_asOf) is useful for approximate joins.\n\n\nThis section only covers the very basics, and is designed to only whet your appetite. For more examples and cases, see the documentation on merge, join, and concat as well as the links to the function specifications.\n\n\nContinue Reading\nJump to other topics in Pandas Merging 101 to continue learning:\n\nMerging basics - basic types of joins *\n\nIndex-based joins\n\nGeneralizing to multiple DataFrames\n\nCross join\n\n\n*You are here.\n    ",
            "votes": 880,
            "comentarios": [
                {
                    "decripcion": "If anyone is confused by the table of contents at the end of each post, I split up this massive answer into 4 separate ones, 3 on this question and 1 on another. The way it was setup previously made it harder to reference folks to specific topics. This allows you to bookmark separate topics easily now!",
                    "fecha": { "$date" : "2020-12-17 10:17:28Z" },
                    "usuario": "cs95",
                    "usuario_id": 271
                },
                {
                    "decripcion": "This is an awesome resource! The only question I still have is why call it merge instead of join, and join instead of merge?",
                    "fecha": { "$date" : "2021-04-08 22:31:14Z" },
                    "usuario": "ThatNewGuy",
                    "usuario_id": 272
                }
            ],
            "usuario": "cs95",
            "usuario_id": 271
        },
        "respuestas": [
            172,
            173,
            174,
            175,
            176,
            177
        ],
        "comentarios": [],
        "usuario": "cs95",
        "usuario_id": 271
    },
    {
        "_id": 10,
        "titulo": "How to remove items from a list while iterating?",
        "fecha": { "$date" : "2018-02-28 14:25:52Z" },
        "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question's answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nI'm iterating over a list of tuples in Python, and am attempting to remove them if they meet certain criteria. \n\nfor tup in somelist:\n    if determine(tup):\n         code_to_remove_tup\n\n\nWhat should I use in place of code_to_remove_tup? I can't figure out how to remove the item in this fashion.\n    ",
        "votes": 933,
        "tags": [
            "python",
            "iteration"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 178,
            "fecha": { "$date" : "2021-03-19 21:52:42Z" },
            "decripcion": "\nYou can use a list comprehension to create a new list containing only the elements you don't want to remove:\nsomelist = [x for x in somelist if not determine(x)]\n\nOr, by assigning to the slice somelist[:], you can mutate the existing list to contain only the items you want:\nsomelist[:] = [x for x in somelist if not determine(x)]\n\nThis approach could be useful if there are other references to somelist that need to reflect the changes.\nInstead of a comprehension, you could also use itertools. In Python 2:\nfrom itertools import ifilterfalse\nsomelist[:] = ifilterfalse(determine, somelist)\n\nOr in Python 3:\nfrom itertools import filterfalse\nsomelist[:] = filterfalse(determine, somelist)\n\n    ",
            "votes": 954,
            "comentarios": [
                {
                    "decripcion": "Can you make it faster if you know only a few will be deleted, i.e., only delete those and leave the others in-place rather than re-writing them?",
                    "fecha": { "$date" : "2011-04-20 19:25:57Z" },
                    "usuario": "highBandWidth",
                    "usuario_id": 277
                },
                {
                    "decripcion": "What if my list is huge and can't afford making a copy?",
                    "fecha": { "$date" : "2014-11-15 23:43:18Z" },
                    "usuario": "jpcgt",
                    "usuario_id": 278
                },
                {
                    "decripcion": "@jpcgt You should use somelist[:] = (x for x in somelist if determine(x)) this will create generator that may not create any unnecessary copies.",
                    "fecha": { "$date" : "2015-04-29 14:54:28Z" },
                    "usuario": "Rostislav Kondratenko",
                    "usuario_id": 279
                },
                {
                    "decripcion": "@RostislavKondratenko: list_ass_slice() function that implements somelist[:]= calls PySequence_Fast() internally. This function always returns a list i.e., @Alex Martelli's solution that already uses a list instead of a generator is most probably more efficient",
                    "fecha": { "$date" : "2015-05-07 20:48:28Z" },
                    "usuario": "jfs",
                    "usuario_id": 280
                },
                {
                    "decripcion": "Would you care to explain what the differences are between assigning the list comprehension to the list and list clone please? Wouldn't the original list somelist be mutated in both methods?",
                    "fecha": { "$date" : "2018-09-24 19:06:14Z" },
                    "usuario": "Bowen Liu",
                    "usuario_id": 281
                }
            ],
            "usuario": "David Raznick",
            "usuario_id": 282
        },
        "respuestas": [
            178,
            179,
            180,
            181,
            182,
            183,
            184,
            185,
            186,
            187,
            188,
            189,
            190,
            191,
            192,
            193,
            194,
            195,
            196,
            197,
            198,
            199,
            200,
            201,
            202
        ],
        "comentarios": [
            {
                "decripcion": "Most answers on this page don't really explain why removing elements while iterating over a list produces strange results, but the accepted answer in this question does, and is probably a better dupe for beginners who encounter this issue for the first time.",
                "fecha": { "$date" : "2019-12-06 23:34:07Z" },
                "usuario": "ggorlen",
                "usuario_id": 87
            }
        ],
        "usuario": "lfaraone",
        "usuario_id": 320
    },
    {
        "_id": 11,
        "titulo": "How to make a flat list out of a list of lists",
        "fecha": { "$date" : "2021-07-31 18:17:31Z" },
        "decripcion": "\n                \nIs there a shortcut to make a simple list out of a list of lists in Python?\nI can do it in a for loop, but is there some cool \"one-liner\"?\nI tried it with functools.reduce():\nfrom functools import reduce\nl = [[1, 2, 3], [4, 5, 6], [7], [8, 9]]\nreduce(lambda x, y: x.extend(y), l)\n\nBut I get this error:\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"<stdin>\", line 1, in <lambda>\nAttributeError: 'NoneType' object has no attribute 'extend'\n\n    ",
        "votes": 4242,
        "tags": [
            "python",
            "multidimensional-array",
            "flatten",
            "list"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 203,
            "fecha": { "$date" : "2021-07-04 18:40:40Z" },
            "decripcion": "\nGiven a list of lists t,\nflat_list = [item for sublist in t for item in sublist]\n\nwhich means:\nflat_list = []\nfor sublist in t:\n    for item in sublist:\n        flat_list.append(item)\n\nis faster than the shortcuts posted so far. (t is the list to flatten.)\nHere is the corresponding function:\ndef flatten(t):\n    return [item for sublist in t for item in sublist]\n\nAs evidence, you can use the timeit module in the standard library:\n$ python -mtimeit -s't=[[1,2,3],[4,5,6], [7], [8,9]]*99' '[item for sublist in t for item in sublist]'\n10000 loops, best of 3: 143 usec per loop\n$ python -mtimeit -s't=[[1,2,3],[4,5,6], [7], [8,9]]*99' 'sum(t, [])'\n1000 loops, best of 3: 969 usec per loop\n$ python -mtimeit -s't=[[1,2,3],[4,5,6], [7], [8,9]]*99' 'reduce(lambda x,y: x+y,t)'\n1000 loops, best of 3: 1.1 msec per loop\n\nExplanation: the shortcuts based on + (including the implied use in sum) are, of necessity, O(T**2) when there are T sublists -- as the intermediate result list keeps getting longer, at each step a new intermediate result list object gets allocated, and all the items in the previous intermediate result must be copied over (as well as a few new ones added at the end). So, for simplicity and without actual loss of generality, say you have T sublists of k items each: the first k items are copied back and forth T-1 times, the second k items T-2 times, and so on; total number of copies is k times the sum of x for x from 1 to T excluded, i.e., k * (T**2)/2.\nThe list comprehension just generates one list, once, and copies each item over (from its original place of residence to the result list) also exactly once.\n    ",
            "votes": 6027,
            "comentarios": [
                {
                    "decripcion": "I tried a test with the same data, using itertools.chain.from_iterable :         $ python -mtimeit -s'from itertools import chain; l=[[1,2,3],[4,5,6], [7], [8,9]]*99' 'list(chain.from_iterable(l))'.   It runs a bit more than twice as fast as the nested list comprehension that's the fastest of the alternatives shown here.",
                    "fecha": { "$date" : "2010-10-15 01:21:33Z" },
                    "usuario": "intuited",
                    "usuario_id": 321
                },
                {
                    "decripcion": "I found the syntax hard to understand until I realized you can think of it exactly like nested for loops.  for sublist in l: for item in sublist: yield item",
                    "fecha": { "$date" : "2011-07-27 16:43:18Z" },
                    "usuario": "Rob Crowell",
                    "usuario_id": 322
                },
                {
                    "decripcion": "[leaf for tree in forest for leaf in tree] might be easier to comprehend and apply.",
                    "fecha": { "$date" : "2013-08-29 01:38:20Z" },
                    "usuario": "John Mee",
                    "usuario_id": 323
                },
                {
                    "decripcion": "@RobCrowell Same here. To me the list comprehension one doesn't read right, something feels off about it - I always seem to get it wrong and end up googling. To me this reads right [leaf for leaf in tree for tree in forest]. I wish this is how it was. I am sure I am missing something about the grammar here, and I would appreciate if anyone could point that out.",
                    "fecha": { "$date" : "2021-07-12 17:19:14Z" },
                    "usuario": "S\u043d\u0430\u0111\u043e\u0448\u0192\u0430\u04fd",
                    "usuario_id": 324
                },
                {
                    "decripcion": "I kept looking here every time I wanted to flatten a list, but this gif is what drove it home: i.stack.imgur.com/0GoV5.gif",
                    "fecha": { "$date" : "2021-08-11 12:04:22Z" },
                    "usuario": "Gilthans",
                    "usuario_id": 325
                }
            ],
            "usuario": "Alex Martelli",
            "usuario_id": 288
        },
        "respuestas": [
            203,
            204,
            205,
            206,
            207,
            208,
            209,
            210,
            211,
            212,
            213,
            214,
            215,
            216,
            217,
            218,
            219,
            220,
            221,
            222
        ],
        "comentarios": [
            {
                "decripcion": "There's an in-depth discussion of this here: rightfootin.blogspot.com/2006/09/more-on-python-flatten.html, discussing several methods of flattening arbitrarily nested lists of lists. An interesting read!",
                "fecha": { "$date" : "2009-06-04 20:41:13Z" },
                "usuario": "RichieHindle",
                "usuario_id": 364
            },
            {
                "decripcion": "Some other answers are better but the reason yours fails is that the 'extend' method always returns None. For a list with length 2, it will work but return None. For a longer list, it will consume the first 2 args, which returns None. It then continues with None.extend(<third arg>), which causes this erro",
                "fecha": { "$date" : "2013-06-11 21:48:27Z" },
                "usuario": "mehtunguh",
                "usuario_id": 365
            },
            {
                "decripcion": "stackoverflow.com/questions/50259290/\u2026   (this article explain the difference between an np.flatten() and a tf.flatten() use (static vs dynamic) ndarray.",
                "fecha": { "$date" : "2020-12-18 16:48:11Z" },
                "usuario": "Golden Lion",
                "usuario_id": 366
            }
        ],
        "usuario": "Emma",
        "usuario_id": 367
    },
    {
        "_id": 12,
        "titulo": "How can I read inputs as numbers?",
        "fecha": { "$date" : "2019-04-28 01:05:10Z" },
        "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question's answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nWhy are x and y strings instead of ints in the below code?\n\n(Note: in Python 2.x use raw_input(). In Python 3.x use input(). raw_input() was renamed to input() in Python 3.x)\n\nplay = True\n\nwhile play:\n\n    x = input(\"Enter a number: \")\n    y = input(\"Enter a number: \")\n\n    print(x + y)\n    print(x - y)\n    print(x * y)\n    print(x / y)\n    print(x % y)\n\n    if input(\"Play again? \") == \"no\":\n        play = False\n\n    ",
        "votes": 261,
        "tags": [
            "input",
            "python-2.7",
            "python",
            "int",
            "python-3.x"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 223,
            "fecha": { "$date" : "2021-01-28 13:45:16Z" },
            "decripcion": "\nSolution\nSince Python 3, input returns a string which you have to explicitly convert to ints, with int, like this\nx = int(input(\"Enter a number: \"))\ny = int(input(\"Enter a number: \"))\n\nYou can accept numbers of any base and convert them directly to base-10 with the int function, like this\n>>> data = int(input(\"Enter a number: \"), 8)\nEnter a number: 777\n>>> data\n511\n>>> data = int(input(\"Enter a number: \"), 16)\nEnter a number: FFFF\n>>> data\n65535\n>>> data = int(input(\"Enter a number: \"), 2)\nEnter a number: 10101010101\n>>> data\n1365\n\nThe second parameter tells what is the base of the numbers entered and then internally it understands and converts it. If the entered data is wrong it will throw a ValueError.\n>>> data = int(input(\"Enter a number: \"), 2)\nEnter a number: 1234\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\nValueError: invalid literal for int() with base 2: '1234'\n\nFor values that can have a fractional component, the type would be float rather than int:\nx = float(input(\"Enter a number:\"))\n\nDifferences between Python 2 and 3\nSummary\n\nPython 2's input function evaluated the received data, converting it to an integer implicitly (read the next section to understand the implication), but Python 3's input function does not do that anymore.\nPython 2's equivalent of Python 3's input is the raw_input function.\n\nPython 2.x\nThere were two functions to get user input, called input and raw_input. The difference between them is, raw_input doesn't evaluate the data and returns as it is, in string form. But, input will evaluate whatever you entered and the result of evaluation will be returned. For example,\n>>> import sys\n>>> sys.version\n'2.7.6 (default, Mar 22 2014, 22:59:56) \\n[GCC 4.8.2]'\n>>> data = input(\"Enter a number: \")\nEnter a number: 5 + 17\n>>> data, type(data)\n(22, <type 'int'>)\n\nThe data 5 + 17 is evaluated and the result is 22. When it evaluates the expression 5 + 17, it detects that you are adding two numbers and so the result will also be of the same int type. So, the type conversion is done for free and 22 is returned as the result of input and stored in data variable. You can think of input as the raw_input composed with an eval call.\n>>> data = eval(raw_input(\"Enter a number: \"))\nEnter a number: 5 + 17\n>>> data, type(data)\n(22, <type 'int'>)\n\nNote: you should be careful when you are using input in Python 2.x. I explained why one should be careful when using it, in this answer.\nBut, raw_input doesn't evaluate the input and returns as it is, as a string.\n>>> import sys\n>>> sys.version\n'2.7.6 (default, Mar 22 2014, 22:59:56) \\n[GCC 4.8.2]'\n>>> data = raw_input(\"Enter a number: \")\nEnter a number: 5 + 17\n>>> data, type(data)\n('5 + 17', <type 'str'>)\n\nPython 3.x\nPython 3.x's input and Python 2.x's raw_input are similar and raw_input is not available in Python 3.x.\n>>> import sys\n>>> sys.version\n'3.4.0 (default, Apr 11 2014, 13:05:11) \\n[GCC 4.8.2]'\n>>> data = input(\"Enter a number: \")\nEnter a number: 5 + 17\n>>> data, type(data)\n('5 + 17', <class 'str'>)\n\n    ",
            "votes": 354,
            "comentarios": [
                {
                    "decripcion": "Is there any other way, like a function or something so that we dont need to convert to int in 3.x other than doing explicit conversion to int??",
                    "fecha": { "$date" : "2016-04-09 06:19:24Z" },
                    "usuario": "Shreyan Mehta",
                    "usuario_id": 368
                },
                {
                    "decripcion": "@ShreyanMehta eval would work, but don't go for that unless you have pressing reasons.",
                    "fecha": { "$date" : "2016-04-09 07:01:32Z" },
                    "usuario": "thefourtheye",
                    "usuario_id": 369
                },
                {
                    "decripcion": "@thefourtheye at least use ast.literal_eval for that. It does not have the security concerns of eval.",
                    "fecha": { "$date" : "2018-04-06 12:48:28Z" },
                    "usuario": "spectras",
                    "usuario_id": 370
                }
            ],
            "usuario": "thefourtheye",
            "usuario_id": 369
        },
        "respuestas": [
            223,
            224,
            225,
            226,
            227,
            228,
            229,
            230,
            231,
            232
        ],
        "comentarios": [
            {
                "decripcion": "asking-the-user-for-input-until-they-give-a-valid-response",
                "fecha": { "$date" : "2018-09-13 20:50:23Z" },
                "usuario": "Patrick Artner",
                "usuario_id": 379
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 13,
        "titulo": "How do you split a list into evenly sized chunks?",
        "fecha": { "$date" : "2017-05-23 11:55:11Z" },
        "decripcion": "\n                \nI have a list of arbitrary length, and I need to split it up into equal size chunks and operate on it. There are some obvious ways to do this, like keeping a counter and two lists, and when the second list fills up, add it to the first list and empty the second list for the next round of data, but this is potentially extremely expensive.\n\nI was wondering if anyone had a good solution to this for lists of any length, e.g. using generators.\n\nI was looking for something useful in itertools but I couldn't find anything obviously useful. Might've missed it, though.\n\nRelated question: What is the most \u201cpythonic\u201d way to iterate over a list in chunks?\n    ",
        "votes": 2638,
        "tags": [
            "python",
            "split",
            "chunks",
            "list"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 233,
            "fecha": { "$date" : "2019-11-28 01:43:27Z" },
            "decripcion": "\nHere's a generator that yields the chunks you want:\n\ndef chunks(lst, n):\n    \"\"\"Yield successive n-sized chunks from lst.\"\"\"\n    for i in range(0, len(lst), n):\n        yield lst[i:i + n]\n\n\n\n\nimport pprint\npprint.pprint(list(chunks(range(10, 75), 10)))\n[[10, 11, 12, 13, 14, 15, 16, 17, 18, 19],\n [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],\n [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],\n [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],\n [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],\n [70, 71, 72, 73, 74]]\n\n\n\n\nIf you're using Python 2, you should use xrange() instead of range():\n\ndef chunks(lst, n):\n    \"\"\"Yield successive n-sized chunks from lst.\"\"\"\n    for i in xrange(0, len(lst), n):\n        yield lst[i:i + n]\n\n\n\n\nAlso you can simply use list comprehension instead of writing a function, though it's a good idea to encapsulate operations like this in named functions so that your code is easier to understand. Python 3:\n\n[lst[i:i + n] for i in range(0, len(lst), n)]\n\n\nPython 2 version:\n\n[lst[i:i + n] for i in xrange(0, len(lst), n)]\n\n    ",
            "votes": 3802,
            "comentarios": [
                {
                    "decripcion": "What happens if we can't tell the length of the list? Try this on itertools.repeat([ 1, 2, 3 ]), e.g.",
                    "fecha": { "$date" : "2008-11-23 12:51:10Z" },
                    "usuario": "jespern",
                    "usuario_id": 380
                },
                {
                    "decripcion": "That's an interesting extension to the question, but the original question clearly asked about operating on a list.",
                    "fecha": { "$date" : "2008-11-23 13:53:37Z" },
                    "usuario": "Ned Batchelder",
                    "usuario_id": 381
                },
                {
                    "decripcion": "this functions needs to be in the damn standard library",
                    "fecha": { "$date" : "2018-02-04 14:19:55Z" },
                    "usuario": "dgan",
                    "usuario_id": 382
                },
                {
                    "decripcion": "@Calimo: what do you suggest? I hand you a list with 47 elements. How would you like to split it into \"evenly sized chunks\"? The OP accepted the answer, so they are clearly OK with the last differently sized chunk. Perhaps the English phrase is imprecise?",
                    "fecha": { "$date" : "2018-06-14 15:29:23Z" },
                    "usuario": "Ned Batchelder",
                    "usuario_id": 381
                },
                {
                    "decripcion": "Most people will be looking at this for batch processing and rate limiting, so it usually doesn't matter if the last chunk is smaller",
                    "fecha": { "$date" : "2019-07-04 12:46:37Z" },
                    "usuario": "Alvaro",
                    "usuario_id": 383
                }
            ],
            "usuario": "Ned Batchelder",
            "usuario_id": 381
        },
        "respuestas": [
            233,
            234,
            235,
            236,
            237,
            238,
            239,
            240,
            241,
            242,
            243,
            244,
            245,
            246,
            247,
            248,
            249,
            250,
            251,
            252,
            253,
            254,
            255,
            256,
            257,
            258,
            259,
            260,
            261,
            262
        ],
        "comentarios": [
            {
                "decripcion": "Before you post a new answer, consider there are already 60+ answers for this question. Please, make sure that your answer contributes information that is not among existing answers.",
                "fecha": { "$date" : "2020-02-03 12:17:33Z" },
                "usuario": "janniks",
                "usuario_id": 432
            },
            {
                "decripcion": "simple one at stackoverflow.com/a/66967457/687896",
                "fecha": { "$date" : "2021-04-06 11:13:04Z" },
                "usuario": "Brandt",
                "usuario_id": 433
            }
        ],
        "usuario": "jespern",
        "usuario_id": 380
    },
    {
        "_id": 14,
        "titulo": "How do I pass a variable by reference?",
        "fecha": { "$date" : "2017-03-22 16:16:41Z" },
        "decripcion": "\n                \nThe Python documentation seems unclear about whether parameters are passed by reference or value, and the following code produces the unchanged value 'Original'\n\nclass PassByReference:\n    def __init__(self):\n        self.variable = 'Original'\n        self.change(self.variable)\n        print(self.variable)\n\n    def change(self, var):\n        var = 'Changed'\n\n\nIs there something I can do to pass the variable by actual reference?\n    ",
        "votes": 2951,
        "tags": [
            "python",
            "pass-by-reference",
            "parameter-passing",
            "reference"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 263,
            "fecha": { "$date" : "2017-04-03 02:13:38Z" },
            "decripcion": "\nArguments are passed by assignment. The rationale behind this is twofold:\n\n\nthe parameter passed in is actually a reference to an object (but the reference is passed by value)\nsome data types are mutable, but others aren't\n\n\nSo:\n\n\nIf you pass a mutable object into a method, the method gets a reference to that same object and you can mutate it to your heart's delight, but if you rebind the reference in the method, the outer scope will know nothing about it, and after you're done, the outer reference will still point at the original object. \nIf you pass an immutable object to a method, you still can't rebind the outer reference, and you can't even mutate the object.\n\n\nTo make it even more clear, let's have some examples. \n\nList - a mutable type\n\nLet's try to modify the list that was passed to a method:\n\ndef try_to_change_list_contents(the_list):\n    print('got', the_list)\n    the_list.append('four')\n    print('changed to', the_list)\n\nouter_list = ['one', 'two', 'three']\n\nprint('before, outer_list =', outer_list)\ntry_to_change_list_contents(outer_list)\nprint('after, outer_list =', outer_list)\n\n\nOutput:\n\nbefore, outer_list = ['one', 'two', 'three']\ngot ['one', 'two', 'three']\nchanged to ['one', 'two', 'three', 'four']\nafter, outer_list = ['one', 'two', 'three', 'four']\n\n\nSince the parameter passed in is a reference to outer_list, not a copy of it, we can use the mutating list methods to change it and have the changes reflected in the outer scope.\n\nNow let's see what happens when we try to change the reference that was passed in as a parameter:\n\ndef try_to_change_list_reference(the_list):\n    print('got', the_list)\n    the_list = ['and', 'we', 'can', 'not', 'lie']\n    print('set to', the_list)\n\nouter_list = ['we', 'like', 'proper', 'English']\n\nprint('before, outer_list =', outer_list)\ntry_to_change_list_reference(outer_list)\nprint('after, outer_list =', outer_list)\n\n\nOutput:\n\nbefore, outer_list = ['we', 'like', 'proper', 'English']\ngot ['we', 'like', 'proper', 'English']\nset to ['and', 'we', 'can', 'not', 'lie']\nafter, outer_list = ['we', 'like', 'proper', 'English']\n\n\nSince the the_list parameter was passed by value, assigning a new list to it had no effect that the code outside the method could see. The the_list was a copy of the outer_list reference, and we had the_list point to a new list, but there was no way to change where outer_list pointed.\n\nString - an immutable type\n\nIt's immutable, so there's nothing we can do to change the contents of the string\n\nNow, let's try to change the reference\n\ndef try_to_change_string_reference(the_string):\n    print('got', the_string)\n    the_string = 'In a kingdom by the sea'\n    print('set to', the_string)\n\nouter_string = 'It was many and many a year ago'\n\nprint('before, outer_string =', outer_string)\ntry_to_change_string_reference(outer_string)\nprint('after, outer_string =', outer_string)\n\n\nOutput:\n\nbefore, outer_string = It was many and many a year ago\ngot It was many and many a year ago\nset to In a kingdom by the sea\nafter, outer_string = It was many and many a year ago\n\n\nAgain, since the the_string parameter was passed by value, assigning a new string to it had no effect that the code outside the method could see. The the_string was a copy of the outer_string reference, and we had the_string point to a new string, but there was no way to change where outer_string pointed.\n\nI hope this clears things up a little.\n\nEDIT: It's been noted that this doesn't answer the question that @David originally asked, \"Is there something I can do to pass the variable by actual reference?\". Let's work on that.\n\nHow do we get around this?\n\nAs @Andrea's answer shows, you could return the new value. This doesn't change the way things are passed in, but does let you get the information you want back out:\n\ndef return_a_whole_new_string(the_string):\n    new_string = something_to_do_with_the_old_string(the_string)\n    return new_string\n\n# then you could call it like\nmy_string = return_a_whole_new_string(my_string)\n\n\nIf you really wanted to avoid using a return value, you could create a class to hold your value and pass it into the function or use an existing class, like a list:\n\ndef use_a_wrapper_to_simulate_pass_by_reference(stuff_to_change):\n    new_string = something_to_do_with_the_old_string(stuff_to_change[0])\n    stuff_to_change[0] = new_string\n\n# then you could call it like\nwrapper = [my_string]\nuse_a_wrapper_to_simulate_pass_by_reference(wrapper)\n\ndo_something_with(wrapper[0])\n\n\nAlthough this seems a little cumbersome.\n    ",
            "votes": 3174,
            "comentarios": [
                {
                    "decripcion": "Then the same is in C, when you pass \"by reference\" you're actually passing by value the reference... Define \"by reference\" :P",
                    "fecha": { "$date" : "2009-06-12 11:52:33Z" },
                    "usuario": "Andrea Ambu",
                    "usuario_id": 434
                },
                {
                    "decripcion": "I'm not sure I understand your terms. I've been out of the C game for a while, but back when I was in it, there was no \"pass by reference\" - you could pass things, and it was always pass by value, so whatever was in the parameter list was copied. But sometimes the thing was a pointer, which one could follow to the piece of memory (primitive, array, struct, whatever), but you couldn't change the pointer that was copied from the outer scope - when you were done with the function, the original pointer still pointed to the same address. C++ introduced references, which behaved differently.",
                    "fecha": { "$date" : "2009-06-12 12:09:22Z" },
                    "usuario": "Blair Conrad",
                    "usuario_id": 218
                },
                {
                    "decripcion": "@Zac Bowling I don't really get how what you're saying is relevant, in a practical sense, to this answer. If a Python newcomer wanted to know about passing by ref/val, then the takeaway from this answer is: 1- You can use the reference that a function receives as its arguments, to modify the 'outside' value of a variable, as long as you don't reassign the parameter to refer to a new object. 2- Assigning to an immutable type will always create a new object, which breaks the reference that you had to the outside variable.",
                    "fecha": { "$date" : "2011-09-08 23:50:34Z" },
                    "usuario": "Cam Jackson",
                    "usuario_id": 146
                },
                {
                    "decripcion": "@CamJackson, you need a better example - numbers are also immutable objects in Python. Besides, wouldn't it be true to say that any assignment without subscripting on the left side of the equals will reassign the name to a new object whether it is immutable or not? def Foo(alist): alist = [1,2,3] will not modify the contents of the list from the callers perspective.",
                    "fecha": { "$date" : "2011-11-15 16:46:32Z" },
                    "usuario": "Mark Ransom",
                    "usuario_id": 104
                },
                {
                    "decripcion": "-1. The code shown is good, the explanation as to how is completely wrong.  See the answers by DavidCournapeau or DarenThomas for correct explanations as to why.",
                    "fecha": { "$date" : "2012-01-07 06:41:59Z" },
                    "usuario": "Ethan Furman",
                    "usuario_id": 167
                }
            ],
            "usuario": "Blair Conrad",
            "usuario_id": 218
        },
        "respuestas": [
            263,
            264,
            265,
            266,
            267,
            268,
            269,
            270,
            271,
            272,
            273,
            274,
            275,
            276,
            277,
            278,
            279,
            280,
            281,
            282,
            283,
            284,
            285,
            286,
            287,
            288,
            289,
            290,
            291,
            292
        ],
        "comentarios": [
            {
                "decripcion": "For a short explanation/clarification see the first answer to this stackoverflow question. As strings are immutable, they won't be changed and a new variable will be created, thus the \"outer\" variable still has the same value.",
                "fecha": { "$date" : "2009-06-12 10:35:53Z" },
                "usuario": "PhilS",
                "usuario_id": 481
            },
            {
                "decripcion": "The code in BlairConrad's answer is good, but the explanation provided by DavidCournapeau and DarenThomas is correct.",
                "fecha": { "$date" : "2012-01-07 06:47:10Z" },
                "usuario": "Ethan Furman",
                "usuario_id": 167
            },
            {
                "decripcion": "Before reading the selected answer, please consider reading this short text Other languages have \"variables\", Python has \"names\". Think about \"names\" and \"objects\" instead of \"variables\" and \"references\" and you should avoid a lot of similar problems.",
                "fecha": { "$date" : "2012-11-15 00:39:20Z" },
                "usuario": "lqc",
                "usuario_id": 482
            },
            {
                "decripcion": "Why does this needlessly use a class? This isn't Java :P",
                "fecha": { "$date" : "2014-10-22 19:19:01Z" },
                "usuario": "Peter R",
                "usuario_id": 483
            },
            {
                "decripcion": "New official how of Iqc's link: david.goodger.org/projects/pycon/2007/idiomatic/\u2026",
                "fecha": { "$date" : "2020-06-09 19:56:56Z" },
                "usuario": "Ray Hulha",
                "usuario_id": 484
            }
        ],
        "usuario": "David Sykes",
        "usuario_id": 485
    },
    {
        "_id": 15,
        "titulo": "How to return the response from an asynchronous call",
        "fecha": { "$date" : "2021-09-05 21:45:04Z" },
        "decripcion": "\n                \nI have a function foo which makes an asynchronous request. How can I return the response/result from foo?\nI am trying to return the value from the callback, as well as assigning the result to a local variable inside the function and returning that one, but none of those ways actually return the response (they all return undefined or whatever the initial value of the variable result is).\nExample using jQuery's ajax function:\nfunction foo() {\n    var result;\n\n    $.ajax({\n        url: '...',\n        success: function(response) {\n            result = response;\n            // return response; // <- I tried that one as well\n        }\n    });\n\n    return result; // It always returns `undefined`\n}\n\nExample using Node.js:\nfunction foo() {\n    var result;\n\n    fs.readFile(\"path/to/file\", function(err, data) {\n        result = data;\n        // return data; // <- I tried that one as well\n    });\n\n    return result; // It always returns `undefined`\n}\n\nExample using the then block of a promise:\nfunction foo() {\n    var result;\n\n    fetch(url).then(function(response) {\n        result = response;\n        // return response; // <- I tried that one as well\n    });\n\n    return result; // It always returns `undefined`\n}\n\n    ",
        "votes": 6118,
        "tags": [
            "asynchronous",
            "jquery",
            "javascript",
            "return",
            "ajax"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 293,
            "fecha": { "$date" : "2021-05-07 10:09:05Z" },
            "decripcion": "\n\n\u2192 For a more general explanation of asynchronous behaviour with different examples, see Why is my variable unaltered after I modify it inside of a function? - Asynchronous code reference\n\u2192 If you already understand the problem, skip to the possible solutions below.\n\nThe problem\nThe A in Ajax stands for asynchronous. That means sending the request (or rather receiving the response) is taken out of the normal execution flow. In your example, $.ajax returns immediately and the next statement, return result;, is executed before the function you passed as success callback was even called.\nHere is an analogy which hopefully makes the difference between synchronous and asynchronous flow clearer:\nSynchronous\nImagine you make a phone call to a friend and ask him to look something up for you. Although it might take a while, you wait on the phone and stare into space, until your friend gives you the answer that you needed.\nThe same is happening when you make a function call containing \"normal\" code:\nfunction findItem() {\n    var item;\n    while(item_not_found) {\n        // search\n    }\n    return item;\n}\n\nvar item = findItem();\n\n// Do something with item\ndoSomethingElse();\n\nEven though findItem might take a long time to execute, any code coming after var item = findItem(); has to wait until the function returns the result.\nAsynchronous\nYou call your friend again for the same reason. But this time you tell him that you are in a hurry and he should call you back on your mobile phone. You hang up, leave the house, and do whatever you planned to do. Once your friend calls you back, you are dealing with the information he gave to you.\nThat's exactly what's happening when you do an Ajax request.\nfindItem(function(item) {\n    // Do something with the item\n});\ndoSomethingElse();\n\nInstead of waiting for the response, the execution continues immediately and the statement after the Ajax call is executed. To get the response eventually, you provide a function to be called once the response was received, a callback (notice something? call back ?). Any statement coming after that call is executed before the callback is called.\n\nSolution(s)\nEmbrace the asynchronous nature of JavaScript! While certain asynchronous operations provide synchronous counterparts (so does \"Ajax\"), it's generally discouraged to use them, especially in a browser context.\nWhy is it bad do you ask?\nJavaScript runs in the UI thread of the browser and any long-running process will lock the UI, making it unresponsive. Additionally, there is an upper limit on the execution time for JavaScript and the browser will ask the user whether to continue the execution or not.\nAll of this results in a really bad user experience. The user won't be able to tell whether everything is working fine or not. Furthermore, the effect will be worse for users with a slow connection.\nIn the following we will look at three different solutions that are all building on top of each other:\n\nPromises with async/await (ES2017+, available in older browsers if you use a transpiler or regenerator)\nCallbacks (popular in node)\nPromises with then() (ES2015+, available in older browsers if you use one of the many promise libraries)\n\nAll three are available in current browsers, and node 7+.\n\nES2017+: Promises with async/await\nThe ECMAScript version released in 2017 introduced syntax-level support for asynchronous functions. With the help of async and await, you can write asynchronous in a \"synchronous style\". The code is still asynchronous, but it's easier to read/understand.\nasync/await builds on top of promises: an async function always returns a promise. await \"unwraps\" a promise and either result in the value the promise was resolved with or throws an error if the promise was rejected.\nImportant: You can only use await inside an async function. Right now, top-level await isn't yet supported, so you might have to make an async IIFE (Immediately Invoked Function Expression) to start an async context.\nYou can read more about async and await on MDN.\nHere is an example that elaborates the delay function findItem() above:\n// Using 'superagent' which will return a promise.\nvar superagent = require('superagent')\n\n// This is isn't declared as `async` because it already returns a promise\nfunction delay() {\n  // `delay` returns a promise\n  return new Promise(function(resolve, reject) {\n    // Only `delay` is able to resolve or reject the promise\n    setTimeout(function() {\n      resolve(42); // After 3 seconds, resolve the promise with value 42\n    }, 3000);\n  });\n}\n\nasync function getAllBooks() {\n  try {\n    // GET a list of book IDs of the current user\n    var bookIDs = await superagent.get('/user/books');\n    // wait for 3 seconds (just for the sake of this example)\n    await delay();\n    // GET information about each book\n    return await superagent.get('/books/ids='+JSON.stringify(bookIDs));\n  } catch(error) {\n    // If any of the awaited promises was rejected, this catch block\n    // would catch the rejection reason\n    return null;\n  }\n}\n\n// Start an IIFE to use `await` at the top level\n(async function(){\n  let books = await getAllBooks();\n  console.log(books);\n})();\n\nCurrent browser and node versions support async/await. You can also support older environments by transforming your code to ES5 with the help of regenerator (or tools that use regenerator, such as Babel).\n\nLet functions accept callbacks\nA callback is when function 1 is passed to function 2. Function 2 can call function 1 whenever it is ready. In the context of an asynchronous process, the callback will be called whenever the asynchronous process is done. Usually, the result is passed to the callback.\nIn the example of the question, you can make foo accept a callback and use it as success callback. So this\nvar result = foo();\n// Code that depends on 'result'\n\nbecomes\nfoo(function(result) {\n    // Code that depends on 'result'\n});\n\nHere we defined the function \"inline\" but you can pass any function reference:\nfunction myCallback(result) {\n    // Code that depends on 'result'\n}\n\nfoo(myCallback);\n\nfoo itself is defined as follows:\nfunction foo(callback) {\n    $.ajax({\n        // ...\n        success: callback\n    });\n}\n\ncallback will refer to the function we pass to foo when we call it and we pass it on to success. I.e. once the Ajax request is successful, $.ajax will call callback and pass the response to the callback (which can be referred to with result, since this is how we defined the callback).\nYou can also process the response before passing it to the callback:\nfunction foo(callback) {\n    $.ajax({\n        // ...\n        success: function(response) {\n            // For example, filter the response\n            callback(filtered_response);\n        }\n    });\n}\n\nIt's easier to write code using callbacks than it may seem. After all, JavaScript in the browser is heavily event-driven (DOM events). Receiving the Ajax response is nothing else but an event.\nDifficulties could arise when you have to work with third-party code, but most problems can be solved by just thinking through the application flow.\n\nES2015+: Promises with then()\nThe Promise API is a new feature of ECMAScript 6 (ES2015), but it has good browser support already. There are also many libraries which implement the standard Promises API and provide additional methods to ease the use and composition of asynchronous functions (e.g., bluebird).\nPromises are containers for future values. When the promise receives the value (it is resolved) or when it is canceled (rejected), it notifies all of its \"listeners\" who want to access this value.\nThe advantage over plain callbacks is that they allow you to decouple your code and they are easier to compose.\nHere is an example of using a promise:\n\n\nfunction delay() {\n  // `delay` returns a promise\n  return new Promise(function(resolve, reject) {\n    // Only `delay` is able to resolve or reject the promise\n    setTimeout(function() {\n      resolve(42); // After 3 seconds, resolve the promise with value 42\n    }, 3000);\n  });\n}\n\ndelay()\n  .then(function(v) { // `delay` returns a promise\n    console.log(v); // Log the value once it is resolved\n  })\n  .catch(function(v) {\n    // Or do something else if it is rejected\n    // (it would not happen in this example, since `reject` is not called).\n  });\n.as-console-wrapper { max-height: 100% !important; top: 0; }\n Run code snippetHide resultsExpand snippet\n\n\nApplied to our Ajax call we could use promises like this:\n\n\nfunction ajax(url) {\n  return new Promise(function(resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function() {\n      resolve(this.responseText);\n    };\n    xhr.onerror = reject;\n    xhr.open('GET', url);\n    xhr.send();\n  });\n}\n\najax(\"https://jsonplaceholder.typicode.com/todos/1\")\n  .then(function(result) {\n    console.log(result); // Code depending on result\n  })\n  .catch(function() {\n    // An error occurred\n  });\n.as-console-wrapper { max-height: 100% !important; top: 0; }\n Run code snippetHide resultsExpand snippet\n\n\nDescribing all the advantages that promise offer is beyond the scope of this answer, but if you write new code, you should seriously consider them. They provide a great abstraction and separation of your code.\nMore information about promises: HTML5 rocks - JavaScript Promises.\nSide note: jQuery's deferred objects\nDeferred objects are jQuery's custom implementation of promises (before the Promise API was standardized). They behave almost like promises but expose a slightly different API.\nEvery Ajax method of jQuery already returns a \"deferred object\" (actually a promise of a deferred object) which you can just return from your function:\nfunction ajax() {\n    return $.ajax(...);\n}\n\najax().done(function(result) {\n    // Code depending on result\n}).fail(function() {\n    // An error occurred\n});\n\nSide note: Promise gotchas\nKeep in mind that promises and deferred objects are just containers for a future value, they are not the value itself. For example, suppose you had the following:\nfunction checkPassword() {\n    return $.ajax({\n        url: '/password',\n        data: {\n            username: $('#username').val(),\n            password: $('#password').val()\n        },\n        type: 'POST',\n        dataType: 'json'\n    });\n}\n\nif (checkPassword()) {\n    // Tell the user they're logged in\n}\n\nThis code misunderstands the above asynchronous issues. Specifically, $.ajax() doesn't freeze the code while it checks the '/password' page on your server - it sends a request to the server and while it waits, it immediately returns a jQuery Ajax Deferred object, not the response from the server. That means the if statement is going to always get this Deferred object, treat it as true, and proceed as though the user is logged in. Not good.\nBut the fix is easy:\ncheckPassword()\n.done(function(r) {\n    if (r) {\n        // Tell the user they're logged in\n    } else {\n        // Tell the user their password was bad\n    }\n})\n.fail(function(x) {\n    // Tell the user something bad happened\n});\n\n\nNot recommended: Synchronous \"Ajax\" calls\nAs I mentioned, some(!) asynchronous operations have synchronous counterparts. I don't advocate their use, but for completeness' sake, here is how you would perform a synchronous call:\nWithout jQuery\nIf you directly use a XMLHttpRequest object, pass false as third argument to .open.\njQuery\nIf you use jQuery, you can set the async option to false. Note that this option is deprecated since jQuery 1.8.\nYou can then either still use a success callback or access the responseText property of the jqXHR object:\nfunction foo() {\n    var jqXHR = $.ajax({\n        //...\n        async: false\n    });\n    return jqXHR.responseText;\n}\n\nIf you use any other jQuery Ajax method, such as $.get, $.getJSON, etc., you have to change it to $.ajax (since you can only pass configuration parameters to $.ajax).\nHeads up! It is not possible to make a synchronous JSONP request. JSONP by its very nature is always asynchronous (one more reason to not even consider this option).\n    ",
            "votes": 6179,
            "comentarios": [
                {
                    "decripcion": "@Pommy: If you want to use jQuery, you have to include it. Please refer to docs.jquery.com/Tutorials:Getting_Started_with_jQuery.",
                    "fecha": { "$date" : "2013-01-17 10:47:54Z" },
                    "usuario": "Felix Kling",
                    "usuario_id": 234
                },
                {
                    "decripcion": "In Solution 1, sub jQuery, I could not understand this line: If you use any other jQuery AJAX method, such as $.get, $.getJSON, etc., you have them to $.ajax. (Yes, I realize my nick is a tad ironic in this case)",
                    "fecha": { "$date" : "2013-02-06 21:07:03Z" },
                    "usuario": "cssyphus",
                    "usuario_id": 486
                },
                {
                    "decripcion": "@gibberish: Mmmh, I don't know how it can be made clearer. Do you see how foo is called and a function is passed to it (foo(function(result) {....});)? result is used inside this function and is the response of the Ajax request. To refer to this function, the first parameter of foo is called callback and assigned to success instead of an anonymous function. So, $.ajax will call callback when the request was successful. I tried to explain it a bit more.",
                    "fecha": { "$date" : "2013-02-06 23:29:52Z" },
                    "usuario": "Felix Kling",
                    "usuario_id": 234
                },
                {
                    "decripcion": "The Chat for this question is dead so I'm not sure where to propose outlined changes, but I propose: 1) Change the synchronous part to a simple discussion of why it's bad with no code example of how to do it. 2) Remove/merge the callback examples to only show the more flexible Deferred approach, which I think may also be a little easier to follow for those learning Javascript.",
                    "fecha": { "$date" : "2013-04-16 02:45:22Z" },
                    "usuario": "Chris Moschini",
                    "usuario_id": 487
                },
                {
                    "decripcion": "@Jessi: I think you misunderstood that part of the answer. You cannot use $.getJSON if you want the Ajax request to be synchronous. However, you should not event want the request to be synchronous, so that doesn't apply. You should be using callbacks or promises  to handle the response, as it is explained earlier in the answer.",
                    "fecha": { "$date" : "2015-10-08 17:44:18Z" },
                    "usuario": "Felix Kling",
                    "usuario_id": 234
                }
            ],
            "usuario": "Felix Kling",
            "usuario_id": 234
        },
        "respuestas": [
            293,
            294,
            295,
            296,
            297,
            298,
            299,
            300,
            301,
            302,
            303,
            304,
            305,
            306,
            307,
            308,
            309,
            310,
            311,
            312,
            313,
            314,
            315,
            316,
            317,
            318,
            319,
            320,
            321,
            322
        ],
        "comentarios": [
            {
                "decripcion": "use deasync like this stackoverflow.com/a/47051880/2083877",
                "fecha": { "$date" : "2021-09-08 11:26:35Z" },
                "usuario": "Sunil Kumar",
                "usuario_id": 542
            },
            {
                "decripcion": "@SunilKumar I don't think this is useful. OP made this question and self-answer to document how to get the response from async calls. Suggesting a 3rd party module defeats such purpose, and IMO the paradigm introduced by that module is not good practice.",
                "fecha": { "$date" : "2021-09-10 09:14:18Z" },
                "usuario": "Seblor",
                "usuario_id": 543
            }
        ],
        "usuario": "Felix Kling",
        "usuario_id": 234
    },
    {
        "_id": 16,
        "titulo": "Event binding on dynamically created elements?",
        "fecha": { "$date" : "2016-12-02 10:27:40Z" },
        "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question's answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nI have a bit of code where I am looping through all the select boxes on a page and binding a .hover event to them to do a bit of twiddling with their width on mouse on/off.\n\nThis happens on page ready and works just fine.\n\nThe problem I have is that any select boxes I add via Ajax or DOM after the initial loop won't have the event bound.\n\nI have found this plugin (jQuery Live Query Plugin), but before I add another 5k to my pages with a plugin, I want to see if anyone knows a way to do this, either with jQuery directly or by another option.\n    ",
        "votes": 1676,
        "tags": [
            "javascript",
            "jquery",
            "events",
            "unobtrusive-javascript"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 323,
            "fecha": { "$date" : "2020-07-10 12:38:41Z" },
            "decripcion": "\nAs of jQuery 1.7 you should use jQuery.fn.on with the selector parameter filled:\n$(staticAncestors).on(eventName, dynamicChild, function() {});\n\nExplanation:\nThis is called event delegation and works as followed. The event is attached to a static parent (staticAncestors) of the element that should be handled. This jQuery handler is triggered every time the event triggers on this element or one of the descendant elements. The handler then checks if the element that triggered the event matches your selector (dynamicChild). When there is a match then your custom handler function is executed.\n\nPrior to this, the recommended approach was to use live():\n$(selector).live( eventName, function(){} );\n\nHowever, live() was deprecated in 1.7 in favour of on(), and completely removed in 1.9. The live() signature:\n$(selector).live( eventName, function(){} );\n\n... can be replaced with the following on() signature:\n$(document).on( eventName, selector, function(){} );\n\n\nFor example, if your page was dynamically creating elements with the class name dosomething you would bind the event to a parent which already exists (this is the nub of the problem here, you need something that exists to bind to, don't bind to the dynamic content), this can be (and the easiest option) is document. Though bear in mind document may not be the most efficient option.\n$(document).on('mouseover mouseout', '.dosomething', function(){\n    // what you want to happen when mouseover and mouseout \n    // occurs on elements that match '.dosomething'\n});\n\nAny parent that exists at the time the event is bound is fine. For example\n$('.buttons').on('click', 'button', function(){\n    // do something here\n});\n\nwould apply to\n<div class=\"buttons\">\n    <!-- <button>s that are generated dynamically and added here -->\n</div>\n\n    ",
            "votes": 2435,
            "comentarios": [
                {
                    "decripcion": "Note that the live method only works for certain events, and not others such as loadedmetadata. (See the caveats section in the documentation.)",
                    "fecha": { "$date" : "2011-02-17 11:47:22Z" },
                    "usuario": "Sam Dutton",
                    "usuario_id": 544
                },
                {
                    "decripcion": "Learn more about event delegation here: learn.jquery.com/events/event-delegation.",
                    "fecha": { "$date" : "2013-06-07 11:21:43Z" },
                    "usuario": "Felix Kling",
                    "usuario_id": 234
                },
                {
                    "decripcion": "Any way to accomplish this with pure javascript/vanilla js?",
                    "fecha": { "$date" : "2014-11-12 12:33:18Z" },
                    "usuario": "Ram Patra",
                    "usuario_id": 545
                },
                {
                    "decripcion": "@Ramswaroop anything you can do in jQuery can be accomplished without jQuery. Here's a good example of event delegation without jQuery",
                    "fecha": { "$date" : "2014-12-08 17:46:59Z" },
                    "usuario": "Dave",
                    "usuario_id": 546
                },
                {
                    "decripcion": "@dave I wonder why the answer you pointed out isn't listed here. Eli has clearly asked for a solution without any plugin if possible.",
                    "fecha": { "$date" : "2014-12-09 07:14:53Z" },
                    "usuario": "Ram Patra",
                    "usuario_id": 545
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            323,
            324,
            325,
            326,
            327,
            328,
            329,
            330,
            331,
            332,
            333,
            334,
            335,
            336,
            337,
            338,
            339,
            340,
            341,
            342,
            343,
            344,
            345
        ],
        "comentarios": [],
        "usuario": "Eli",
        "usuario_id": 585
    },
    {
        "_id": 17,
        "titulo": "JavaScript closure inside loops \u2013 simple practical example",
        "fecha": { "$date" : "2020-07-29 09:41:08Z" },
        "decripcion": "\n                \n\n\nvar funcs = [];\n// let's create 3 functions\nfor (var i = 0; i < 3; i++) {\n  // and store them in funcs\n  funcs[i] = function() {\n    // each should log its value.\n    console.log(\"My value: \" + i);\n  };\n}\nfor (var j = 0; j < 3; j++) {\n  // and now let's run each one to see\n  funcs[j]();\n}\n Run code snippetHide resultsExpand snippet\n\n\nIt outputs this:\n\nMy value: 3\nMy value: 3\nMy value: 3\n\nWhereas I'd like it to output:\n\nMy value: 0\nMy value: 1\nMy value: 2\n\n\nThe same problem occurs when the delay in running the function is caused by using event listeners:\n\n\nvar buttons = document.getElementsByTagName(\"button\");\n// let's create 3 functions\nfor (var i = 0; i < buttons.length; i++) {\n  // as event listeners\n  buttons[i].addEventListener(\"click\", function() {\n    // each should log its value.\n    console.log(\"My value: \" + i);\n  });\n}\n<button>0</button>\n<br />\n<button>1</button>\n<br />\n<button>2</button>\n Run code snippetHide resultsExpand snippet\n\n\n\u2026 or asynchronous code, e.g. using Promises:\n\n\n// Some async wait function\nconst wait = (ms) => new Promise((resolve, reject) => setTimeout(resolve, ms));\n\nfor (var i = 0; i < 3; i++) {\n  // Log `i` as soon as each promise resolves.\n  wait(i * 100).then(() => console.log(i));\n}\n Run code snippetHide resultsExpand snippet\n\n\nIt is also apparent in for in and for of loops:\n\n\nconst arr = [1,2,3];\nconst fns = [];\n\nfor(var i in arr){\n  fns.push(() => console.log(`index: ${i}`));\n}\n\nfor(var v of arr){\n  fns.push(() => console.log(`value: ${v}`));\n}\n\nfor(var f of fns){\n  f();\n}\n Run code snippetHide resultsExpand snippet\n\n\nWhat\u2019s the solution to this basic problem?\n    ",
        "votes": 3031,
        "tags": [
            "javascript",
            "closures",
            "loops"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 346,
            "fecha": { "$date" : "2020-07-21 13:57:17Z" },
            "decripcion": "\nWell, the problem is that the variable i, within each of your anonymous functions, is bound to the same variable outside of the function.\nES6 solution: let\nECMAScript 6 (ES6) introduces new let and const keywords that are scoped differently than var-based variables. For example, in a loop with a let-based index, each iteration through the loop will have a new variable i with loop scope, so your code would work as you expect. There are many resources, but I'd recommend 2ality's block-scoping post as a great source of information.\nfor (let i = 0; i < 3; i++) {\n  funcs[i] = function() {\n    console.log(\"My value: \" + i);\n  };\n}\n\nBeware, though, that IE9-IE11 and Edge prior to Edge 14 support let but get the above wrong (they don't create a new i each time, so all the functions above would log 3 like they would if we used var). Edge 14 finally gets it right.\n\nES5.1 solution: forEach\nWith the relatively widespread availability of the Array.prototype.forEach function (in 2015), it's worth noting that in those situations involving iteration primarily over an array of values, .forEach() provides a clean, natural way to get a distinct closure for every iteration. That is, assuming you've got some sort of array containing values (DOM references, objects, whatever), and the problem arises of setting up callbacks specific to each element, you can do this:\nvar someArray = [ /* whatever */ ];\n// ...\nsomeArray.forEach(function(arrayElement) {\n  // ... code code code for this one element\n  someAsynchronousFunction(arrayElement, function() {\n    arrayElement.doSomething();\n  });\n});\n\nThe idea is that each invocation of the callback function used with the .forEach loop will be its own closure. The parameter passed in to that handler is the array element specific to that particular step of the iteration. If it's used in an asynchronous callback, it won't collide with any of the other callbacks established at other steps of the iteration.\nIf you happen to be working in jQuery, the $.each() function gives you a similar capability.\n\nClassic solution: Closures\nWhat you want to do is bind the variable within each function to a separate, unchanging value outside of the function:\n\n\nvar funcs = [];\n\nfunction createfunc(i) {\n  return function() {\n    console.log(\"My value: \" + i);\n  };\n}\n\nfor (var i = 0; i < 3; i++) {\n  funcs[i] = createfunc(i);\n}\n\nfor (var j = 0; j < 3; j++) {\n  // and now let's run each one to see\n  funcs[j]();\n}\n Run code snippetHide resultsExpand snippet\n\n\nSince there is no block scope in JavaScript - only function scope - by wrapping the function creation in a new function, you ensure that the value of \"i\" remains as you intended.\n    ",
            "votes": 2295,
            "comentarios": [
                {
                    "decripcion": "isn't function createfunc(i) {     return function() { console.log(\"My value: \" + i); }; } still closure because it uses the variable i?",
                    "fecha": { "$date" : "2014-03-28 03:45:40Z" },
                    "usuario": "\u30a2\u30ec\u30c3\u30af\u30b9",
                    "usuario_id": 586
                },
                {
                    "decripcion": "Unfortunately, this answer is outdated and nobody will see the correct answer at the bottom - using Function.bind() is definitely preferable by now, see stackoverflow.com/a/19323214/785541.",
                    "fecha": { "$date" : "2014-06-20 12:21:23Z" },
                    "usuario": "Wladimir Palant",
                    "usuario_id": 587
                },
                {
                    "decripcion": "@Wladimir: Your suggestion that .bind() is \"the correct answer\" isn't right. They each have their own place. With .bind() you can't bind arguments without binding the this value. Also you get a copy of the i argument without the ability to mutate it between calls, which sometimes is needed. So they're quite different constructs, not to mention that .bind() implementations have been historically slow. Sure in the simple example either would work, but closures are an important concept to understand, and that's what the question was about.",
                    "fecha": { "$date" : "2014-07-12 02:35:51Z" },
                    "usuario": "cookie monster",
                    "usuario_id": 588
                },
                {
                    "decripcion": "Please stop using these for-return function hacks, use [].forEach or [].map instead because they avoid reusing the same scope variables.",
                    "fecha": { "$date" : "2015-02-07 10:23:16Z" },
                    "usuario": "Christian Landgren",
                    "usuario_id": 589
                },
                {
                    "decripcion": "@ChristianLandgren: That's only useful if you're iterating an Array. These techniques aren't \"hacks\". They're essential knowledge.",
                    "fecha": { "$date" : "2015-06-29 16:31:47Z" },
                    "usuario": "NA",
                    "usuario_id": 53
                }
            ],
            "usuario": "harto",
            "usuario_id": 590
        },
        "respuestas": [
            346,
            347,
            348,
            349,
            350,
            351,
            352,
            353,
            354,
            355,
            356,
            357,
            358,
            359,
            360,
            361,
            362,
            363,
            364,
            365,
            366,
            367,
            368,
            369,
            370,
            371,
            372,
            373,
            374,
            375
        ],
        "comentarios": [
            {
                "decripcion": "You sure you don't want funcs to be an array, if you're using numeric indices? Just a heads up.",
                "fecha": { "$date" : "2013-07-26 11:12:10Z" },
                "usuario": "DanMan",
                "usuario_id": 615
            },
            {
                "decripcion": "This is really confusing problem. This article help me in understanding it. Might it help others too.",
                "fecha": { "$date" : "2014-05-03 15:38:10Z" },
                "usuario": "user3199690",
                "usuario_id": 638
            },
            {
                "decripcion": "Another simple and explaned solution: 1) Nested Functions have access to the scope \"above\" them;  2) a closure solution... \"A closure is a function having access to the parent scope, even after the parent function has closed\".",
                "fecha": { "$date" : "2014-12-17 01:22:21Z" },
                "usuario": "Peter Krauss",
                "usuario_id": 639
            },
            {
                "decripcion": "Refer this link  for better Unserstanding javascript.info/tutorial/advanced-functions",
                "fecha": { "$date" : "2015-04-02 12:01:47Z" },
                "usuario": "Saurabh Ahuja",
                "usuario_id": 640
            },
            {
                "decripcion": "In ES6, a trivial solution is to declare the variable i with let, which is scoped to the body of the loop.",
                "fecha": { "$date" : "2016-09-13 20:34:13Z" },
                "usuario": "Tomas Nikodym",
                "usuario_id": 641
            }
        ],
        "usuario": "nickf",
        "usuario_id": 554
    },
    {
        "_id": 18,
        "titulo": "How to access the correct `this` inside a callback",
        "fecha": { "$date" : "2021-07-25 20:19:56Z" },
        "decripcion": "\n                \nI have a constructor function which registers an event handler:\n\n\nfunction MyConstructor(data, transport) {\n    this.data = data;\n    transport.on('data', function () {\n        alert(this.data);\n    });\n}\n\n// Mock transport object\nvar transport = {\n    on: function(event, callback) {\n        setTimeout(callback, 1000);\n    }\n};\n\n// called as\nvar obj = new MyConstructor('foo', transport);\n Run code snippetHide resultsExpand snippet\n\n\nHowever, I'm not able to access the data property of the created object inside the callback. It looks like this does not refer to the object that was created, but to another one.\nI also tried to use an object method instead of an anonymous function:\nfunction MyConstructor(data, transport) {\n    this.data = data;\n    transport.on('data', this.alert);\n}\n\nMyConstructor.prototype.alert = function() {\n    alert(this.name);\n};\n\nbut it exhibits the same problems.\nHow can I access the correct object?\n    ",
        "votes": 1659,
        "tags": [
            "this",
            "javascript",
            "callback"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 376,
            "fecha": { "$date" : "2020-09-10 11:58:38Z" },
            "decripcion": "\nWhat you should know about this\nthis (aka \"the context\") is a special keyword inside each function and its value only depends on how the function was called, not how/when/where it was defined. It is not affected by lexical scopes like other variables (except for arrow functions, see below). Here are some examples:\nfunction foo() {\n    console.log(this);\n}\n\n// normal function call\nfoo(); // `this` will refer to `window`\n\n// as object method\nvar obj = {bar: foo};\nobj.bar(); // `this` will refer to `obj`\n\n// as constructor function\nnew foo(); // `this` will refer to an object that inherits from `foo.prototype`\n\nTo learn more about this, have a look at the MDN documentation.\n\nHow to refer to the correct this\nUse arrow functions\nECMAScript 6 introduced arrow functions, which can be thought of as lambda functions. They don't have their own this binding. Instead, this is looked up in scope just like a normal variable. That means you don't have to call .bind. That's not the only special behavior they have, please refer to the MDN documentation for more information.\nfunction MyConstructor(data, transport) {\n    this.data = data;\n    transport.on('data', () => alert(this.data));\n}\n\nDon't use this\nYou actually don't want to access this in particular, but the object it refers to. That's why an easy solution is to simply create a new variable that also refers to that object. The variable can have any name, but common ones are self and that.\nfunction MyConstructor(data, transport) {\n    this.data = data;\n    var self = this;\n    transport.on('data', function() {\n        alert(self.data);\n    });\n}\n\nSince self is a normal variable, it obeys lexical scope rules and is accessible inside the callback. This also has the advantage that you can access the this value of the callback itself.\nExplicitly set this of the callback - part 1\nIt might look like you have no control over the value of this because its value is set automatically, but that is actually not the case.\nEvery function has the method .bind [docs], which returns a new function with this bound to a value. The function has exactly the same behavior as the one you called .bind on, only that this was set by you. No matter how or when that function is called, this will always refer to the passed value.\nfunction MyConstructor(data, transport) {\n    this.data = data;\n    var boundFunction = (function() { // parenthesis are not necessary\n        alert(this.data);             // but might improve readability\n    }).bind(this); // <- here we are calling `.bind()` \n    transport.on('data', boundFunction);\n}\n\nIn this case, we are binding the callback's this to the value of MyConstructor's this.\nNote: When a binding context for jQuery, use jQuery.proxy [docs] instead. The reason to do this is so that you don't need to store the reference to the function when unbinding an event callback. jQuery handles that internally.\nSet this of the callback - part 2\nSome functions/methods which accept callbacks also accept a value to which the callback's this should refer to. This is basically the same as binding it yourself, but the function/method does it for you. Array#map [docs] is such a method. Its signature is:\narray.map(callback[, thisArg])\n\nThe first argument is the callback and the second argument is the value this should refer to. Here is a contrived example:\nvar arr = [1, 2, 3];\nvar obj = {multiplier: 42};\n\nvar new_arr = arr.map(function(v) {\n    return v * this.multiplier;\n}, obj); // <- here we are passing `obj` as second argument\n\nNote: Whether or not you can pass a value for this is usually mentioned in the documentation of that function/method. For example, jQuery's $.ajax method [docs] describes an option called context:\n\nThis object will be made the context of all Ajax-related callbacks.\n\n\nCommon problem: Using object methods as callbacks/event handlers\nAnother common manifestation of this problem is when an object method is used as callback/event handler. Functions are first-class citizens in JavaScript and the term \"method\" is just a colloquial term for a function that is a value of an object property. But that function doesn't have a specific link to its \"containing\" object.\nConsider the following example:\nfunction Foo() {\n    this.data = 42,\n    document.body.onclick = this.method;\n}\n\nFoo.prototype.method = function() {\n    console.log(this.data);\n};\n\nThe function this.method is assigned as click event handler, but if the document.body is clicked, the value logged will be undefined, because inside the event handler, this refers to the document.body, not the instance of Foo.\nAs already mentioned at the beginning, what this refers to depends on how the function is called, not how it is defined.\nIf the code was like the following, it might be more obvious that the function doesn't have an implicit reference to the object:\nfunction method() {\n    console.log(this.data);\n}\n\n\nfunction Foo() {\n    this.data = 42,\n    document.body.onclick = this.method;\n}\n\nFoo.prototype.method = method;\n\nThe solution is the same as mentioned above: If available, use .bind to explicitly bind this to a specific value\ndocument.body.onclick = this.method.bind(this);\n\nor explicitly call the function as a \"method\" of the object, by using an anonymous function as callback / event handler and assign the object (this) to another variable:\nvar self = this;\ndocument.body.onclick = function() {\n    self.method();\n};\n\nor use an arrow function:\ndocument.body.onclick = () => this.method();\n\n    ",
            "votes": 2053,
            "comentarios": [
                {
                    "decripcion": "Felix, I've read to this answer before but never replied.  I grow concerned that people use self and that to refer to this.  I feel this way because this is an overloaded variable used in different contexts; whereas self usually corresponds to the local instance and that usually refers to another object.  I know you did not set this rule, as I've seen it appear in a number of other places, but it is also why I've started to use _this, but am not sure how others feel, except for the non-uniform practice that has resulted.",
                    "fecha": { "$date" : "2014-09-12 15:39:03Z" },
                    "usuario": "vol7ron",
                    "usuario_id": 642
                },
                {
                    "decripcion": "@FelixKling would it be safe to assume that using this inside prototype functions will always have the expected behaviour regardless how they are (typically) called? When using callbacks inside prototype functions, is there an alternative to bind(), self or that?",
                    "fecha": { "$date" : "2015-12-28 15:57:28Z" },
                    "usuario": "andig",
                    "usuario_id": 643
                },
                {
                    "decripcion": "@FelixKling It can be useful at times to rely on Function.prototype.call () and Function.prototype.apply ().  Particularly with apply () I've gotten a lot of mileage.  I am less inclined to use bind () perhaps only out of habit though I am aware ( but not certain ) that there may be slight overhead advantages to using bind over the other options.",
                    "fecha": { "$date" : "2016-11-15 06:02:19Z" },
                    "usuario": "Nolo",
                    "usuario_id": 644
                },
                {
                    "decripcion": "Great answer but consider adding an additional optional solution which is just to not use classes, new, or this at all.",
                    "fecha": { "$date" : "2017-02-12 12:53:47Z" },
                    "usuario": "Aluan Haddad",
                    "usuario_id": 522
                },
                {
                    "decripcion": "re arrow functions \"Instead, this is looked up in scope just like a normal variable.\" totally made this click for me, thank you! () => this.clicked() ;)",
                    "fecha": { "$date" : "2018-05-25 20:36:22Z" },
                    "usuario": "alphanumeric0101",
                    "usuario_id": 645
                }
            ],
            "usuario": "Felix Kling",
            "usuario_id": 234
        },
        "respuestas": [
            376,
            377,
            378,
            379,
            380,
            381,
            382,
            383,
            384,
            385,
            386,
            387,
            388
        ],
        "comentarios": [
            {
                "decripcion": "Related: Preserving a reference to \u201cthis\u201d in JavaScript prototype functions",
                "fecha": { "$date" : "2014-03-01 12:46:26Z" },
                "usuario": "Bergi",
                "usuario_id": 662
            },
            {
                "decripcion": "Related: \u201cthis\u201d keyword in event methods when using JavaScript prototype object",
                "fecha": { "$date" : "2014-09-09 20:43:04Z" },
                "usuario": "Bergi",
                "usuario_id": 662
            },
            {
                "decripcion": "Useful TypeScript page about this, mostly applicable to JS too.",
                "fecha": { "$date" : "2017-02-01 21:49:17Z" },
                "usuario": "Ondra \u017di\u017eka",
                "usuario_id": 663
            },
            {
                "decripcion": "@strattonn: Self-answering questions is an option in the UI and encouraged: stackoverflow.blog/2011/07/01/\u2026. I did this a couple of times for issues that came up over and over again to provide a canonical answer. The problem with canonical Q&A is that existing questions are often not phrased in a general enough way that focuses on the core problem.",
                "fecha": { "$date" : "2020-11-21 19:15:13Z" },
                "usuario": "Felix Kling",
                "usuario_id": 234
            }
        ],
        "usuario": "Felix Kling",
        "usuario_id": 234
    },
    {
        "_id": 19,
        "titulo": "Why is my variable unaltered after I modify it inside of a function? - Asynchronous code reference",
        "fecha": { "$date" : "2018-03-07 14:52:28Z" },
        "decripcion": "\n                \nGiven the following examples, why is outerScopeVar undefined in all cases?\n\nvar outerScopeVar;\n\nvar img = document.createElement('img');\nimg.onload = function() {\n    outerScopeVar = this.width;\n};\nimg.src = 'lolcat.png';\nalert(outerScopeVar);\n\n\n\n\nvar outerScopeVar;\nsetTimeout(function() {\n    outerScopeVar = 'Hello Asynchronous World!';\n}, 0);\nalert(outerScopeVar);\n\n\n\n\n// Example using some jQuery\nvar outerScopeVar;\n$.post('loldog', function(response) {\n    outerScopeVar = response;\n});\nalert(outerScopeVar);\n\n\n\n\n// Node.js example\nvar outerScopeVar;\nfs.readFile('./catdog.html', function(err, data) {\n    outerScopeVar = data;\n});\nconsole.log(outerScopeVar);\n\n\n\n\n// with promises\nvar outerScopeVar;\nmyPromise.then(function (response) {\n    outerScopeVar = response;\n});\nconsole.log(outerScopeVar);\n\n\n\n\n// geolocation API\nvar outerScopeVar;\nnavigator.geolocation.getCurrentPosition(function (pos) {\n    outerScopeVar = pos;\n});\nconsole.log(outerScopeVar);\n\n\nWhy does it output undefined in all of these examples? I don't want workarounds, I want to know why this is happening.\n\n\n\n\n  Note: This is a canonical question for JavaScript asynchronicity. Feel free to improve this question and add more simplified examples which the community can identify with.\n\n    ",
        "votes": 832,
        "tags": [
            "javascript",
            "asynchronous"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 389,
            "fecha": { "$date" : "2019-11-15 03:06:49Z" },
            "decripcion": "\nOne word answer: asynchronicity.\n\nForewords\n\nThis topic has been iterated at least a couple of thousands of times, here, in Stack Overflow. Hence, first off I'd like to point out some extremely useful resources:\n\n\n@Felix Kling's answer to \"How do I return the response from an asynchronous call?\". See his excellent answer explaining synchronous and asynchronous flows, as well as the \"Restructure code\" section.\n@Benjamin Gruenbaum has also put a lot of effort explaining asynchronicity in the same thread.\n@Matt Esch's answer to \"Get data from fs.readFile\" also explains asynchronicity extremely well in a simple manner.\n\n\n\n\nThe answer to the question at hand\n\nLet's trace the common behavior first. In all examples, the outerScopeVar is modified inside of a function. That function is clearly not executed immediately, it is being assigned or passed as an argument. That is what we call a callback.\n\nNow the question is, when is that callback called?\n\nIt depends on the case. Let's try to trace some common behavior again:\n\n\nimg.onload may be called sometime in the future, when (and if) the image has successfully loaded.\nsetTimeout may be called sometime in the future, after the delay has expired and the timeout hasn't been canceled by clearTimeout. Note: even when using 0 as delay, all browsers have a minimum timeout delay cap (specified to be 4ms in the HTML5 spec).\njQuery $.post's callback may be called sometime in the future, when (and if) the Ajax request has been completed successfully.\nNode.js's fs.readFile may be called sometime in the future, when the file has been read successfully or thrown an error.\n\n\nIn all cases, we have a callback which may run sometime in the future. This \"sometime in the future\" is what we refer to as asynchronous flow.\n\nAsynchronous execution is pushed out of the synchronous flow. That is, the asynchronous code will never execute while the synchronous code stack is executing. This is the meaning of JavaScript being single-threaded.\n\nMore specifically, when the JS engine is idle -- not executing a stack of (a)synchronous code -- it will poll for events that may have triggered asynchronous callbacks (e.g. expired timeout, received network response) and execute them one after another. This is regarded as Event Loop.\n\nThat is, the asynchronous code highlighted in the hand-drawn red shapes may execute only after all the remaining synchronous code in their respective code blocks have executed:\n\n\n\nIn short, the callback functions are created synchronously but executed asynchronously. You just can't rely on the execution of an asynchronous function until you know it has executed, and how to do that?\n\nIt is simple, really. The logic that depends on the asynchronous function execution should be started/called from inside this asynchronous function. For example, moving the alerts and console.logs too inside the callback function would output the expected result, because the result is available at that point.\n\nImplementing your own callback logic\n\nOften you need to do more things with the result from an asynchronous function or do different things with the result depending on where the asynchronous function has been called. Let's tackle a bit more complex example:\n\nvar outerScopeVar;\nhelloCatAsync();\nalert(outerScopeVar);\n\nfunction helloCatAsync() {\n    setTimeout(function() {\n        outerScopeVar = 'Nya';\n    }, Math.random() * 2000);\n}\n\n\nNote: I'm using setTimeout with a random delay as a generic asynchronous function, the same example applies to Ajax, readFile, onload and any other asynchronous flow.\n\nThis example clearly suffers from the same issue as the other examples, it is not waiting until the asynchronous function executes.\n\nLet's tackle it implementing a callback system of our own. First off, we get rid of that ugly outerScopeVar which is completely useless in this case. Then we add a parameter which accepts a function argument, our callback. When the asynchronous operation finishes, we call this callback passing the result. The implementation (please read the comments in order):\n\n// 1. Call helloCatAsync passing a callback function,\n//    which will be called receiving the result from the async operation\nhelloCatAsync(function(result) {\n    // 5. Received the result from the async function,\n    //    now do whatever you want with it:\n    alert(result);\n});\n\n// 2. The \"callback\" parameter is a reference to the function which\n//    was passed as argument from the helloCatAsync call\nfunction helloCatAsync(callback) {\n    // 3. Start async operation:\n    setTimeout(function() {\n        // 4. Finished async operation,\n        //    call the callback passing the result as argument\n        callback('Nya');\n    }, Math.random() * 2000);\n}\n\n\nCode snippet of the above example:\n\n\n\n// 1. Call helloCatAsync passing a callback function,\n//    which will be called receiving the result from the async operation\nconsole.log(\"1. function called...\")\nhelloCatAsync(function(result) {\n    // 5. Received the result from the async function,\n    //    now do whatever you want with it:\n    console.log(\"5. result is: \", result);\n});\n\n// 2. The \"callback\" parameter is a reference to the function which\n//    was passed as argument from the helloCatAsync call\nfunction helloCatAsync(callback) {\n    console.log(\"2. callback here is the function passed as argument above...\")\n    // 3. Start async operation:\n    setTimeout(function() {\n    console.log(\"3. start async operation...\")\n    console.log(\"4. finished async operation, calling the callback, passing the result...\")\n        // 4. Finished async operation,\n        //    call the callback passing the result as argument\n        callback('Nya');\n    }, Math.random() * 2000);\n}\n Run code snippetHide resultsExpand snippet\n\n\n\nMost often in real use cases, the DOM API and most libraries already provide the callback functionality (the helloCatAsync implementation in this demonstrative example). You only need to pass the callback function and understand that it will execute out of the synchronous flow, and restructure your code to accommodate for that.\n\nYou will also notice that due to the asynchronous nature, it is impossible to return a value from an asynchronous flow back to the synchronous flow where the callback was defined, as the asynchronous callbacks are executed long after the synchronous code has already finished executing.\n\nInstead of returning a value from an asynchronous callback, you will have to make use of the callback pattern, or... Promises.\n\nPromises\n\nAlthough there are ways to keep the callback hell at bay with vanilla JS, promises are growing in popularity and are currently being standardized in ES6 (see Promise - MDN).\n\nPromises (a.k.a. Futures) provide a more linear, and thus pleasant, reading of the asynchronous code, but explaining their entire functionality is out of the scope of this question. Instead, I'll leave these excellent resources for the interested:\n\n\nJavaScript Promises - HTML5 Rocks\nYou're Missing the Point of Promises - domenic.me\n\n\n\n\nMore reading material about JavaScript asynchronicity\n\n\nThe Art of Node - Callbacks explains asynchronous code and callbacks very well with vanilla JS examples and Node.js code as well.\n\n\n\n\n\n  Note: I've marked this answer as Community Wiki, hence anyone with at least 100 reputations can edit and improve it! Please feel free to improve this answer, or submit a completely new answer if you'd like as well.\n  \n  I want to turn this question into a canonical topic to answer asynchronicity issues which are unrelated to Ajax (there is How to return the response from an AJAX call? for that), hence this topic needs your help to be as good and helpful as possible!\n\n    ",
            "votes": 652,
            "comentarios": [
                {
                    "decripcion": "In your last example, is there a specific reason why you use anonymous functions or would it work the same by using named functions?",
                    "fecha": { "$date" : "2016-05-03 21:34:48Z" },
                    "usuario": "JDelage",
                    "usuario_id": 664
                },
                {
                    "decripcion": "The code examples are a bit weird as you're declaring the function after calling it. Works because of hoisting of course, but was it intentional?",
                    "fecha": { "$date" : "2016-05-05 22:12:50Z" },
                    "usuario": "Bergi",
                    "usuario_id": 662
                },
                {
                    "decripcion": "is it deadlock . felix kling is pointing to your answer and you are pointing to felix answer",
                    "fecha": { "$date" : "2017-01-02 10:23:05Z" },
                    "usuario": "Mahi",
                    "usuario_id": 665
                },
                {
                    "decripcion": "You need to understand that the red circle code is only async because it is being executed by NATIVE async javascript functions.  This is a feature of your javascript engine--whether it be Node.js or a browser. It is async because it is being passed in as a \"callback\" to a function that is essentially a black box (implemented in C etc..).  To the hapless developer they are async...just because.  If you want to write your own async function you have to hack it by sending it in to SetTimeout(myfunc,0).  Should you do that? Another debate....probably not.",
                    "fecha": { "$date" : "2017-01-05 19:08:19Z" },
                    "usuario": "Sean Anderson",
                    "usuario_id": 666
                },
                {
                    "decripcion": "@Fabricio I have looked for the spec defining the \">=4ms clamp\", but could not find it - I found some mention of similar mechanism (for clamping nested calls) on  MDN - developer.mozilla.org/en-US/docs/Web/API/\u2026 - does anyone have a link to the right part of the HTML spec.",
                    "fecha": { "$date" : "2019-05-31 16:24:27Z" },
                    "usuario": "Sebi",
                    "usuario_id": 667
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            389,
            390,
            391,
            392,
            393,
            394
        ],
        "comentarios": [
            {
                "decripcion": "Related Meta discussion - General JavaScript asynchronicity reference for close voting?",
                "fecha": { "$date" : "2014-05-16 00:02:08Z" },
                "usuario": "Bernhard Barker",
                "usuario_id": 678
            },
            {
                "decripcion": "@Dukeling thanks, I'm pretty sure that I had commented with that link but there are apparently some missing comments. Also, regarding your edit: I believe having \"canonical\" and \"asynchronicity\" in the title helps when searching for this question to mark another question as a dupe. And of course, it also helps in finding this question from Google when looking for asynchronicity explanations.",
                "fecha": { "$date" : "2014-05-16 00:18:12Z" },
                "usuario": "Fabr\u00edcio Matt\u00e9",
                "usuario_id": 679
            },
            {
                "decripcion": "Putting a bit more of thought, \"canonical asynchronicity topic\" is a bit heavy on the title, \"asynchronous code reference\" is simpler and more objective. I also believe most people search for \"asynchronous\" instead of \"asynchronicity\".",
                "fecha": { "$date" : "2014-05-20 12:16:14Z" },
                "usuario": "Fabr\u00edcio Matt\u00e9",
                "usuario_id": 679
            },
            {
                "decripcion": "Some people initialize their variable before the function call. How about changing the title that somehow represents that as well? Like \"Why is my variable unaltered after I modify it inside of a function?\" ?",
                "fecha": { "$date" : "2014-07-07 08:32:59Z" },
                "usuario": "Felix Kling",
                "usuario_id": 234
            },
            {
                "decripcion": "In all the code examples that you have mentioned above, \"alert(outerScopeVar);\" executes NOW , whereas assigning of value to \"outerScopeVar\" happens LATER(asynchronously).",
                "fecha": { "$date" : "2016-05-03 08:52:35Z" },
                "usuario": "refactor",
                "usuario_id": 680
            }
        ],
        "usuario": "Fabr\u00edcio Matt\u00e9",
        "usuario_id": 679
    },
    {
        "_id": 20,
        "titulo": "Why does jQuery or a DOM method such as getElementById not find the element?",
        "fecha": { "$date" : "2019-08-28 13:40:56Z" },
        "decripcion": "\n                \nWhat are the possible reasons for document.getElementById, $(\"#id\") or any other DOM method / jQuery selector not finding the elements?\n\nExample problems include:\n\n\njQuery silently failing to bind an event handler\njQuery \"getter\" methods (.val(), .html(), .text()) returning undefined\nA standard DOM method returning null resulting in any of several errors:\n\n\n\n  Uncaught TypeError: Cannot set property '...' of null\n  Uncaught TypeError: Cannot read property '...' of null\n\n\nThe most common forms are:\n\n\n  Uncaught TypeError: Cannot set property 'onclick' of null\n  \n  Uncaught TypeError: Cannot read property 'addEventListener' of null\n  \n  Uncaught TypeError: Cannot read property 'style' of null\n\n    ",
        "votes": 536,
        "tags": [
            "javascript",
            "jquery",
            "dom"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 395,
            "fecha": { "$date" : "2020-05-11 20:43:11Z" },
            "decripcion": "\nThe element you were trying to find wasn\u2019t in the DOM when your script ran.\n\nThe position of your DOM-reliant script can have a profound effect upon its behavior. Browsers parse HTML documents from top to bottom. Elements are added to the DOM and scripts are (generally) executed as they're encountered. This means that order matters. Typically, scripts can't find elements which appear later in the markup because those elements have yet to be added to the DOM.\n\nConsider the following markup; script #1 fails to find the <div> while script #2 succeeds:\n\n\n\n<script>\n  console.log(\"script #1: %o\", document.getElementById(\"test\")); // null\n</script>\n<div id=\"test\">test div</div>\n<script>\n  console.log(\"script #2: %o\", document.getElementById(\"test\")); // <div id=\"test\" ...\n</script>\n Run code snippetHide resultsExpand snippet\n\n\n\nSo, what should you do? You've got a few options:\n\n\n\nOption 1: Move your script\n\nMove your script further down the page, just before the closing body tag. Organized in this fashion, the rest of the document is parsed before your script is executed:\n\n\n\n<body>\n  <button id=\"test\">click me</button>\n  <script>\n    document.getElementById(\"test\").addEventListener(\"click\", function() {\n      console.log(\"clicked: %o\", this);\n    });\n  </script>\n</body><!-- closing body tag -->\n Run code snippetHide resultsExpand snippet\n\n\n\nNote: Placing scripts at the bottom is generally considered a best practice.\n\n\n\nOption 2: jQuery's ready()\n\nDefer your script until the DOM has been completely parsed, using $(handler):\n\n\n\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"></script>\n<script>\n  $(function() {\n    $(\"#test\").click(function() {\n      console.log(\"clicked: %o\", this);\n    });\n  });\n</script>\n<button id=\"test\">click me</button>\n Run code snippetHide resultsExpand snippet\n\n\n\nNote: You could simply bind to DOMContentLoaded or  window.onload but each has its caveats. jQuery's ready() delivers a hybrid solution.\n\n\n\nOption 3: Event Delegation\n\n\n  Delegated events have the advantage that they can process events from descendant elements that are added to the document at a later time.\n\n\nWhen an element raises an event (provided that it's a bubbling event and nothing stops its propagation), each parent in that element's ancestry receives the event as well. That allows us to attach a handler to an existing element and sample events as they bubble up from its descendants... even those added after the handler is attached. All we have to do is check the event to see whether it was raised by the desired element and, if so, run our code. \n\njQuery's on() performs that logic for us. We simply provide an event name, a selector for the desired descendant, and an event handler:\n\n\n\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"></script>\n<script>\n  $(document).on(\"click\", \"#test\", function(e) {\n    console.log(\"clicked: %o\",  this);\n  });\n</script>\n<button id=\"test\">click me</button>\n Run code snippetHide resultsExpand snippet\n\n\n\nNote: Typically, this pattern is reserved for elements which didn't exist at load-time or to avoid attaching a large amount of handlers. It's also worth pointing out that while I've attached a handler to document (for demonstrative purposes), you should select the nearest reliable ancestor.\n\n\n\nOption 4: The defer attribute\n\nUse the defer attribute of <script>.\n\n\n  [defer, a Boolean attribute,] is set to indicate to a browser that the script is meant to be executed after the document has been parsed, but before firing DOMContentLoaded.\n\n\n\n\n<script src=\"https://gh-canon.github.io/misc-demos/log-test-click.js\" defer></script>\n<button id=\"test\">click me</button>\n Run code snippetHide resultsExpand snippet\n\n\n\nFor reference, here's the code from that external script:\n\ndocument.getElementById(\"test\").addEventListener(\"click\", function(e){\n   console.log(\"clicked: %o\", this); \n});\n\n\nNote: The defer attribute certainly seems like a magic bullet but it's important to be aware of the caveats...\n1. defer can only be used for external scripts, i.e.: those having a src attribute.\n2. be aware of browser support, i.e.: buggy implementation in IE < 10\n    ",
            "votes": 541,
            "comentarios": [
                {
                    "decripcion": "It's now 2020 \u2014 is \"Placing scripts at the bottom\" still \"considered a best practice\" ? I (nowdays) put all my resources in the <head> and use defer on scripts (I don't have to support bad-old incompatible browsers)",
                    "fecha": { "$date" : "2020-05-05 17:53:01Z" },
                    "usuario": "Stephen P",
                    "usuario_id": 681
                },
                {
                    "decripcion": "I'm a big proponent of moving onto modern browsers. That said, this practice doesn't really cost me anything and it just works everywhere. On the other hand, both defer and async have pretty broad support -even reaching back to some much older browser versions. They have the additional advantage of clearly, explicitly signaling the intended behavior. Just remember that these attributes only work for scripts specifying a src attribute, i.e.: external scripts. Weigh the benefits. Maybe use both? Your call.",
                    "fecha": { "$date" : "2020-05-05 19:39:16Z" },
                    "usuario": "canon",
                    "usuario_id": 682
                },
                {
                    "decripcion": "In my opinion, this answer should also include a reference to developer.mozilla.org/en-US/docs/Web/API/Window/\u2026 in approach #2. Essentially that is the vanilla JS solution to this issue, which probably something at least some Googlers would like to know about.",
                    "fecha": { "$date" : "2021-03-09 16:32:16Z" },
                    "usuario": "Joeytje50",
                    "usuario_id": 683
                },
                {
                    "decripcion": "@Joeytje50 DOMContentLoaded is already referenced in a footnote for #2. That said, this answer was originally migrated by a moderator from a jQuery-specific question. So, it still bears some of that flavor, despite some transitional edits.",
                    "fecha": { "$date" : "2021-03-10 00:58:44Z" },
                    "usuario": "canon",
                    "usuario_id": 682
                }
            ],
            "usuario": "canon",
            "usuario_id": 682
        },
        "respuestas": [
            395,
            396,
            397,
            398,
            399,
            400
        ],
        "comentarios": [
            {
                "decripcion": "Many questions are asked about why a certain DOM element is not found and the reason is often because the JavaScript code is placed before the DOM element. This is intended to be a canonical answer for these type of questions. It's community wiki, so please feel free to improve it.",
                "fecha": { "$date" : "2012-12-25 08:28:19Z" },
                "usuario": "Felix Kling",
                "usuario_id": 234
            }
        ],
        "usuario": "Felix Kling",
        "usuario_id": 234
    },
    {
        "_id": 21,
        "titulo": "How can I access and process nested objects, arrays or JSON?",
        "fecha": { "$date" : "2019-06-26 05:02:44Z" },
        "decripcion": "\n                \nI have a nested data structure containing objects and arrays. How can I extract the information, i.e. access a specific or multiple values (or keys)?\n\nFor example:\n\nvar data = {\n    code: 42,\n    items: [{\n        id: 1,\n        name: 'foo'\n    }, {\n        id: 2,\n        name: 'bar'\n    }]\n};\n\n\nHow could I access the name of the second item in items?\n    ",
        "votes": 1005,
        "tags": [
            "object",
            "javascript",
            "nested",
            "data-manipulation",
            "arrays"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 401,
            "fecha": { "$date" : "2017-06-16 19:10:23Z" },
            "decripcion": "\nPreliminaries\n\nJavaScript has only one data type which can contain multiple values: Object. An Array is a special form of object.\n\n(Plain) Objects have the form\n\n{key: value, key: value, ...}\n\n\nArrays have the form\n\n[value, value, ...]\n\n\nBoth arrays and objects expose a key -> value structure. Keys in an array must be numeric, whereas any string can be used as key in objects. The key-value pairs are also called the \"properties\".\n\nProperties can be accessed either using dot notation\n\nconst value = obj.someProperty;\n\n\nor bracket notation, if the property name would not be a valid JavaScript identifier name [spec], or the name is the value of a variable:\n\n// the space is not a valid character in identifier names\nconst value = obj[\"some Property\"];\n\n// property name as variable\nconst name = \"some Property\";\nconst value = obj[name];\n\n\nFor that reason, array elements can only be accessed using bracket notation:\n\nconst value = arr[5]; // arr.5 would be a syntax error\n\n// property name / index as variable\nconst x = 5;\nconst value = arr[x];\n\n\nWait... what about JSON?\n\nJSON is a textual representation of data, just like XML, YAML, CSV, and others. To work with such data, it first has to be converted to JavaScript data types, i.e. arrays and objects (and how to work with those was just explained). How to parse JSON is explained in the question Parse JSON in JavaScript? .\n\nFurther reading material\n\nHow to access arrays and objects is fundamental JavaScript knowledge and therefore it is advisable to read the MDN JavaScript Guide, especially the sections\n\n\nWorking with Objects\nArrays\nEloquent JavaScript - Data Structures\n\n\n\n\n\n\nAccessing nested data structures\n\nA nested data structure is an array or object which refers to other arrays or objects, i.e. its values are arrays or objects. Such structures can be accessed by consecutively applying dot or bracket notation. \n\nHere is an example:\n\nconst data = {\n    code: 42,\n    items: [{\n        id: 1,\n        name: 'foo'\n    }, {\n        id: 2,\n        name: 'bar'\n    }]\n};\n\n\nLet's assume we want to access the name of the second item. \n\nHere is how we can do it step-by-step:\n\nAs we can see data is an object, hence we can access its properties using dot notation. The items property is accessed as follows:\n\ndata.items\n\n\nThe value is an array, to access its second element, we have to use bracket notation:\n\ndata.items[1]\n\n\nThis value is an object and we use dot notation again to access the name property. So we eventually get:\n\nconst item_name = data.items[1].name;\n\n\nAlternatively, we could have used bracket notation for any of the properties, especially if the name contained characters that would have made it invalid for dot notation usage:\n\nconst item_name = data['items'][1]['name'];\n\n\n\n\nI'm trying to access a property but I get only undefined back?\n\nMost of the time when you are getting undefined, the object/array simply doesn't have a property with that name.\n\nconst foo = {bar: {baz: 42}};\nconsole.log(foo.baz); // undefined\n\n\nUse console.log or console.dir and inspect the structure of object / array. The property you are trying to access might be actually defined on a nested object / array.\n\nconsole.log(foo.bar.baz); // 42\n\n\n\n\nWhat if the property names are dynamic and I don't know them beforehand?\n\nIf the property names are unknown or we want to access all properties of an object / elements of an array, we can use the for...in [MDN] loop for objects and the for [MDN] loop for arrays to iterate over all properties / elements.\n\nObjects\n\nTo iterate over all properties of data, we can iterate over the object like so:\n\nfor (const prop in data) {\n    // `prop` contains the name of each property, i.e. `'code'` or `'items'`\n    // consequently, `data[prop]` refers to the value of each property, i.e.\n    // either `42` or the array\n}\n\n\nDepending on where the object comes from (and what you want to do), you might have to test in each iteration whether the property is really a property of the object, or it is an inherited property. You can do this with Object#hasOwnProperty [MDN].\n\nAs alternative to for...in with hasOwnProperty, you can use Object.keys [MDN] to get an array of property names:\n\nObject.keys(data).forEach(function(prop) {\n  // `prop` is the property name\n  // `data[prop]` is the property value\n});\n\n\nArrays\n\nTo iterate over all elements of the data.items array, we use a for loop:\n\nfor(let i = 0, l = data.items.length; i < l; i++) {\n    // `i` will take on the values `0`, `1`, `2`,..., i.e. in each iteration\n    // we can access the next element in the array with `data.items[i]`, example:\n    // \n    // var obj = data.items[i];\n    // \n    // Since each element is an object (in our example),\n    // we can now access the objects properties with `obj.id` and `obj.name`. \n    // We could also use `data.items[i].id`.\n}\n\n\nOne could also use for...in to iterate over arrays, but there are reasons why this should be avoided: Why is 'for(var item in list)' with arrays considered bad practice in JavaScript?.\n\nWith the increasing browser support of ECMAScript 5, the array method forEach [MDN] becomes an interesting alternative as well:\n\ndata.items.forEach(function(value, index, array) {\n    // The callback is executed for each element in the array.\n    // `value` is the element itself (equivalent to `array[index]`)\n    // `index` will be the index of the element in the array\n    // `array` is a reference to the array itself (i.e. `data.items` in this case)\n}); \n\n\nIn environments supporting ES2015 (ES6), you can also use the for...of [MDN] loop, which not only works for arrays, but for any iterable:\n\nfor (const item of data.items) {\n   // `item` is the array element, **not** the index\n}\n\n\nIn each iteration, for...of directly gives us the next element of the iterable, there is no \"index\" to access or use.\n\n\n\nWhat if the \"depth\" of the data structure is unknown to me?\n\nIn addition to unknown keys, the \"depth\" of the data structure (i.e. how many nested objects) it has, might be unknown as well. How to access deeply nested properties usually depends on the exact data structure.\n\nBut if the data structure contains repeating patterns, e.g. the representation of a binary tree, the solution typically includes to recursively [Wikipedia] access each level of the data structure.\n\nHere is an example to get the first leaf node of a binary tree:\n\nfunction getLeaf(node) {\n    if (node.leftChild) {\n        return getLeaf(node.leftChild); // <- recursive call\n    }\n    else if (node.rightChild) {\n        return getLeaf(node.rightChild); // <- recursive call\n    }\n    else { // node must be a leaf node\n        return node;\n    }\n}\n\nconst first_leaf = getLeaf(root);\n\n\nShow code snippet\n\nconst root = {\n    leftChild: {\n        leftChild: {\n            leftChild: null,\n            rightChild: null,\n            data: 42\n        },\n        rightChild: {\n            leftChild: null,\n            rightChild: null,\n            data: 5\n        }\n    },\n    rightChild: {\n        leftChild: {\n            leftChild: null,\n            rightChild: null,\n            data: 6\n        },\n        rightChild: {\n            leftChild: null,\n            rightChild: null,\n            data: 7\n        }\n    }\n};\nfunction getLeaf(node) {\n    if (node.leftChild) {\n        return getLeaf(node.leftChild);\n    } else if (node.rightChild) {\n        return getLeaf(node.rightChild);\n    } else { // node must be a leaf node\n        return node;\n    }\n}\n\nconsole.log(getLeaf(root).data);\n Run code snippetHide resultsExpand snippet\n\n\n\nA more generic way to access a nested data structure with unknown keys and depth is to test the type of the value and act accordingly.\n\nHere is an example which adds all primitive values inside a nested data structure into an array (assuming it does not contain any functions). If we encounter an object (or array) we simply call toArray again on that value (recursive call).\n\nfunction toArray(obj) {\n    const result = [];\n    for (const prop in obj) {\n        const value = obj[prop];\n        if (typeof value === 'object') {\n            result.push(toArray(value)); // <- recursive call\n        }\n        else {\n            result.push(value);\n        }\n    }\n    return result;\n}\n\n\nShow code snippet\n\nconst data = {\n  code: 42,\n  items: [{\n    id: 1,\n    name: 'foo'\n  }, {\n    id: 2,\n    name: 'bar'\n  }]\n};\n\n\nfunction toArray(obj) {\n  const result = [];\n  for (const prop in obj) {\n    const value = obj[prop];\n    if (typeof value === 'object') {\n      result.push(toArray(value));\n    } else {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nconsole.log(toArray(data));\n Run code snippetHide resultsExpand snippet\n\n\n\n\n\n\n\nHelpers\n\nSince the structure of a complex object or array is not necessarily obvious, we can inspect the value at each step to decide how to move further. console.log [MDN] and console.dir [MDN] help us doing this. For example (output of the Chrome console):\n\n> console.log(data.items)\n [ Object, Object ]\n\n\nHere we see that that data.items is an array with two elements which are both objects. In Chrome console the objects can even be expanded and inspected immediately.\n\n> console.log(data.items[1])\n  Object\n     id: 2\n     name: \"bar\"\n     __proto__: Object\n\n\nThis tells us that data.items[1] is an object, and after expanding it we see that it has three properties, id, name and __proto__. The latter is an internal property used for the prototype chain of the object. The prototype chain and inheritance is out of scope for this answer, though.\n    ",
            "votes": 1332,
            "comentarios": [
                {
                    "decripcion": "Some of what's being linked here is really asking how to do this in jQuery, which to be fair does simplify 1 or 2 things here. Not sure whether to make this more of a megapost or answer those separately - the basics covered here on what's an object what's an array are usually what's really being asked... .",
                    "fecha": { "$date" : "2013-04-02 09:29:45Z" },
                    "usuario": "Chris Moschini",
                    "usuario_id": 487
                },
                {
                    "decripcion": "@felix-kling One thing... with nested objects, such as let object = {a: 1, b: 2, c: { a: 3, b: 4 }};, this returns an array containing an array for each nested object, in this case [ 1, 2, [ 3, 4 ] ] Wouldn't it be better to to use concat in the recursive call instead of push ? (requiring result to be mutable)",
                    "fecha": { "$date" : "2018-05-03 15:44:25Z" },
                    "usuario": "ElFitz",
                    "usuario_id": 689
                },
                {
                    "decripcion": "this one page made me learn the difference between ARRAY and OBJ",
                    "fecha": { "$date" : "2020-02-19 09:09:18Z" },
                    "usuario": "curiousKido",
                    "usuario_id": 690
                },
                {
                    "decripcion": "Remember to update \u201cJavaScript has only one data type which can contain multiple values: Object.\u201d once the records and tuples proposal is finished.",
                    "fecha": { "$date" : "2021-06-24 16:21:14Z" },
                    "usuario": "Sebastian Simon",
                    "usuario_id": 573
                },
                {
                    "decripcion": "I believe that your answer on retrieving property names and values dynamically for a JS object is the most clear and well-written piece of code on the internet.",
                    "fecha": { "$date" : "2021-08-22 17:27:58Z" },
                    "usuario": "user2954658",
                    "usuario_id": 691
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            401,
            402,
            403,
            404,
            405,
            406,
            407,
            408,
            409,
            410,
            411,
            412,
            413,
            414,
            415,
            416,
            417,
            418,
            419,
            420,
            421,
            422,
            423,
            424,
            425,
            426,
            427,
            428,
            429,
            430
        ],
        "comentarios": [
            {
                "decripcion": "@Marcel: It has to be read as \"I have a data nested data structure or JSON, how can I access a specific value?\". I know the difference, but many people don't and might be searching for \"JSON\" rather than \"object\". Many questions actually are of the form \"how can I access X in this JSON\". The only place where I mention JSON in my answer is where I explain what it is. If you have a suggestion how to communicate this in a better way, I'm all ears.",
                "fecha": { "$date" : "2013-03-02 00:46:29Z" },
                "usuario": "Felix Kling",
                "usuario_id": 234
            },
            {
                "decripcion": "possible duplicate of JSON find in JavaScript",
                "fecha": { "$date" : "2013-06-12 22:14:12Z" },
                "usuario": "Travis J",
                "usuario_id": 620
            },
            {
                "decripcion": "This answer here helped me to solve the problem for accessing nested objects very nicely and vanilla: stackoverflow.com/questions/6491463/\u2026 Allows to write for example: someObject.access(\"firstPart[2].someOtherPart.myId\")",
                "fecha": { "$date" : "2020-08-17 15:28:15Z" },
                "usuario": "exchange",
                "usuario_id": 722
            }
        ],
        "usuario": "Felix Kling",
        "usuario_id": 234
    },
    {
        "_id": 22,
        "titulo": "What is the difference between client-side and server-side programming?",
        "fecha": { "$date" : "2019-08-28 11:53:02Z" },
        "decripcion": "\n                \nI have this code:\n\n<script type=\"text/javascript\">\n    var foo = 'bar';\n    <?php\n        file_put_contents('foo.txt', ' + foo + ');\n    ?>\n\n    var baz = <?php echo 42; ?>;\n    alert(baz);\n</script>\n\n\nWhy does this not write \"bar\" into my text file, but alerts \"42\"?\n\n\n\nNB: Earlier revisions of this question were explicitly about PHP on the server and JavaScript on the client. The essential nature of the problem and solutions is the same for any pair of languages when one is running on the client and the other on the server (even if they are the same language). Please take this in to account when you see answers talking about specific languages.\n    ",
        "votes": 540,
        "tags": [
            "server-side",
            "javascript",
            "client-side",
            "php"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 431,
            "fecha": { "$date" : "2017-05-23 12:02:56Z" },
            "decripcion": "\nYour code is split into two entirely separate parts, the server side and the client side.\n\n                    |\n               ---------->\n              HTTP request\n                    |\n+--------------+    |    +--------------+\n|              |    |    |              |\n|    browser   |    |    |  web  server |\n| (JavaScript) |    |    |  (PHP etc.)  |\n|              |    |    |              |\n+--------------+    |    +--------------+\n                    |\n  client side       |      server side\n                    |\n               <----------\n          HTML, CSS, JavaScript\n                    |\n\n\nThe two sides communicate via HTTP requests and responses. PHP is executed on the server and outputs some HTML and maybe JavaScript code which is sent as response to the client where the HTML is interpreted and the JavaScript is executed. Once PHP has finished outputting the response, the script ends and nothing will happen on the server until a new HTTP request comes in.\n\nThe example code executes like this:\n\n<script type=\"text/javascript\">\n    var foo = 'bar';\n    <?php\n        file_put_contents('foo.txt', ' + foo + ');\n    ?>\n\n    var baz = <?php echo 42; ?>;\n    alert(baz);\n</script>\n\n\nStep 1, PHP executes all code between <?php ?> tags. The result is this:\n\n<script type=\"text/javascript\">\n    var foo = 'bar';\n\n    var baz = 42;\n    alert(baz);\n</script>\n\n\nThe file_put_contents call did not result in anything, it just wrote \" + foo + \" into a file. The <?php echo 42; ?> call resulted in the output \"42\", which is now in the spot where that code used to be.\n\nThis resulting HTML/JavaScript code is now sent to the client, where it gets evaluated. The alert call works, while the foo variable is not used anywhere.\n\nAll PHP code is executed on the server before the client even starts executing any of the JavaScript. There's no PHP code left in the response that JavaScript could interact with.\n\nTo call some PHP code, the client will have to send a new HTTP request to the server. This can happen using one of three possible methods:\n\n\nA link, which causes the browser to load a new page.\nA form submission, which submits data to the server and loads a new page.\nAn AJAX request, which is a Javascript technique to make a regular HTTP request to the server (like 1. and 2. will), but without leaving the current page.\n\n\nHere's a question outlining these method in greater detail\n\nYou can also use JavaScript to make the browser open a new page using window.location or submit a form, emulating possibilities 1. and 2.\n    ",
            "votes": 500,
            "comentarios": [
                {
                    "decripcion": "You can also open second page using window.open or load a page using an iframe.",
                    "fecha": { "$date" : "2016-04-25 07:51:09Z" },
                    "usuario": "jcubic",
                    "usuario_id": 723
                },
                {
                    "decripcion": "It might be worth adding WebSockets to the list of communication methods.",
                    "fecha": { "$date" : "2016-12-19 08:45:36Z" },
                    "usuario": "Quentin",
                    "usuario_id": 630
                },
                {
                    "decripcion": "What if let's say drop down values get updated via jquery.  When user does step 2. A form submission, which submits data to the server and loads a new page, via \"Submit\" button would the jquery updated values be able to be passed to a controller in php?  Or would they not be visible to php since it was added to the dom via jquery? @deceze",
                    "fecha": { "$date" : "2018-10-02 22:33:34Z" },
                    "usuario": "FabricioG",
                    "usuario_id": 724
                },
                {
                    "decripcion": "@Fabricio An HTTP request will be created from the <form> data and sent to the server. You can manipulate forms using Javascript to have them contain different data. Yes, that data will be part of the resulting HTTP request if it's properly part of the form when it is being submitted; it doesn't matter whether it was in the original HTML or added afterwards via Javascript.",
                    "fecha": { "$date" : "2018-10-03 07:30:08Z" },
                    "usuario": "deceze\u2666",
                    "usuario_id": 725
                }
            ],
            "usuario": "deceze",
            "usuario_id": 726
        },
        "respuestas": [
            431,
            432,
            433,
            434
        ],
        "comentarios": [],
        "usuario": "deceze",
        "usuario_id": 726
    },
    {
        "_id": 23,
        "titulo": "How does the \"this\" keyword work?",
        "fecha": { "$date" : "2015-02-08 16:10:39Z" },
        "decripcion": "\n                \nI have noticed that there doesn't appear to be a clear explanation of what the this keyword is and how it is correctly (and incorrectly) used in JavaScript on the Stack Overflow site.\n\nI have witnessed some very strange behaviour with it and have failed to understand why it has occurred.\n\nHow does this work and when should it be used?\n    ",
        "votes": 1403,
        "tags": [
            "this",
            "javascript"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 435,
            "fecha": { "$date" : "2021-08-26 04:07:20Z" },
            "decripcion": "\nthis is a keyword in JavaScript that is a property of an execution context. Its main use is in functions and constructors.\nI recommend reading Mike West\u2019s article Scope in JavaScript (archived) first. It is an excellent, friendly introduction to the concepts of this and scope chains in JavaScript. The rules for this are quite simple (if you stick to best practices).\nTechnical description of this in the specification\nThe ECMAScript standard defines this via the abstract operation ResolveThisBinding:\n\nThe abstract operation ResolveThisBinding [\u2026] determines the binding of the keyword this using the LexicalEnvironment of the running execution context. It performs the following steps when called:\n\nLet envRec be GetThisEnvironment().\nReturn ? envRec.GetThisBinding().\n\n\nGlobal Environment Records, module Environment Records, and function Environment Records each have their own GetThisBinding method.\nThe GetThisEnvironment abstract operation finds the current running execution context\u2019s LexicalEnvironment and finds the closest ascendant Environment Record (by iteratively accessing their [[OuterEnv]] properties) which has a this binding (i.e. HasThisBinding returns true). This process ends in one of the three Environment Record types.\nThe value of this often depends on whether code is in strict mode.\nThe return value of GetThisBinding reflects the value of this of the current execution context, so whenever a new execution context is established, this resolves to a distinct value. This can also happen when the current execution context is modified. The following subsections list the five cases where this can happen.\nYou can put the code samples in the AST explorer to follow along with specification details.\n1. Global execution context in scripts\nThis is script code evaluated at the top level, e.g. directly inside a <script>:\n<script>\n// Global context\nconsole.log(this); // Logs global object.\n\nsetTimeout(function(){\n  console.log(\"Not global context\");\n});\n</script>\n\nWhen in the initial global execution context of a script, evaluating this causes GetThisBinding to take the following steps:\n\nThe GetThisBinding concrete method of a global Environment Record envRec [\u2026] performs the following steps when called:\n\nReturn envRec.[[GlobalThisValue]].\n\n\nThe [[GlobalThisValue]] property of a global Environment Record is always set to the host-defined global object, which is reachable via globalThis (window on Web, global on Node.js; Docs on MDN). Follow the steps of InitializeHostDefinedRealm to learn how the [[GlobalThisValue]] property comes to be.\n2. Global execution context in modules\nModules have been introduced in ECMAScript 2015.\nThis applies to modules, e.g. when directly inside a <script type=\"module\">, as opposed to a simple <script>.\nWhen in the initial global execution context of a module, evaluating this causes GetThisBinding to take the following steps:\n\nThe GetThisBinding concrete method of a module Environment Record [\u2026] performs the following steps when called:\n\nReturn undefined.\n\n\nThat\u2019s right: in modules, the value of this is always undefined in the global context.\nModules are implicitly in strict mode.\n3. Entering eval code\nThere are two kinds of eval calls: direct and indirect. This distinction exists since the ECMAScript 5th edition.\n\nA direct eval call usually looks like eval(\u2026); or (eval)(\u2026); (or ((eval))(\u2026);, etc.).1 It\u2019s only direct if the call expression fits a narrow pattern.2\nAn indirect eval call involves calling the function reference eval in any other way. It could be eval?.(\u2026), (\u2026, eval)(\u2026), window.eval(\u2026), eval.call(\u2026,\u2026), etc. Given const aliasEval1 = eval; window.aliasEval2 = eval;, it would also be aliasEval1(\u2026), aliasEval2(\u2026). Separately, given const originalEval = eval; window.eval = (x) => originalEval(x);, calling eval(\u2026) would also be indirect.\n\nSee chuckj\u2019s answer to \u201c(1, eval)('this') vs eval('this') in JavaScript?\u201d and Dmitry Soshnikov\u2019s ECMA-262-5 in detail \u2013 Chapter 2: Strict Mode (archived) for when you might use an indirect eval() call.\nPerformEval executes the eval code. It creates a new declarative Environment Record as its LexicalEnvironment, which is where GetThisEnvironment gets the this value from.\nThen, if this appears in eval code, the GetThisBinding method of the Environment Record found by GetThisEnvironment is called and its value returned.\nAnd the created declarative Environment Record depends on whether the eval call was direct or indirect:\n\nIn a direct eval, it will be based on the current running execution context\u2019s LexicalEnvironment.\nIn an indirect eval, it will be based on the [[GlobalEnv]] property (a global Environment Record) of the Realm Record which executed the indirect eval.\n\nWhich means:\n\nIn a direct eval, the this value doesn\u2019t change; it\u2019s taken from the lexical scope that called eval.\nIn an indirect eval, the this value is the global object (globalThis).\n\nWhat about new Function?\u200a\u2014\u200anew Function is similar to eval, but it doesn\u2019t call the code immediately; it creates a function. A this binding doesn\u2019t apply anywhere here, except when the function is called, which works normally, as explained in the next subsection.\n4. Entering function code\nEntering function code occurs when calling a function.\nThere are four categories of syntax to invoke a function.\n\nThe EvaluateCall abstract operation is performed for these three:3\n\nNormal function calls\nOptional chaining calls\nTagged templates\n\n\nAnd EvaluateNew is performed for this one:3\n\nConstructor invocations\n\n\n\nThe actual function call happens at the Call abstract operation, which is called with a thisValue determined from context; this argument is passed along in a long chain of call-related calls. Call calls the [[Call]] internal slot of the function. This calls PrepareForOrdinaryCall where a new function Environment Record is created:\n\nA function Environment Record is a declarative Environment Record that is used to represent the top-level scope of a function and, if the function is not an ArrowFunction, provides a this binding. If a function is not an ArrowFunction function and references super, its function Environment Record also contains the state that is used to perform super method invocations from within the function.\n\nIn addition, there is the [[ThisValue]] field in a function Environment Record:\n\nThis is the this value used for this invocation of the function.\n\nThe NewFunctionEnvironment call also sets the function environment\u2019s [[ThisBindingStatus]] property.\n[[Call]] also calls OrdinaryCallBindThis, where the appropriate thisArgument is determined based on:\n\nthe original reference,\nthe kind of the function, and\nwhether or not the code is in strict mode.\n\nOnce determined, a final call to the BindThisValue method of the newly created function Environment Record actually sets the [[ThisValue]] field to the thisArgument.\nFinally, this very field is where a function Environment Record\u2019s GetThisBinding abstract operation gets the value for this from:\n\nThe GetThisBinding concrete method of a function Environment Record envRec [\u2026] performs the following steps when called:\n[\u2026]\n3. Return envRec.[[ThisValue]].\n\nAgain, how exactly the this value is determined depends on many factors; this was just a general overview. With this technical background, let\u2019s examine all the concrete examples.\nArrow functions\nWhen an arrow function is evaluated, the [[ThisMode]] internal slot of the function object is set to \u201clexical\u201d in OrdinaryFunctionCreate.\nAt OrdinaryCallBindThis, which takes a function F:\n\n\nLet thisMode be F.[[ThisMode]].\nIf thisMode is lexical, return NormalCompletion(undefined).\n[\u2026]\n\n\nwhich just means that the rest of the algorithm which binds this is skipped. An arrow function does not bind its own this value.\nSo, what is this inside an arrow function, then? Looking back at ResolveThisBinding and GetThisEnvironment, the HasThisBinding method explicitly returns false.\n\nThe HasThisBinding concrete method of a function Environment Record envRec [\u2026] performs the following steps when called:\n\nIf envRec.[[ThisBindingStatus]] is lexical, return false; otherwise, return true.\n\n\nSo the outer environment is looked up instead, iteratively. The process will end in one of the three environments that have a this binding.\nThis just means that this is lexically determined in arrow function bodies, or in other words (from Arrow function vs function declaration / expressions: Are they equivalent / exchangeable?):\n\nArrow functions don\u2019t have their own this [\u2026] binding. Instead, [this identifier is] resolved in the lexical scope like any other variable. That means that inside an arrow function, this [refers] to the [value of this] in the environment the arrow function is defined in (i.e. \u201coutside\u201d the arrow function).\n\nFunction properties\nIn normal functions (function, methods), this is determined by how the function is called.\nThis is where these \u201csyntax variants\u201d come in handy.\nConsider this object containing a function:\nconst refObj = {\n    func: function(){\n      console.log(this);\n    }\n  };\n\nAlternatively:\nconst refObj = {\n    func(){\n      console.log(this);\n    }\n  };\n\nIn any of the following function calls, the this value inside func will be refObj.1\n\nrefObj.func()\nrefObj[\"func\"]()\nrefObj?.func()\nrefObj.func?.()\nrefObj.func``\n\nIf the called function is syntactically a property of a base object, then this base will be the \u201creference\u201d of the call, which, in usual cases, will be the value of this. This is explained by the evaluation steps linked above; for example, in refObj.func() (or refObj[\"func\"]()), the CallMemberExpression is the entire expression refObj.func(), which consists of the MemberExpression refObj.func and the Arguments ().\nBut also, refObj.func and refObj play three roles, each:\n\nthey\u2019re both expressions,\nthey\u2019re both references, and\nthey\u2019re both values.\n\nrefObj.func as a value is the callable function object; the corresponding reference is used to determine the this binding.\nThe optional chaining and tagged template examples work very similarly: basically, the reference is everything before the ?.(), before the ``, or before the ().\nEvaluateCall uses IsPropertyReference of that reference to determine if it is a property of an object, syntactically. It\u2019s trying to get the [[Base]] property of the reference (which is e.g. refObj, when applied to refObj.func; or foo.bar when applied to foo.bar.baz). If it is written as a property, then GetThisValue will get this [[Base]] property and use it as the this value.\nNote: Getters / Setters work the same way as methods, regarding this. Simple properties don\u2019t affect the execution context, e.g. here, this is in global scope:\nconst o = {\n    a: 1,\n    b: this.a // Is `globalThis.a`.\n  };\n\nCalls without base reference, strict mode, and with\nA call without a base reference is usually a function that isn\u2019t called as a property. For example:\nfunc(); // As opposed to `refObj.func();`.\n\nThis also happens when passing or assigning methods, or using the comma operator. This is where the difference between Reference Record and Value is relevant.\nconst g = (f) => f(); // No base ref.\nconst h = refObj.func;\n\ng(refObj.func);\nh(); // No base ref.\n(0, refObj.func)(); // Another common pattern to remove the base ref.\n\nEvaluateCall calls Call with a thisValue of undefined here. This makes a difference in OrdinaryCallBindThis (F: the function object; thisArgument: the thisValue passed to Call):\n\n\nLet thisMode be F.[[ThisMode]].\n\n[\u2026]\n\nIf thisMode is strict, let thisValue be thisArgument.\nElse,\n\nIf thisArgument is undefined or null, then\n\nLet globalEnv be calleeRealm.[[GlobalEnv]].\n[\u2026]\nLet thisValue be globalEnv.[[GlobalThisValue]].\n\n\nElse,\n\nLet thisValue be ! ToObject(thisArgument).\nNOTE: ToObject produces wrapper objects [\u2026].\n\n\n\n\n\n[\u2026]\n\nNote: step 5 sets the actual value of this to the supplied thisArgument in strict mode\u200a\u2014\u200aundefined in this case. In \u201csloppy mode\u201d, an undefined or null thisArgument results in this being the global this value.\nIf IsPropertyReference returns false, then EvaluateCall takes these steps:\n\n\nLet refEnv be ref.[[Base]].\nAssert: refEnv is an Environment Record.\nLet thisValue be refEnv.WithBaseObject().\n\n\nThis is where an undefined thisValue may come from: refEnv.WithBaseObject() is always undefined, except in with statements. In this case, thisValue will be the binding object.\nThere\u2019s also Symbol.unscopables (Docs on MDN) to control the with binding behavior.\nTo summarize, so far:\nfunction f1(){\n  console.log(this);\n}\n\nfunction f2(){\n  console.log(this);\n}\n\nfunction f3(){\n  console.log(this);\n}\n\nconst o = {\n    f1,\n    f2,\n    [symbol.unscopables]: {\n      f2: true\n    }\n  };\n\nf1(); // Logs `globalThis`.\n\nwith(o){\n  f1(); // Logs `o`.\n  f2(); // `f2` is unscopable, so this logs `globalThis`.\n  f3(); // `f3` is not on `o`, so this logs `globalThis`.\n}\n\nand:\n\"use strict\";\n\nfunction f(){\n  console.log(this);\n}\n\nf(); // Logs `undefined`.\n\n// `with` statements are not allowed in strict-mode code.\n\nNote that when evaluating this, it doesn\u2019t matter where a normal function is defined.\n.call, .apply, .bind, thisArg, and primitives\nAnother consequence of step 5 of OrdinaryCallBindThis, in conjunction with step 6.2 (6.b in the spec), is that a primitive this value is coerced to an object only in \u201csloppy\u201d mode.\nTo examine this, let\u2019s introduce another source for the this value: the three methods that override the this binding:4\n\nFunction.prototype.apply(thisArg, argArray)\nFunction.prototype. {call, bind} (thisArg, ...args)\n\n.bind creates a bound function, whose this binding is set to thisArg and cannot change again. .call and .apply call the function immediately, with the this binding set to thisArg.\n.call and .apply map directly to Call, using the specified thisArg. .bind creates a bound function with BoundFunctionCreate. These have their own [[Call]] method which looks up the function object\u2019s [[BoundThis]] internal slot.\nExamples of setting a custom this value:\nfunction f(){\n  console.log(this);\n}\n\nconst myObj = {},\n  g = f.bind(myObj),\n  h = (m) => m();\n\n// All of these log `myObj`.\ng();\nf.bind(myObj)();\nf.call(myObj);\nh(g);\n\nFor objects, this is the same in strict and non-strict mode.\nNow, try to supply a primitive value:\nfunction f(){\n  console.log(this);\n}\n\nconst myString = \"s\",\n  g = f.bind(myString);\n\ng();              // Logs `String { \"s\" }`.\nf.call(myString); // Logs `String { \"s\" }`.\n\nIn non-strict mode, primitives are coerced to their object-wrapped form. It\u2019s the same kind of object you get when calling Object(\"s\") or new String(\"s\"). In strict mode, you can use primitives:\n\"use strict\";\n\nfunction f(){\n  console.log(this);\n}\n\nconst myString = \"s\",\n  g = f.bind(myString);\n\ng();              // Logs `\"s\"`.\nf.call(myString); // Logs `\"s\"`.\n\nLibraries make use of these methods, e.g. jQuery sets the this to the DOM element selected here:\n$(\"button\").click(function(){\n  console.log(this); // Logs the clicked button.\n});\n\nConstructors, classes, and new\nWhen calling a function as a constructor using the new operator, EvaluateNew calls Construct, which calls the [[Construct]] method. If the function is a base constructor (i.e. not a class extends\u2026{\u2026}), it sets thisArgument to a new object created from the constructor\u2019s prototype. Properties set on this in the constructor will end up on the resulting instance object. this is implicitly returned, unless you explicitly return your own non-primitive value.\nA class is a new way of creating constructor functions, introduced in ECMAScript 2015.\nfunction Old(a){\n  this.p = a;\n}\n\nconst o = new Old(1);\n\nconsole.log(o);  // Logs `Old { p: 1 }`.\n\nclass New{\n  constructor(a){\n    this.p = a;\n  }\n}\n\nconst n = new New(1);\n\nconsole.log(n); // Logs `New { p: 1 }`.\n\nClass definitions are implicitly in strict mode:\nclass A{\n  m1(){\n    return this;\n  }\n  m2(){\n    const m1 = this.m1;\n    \n    console.log(m1());\n  }\n}\n\nnew A().m2(); // Logs `undefined`.\n\nsuper\nThe exception to the behavior with new is class extends\u2026{\u2026}, as mentioned above. Derived classes do not immediately set their this value upon invocation; they only do so after a super call (happens implicitly without an own constructor). Using this before calling super is not allowed.\nCalling super calls the super constructor with the this value of the lexical scope (the function Environment Record) of the call. GetThisValue has a special rule for super calls. It uses BindThisValue to set this to that Environment Record.\nclass DerivedNew extends New{\n  constructor(a, a2){\n    // Using `this` before `super` results in a ReferenceError.\n    super(a);\n    this.p2 = a2;\n  }\n}\n\nconst n2 = new DerivedNew(1, 2);\n\nconsole.log(n2); // Logs `DerivedNew { p: 1, p2: 2 }`.\n\n5. Evaluating class fields\nInstance fields and static fields were introduced in ECMAScript 2022.\nWhen a class is evaluated, ClassDefinitionEvaluation is performed, modifying the running execution context. For each ClassElement:\n\nif a field is static, then this refers to the class itself,\nif a field is not static, then this refers to the instance.\n\nPrivate fields (e.g. #x) and methods are added to a PrivateEnvironment.\nStatic blocks are currently a TC39 stage 3 proposal. Static blocks work the same as static fields and methods: this inside them refers to the class itself.\nNote that in methods and getters / setters, this works just like in normal function properties.\nclass Demo{\n  a = this;\n  b(){\n    return this;\n  }\n  static c = this;\n  static d(){\n    return this;\n  }\n  // Getters, setters, private modifiers are also possible.\n}\n\nconst demo = new Demo;\n\nconsole.log(demo.a, demo.b()); // Both of them log `demo`.\nconsole.log(Demo.c, Demo.d()); // Both of them log `Demo`.\n\n\n1: (o.f)() is exactly equivalent to o.f(); (f)() is exactly equivalent to f(). This is explained in this 2ality article (archived). Particularly see how a ParenthesizedExpression is evaluated.\n2: It must be a MemberExpression, must not be a property, must have a [[ReferencedName]] of exactly \"eval\", and must be the %eval% intrinsic object.\n3: Whenever the specification says \u201cLet ref be the result of evaluating X.\u201d, then X is some expression that you need to find the evaluation steps for. For example, evaluating a MemberExpression or CallExpression is the result of one of these algorithms. Some of them result in a Reference Record.\n4: There are also several other native and host methods that allow providing a this value, notably Array.prototype.map, Array.prototype.forEach, etc. that accept a thisArg as their second argument. Anyone can make their own methods to alter this like (func, thisArg) => func.bind(thisArg), (func, thisArg) => func.call(thisArg), etc. As always, MDN offers great documentation.\n\nJust for fun, test your understanding with some examples\nFor each code snippet, answer the question: \u201cWhat is the value of this at the marked line? Why?\u201d.\nTo reveal the answers, click the gray boxes.\n\n\nif(true){\n  console.log(this); // What is `this` here?\n}\n\n\n globalThis. The marked line is evaluated in the initial global execution context.\n\n\n\n\nconst obj = {};\n\nfunction myFun(){\n  return { // What is `this` here?\n    \"is obj\": this === obj,\n    \"is globalThis\": this === globalThis\n  };\n}\n\nobj.method = myFun;\n\nconsole.log(obj.method());\n\n   \n Run code snippetHide resultsExpand snippet\n\n\n\n obj. When calling a function as a property of an object, it is called with the this binding set to the base of the reference obj.method, i.e. obj.\n\n\n\n\nconst obj = {\n    myMethod: function(){\n      return { // What is `this` here?\n        \"is obj\": this === obj,\n        \"is globalThis\": this === globalThis\n      };\n    }\n  },\n  myFun = obj.myMethod;\n\nconsole.log(myFun());\n\n   \n Run code snippetHide resultsExpand snippet\n\n\n\n globalThis. Since the function value myFun / obj.myMethod is not called off of an object, as a property, the this binding will be globalThis.\n\n This is different from Python, in which accessing a method (obj.myMethod) creates a bound method object.\n\n\n\n\nconst obj = {\n    myFun: () => ({ // What is `this` here?\n      \"is obj\": this === obj,\n      \"is globalThis\": this === globalThis\n    })\n  };\n\nconsole.log(obj.myFun());\n\n   \n Run code snippetHide resultsExpand snippet\n\n\n\n globalThis. Arrow functions don\u2019t create their own this binding. The lexical scope is the same as the initial global scope, so this is globalThis.\n\n\n\nfunction myFun(){\n  console.log(this); // What is `this` here?\n}\n\nconst obj = {\n    myMethod: function(){\n      eval(\"myFun()\");\n    }\n  };\n\nobj.myMethod();\n\n\n globalThis. When evaluating the direct eval call, this is obj. However, in the eval code, myFun is not called off of an object, so the this binding is set to the global object.\n\n\n\n\nfunction myFun() {\n  // What is `this` here?\n  return {\n    \"is obj\": this === obj,\n    \"is globalThis\": this === globalThis\n  };\n}\n\nconst obj = {};\n\nconsole.log(myFun.call(obj));\n\n   \n Run code snippetHide resultsExpand snippet\n\n\n\n obj. The line myFun.call(obj); is invoking the special built-in function Function.prototype.call, which accepts thisArg as the first argument.\n\n\n\n\nclass MyCls{\n  arrow = () => ({ // What is `this` here?\n    \"is MyCls\": this === MyCls,\n    \"is globalThis\": this === globalThis,\n    \"is instance\": this instanceof MyCls\n  });\n}\n\nconsole.log(new MyCls().arrow());\n\n   \n Run code snippetHide resultsExpand snippet\n\n\n\n It\u2019s the instance of MyCls. Arrow functions don\u2019t change the this binding, so the this binding is lexically determined. Therefore, this is exactly the same as with the class fields mentioned above, like a = this;. Try changing it to static arrow. Do you get the result you expect?\n\n\n\n    ",
            "votes": 1417,
            "comentarios": [
                {
                    "decripcion": "I think @supertonsky is right about #2 - if myFun() is called from global scope, and not as a method on the object, \"this\" will be the global object, so the phrasing of the question matters.  btw - I really like the idea of using mouseover to get the answer for something like this.",
                    "fecha": { "$date" : "2013-11-30 00:29:23Z" },
                    "usuario": "user655489",
                    "usuario_id": 731
                },
                {
                    "decripcion": "But, jsfiddle.net/H4LYm/2 shows that the setTimeout example has a this of window(global).",
                    "fecha": { "$date" : "2013-12-31 22:20:35Z" },
                    "usuario": "Kevin Meredith",
                    "usuario_id": 732
                },
                {
                    "decripcion": "coming from Python one would imagine the levels of frustration I had when I bumped into the 3rd example.. smh",
                    "fecha": { "$date" : "2019-06-17 13:22:46Z" },
                    "usuario": "Marius Mucenicu",
                    "usuario_id": 733
                },
                {
                    "decripcion": "One thing that I cannot understand is: why (obj.myFunction)() still binds this to obj? I'd assume that expression in brackets returns a non-bound function, so it shouldn't that be window instead?",
                    "fecha": { "$date" : "2019-09-14 14:08:48Z" },
                    "usuario": "BroiSatse",
                    "usuario_id": 734
                },
                {
                    "decripcion": "This answer should probably be updated to reflect the ES2020 reality, even if the changes are just terminological.",
                    "fecha": { "$date" : "2020-02-17 17:22:00Z" },
                    "usuario": "Ben Aston",
                    "usuario_id": 735
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            435,
            436,
            437,
            438,
            439,
            440,
            441,
            442,
            443,
            444,
            445,
            446,
            447,
            448,
            449,
            450,
            451,
            452,
            453,
            454,
            455
        ],
        "comentarios": [
            {
                "decripcion": "I found this when I googled \"this\" quirksmode.org/js/this.html",
                "fecha": { "$date" : "2010-06-27 13:15:38Z" },
                "usuario": "Wai Wong",
                "usuario_id": 762
            },
            {
                "decripcion": "Some useful related questions * jQuery/JavaScript \u201cthis\u201d pointer confusion * In Javascript, why is the \u201cthis\u201d operator inconsistent? and a nice writeup here * scope/context in javascript",
                "fecha": { "$date" : "2010-06-27 13:20:09Z" },
                "usuario": "Paul Dixon",
                "usuario_id": 763
            },
            {
                "decripcion": "Peter Michaux advocates against the use of this peter.michaux.ca/articles/javascript-widgets-without-this",
                "fecha": { "$date" : "2010-06-27 14:53:06Z" },
                "usuario": "Marcel Korpel",
                "usuario_id": 739
            },
            {
                "decripcion": "The MDN overview isn't half-bad... developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/\u2026",
                "fecha": { "$date" : "2013-02-01 16:46:45Z" },
                "usuario": "dat",
                "usuario_id": 764
            },
            {
                "decripcion": "An interesting explanation of this keyword: rainsoft.io/gentle-explanation-of-this-in-javascript",
                "fecha": { "$date" : "2016-05-24 07:20:09Z" },
                "usuario": "Dmitri Pavlutin",
                "usuario_id": 752
            }
        ],
        "usuario": "Maxim Gershkovich",
        "usuario_id": 765
    },
    {
        "_id": 24,
        "titulo": "Official locator strategies for the webdriver",
        "fecha": { "$date" : "2018-01-21 16:31:24Z" },
        "decripcion": "\n                \nIn the official W3c webdirver documentation, it's clearly stated that the location strategies are:\n\nState   Keyword\nCSS selector    \"css selector\"\nLink text selector  \"link text\"\nPartial link text selector  \"partial link text\"\nTag name    \"tag name\"\nXPath selector  \"xpath\"\n\n\nHowever, Selenium's wire protocol allowed:\n\nclass name  \ncss selector\nid  \nname\nlink text\npartial link text\ntag name\nxpath\n\n\nIn THEORY, Selenium's docs are obsolete and the \"real\" story is in the new spec document. However... \n\nI ran some tests on the latest Chrome's own Webdriver, and I can confirm that name and class name both work; however, they are not in the specs.\n\nI remember reading on a Chromium issue that they would only ever implement the official Webdriver specs.\n\nNow: I know the generic answer, where \"specs are not always followed 100%\" etc. However, what I'd like to know is:\n\n\nCan you find the code in Chromium that implements this? (link would be most welcome)\nHave there been discussions about these in the Chromium mailing list?\nAre the \"unofficial\" commands (which are documented in the \"old\" selenium specs file) likely to stay? Where did you read so?\n\n    ",
        "votes": 33,
        "tags": [
            "google-chrome",
            "selenium",
            "chrome-web-driver",
            "chromium",
            "javascript"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 456,
            "fecha": { "$date" : "2019-04-09 08:41:24Z" },
            "decripcion": "\nYes, you saw it right.\n\nAs per the current WebDriver - W3C Candidate Recommendation the Locator Strategies enlisted are as follows :\n\n\n\"css selector\" : CSS selector\n\"link text\" : Link text selector\n\"partial link text\" : Partial link text selector\n\"tag name\" : Tag name\n\"xpath\" : XPath selector\n\n\nSnapshot :\n\n\n\nHowever, the JsonWireProtocol was once used to support the Locator Strategies enlisted below but currently the documentation clearly states it's Status as OBSOLETE :\n\n\nclass name : Returns an element whose class name contains the search value; compound class names are not permitted.\ncss selector : Returns an element matching a CSS selector.\nid : Returns an element whose ID attribute matches the search value.\nname : Returns an element whose NAME attribute matches the search value.\nlink text : Returns an anchor element whose visible text matches the search value.\npartial link text : Returns an anchor element whose visible text partially matches the search value.\ntag name : Returns an element whose tag name matches the search value.\nxpath : Returns an element matching an XPath expression. The provided XPath expression must be applied to the server \"as is\"; if the expression is not relative to the element root, the server should not modify it. Consequently, an XPath query may return elements not contained in the root element's subtree.\n\n\nSnapshot :\n\n\n\nThe change was propagated through the respective client specific bindings. For the Selenium-Java clients here is the client code where we have the switchcase working for the users :\n\n\n\n        switch (using) {\n          case \"class name\":\n            toReturn.put(\"using\", \"css selector\");\n            toReturn.put(\"value\", \".\" + cssEscape(value));\n            break;\n\n          case \"id\":\n            toReturn.put(\"using\", \"css selector\");\n            toReturn.put(\"value\", \"#\" + cssEscape(value));\n            break;\n\n          case \"link text\":\n            // Do nothing\n            break;\n\n          case \"name\":\n            toReturn.put(\"using\", \"css selector\");\n            toReturn.put(\"value\", \"*[name='\" + value + \"']\");\n            break;\n\n          case \"partial link text\":\n            // Do nothing\n            break;\n\n          case \"tag name\":\n            toReturn.put(\"using\", \"css selector\");\n            toReturn.put(\"value\", cssEscape(value));\n            break;\n\n          case \"xpath\":\n            // Do nothing\n            break;\n        }\n        return toReturn;\n Run code snippetHide resultsExpand snippet\n\n\n\nSnapshot :\n\n\n\nNow, your question must be why this change in the W3C Specs and in the clients. As per #1042 the Answer from the WebDriver Contributors was pretty straight as : \n\n\n  This keeps the specification simple as these can be implemented using the CSS selector, which maps down to querySelector/querySelectorAll.\n\n    ",
            "votes": 24,
            "comentarios": [
                {
                    "decripcion": "While comparing getElementById and querySelector, i found that getElementById is fast. I really don't understand Why id locator is obsolete. Please check: jsperf.com/getelementbyid-vs-queryselector",
                    "fecha": { "$date" : "2018-07-24 16:36:24Z" },
                    "usuario": "Purendra Agrawal",
                    "usuario_id": 766
                }
            ],
            "usuario": "DebanjanB",
            "usuario_id": 767
        },
        "respuestas": [
            456
        ],
        "comentarios": [
            {
                "decripcion": "Chrome driver code is somewhere inside these links on the page - sites.google.com/a/chromium.org/chromedriver/contributing. Some more info that will be helpful in explaining this discrepancy -- github.com/mozilla/geckodriver/issues/1041.",
                "fecha": { "$date" : "2018-01-21 19:24:53Z" },
                "usuario": "Grasshopper",
                "usuario_id": 768
            }
        ],
        "usuario": "Merc",
        "usuario_id": 769
    },
    {
        "_id": 25,
        "titulo": "How do JavaScript closures work?",
        "fecha": { "$date" : "2017-04-09 13:55:17Z" },
        "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question's answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nHow would you explain JavaScript closures to someone with a knowledge of the concepts they consist of (for example functions, variables and the like), but does not understand closures themselves?\n\nI have seen the Scheme example given on Wikipedia, but unfortunately it did not help.\n    ",
        "votes": 7626,
        "tags": [
            "variables",
            "scope",
            "closures",
            "javascript",
            "function"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 457,
            "fecha": { "$date" : "2021-01-26 13:08:51Z" },
            "decripcion": "\nA closure is a pairing of:\n\nA function, and\nA reference to that function's outer scope (lexical environment)\n\nA lexical environment is part of every execution context (stack frame) and is a map between identifiers (ie. local variable names) and values.\nEvery function in JavaScript maintains a reference to its outer lexical environment. This reference is used to configure the execution context created when a function is invoked. This reference enables code inside the function to \"see\" variables declared outside the function, regardless of when and where the function is called.\nIf a function was called by a function, which in turn was called by another function, then a chain of references to outer lexical environments is created. This chain is called the scope chain.\nIn the following code, inner forms a closure with the lexical environment of the execution context created when foo is invoked, closing over variable secret:\n\n\nfunction foo() {\n  const secret = Math.trunc(Math.random()*100)\n  return function inner() {\n    console.log(`The secret number is ${secret}.`)\n  }\n}\nconst f = foo() // `secret` is not directly accessible from outside `foo`\nf() // The only way to retrieve `secret`, is to invoke `f`\n Run code snippetHide resultsExpand snippet\n\n\nIn other words: in JavaScript, functions carry a reference to a private \"box of state\", to which only they (and any other functions declared within the same lexical environment) have access. This box of the state is invisible to the caller of the function, delivering an excellent mechanism for data-hiding and encapsulation.\nAnd remember: functions in JavaScript can be passed around like variables (first-class functions), meaning these pairings of functionality and state can be passed around your program: similar to how you might pass an instance of a class around in C++.\nIf JavaScript did not have closures, then more states would have to be passed between functions explicitly, making parameter lists longer and code noisier.\nSo, if you want a function to always have access to a private piece of state, you can use a closure.\n...and frequently we do want to associate the state with a function. For example, in Java or C++, when you add a private instance variable and a method to a class, you are associating state with functionality.\nIn C and most other common languages, after a function returns, all the local variables are no longer accessible because the stack-frame is destroyed. In JavaScript, if you declare a function within another function, then the local variables of the outer function can remain accessible after returning from it. In this way, in the code above, secret remains available to the function object inner, after it has been returned from foo.\nUses of Closures\nClosures are useful whenever you need a private state associated with a function. This is a very common scenario - and remember: JavaScript did not have a class syntax until 2015, and it still does not have a private field syntax. Closures meet this need.\nPrivate Instance Variables\nIn the following code, the function toString closes over the details of the car.\n\n\nfunction Car(manufacturer, model, year, color) {\n  return {\n    toString() {\n      return `${manufacturer} ${model} (${year}, ${color})`\n    }\n  }\n}\nconst car = new Car('Aston Martin','V8 Vantage','2012','Quantum Silver')\nconsole.log(car.toString())\n Run code snippetHide resultsExpand snippet\n\n\nFunctional Programming\nIn the following code, the function inner closes over both fn and args.\n\n\nfunction curry(fn) {\n  const args = []\n  return function inner(arg) {\n    if(args.length === fn.length) return fn(...args)\n    args.push(arg)\n    return inner\n  }\n}\n\nfunction add(a, b) {\n  return a + b\n}\n\nconst curriedAdd = curry(add)\nconsole.log(curriedAdd(2)(3)()) // 5\n Run code snippetHide resultsExpand snippet\n\n\nEvent-Oriented Programming\nIn the following code, function onClick closes over variable BACKGROUND_COLOR.\n\n\nconst $ = document.querySelector.bind(document)\nconst BACKGROUND_COLOR = 'rgba(200,200,242,1)'\n\nfunction onClick() {\n  $('body').style.background = BACKGROUND_COLOR\n}\n\n$('button').addEventListener('click', onClick)\n<button>Set background color</button>\n Run code snippetHide resultsExpand snippet\n\n\nModularization\nIn the following example, all the implementation details are hidden inside an immediately executed function expression. The functions tick and toString close over the private state and functions they need to complete their work. Closures have enabled us to modularise and encapsulate our code.\n\n\nlet namespace = {};\n\n(function foo(n) {\n  let numbers = []\n  function format(n) {\n    return Math.trunc(n)\n  }\n  function tick() {\n    numbers.push(Math.random() * 100)\n  }\n  function toString() {\n    return numbers.map(format)\n  }\n  n.counter = {\n    tick,\n    toString\n  }\n}(namespace))\n\nconst counter = namespace.counter\ncounter.tick()\ncounter.tick()\nconsole.log(counter.toString())\n Run code snippetHide resultsExpand snippet\n\n\nExamples\nExample 1\nThis example shows that the local variables are not copied in the closure: the closure maintains a reference to the original variables themselves. It is as though the stack-frame stays alive in memory even after the outer function exits.\n\n\nfunction foo() {\n  let x = 42\n  let inner  = function() { console.log(x) }\n  x = x+1\n  return inner\n}\nvar f = foo()\nf() // logs 43\n Run code snippetHide resultsExpand snippet\n\n\nExample 2\nIn the following code, three methods log, increment, and update all close over the same lexical environment.\nAnd every time createObject is called, a new execution context (stack frame) is created and a completely new variable x, and a new set of functions (log etc.) are created, that close over this new variable.\n\n\nfunction createObject() {\n  let x = 42;\n  return {\n    log() { console.log(x) },\n    increment() { x++ },\n    update(value) { x = value }\n  }\n}\n\nconst o = createObject()\no.increment()\no.log() // 43\no.update(5)\no.log() // 5\nconst p = createObject()\np.log() // 42\n Run code snippetHide resultsExpand snippet\n\n\nExample 3\nIf you are using variables declared using var, be careful you understand which variable you are closing over. Variables declared using var are hoisted. This is much less of a problem in modern JavaScript due to the introduction of let and const.\nIn the following code, each time around the loop, a new function inner is created, which closes over i. But because var i is hoisted outside the loop, all of these inner functions close over the same variable, meaning that the final value of i (3) is printed, three times.\n\n\nfunction foo() {\n  var result = []\n  for (var i = 0; i < 3; i++) {\n    result.push(function inner() { console.log(i) } )\n  }\n  return result\n}\n\nconst result = foo()\n// The following will print `3`, three times...\nfor (var i = 0; i < 3; i++) {\n  result[i]() \n}\n Run code snippetHide resultsExpand snippet\n\n\nFinal points:\n\nWhenever a function is declared in JavaScript closure is created.\nReturning a function from inside another function is the classic example of closure, because the state inside the outer function is implicitly available to the returned inner function, even after the outer function has completed execution.\nWhenever you use eval() inside a function, a closure is used. The text you eval can reference local variables of the function, and in the non-strict mode, you can even create new local variables by using eval('var foo = \u2026').\nWhen you use new Function(\u2026) (the Function constructor) inside a function, it does not close over its lexical environment: it closes over the global context instead. The new function cannot reference the local variables of the outer function.\nA closure in JavaScript is like keeping a reference (NOT a copy) to the scope at the point of function declaration, which in turn keeps a reference to its outer scope, and so on, all the way to the global object at the top of the scope chain.\nA closure is created when a function is declared; this closure is used to configure the execution context when the function is invoked.\nA new set of local variables is created every time a function is called.\n\nLinks\n\nDouglas Crockford's simulated private attributes and private methods for an object, using closures.\nA great explanation of how closures can cause memory leaks in IE if you are not careful.\nMDN documentation on JavaScript Closures.\n\n    ",
            "votes": 7876,
            "comentarios": [
                {
                    "decripcion": "JavaScript is actually pretty cool!",
                    "fecha": { "$date" : "2021-09-04 22:58:42Z" },
                    "usuario": "Nearoo",
                    "usuario_id": 770
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            457,
            458,
            459,
            460,
            461,
            462,
            463,
            464,
            465,
            466,
            467,
            468,
            469,
            470,
            471,
            472,
            473,
            474,
            475,
            476,
            477,
            478,
            479,
            480,
            481,
            482,
            483,
            484,
            485,
            486
        ],
        "comentarios": [],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 26,
        "titulo": "How can I get query string values in JavaScript?",
        "fecha": { "$date" : "2015-04-07 00:55:08Z" },
        "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question's answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nIs there a plugin-less way of retrieving query string values via jQuery (or without)? \n\nIf so, how? If not, is there a plugin which can do so?\n    ",
        "votes": 2695,
        "tags": [
            "javascript",
            "url",
            "query-string",
            "plugins"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 487,
            "fecha": { "$date" : "2021-07-26 16:57:51Z" },
            "decripcion": "\nUpdate: June-2021\nFor a specific case when you need all query params:\nconst urlSearchParams = new URLSearchParams(window.location.search);\nconst params = Object.fromEntries(urlSearchParams.entries());\n\nUpdate: Sep-2018\nYou can use URLSearchParams which is simple and has decent (but not complete) browser support.\nconst urlParams = new URLSearchParams(window.location.search);\nconst myParam = urlParams.get('myParam');\n\nOriginal\nYou don't need jQuery for that purpose. You can use just some pure JavaScript:\nfunction getParameterByName(name, url = window.location.href) {\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\nUsage:\n// query string: ?foo=lorem&bar=&baz\nvar foo = getParameterByName('foo'); // \"lorem\"\nvar bar = getParameterByName('bar'); // \"\" (present with empty value)\nvar baz = getParameterByName('baz'); // \"\" (present with no value)\nvar qux = getParameterByName('qux'); // null (absent)\n\nNOTE: If a parameter is present several times (?foo=lorem&foo=ipsum), you will get the first value (lorem). There is no standard about this and usages vary, see for example this question: Authoritative position of duplicate HTTP GET query keys.\nNOTE: The function is case-sensitive. If you prefer case-insensitive parameter name, add 'i' modifier to RegExp\nNOTE: If you're getting a no-useless-escape eslint error, you can replace name = name.replace(/[\\[\\]]/g, '\\\\$&'); with name = name.replace(/[[\\]]/g, '\\\\$&').\n\nThis is an update based on the new URLSearchParams specs to achieve the same result more succinctly. See answer titled \"URLSearchParams\" below.\n    ",
            "votes": 9200,
            "comentarios": [],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            487,
            488,
            489,
            490,
            491,
            492,
            493,
            494,
            495,
            496,
            497,
            498,
            499,
            500,
            501,
            502,
            503,
            504,
            505,
            506,
            507,
            508,
            509,
            510,
            511,
            512,
            513,
            514,
            515,
            516
        ],
        "comentarios": [
            {
                "decripcion": "I use the plugin getUrlParam described in jQuery-Plugin \u2013 getUrlParam (version 2).",
                "fecha": { "$date" : "2009-05-23 08:19:26Z" },
                "usuario": "coma",
                "usuario_id": 792
            },
            {
                "decripcion": "A plain javascript solution without RegEx: css-tricks.com/snippets/javascript/get-url-variables",
                "fecha": { "$date" : "2012-10-29 14:50:39Z" },
                "usuario": "Lorenzo Polidori",
                "usuario_id": 793
            },
            {
                "decripcion": "Although the top solution to the question deserves its popularity because of its excellent observation that jQuery is not needed, its method of creating new regular expressions and re-parsing the query string for every parameter desired is extremely inefficient. Far more efficient (and versatile) solutions have been in existence for a long time, for example within this article reprinted here: htmlgoodies.com/beyond/javascript/article.php/11877_3755006_3/\u2026",
                "fecha": { "$date" : "2013-05-14 06:00:22Z" },
                "usuario": "Joseph Myers",
                "usuario_id": 794
            },
            {
                "decripcion": "possible duplicate of JavaScript query string",
                "fecha": { "$date" : "2013-07-31 23:09:32Z" },
                "usuario": "NA",
                "usuario_id": 53
            },
            {
                "decripcion": "Joseph, the \"excellent observation that jQuery is not needed\"? Of course it's not needed. Everything jQuery does, it does using JavaScript. People don't use jQuery because it does stuff that JavaScript can't do. The point of jQuery is convenience.",
                "fecha": { "$date" : "2014-05-30 01:12:26Z" },
                "usuario": "Vladimir Kornea",
                "usuario_id": 795
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 27,
        "titulo": "What is the explicit promise construction antipattern and how do I avoid it?",
        "fecha": { "$date" : "2018-05-15 18:23:39Z" },
        "decripcion": "\n                \nI was writing code that does something that looks like:\n\nfunction getStuffDone(param) {           | function getStuffDone(param) {\n    var d = Q.defer(); /* or $q.defer */ |     return new Promise(function(resolve, reject) {\n    // or = new $.Deferred() etc.        |     // using a promise constructor\n    myPromiseFn(param+1)                 |         myPromiseFn(param+1)\n    .then(function(val) { /* or .done */ |         .then(function(val) {\n        d.resolve(val);                  |             resolve(val);\n    }).catch(function(err) { /* .fail */ |         }).catch(function(err) {\n        d.reject(err);                   |             reject(err);\n    });                                  |         });\n    return d.promise; /* or promise() */ |     });\n}                                        | }\n\n\nSomeone told me this is called the \"deferred antipattern\" or the \"Promise constructor antipattern\" respectively, what's bad about this code and why is this called an antipattern?\n    ",
        "votes": 574,
        "tags": [
            "promise",
            "es6-promise",
            "q",
            "bluebird",
            "javascript"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 517,
            "fecha": { "$date" : "2017-05-23 12:10:26Z" },
            "decripcion": "\nThe deferred antipattern (now explicit-construction anti-pattern) coined by Esailija is a common anti-pattern people who are new to promises make, I've made it myself when I first used promises. The problem with the above code is that is fails to utilize the fact that promises chain.\n\nPromises can chain with .then and you can return promises directly. Your code in getStuffDone can be rewritten as:\n\nfunction getStuffDone(param){\n    return myPromiseFn(param+1); // much nicer, right?\n}\n\n\nPromises are all about making asynchronous code more readable and behave like synchronous code without hiding that fact. Promises represent an abstraction over a value of one time operation, they abstract the notion of a statement or expression in a programming language.\n\nYou should only use deferred objects when you are converting an API to promises and can't do it automatically, or when you're writing aggregation functions that are easier expressed this way. \n\nQuoting Esailija:\n\n\n  This is the most common anti-pattern. It is easy to fall into this when you don't really understand promises and think of them as glorified event emitters or callback utility. Let's recap: promises are about making asynchronous code retain most of the lost properties of synchronous code such as flat indentation and one exception channel.\n\n    ",
            "votes": 396,
            "comentarios": [
                {
                    "decripcion": "@BenjaminGruenbaum: I'm confident in my use of deferreds for this, so no need for a new question. I just thought it was a use-case you were missing from your answer. What I'm doing seems more like the opposite of aggregation, doesn't it?",
                    "fecha": { "$date" : "2014-09-25 19:43:31Z" },
                    "usuario": "mhelvens",
                    "usuario_id": 796
                },
                {
                    "decripcion": "@mhelvens If you're manually splitting a non-callback API into a promise API that fits the \"converting a callback API to promises\" part. The antipattern is about wrapping a promise in another promise for no good reason, you're not wrapping a promise to begin with so it doesn't apply here.",
                    "fecha": { "$date" : "2014-09-25 19:47:10Z" },
                    "usuario": "Benjamin Gruenbaum",
                    "usuario_id": 489
                },
                {
                    "decripcion": "@BenjaminGruenbaum: Ah, I though deferreds themselves were considered an anti-pattern, what with bluebird deprecating them, and you mentioning \"converting an API to promises\" (which is also a case of not wrapping a promise to begin with).",
                    "fecha": { "$date" : "2014-09-25 20:05:15Z" },
                    "usuario": "mhelvens",
                    "usuario_id": 796
                },
                {
                    "decripcion": "@mhelvens I guess the excess deferred anti pattern would be more accurate for what it actually does. Bluebird deprecated the .defer() api into the newer (and throw safe) promise constructor, it did not (in no way) deprecate the notion of constructing promises :)",
                    "fecha": { "$date" : "2014-09-25 20:06:44Z" },
                    "usuario": "Benjamin Gruenbaum",
                    "usuario_id": 489
                },
                {
                    "decripcion": "Thank you @Roamer-1888 your reference helped me finally figuring out what was my issue. Looks like I was creating nested (unreturned) promises without realising it.",
                    "fecha": { "$date" : "2017-05-30 01:21:12Z" },
                    "usuario": "ghuroo",
                    "usuario_id": 797
                }
            ],
            "usuario": "Benjamin Gruenbaum",
            "usuario_id": 489
        },
        "respuestas": [
            517,
            518,
            519
        ],
        "comentarios": [
            {
                "decripcion": "or is having the catch block in the getStuffDone wrapper the antipattern?",
                "fecha": { "$date" : "2017-01-06 23:45:11Z" },
                "usuario": "The Dembinski",
                "usuario_id": 801
            },
            {
                "decripcion": "At least for the native Promise example you also have unnecessary function wrappers for the .then and .catch handlers (i.e. it could just be .then(resolve).catch(reject).)  A perfect storm of anti-patterns.",
                "fecha": { "$date" : "2017-08-30 17:48:42Z" },
                "usuario": "Noah Freitas",
                "usuario_id": 802
            },
            {
                "decripcion": "@NoahFreitas that code is written that way for didactic purposes. I wrote this question and answer in order to help people who run into this issue after reading a lot of code looking like that :)",
                "fecha": { "$date" : "2017-08-30 18:28:35Z" },
                "usuario": "Benjamin Gruenbaum",
                "usuario_id": 489
            },
            {
                "decripcion": "See also stackoverflow.com/questions/57661537/\u2026 for how to eliminate not only explicit Promise construction, but the use of a global variable as well.",
                "fecha": { "$date" : "2019-08-26 21:01:41Z" },
                "usuario": "David Spector",
                "usuario_id": 798
            },
            {
                "decripcion": "What's up the odd side-by-side code examples? Never seen that here before, find it quite confusing. Had to check the revision history to understand that both are example of the same thing.",
                "fecha": { "$date" : "2021-08-05 10:11:30Z" },
                "usuario": "Alex",
                "usuario_id": 24
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 28,
        "titulo": "Dynamically access object property using variable",
        "fecha": { "$date" : "2017-03-22 16:12:05Z" },
        "decripcion": "\n                \nI'm trying to access a property of an object using a dynamic name. Is this possible?\n\nconst something = { bar: \"Foobar!\" };\nconst foo = 'bar';\nsomething.foo; // The idea is to access something.bar, getting \"Foobar!\"\n\n    ",
        "votes": 843,
        "tags": [
            "javascript",
            "object",
            "properties"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 520,
            "fecha": { "$date" : "2020-09-20 08:54:40Z" },
            "decripcion": "\nThere are two ways to access properties of an object:\n\nDot notation: something.bar\nBracket notation: something['bar']\n\nThe value between the brackets can be any expression. Therefore, if the property name is stored in a variable, you have to use bracket notation:\n\n\nvar something = {\n  bar: 'foo'\n};\nvar foo = 'bar';\n\n// both x = something[foo] and something[foo] = x work as expected\nconsole.log(something[foo]);\nconsole.log(something.bar)\n Run code snippetHide resultsExpand snippet\n\n\n    ",
            "votes": 1137,
            "comentarios": [
                {
                    "decripcion": "careful with this: javascript compilers will error here since they dont rename strings but they do rename object properties",
                    "fecha": { "$date" : "2011-12-06 08:40:12Z" },
                    "usuario": "chacham15",
                    "usuario_id": 803
                },
                {
                    "decripcion": "Some more info on why this is possible: JS objects are associative arrays, that's why. Further Reading: quirksmode.org/js/associative.html stackoverflow.com/questions/14031368/\u2026",
                    "fecha": { "$date" : "2014-06-03 09:00:03Z" },
                    "usuario": "Sudhanshu Mishra",
                    "usuario_id": 804
                },
                {
                    "decripcion": "@dotnetguy No they are not. Arrays are objects that inherit from the plain JS object prototype and therefore you can add properties a go-go like any plain object. The 'associative' behaviour is more object-like than array like. You can't iterate the 'associative' version by simple index so it is not displaying array-like behaviour. You can define your 'associative' array as {} or [] and treat it the same in either case as far as random property access is concerned.",
                    "fecha": { "$date" : "2017-01-03 16:01:11Z" },
                    "usuario": "Vanquished Wombat",
                    "usuario_id": 805
                },
                {
                    "decripcion": "@VanquishedWombat Not sure what your objection pertains to? I did not say that JS Objects are arrays?",
                    "fecha": { "$date" : "2017-01-06 00:30:23Z" },
                    "usuario": "Sudhanshu Mishra",
                    "usuario_id": 804
                },
                {
                    "decripcion": "as a reference to the correct answer , Reference",
                    "fecha": { "$date" : "2017-06-08 21:23:10Z" },
                    "usuario": "youhana",
                    "usuario_id": 806
                }
            ],
            "usuario": "Jan Han\u010di\u010d",
            "usuario_id": 807
        },
        "respuestas": [
            520,
            521,
            522,
            523,
            524,
            525,
            526,
            527,
            528,
            529,
            530,
            531,
            532,
            533,
            534,
            535
        ],
        "comentarios": [
            {
                "decripcion": "See also property access: dot notation vs. brackets? and How do I add a property to an object using a variable as the name?",
                "fecha": { "$date" : "2014-11-18 06:11:39Z" },
                "usuario": "Bergi",
                "usuario_id": 662
            }
        ],
        "usuario": "RichW",
        "usuario_id": 832
    },
    {
        "_id": 29,
        "titulo": "What do querySelectorAll and getElementsBy* methods return?",
        "fecha": { "$date" : "2019-01-07 12:37:26Z" },
        "decripcion": "\n                \nDo getElementsByClassName (and similar functions like getElementsByTagName and querySelectorAll) work the same as getElementById or do they return an array of elements?\n\nThe reason I ask is because I am trying to change the style of all elements using getElementsByClassName. See below.\n\n//doesn't work\ndocument.getElementsByClassName('myElement').style.size = '100px';\n\n//works\ndocument.getElementById('myIdElement').style.size = '100px';\n\n    ",
        "votes": 174,
        "tags": [
            "javascript",
            "getelementsbyclassname",
            "dom-traversal"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 536,
            "fecha": { "$date" : "2021-07-02 13:19:22Z" },
            "decripcion": "\nYour getElementById code works since IDs have to be unique and thus the function always returns exactly one element (or null if none was found).\nHowever, the methods\ngetElementsByClassName,\ngetElementsByName,\ngetElementsByTagName, and\ngetElementsByTagNameNS\nreturn an iterable collection of elements.\nThe method names provide the hint: getElement implies singular, whereas getElements implies plural.\nThe method querySelector also returns a single element, and querySelectorAll returns an iterable collection.\nThe iterable collection can either be a NodeList or an HTMLCollection.\ngetElementsByName and querySelectorAll are both specified to return a NodeList; the other getElementsBy* methods are specified to return an HTMLCollection, but please note that some browser versions implement this differently.\nBoth of these collection types don\u2019t offer the same properties that Elements, Nodes, or similar types offer; that\u2019s why reading style off of document.getElements\u2026(\u2026) fails.\nIn other words: a NodeList or an HTMLCollection doesn\u2019t have a style; only an Element has a style.\n\nThese \u201carray-like\u201d collections are lists that contain zero or more elements, which you need to iterate over, in order to access them.\nWhile you can iterate over them similarly to an array, note that they are different from Arrays.\nIn modern browsers, you can convert these iterables to a proper Array with Array.from; then you can use forEach and other Array methods, e.g. iteration methods:\nArray.from(document.getElementsByClassName(\"myElement\"))\n  .forEach((element) => element.style.size = \"100px\");\n\nIn old browsers that don\u2019t support Array.from or the iteration methods, you can still use Array.prototype.slice.call.\nThen you can iterate over it like you would with a real array:\nvar elements = Array.prototype.slice\n    .call(document.getElementsByClassName(\"myElement\"));\n\nfor(var i = 0; i < elements.length; ++i){\n  elements[i].style.size = \"100px\";\n}\n\nYou can also iterate over the NodeList or HTMLCollection itself, but be aware that in most circumstances, these collections are live (MDN docs, DOM spec), i.e. they are updated as the DOM changes.\nSo if you insert or remove elements as you loop, make sure to not accidentally skip over some elements or create an infinite loop.\nMDN documentation should always note if a method returns a live collection or a static one.\nFor example, a NodeList offers some iteration methods such as forEach in modern browsers:\ndocument.querySelectorAll(\".myElement\")\n  .forEach((element) => element.style.size = \"100px\");\n\nA simple for loop can also be used:\nvar elements = document.getElementsByClassName(\"myElement\");\n\nfor(var i = 0; i < elements.length; ++i){\n  elements[i].style.size = \"100px\";\n}\n\n\nThere are some libraries like jQuery which make DOM querying a bit shorter and create a layer of abstraction over \u201cone element\u201d and \u201ca collection of elements\u201d:\n$(\".myElement\").css(\"size\", \"100px\");\n\n    ",
            "votes": 165,
            "comentarios": [
                {
                    "decripcion": "Does that also apply to <iframe> which is also part of your domain",
                    "fecha": { "$date" : "2016-09-01 01:25:16Z" },
                    "usuario": "Maduro",
                    "usuario_id": 833
                },
                {
                    "decripcion": "It's 2018... Just create a wrapper function for querySelectorAll() and you can have nice short code without a large, old-school dependency. qSA(\".myElement\").forEach(el => el.style.size = \"100px\") Maybe have the wrapper receive a callback. qSA(\".myElement\", el => el.style.size = \"100px\")",
                    "fecha": { "$date" : "2018-04-26 20:40:09Z" },
                    "usuario": "NA",
                    "usuario_id": 53
                },
                {
                    "decripcion": "\"If you prefer something shorter, consider adding a huge library to your project\" I know 2012 was a different time, but even then I would've found that bit to be ludicrous.",
                    "fecha": { "$date" : "2019-05-08 18:38:32Z" },
                    "usuario": "CoryCoolguy",
                    "usuario_id": 834
                },
                {
                    "decripcion": "\"Iterate over it like you would with a real array\u2026 Careful, getElementsByClassName returns a live NodeList that might be unexpectedly modified during the loop, e.g. if the classname that they were selected by is removed. ;-)",
                    "fecha": { "$date" : "2019-11-18 02:54:04Z" },
                    "usuario": "RobG",
                    "usuario_id": 647
                },
                {
                    "decripcion": "The reference to jQuery should probably be removed from this answer, for various reasons: it behaves significantly differently from native DOM methods, it\u2019s not directly relevant to the question asked, and it requires loading a library that is too big just to shorten one or two function calls. The last concern has been valid almost a decade ago, but is even more relevant today as jQuery is losing relevance. Granted, some browsers may cache jQuery internally, but do we really want new devs to adopt the practice of loading a huge library just to use a small subset from it?",
                    "fecha": { "$date" : "2021-07-02 13:21:40Z" },
                    "usuario": "Sebastian Simon",
                    "usuario_id": 573
                }
            ],
            "usuario": "ThiefMaster",
            "usuario_id": 835
        },
        "respuestas": [
            536,
            537,
            538,
            539,
            540,
            541,
            542,
            543,
            544,
            545
        ],
        "comentarios": [
            {
                "decripcion": "The clue is, very much, in the name: getElementsByClassName() implies a plural, whereas getElementById() implies a singular element item.",
                "fecha": { "$date" : "2012-05-21 23:20:09Z" },
                "usuario": "David says reinstate Monica",
                "usuario_id": 685
            },
            {
                "decripcion": "I get that, it just didn't make sense to me that you can't change all the elements with that class name using the code above instead of having to loop through an array. jquery way is much better, i was just curious about the js way",
                "fecha": { "$date" : "2012-05-22 04:34:07Z" },
                "usuario": "dmo",
                "usuario_id": 846
            },
            {
                "decripcion": "Might be useful too: stackoverflow.com/questions/3871547/\u2026",
                "fecha": { "$date" : "2014-07-31 09:19:30Z" },
                "usuario": "kapa",
                "usuario_id": 847
            }
        ],
        "usuario": "dmo",
        "usuario_id": 846
    },
    {
        "_id": 30,
        "titulo": "Client on Node.js: Uncaught ReferenceError: require is not defined",
        "fecha": { "$date" : "2020-12-29 22:41:58Z" },
        "decripcion": "\n                \nI am writing an application with the Node.js, Express.js, and Jade combination.\nI have file client.js, which is loaded on the client. In that file I have code that calls functions from other JavaScript files. My attempt was to use\nvar m = require('./messages');\n\nin order to load the contents of messages.js (just like I do on the server side) and later on call functions from that file. However, require is not defined on the client side, and it throws an error of the form Uncaught ReferenceError: require is not defined.\nThese other JavaScript files are also loaded at runtime at the client, because I place the links at the header of the webpage. So the client knows all the functions that are exported from these other files.\nHow do I call these functions from these other JavaScript files (such as messages.js) in the main client.js file that opens the socket to the server?\n    ",
        "votes": 431,
        "tags": [
            "sockets",
            "node.js",
            "pug",
            "express",
            "javascript"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 546,
            "fecha": { "$date" : "2020-12-29 22:46:44Z" },
            "decripcion": "\nThis is because require() does not exist in the browser/client-side JavaScript.\nNow you're going to have to make some choices about your client-side JavaScript script management.\nYou have three options:\n\nUse the <script> tag.\nUse a CommonJS implementation. It has synchronous dependencies like Node.js\nUse an asynchronous module definition (AMD) implementation.\n\nCommonJS client side-implementations include (most of them require a build step before you deploy):\n\nBrowserify - You can use most Node.js modules in the browser. This is my personal favorite.\nWebpack - Does everything (bundles JavaScript code, CSS, etc.). It was made popular by the surge of React, but it is notorious for its difficult learning curve.\nRollup - a new contender. It leverages ES6 modules and includes tree-shaking abilities (removes unused code).\n\nYou can read more about my comparison of Browserify vs (deprecated) Component.\nAMD implementations include:\n\nRequireJS - Very popular amongst client-side JavaScript developers. It is not my taste because of its asynchronous nature.\n\nNote, in your search for choosing which one to go with, you'll read about Bower. Bower is only for package dependencies and is unopinionated on module definitions like CommonJS and AMD.\n    ",
            "votes": 528,
            "comentarios": [
                {
                    "decripcion": "Thank you very much. I made a mini test separately, this is why it took me a while to respond. I may come back with some questions in a few minutes just to make sure that I understand how this magic worked. I just want to put everything together. Thanks again. Browserify seems to rock! :)",
                    "fecha": { "$date" : "2013-09-27 21:18:29Z" },
                    "usuario": "MightyMouse",
                    "usuario_id": 848
                },
                {
                    "decripcion": "I think JSPM should be added to the list.",
                    "fecha": { "$date" : "2016-02-11 09:12:50Z" },
                    "usuario": "Martijn",
                    "usuario_id": 849
                },
                {
                    "decripcion": "Could I get an example of using the <script> tag to import a React class without the use of a nodeJs package manager?",
                    "fecha": { "$date" : "2016-05-12 16:50:39Z" },
                    "usuario": "Louie Bertoncin",
                    "usuario_id": 850
                },
                {
                    "decripcion": "SystemJS and JSPM are very notable omissions.",
                    "fecha": { "$date" : "2017-05-08 05:10:36Z" },
                    "usuario": "Aluan Haddad",
                    "usuario_id": 522
                },
                {
                    "decripcion": "Yeah. Component is now deprecated github.com/componentjs/component",
                    "fecha": { "$date" : "2017-07-17 12:35:30Z" },
                    "usuario": "i_emmanuel",
                    "usuario_id": 851
                }
            ],
            "usuario": "JP Richardson",
            "usuario_id": 852
        },
        "respuestas": [
            546,
            547,
            548,
            549,
            550,
            551,
            552,
            553,
            554
        ],
        "comentarios": [
            {
                "decripcion": "Why don't you just <script src=\"messages.js\"></script> and call them after that?",
                "fecha": { "$date" : "2013-09-27 20:34:52Z" },
                "usuario": "Sterling Archer",
                "usuario_id": 870
            },
            {
                "decripcion": "Perhaps this can be a solution, but there is another thing that concerns me. I also have a file called \"representation.js\" for abstracting the representation that is common to the client and the server. In that file I also have require statements and on the server side it should be ok because I am running node. However, on the client side this will be an issue. What do you think?",
                "fecha": { "$date" : "2013-09-27 20:45:47Z" },
                "usuario": "MightyMouse",
                "usuario_id": 848
            },
            {
                "decripcion": "For newbies like me (who couldn't even spell \"npm\" a week ago! :-), it may be helpful to understand that browserify's --require option causes require() to be defined on the client side. See: lincolnloop.com/blog/speedy-browserifying-multiple-bundles",
                "fecha": { "$date" : "2016-03-12 18:34:42Z" },
                "usuario": "Hephaestus",
                "usuario_id": 871
            },
            {
                "decripcion": "@Sterling Archer... If there are 100 such files... we can't keep on loading the, in HTML right.........",
                "fecha": { "$date" : "2016-06-09 18:58:21Z" },
                "usuario": "Baradwaj Aryasomayajula",
                "usuario_id": 872
            }
        ],
        "usuario": "MightyMouse",
        "usuario_id": 848
    },
    {
        "_id": 31,
        "titulo": "How do SO_REUSEADDR and SO_REUSEPORT differ?",
        "fecha": { "$date" : "2019-08-21 02:45:17Z" },
        "decripcion": "\n                \nThe man pages and programmer documentations for the socket options SO_REUSEADDR and SO_REUSEPORT are different for different operating systems and often highly confusing. Some operating systems don't even have the option SO_REUSEPORT. The WEB is full of contradicting information regarding this subject and often you can find information that is only true for one socket implementation of a specific operating system, which may not even be explicitly mentioned in the text.\n\nSo how exactly is SO_REUSEADDR different than SO_REUSEPORT?\n\nAre systems without SO_REUSEPORT more limited?\n\nAnd what exactly is the expected behavior if I use either one on different operating systems?\n    ",
        "votes": 748,
        "tags": [
            "sockets",
            "portability",
            "windows",
            "unix",
            "linux"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 555,
            "fecha": { "$date" : "2021-02-19 15:56:42Z" },
            "decripcion": "\nWelcome to the wonderful world of portability... or rather the lack of it. Before we start analyzing these two options in detail and take a deeper look how different operating systems handle them, it should be noted that the BSD socket implementation is the mother of all socket implementations. Basically all other systems copied the BSD socket implementation at some point in time (or at least its interfaces) and then started evolving it on their own. Of course the BSD socket implementation was evolved as well at the same time and thus systems that copied it later got features that were lacking in systems that copied it earlier. Understanding the BSD socket implementation is the key to understanding all other socket implementations, so you should read about it even if you don't care to ever write code for a BSD system.\nThere are a couple of basics you should know before we look at these two options. A TCP/UDP connection is identified by a tuple of five values:\n{<protocol>, <src addr>, <src port>, <dest addr>, <dest port>}\nAny unique combination of these values identifies a connection. As a result, no two connections can have the same five values, otherwise the system would not be able to distinguish these connections any longer.\nThe protocol of a socket is set when a socket is created with the socket() function. The source address and port are set with the bind() function. The destination address and port are set with the connect() function. Since UDP is a connectionless protocol, UDP sockets can be used without connecting them. Yet it is allowed to connect them and in some cases very advantageous for your code and general application design. In connectionless mode, UDP sockets that were not explicitly bound when data is sent over them for the first time are usually automatically bound by the system, as an unbound UDP socket cannot receive any (reply) data. Same is true for an unbound TCP socket, it is automatically bound before it will be connected.\nIf you explicitly bind a socket, it is possible to bind it to port 0, which means \"any port\". Since a socket cannot really be bound to all existing ports, the system will have to choose a specific port itself in that case (usually from a predefined, OS specific range of source ports). A similar wildcard exists for the source address, which can be \"any address\" (0.0.0.0 in case of IPv4 and :: in case of IPv6). Unlike in case of ports, a socket can really be bound to \"any address\" which means \"all source IP addresses of all local interfaces\". If the socket is connected later on, the system has to choose a specific source IP address, since a socket cannot be connected and at the same time be bound to any local IP address. Depending on the destination address and the content of the routing table, the system will pick an appropriate source address and replace the \"any\" binding with a binding to the chosen source IP address.\nBy default, no two sockets can be bound to the same combination of source address and source port. As long as the source port is different, the source address is actually irrelevant. Binding socketA to ipA:portA and socketB to ipB:portB is always possible if ipA != ipB holds true, even when portA == portB. E.g. socketA belongs to a FTP server program and is bound to 192.168.0.1:21 and socketB belongs to another FTP server program and is bound to 10.0.0.1:21, both bindings will succeed. Keep in mind, though, that a socket may be locally bound to \"any address\". If a socket is bound to 0.0.0.0:21, it is bound to all existing local addresses at the same time and in that case no other socket can be bound to port 21, regardless which specific IP address it tries to bind to, as 0.0.0.0 conflicts with all existing local IP addresses.\nAnything said so far is pretty much equal for all major operating system. Things start to get OS specific when address reuse comes into play. We start with BSD, since as I said above, it is the mother of all socket implementations.\nBSD\nSO_REUSEADDR\nIf SO_REUSEADDR is enabled on a socket prior to binding it, the socket can be successfully bound unless there is a conflict with another socket bound to exactly the same combination of source address and port. Now you may wonder how is that any different than before? The keyword is \"exactly\". SO_REUSEADDR mainly changes the way how wildcard addresses (\"any IP address\") are treated when searching for conflicts.\nWithout SO_REUSEADDR, binding socketA to 0.0.0.0:21 and then binding socketB to 192.168.0.1:21 will fail (with error EADDRINUSE), since 0.0.0.0 means \"any local IP address\", thus all local IP addresses are considered in use by this socket and this includes 192.168.0.1, too. With SO_REUSEADDR it will succeed, since 0.0.0.0 and 192.168.0.1 are not exactly the same address, one is a wildcard for all local addresses and the other one is a very specific local address. Note that the statement above is true regardless in which order socketA and socketB are bound; without SO_REUSEADDR it will always fail, with SO_REUSEADDR it will always succeed.\nTo give you a better overview, let's make a table here and list all possible combinations:\nSO_REUSEADDR       socketA        socketB       Result\n---------------------------------------------------------------------\n  ON/OFF       192.168.0.1:21   192.168.0.1:21    Error (EADDRINUSE)\n  ON/OFF       192.168.0.1:21      10.0.0.1:21    OK\n  ON/OFF          10.0.0.1:21   192.168.0.1:21    OK\n   OFF             0.0.0.0:21   192.168.1.0:21    Error (EADDRINUSE)\n   OFF         192.168.1.0:21       0.0.0.0:21    Error (EADDRINUSE)\n   ON              0.0.0.0:21   192.168.1.0:21    OK\n   ON          192.168.1.0:21       0.0.0.0:21    OK\n  ON/OFF           0.0.0.0:21       0.0.0.0:21    Error (EADDRINUSE)\n\nThe table above assumes that socketA has already been successfully bound to the address given for socketA, then socketB is created, either gets SO_REUSEADDR set or not, and finally is bound to the address given for socketB. Result is the result of the bind operation for socketB. If the first column says ON/OFF, the value of SO_REUSEADDR is irrelevant to the result.\nOkay, SO_REUSEADDR has an effect on wildcard addresses, good to know. Yet that isn't it's only effect it has. There is another well known effect which is also the reason why most people use SO_REUSEADDR in server programs in the first place. For the other important use of this option we have to take a deeper look on how the TCP protocol works.\nA socket has a send buffer and if a call to the send() function succeeds, it does not mean that the requested data has actually really been sent out, it only means the data has been added to the send buffer. For UDP sockets, the data is usually sent pretty soon, if not immediately, but for TCP sockets, there can be a relatively long delay between adding data to the send buffer and having the TCP implementation really send that data. As a result, when you close a TCP socket, there may still be pending data in the send buffer, which has not been sent yet but your code considers it as sent, since the send() call succeeded. If the TCP implementation was closing the socket immediately on your request, all of this data would be lost and your code wouldn't even know about that. TCP is said to be a reliable protocol and losing data just like that is not very reliable. That's why a socket that still has data to send will go into a state called TIME_WAIT when you close it. In that state it will wait until all pending data has been successfully sent or until a timeout is hit, in which case the socket is closed forcefully.\nAt most, the amount of time the kernel will wait before it closes the socket, regardless if it still has data in flight or not, is called the Linger Time. The Linger Time is globally configurable on most systems and by default rather long (two minutes is a common value you will find on many systems). It is also configurable per socket using the socket option SO_LINGER which can be used to make the timeout shorter or longer, and even to disable it completely. Disabling it completely is a very bad idea, though, since closing a TCP socket gracefully is a slightly complex process and involves sending forth and back a couple of packets (as well as resending those packets in case they got lost) and this whole close process is also limited by the Linger Time. If you disable lingering, your socket may not only lose data in flight, it is also always closed forcefully instead of gracefully, which is usually not recommended. The details about how a TCP connection is closed gracefully are beyond the scope of this answer, if you want to learn more about, I recommend you have a look at this page. And even if you disabled lingering with SO_LINGER, if your process dies without explicitly closing the socket, BSD (and possibly other systems) will linger nonetheless, ignoring what you have configured. This will happen for example if your code just calls exit() (pretty common for tiny, simple server programs) or the process is killed by a signal (which includes the possibility that it simply crashes because of an illegal memory access). So there is nothing you can do to make sure a socket will never linger under all circumstances.\nThe question is, how does the system treat a socket in state TIME_WAIT? If SO_REUSEADDR is not set, a socket in state TIME_WAIT is considered to still be bound to the source address and port and any attempt to bind a new socket to the same address and port will fail until the socket has really been closed, which may take as long as the configured Linger Time. So don't expect that you can rebind the source address of a socket immediately after closing it. In most cases this will fail. However, if SO_REUSEADDR is set for the socket you are trying to bind, another socket bound to the same address and port in state TIME_WAIT is simply ignored, after all its already \"half dead\", and your socket can bind to exactly the same address without any problem. In that case it plays no role that the other socket may have exactly the same address and port. Note that binding a socket to exactly the same address and port as a dying socket in TIME_WAIT state can have unexpected, and usually undesired, side effects in case the other socket is still \"at work\", but that is beyond the scope of this answer and fortunately those side effects are rather rare in practice.\nThere is one final thing you should know about SO_REUSEADDR. Everything written above will work as long as the socket you want to bind to has address reuse enabled. It is not necessary that the other socket, the one which is already bound or is in a TIME_WAIT state, also had this flag set when it was bound. The code that decides if the bind will succeed or fail only inspects the SO_REUSEADDR flag of the socket fed into the bind() call, for all other sockets inspected, this flag is not even looked at.\nSO_REUSEPORT\nSO_REUSEPORT is what most people would expect SO_REUSEADDR to be. Basically, SO_REUSEPORT allows you to bind an arbitrary number of sockets to exactly the same source address and port as long as all prior bound sockets also had SO_REUSEPORT set before they were bound. If the first socket that is bound to an address and port does not have SO_REUSEPORT set, no other socket can be bound to exactly the same address and port, regardless if this other socket has SO_REUSEPORT set or not, until the first socket releases its binding again. Unlike in case of SO_REUESADDR the code handling SO_REUSEPORT will not only verify that the currently bound socket has SO_REUSEPORT set but it will also verify that the socket with a conflicting address and port had SO_REUSEPORT set when it was bound.\nSO_REUSEPORT does not imply SO_REUSEADDR. This means if a socket did not have SO_REUSEPORT set when it was bound and another socket has SO_REUSEPORT set when it is bound to exactly the same address and port, the bind fails, which is expected, but it also fails if the other socket is already dying and is in TIME_WAIT state. To be able to bind a socket to the same addresses and port as another socket in TIME_WAIT state requires either SO_REUSEADDR to be set on that socket or SO_REUSEPORT must have been set on both sockets prior to binding them. Of course it is allowed to set both, SO_REUSEPORT and SO_REUSEADDR, on a socket.\nThere is not much more to say about SO_REUSEPORT other than that it was added later than SO_REUSEADDR, that's why you will not find it in many socket implementations of other systems, which \"forked\" the BSD code before this option was added, and that there was no way to bind two sockets to exactly the same socket address in BSD prior to this option.\nConnect() Returning EADDRINUSE?\nMost people know that bind() may fail with the error EADDRINUSE, however, when you start playing around with address reuse, you may run into the strange situation that connect() fails with that error as well. How can this be? How can a remote address, after all that's what connect adds to a socket, be already in use? Connecting multiple sockets to exactly the same remote address has never been a problem before, so what's going wrong here?\nAs I said on the very top of my reply, a connection is defined by a tuple of five values, remember? And I also said, that these five values must be unique otherwise the system cannot distinguish two connections any longer, right? Well, with address reuse, you can bind two sockets of the same protocol to the same source address and port. That means three of those five values are already the same for these two sockets. If you now try to connect both of these sockets also to the same destination address and port, you would create two connected sockets, whose tuples are absolutely identical. This cannot work, at least not for TCP connections (UDP connections are no real connections anyway). If data arrived for either one of the two connections, the system could not tell which connection the data belongs to. At least the destination address or destination port must be different for either connection, so that the system has no problem to identify to which connection incoming data belongs to.\nSo if you bind two sockets of the same protocol to the same source address and port and try to connect them both to the same destination address and port, connect() will actually fail with the error EADDRINUSE for the second socket you try to connect, which means that a socket with an identical tuple of five values is already connected.\nMulticast Addresses\nMost people ignore the fact that multicast addresses exist, but they do exist. While unicast addresses are used for one-to-one communication, multicast addresses are used for one-to-many communication. Most people got aware of multicast addresses when they learned about IPv6 but multicast addresses also existed in IPv4, even though this feature was never widely used on the public Internet.\nThe meaning of SO_REUSEADDR changes for multicast addresses as it allows multiple sockets to be bound to exactly the same combination of source multicast address and port. In other words, for multicast addresses SO_REUSEADDR behaves exactly as SO_REUSEPORT for unicast addresses. Actually, the code treats SO_REUSEADDR and SO_REUSEPORT identically for multicast addresses, that means you could say that SO_REUSEADDR implies SO_REUSEPORT for all multicast addresses and the other way round.\nFreeBSD/OpenBSD/NetBSD\nAll these are rather late forks of the original BSD code, that's why they all three offer the same options as BSD and they also behave the same way as in BSD.\nmacOS (MacOS X)\nAt its core, macOS is simply a BSD-style UNIX named \"Darwin\", based on a rather late fork of the BSD code (BSD 4.3), which was then later on even re-synchronized with the (at that time current) FreeBSD 5 code base for the Mac OS 10.3 release, so that Apple could gain full POSIX compliance (macOS is POSIX certified). Despite having a microkernel at its core (\"Mach\"), the rest of the kernel (\"XNU\") is basically just a BSD kernel, and that's why macOS offers the same options as BSD and they also behave the same way as in BSD.\niOS / watchOS / tvOS\niOS is just a macOS fork with a slightly modified and trimmed kernel, somewhat stripped down user space toolset and a slightly different default framework set. watchOS and tvOS are iOS forks, that are stripped down even further (especially watchOS). To my best knowledge they all behave exactly as macOS does.\nLinux\nLinux < 3.9\nPrior to Linux 3.9, only the option SO_REUSEADDR existed. This option behaves generally the same as in BSD with two important exceptions:\n\nAs long as a listening (server) TCP socket is bound to a specific port, the SO_REUSEADDR option is entirely ignored for all sockets targeting that port. Binding a second socket to the same port is only possible if it was also possible in BSD without having SO_REUSEADDR set. E.g. you cannot bind to a wildcard address and then to a more specific one or the other way round, both is possible in BSD if you set SO_REUSEADDR. What you can do is you can bind to the same port and two different non-wildcard addresses, as that's always allowed. In this aspect Linux is more restrictive than BSD.\n\nThe second exception is that for client sockets, this option behaves exactly like SO_REUSEPORT in BSD, as long as both had this flag set before they were bound. The reason for allowing that was simply that it is important to be able to bind multiple sockets to exactly to the same UDP socket address for various protocols and as there used to be no SO_REUSEPORT prior to 3.9, the behavior of SO_REUSEADDR was altered accordingly to fill that gap. In that aspect Linux is less restrictive than BSD.\n\n\nLinux >= 3.9\nLinux 3.9 added the option SO_REUSEPORT to Linux as well. This option behaves exactly like the option in BSD and allows binding to exactly the same address and port number as long as all sockets have this option set prior to binding them.\nYet, there are still two differences to SO_REUSEPORT on other systems:\n\nTo prevent \"port hijacking\", there is one special limitation: All sockets that want to share the same address and port combination must belong to processes that share the same effective user ID! So one user cannot \"steal\" ports of another user. This is some special magic to somewhat compensate for the missing SO_EXCLBIND/SO_EXCLUSIVEADDRUSE flags.\n\nAdditionally the kernel performs some \"special magic\" for SO_REUSEPORT sockets that isn't found in other operating systems: For UDP sockets, it tries to distribute datagrams evenly, for TCP listening sockets, it tries to distribute incoming connect requests (those accepted by calling accept())  evenly across all the sockets that share the same address and port combination. Thus an application can easily open the same port in multiple child processes and then use SO_REUSEPORT to get a very inexpensive load balancing.\n\n\nAndroid\nEven though the whole Android system is somewhat different from most Linux distributions, at its core works a slightly modified Linux kernel, thus everything that applies to Linux should apply to Android as well.\nWindows\nWindows only knows the SO_REUSEADDR option, there is no SO_REUSEPORT. Setting SO_REUSEADDR on a socket in Windows behaves like setting SO_REUSEPORT and SO_REUSEADDR on a socket in BSD, with one exception:\nPrior to Windows 2003, a socket with SO_REUSEADDR could always been bound to exactly the same source address and port as an already bound socket, even if the other socket did not have this option set when it was bound. This behavior allowed an application \"to steal\" the connected port of another application. Needless to say that this has major security implications!\nMicrosoft realized that and added another important socket option: SO_EXCLUSIVEADDRUSE. Setting SO_EXCLUSIVEADDRUSE on a socket makes sure that if the binding succeeds, the combination of source address and port is owned exclusively by this socket and no other socket can bind to them, not even if it has SO_REUSEADDR set.\nThis default behavior was changed first in Windows 2003, Microsoft calls that \"Enhanced Socket Security\" (funny name for a behavior that is default on all other major operating systems). For more details just visit this page. There are three tables: The first one shows the classic behavior (still in use when using compatibility modes!), the second one shows the behavior of Windows 2003 and up when the bind() calls are made by the same user, and the third one when the bind() calls are made by different users.\nSolaris\nSolaris is the successor of SunOS. SunOS was originally based on a fork of BSD, SunOS 5 and later was based on a fork of SVR4, however SVR4 is a merge of BSD, System V, and Xenix, so up to some degree Solaris is also a BSD fork, and a rather early one. As a result Solaris only knows SO_REUSEADDR, there is no SO_REUSEPORT. The SO_REUSEADDR behaves pretty much the same as it does in BSD. As far as I know there is no way to get the same behavior as SO_REUSEPORT in Solaris, that means it is not possible to bind two sockets to exactly the same address and port.\nSimilar to Windows, Solaris has an option to give a socket an exclusive binding. This option is named SO_EXCLBIND. If this option is set on a socket prior to binding it, setting SO_REUSEADDR on another socket has no effect if the two sockets are tested for an address conflict. E.g. if socketA is bound to a wildcard address and socketB has SO_REUSEADDR enabled and is bound to a non-wildcard address and the same port as socketA, this bind will normally succeed, unless socketA had SO_EXCLBIND enabled, in which case it will fail regardless the SO_REUSEADDR flag of socketB.\nOther Systems\nIn case your system is not listed above, I wrote a little test program that you can use to find out how your system handles these two options. Also if you think my results are wrong, please first run that program before posting any comments and possibly making false claims.\nAll that the code requires to build is a bit POSIX API (for the network parts) and a C99 compiler (actually most non-C99 compiler will work as well as long as they offer inttypes.h and stdbool.h; e.g. gcc supported both long before offering full C99 support).\nAll that the program needs to run is that at least one interface in your system (other than the local interface) has an IP address assigned and that a default route is set which uses that interface. The program will gather that IP address and use it as the second \"specific address\".\nIt tests all possible combinations you can think of:\n\nTCP and UDP protocol\nNormal sockets, listen (server) sockets, multicast sockets\nSO_REUSEADDR set on socket1, socket2, or both sockets\nSO_REUSEPORT set on socket1, socket2, or both sockets\nAll address combinations you can make out of 0.0.0.0 (wildcard), 127.0.0.1 (specific address), and the second specific address found at your primary interface (for multicast it's just 224.1.2.3 in all tests)\n\nand prints the results in a nice table. It will also work on systems that don't know SO_REUSEPORT, in which case this option is simply not tested.\nWhat the program cannot easily test is how SO_REUSEADDR acts on sockets in TIME_WAIT state as it's very tricky to force and keep a socket in that state. Fortunately most operating systems seems to simply behave like BSD here and most of the time programmers can simply ignore the existence of that state.\nHere's the code (I cannot include it here, answers have a size limit and the code would push this reply over the limit).\n    ",
            "votes": 1853,
            "comentarios": [
                {
                    "decripcion": "For example, \"source address\" really should be \"local address\", the next three fields likewise.  Binding with INADDR_ANY doesn't bind existing local addresses, but all future ones as well.  listen certainly creates sockets with the same exact protocol, local address, and local port, even though you said that isn't possible.",
                    "fecha": { "$date" : "2013-07-12 00:13:44Z" },
                    "usuario": "Ben Voigt",
                    "usuario_id": 873
                },
                {
                    "decripcion": "@Ben Source and Destination are the official terms used for IP addressing (to which I primary refer). Local and Remote would make no sense, since the Remote address can in fact be a \"Local\" address and the opposite of Destination is Source and not Local. I don't know what your issue is with INADDR_ANY, I never said it would not bind to future addresses. And listen does not create any sockets at all, which makes your whole sentence a little bit strange.",
                    "fecha": { "$date" : "2013-07-26 10:51:08Z" },
                    "usuario": "Mecki",
                    "usuario_id": 874
                },
                {
                    "decripcion": "@Ben When a new address is added to the system, it is also an \"existing local address\", it just started to exist. I did not say \"to all currently existing local addresses\". Actually I even say that the socket is in fact really bound to the wildcard, which means the socket is bound to whatever matches this wildcard, now, tomorrow and in hundred years. Similar for source and destination, you are just nitpicking here. Do you have any real technical contribution to make?",
                    "fecha": { "$date" : "2013-07-26 13:40:13Z" },
                    "usuario": "Mecki",
                    "usuario_id": 874
                },
                {
                    "decripcion": "@Mecki: You really think that the word existing includes things that do not exist now but will in the future?  Source and destination is not a nitpick.  When incoming packets are matched to a socket, you're saying that the destination address in the packet will be matched against a \"source\" address of the socket?  That's wrong and you know it, you already said that source and destination are opposites.  The local address on the socket is matched against the destination address of incoming packets, and placed in the source address on outgoing packets.",
                    "fecha": { "$date" : "2013-07-26 13:56:08Z" },
                    "usuario": "Ben Voigt",
                    "usuario_id": 873
                },
                {
                    "decripcion": "@Mecki: That makes so much more sense if you say \"The local address of the socket is the source address of outgoing packets and the destination address of incoming packets\".  Packets have source and destination addresses.  Hosts, and sockets on hosts, don't.  For datagram sockets both peers are equal.  For TCP sockets, because of the three-way handshake, there's an originator (client) and a responder (server), but that still doesn't mean the connection or connected sockets have a source and destination either, because traffic flows both ways.",
                    "fecha": { "$date" : "2013-08-20 14:23:38Z" },
                    "usuario": "Ben Voigt",
                    "usuario_id": 873
                }
            ],
            "usuario": "Mecki",
            "usuario_id": 874
        },
        "respuestas": [
            555,
            556
        ],
        "comentarios": [],
        "usuario": "Mecki",
        "usuario_id": 874
    },
    {
        "_id": 32,
        "titulo": "Official reasons for \"Software caused connection abort: socket write error\"",
        "fecha": { "$date" : "2010-01-24 09:52:04Z" },
        "decripcion": "\n                \nGiven this stack trace snippet\n\n\n  Caused by: java.net.SocketException:\n  Software caused connection abort:\n  socket write error \u00a0at\n  java.net.SocketOutputStream.socketWrite0(Native\n  Method)\n\n\nI tried to answer the following questions:\n\n\nWhat code is throwing this exception? (JVM?/Tomcat?/My code?)\nWhat causes this exception to be thrown?\n\n\nRegarding #1: \n\nSun's JVM source doesn't contain this exact message, but I think the text Software caused connection abort: socket write error is from the native implementation of SocketOutputStream:\n\nprivate native void socketWrite0(FileDescriptor fd, byte[] b, int off,\n                 int len) throws IOException;\n\n\nRegarding #2\n\nMy guess is that it is caused when the client has terminated the connection, before getting the full response (e.g. sent a request, but before getting the full response, it got closed / terminated / offline)\n\nQuestions:\n\n\nAre the above assumptions correct (#1 and #2)?\nCan this be diffrentiated from the situation: \"could not write to the client, due to a network error on the server side\"? or would that render the same error message?\nAnd most important: Is there an official document (e.g from Sun) stating the above?\n\n\nI need to have a proof that this stack trace is the socket client's \"fault\", and there is nothing that the server could have done to avoid it. (except catching the exception, or using a non Sun JVM SocketOutputStream, though both don't really avoid the fact the client has terminated)\n    ",
        "votes": 163,
        "tags": [
            "sockets",
            "tomcat",
            "stack-trace",
            "java",
            "exception"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 557,
            "fecha": { "$date" : "2019-01-13 14:12:41Z" },
            "decripcion": "\n\n  This error can occur when the local network system aborts a\n  connection, such as when WinSock closes an established connection\n  after data retransmission fails (receiver never acknowledges data sent\n  on a datastream socket).\n\n\nSee this MSDN article. See also Some information about 'Software caused connection abort'.\n    ",
            "votes": 56,
            "comentarios": [
                {
                    "decripcion": "WSAECONNABORTED - An understandable explanation",
                    "fecha": { "$date" : "2012-11-21 02:18:33Z" },
                    "usuario": "Mat Gessel",
                    "usuario_id": 876
                },
                {
                    "decripcion": "@MatGessel That article just repeats the confusion, and adds some of its own. WSAECONNABORTED is a Winsock error code, so there cannot possibly be a Berkeley explanation for it. The situation described about the HTTP server would produce ECONNRESET, not WSAECONNABORTED.",
                    "fecha": { "$date" : "2012-12-04 22:13:34Z" },
                    "usuario": "user207421",
                    "usuario_id": 877
                },
                {
                    "decripcion": "@EJP,  \t I am also getting this exception while sending/writing (outs.write(audioBytes);) byte[] in to OutputStream. When audio is plying and while playing if user clicks on any other menu (which send an server request) I got the same error on console. so is it safe to ignore this exception?",
                    "fecha": { "$date" : "2015-03-10 06:47:46Z" },
                    "usuario": "Amogh",
                    "usuario_id": 878
                },
                {
                    "decripcion": "@rustyx All three sources cited here state that it is produced by ACK failures. If you have a source for your own claim please cite it.",
                    "fecha": { "$date" : "2015-05-27 05:52:36Z" },
                    "usuario": "user207421",
                    "usuario_id": 877
                },
                {
                    "decripcion": "This is not a real answer as it doesn't give you information to pursue the problem further. The answer here is basically \"something bad happened on the network\". It would be really helpful to understand what further logs and other records of activity could allow me to pinpoint the underlying issue.",
                    "fecha": { "$date" : "2017-03-20 14:05:31Z" },
                    "usuario": "Derek Bennett",
                    "usuario_id": 879
                }
            ],
            "usuario": "user207421",
            "usuario_id": 877
        },
        "respuestas": [
            557,
            558,
            559,
            560,
            561,
            562,
            563,
            564,
            565,
            566,
            567,
            568,
            569
        ],
        "comentarios": [
            {
                "decripcion": "I have this issue when cancelling a download with Firefox",
                "fecha": { "$date" : "2013-10-25 17:26:37Z" },
                "usuario": "koppor",
                "usuario_id": 896
            },
            {
                "decripcion": "Hey Eran I am also getting this exception while sending/writing (outs.write(audioBytes);) byte[] in to OutputStream. When audio is plying and while playing if user clicks on any other menu (which send an server request) I got the same error on console. so is it safe to ignore this exception?",
                "fecha": { "$date" : "2015-03-10 06:46:19Z" },
                "usuario": "Amogh",
                "usuario_id": 878
            },
            {
                "decripcion": "@Amogh - It seems so, yes. Basically from what the answers describe, this is a Windows specific error, but I assume on Linux you'll get the same exception just with a different wording... (My laymen terms understanding of it is basically that this is caused when you send via a socket to some remote location X and X got disconnected in the middle, but I'm sure it's not the most accurate way to describe it)",
                "fecha": { "$date" : "2015-03-10 18:35:42Z" },
                "usuario": "Eran Medan",
                "usuario_id": 885
            },
            {
                "decripcion": "For me this happened when the database server was restarted and the application was still trying to query using connections previously opened. Not sure why these were not refreshed as we're using DBCP based pooling. But restarting the application fixed the problem.",
                "fecha": { "$date" : "2017-02-15 17:57:44Z" },
                "usuario": "Kshitiz Sharma",
                "usuario_id": 897
            }
        ],
        "usuario": "Eran Medan",
        "usuario_id": 885
    },
    {
        "_id": 33,
        "titulo": "Socket using in a swing applet",
        "fecha": { "$date" : "2012-02-05 08:53:06Z" },
        "decripcion": "\n                \nI should made a server & client in Java,based on Swing and gui.I neeed to make somehow a socket that will go from the server to the client and from the client to the server, and will pass some kind of a string.I would like to have later a function that would do several things according to the string that would be in the socket.\nFor some reason I couldn't find a simple example for code that shows how it's done in a simple way.\nAnyone has any simple example or can explain how is it being done?\n    ",
        "votes": 23,
        "tags": [
            "web-applications",
            "java",
            "sockets",
            "swing"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            570,
            571
        ],
        "comentarios": [],
        "usuario": "Inbal",
        "usuario_id": 900
    },
    {
        "_id": 34,
        "titulo": "Java socket API: How to tell if a connection has been closed?",
        "fecha": { "$date" : "2015-10-02 21:53:52Z" },
        "decripcion": "\n                \nI am running into some issues with the Java socket API. I am trying to display the number of players currently connected to my game.  It is easy to determine when a player has connected.  However, it seems unnecessarily difficult to determine when a player has disconnected using the socket API.\n\nCalling isConnected() on a socket that has been disconnected remotely always seems to return true.  Similarly, calling isClosed() on a socket that has been closed remotely always seems to return false.  I have read that to actually determine whether or not a socket has been closed, data must be written to the output stream and an exception must be caught.  This seems like a really unclean way to handle this situation.  We would just constantly have to spam a garbage message over the network to ever know when a socket had closed.\n\nIs there any other solution?\n    ",
        "votes": 102,
        "tags": [
            "networking",
            "java",
            "client-server",
            "sockets"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            572,
            573,
            574,
            575,
            576,
            577,
            578,
            579,
            580
        ],
        "comentarios": [],
        "usuario": "Dan Brouwer",
        "usuario_id": 917
    },
    {
        "_id": 35,
        "titulo": "What's causing my java.net.SocketException: Connection reset? [duplicate]",
        "fecha": { "$date" : "2019-07-10 03:42:09Z" },
        "decripcion": "\n                    \n            \n        \n            \n                \n                    \n                        This question already has answers here:\n                        \n                    \n                \n            \n                    \n                        java.net.SocketException: Connection reset\n                            \n                                (12 answers)\n                            \n                    \n                Closed 2 years ago.\n        \n\n\n    \n\nWe are seeing frequent but intermittent  java.net.SocketException: Connection reset errors in our logs. We are unsure as to where the Connection reset error is actually coming from, and how to go about debugging.\n\nThe issue appears to be unrelated to the messages we are attempting to send.\nNote that the message is not connection reset by peer.\n\nAny suggestions on what the typical causes of this exception might be, and how we might proceed?\n\nHere is a representative stack trace (com.companyname.mtix.sms is our component):\n\n    java.net.SocketException: Connection reset\n        at java.net.SocketInputStream.read(SocketInputStream.java:168)\n        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)\n        at java.io.BufferedInputStream.read(BufferedInputStream.java:235)\n        at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:77)\n        at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:105)\n        at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1115)\n        at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1832)\n        at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1590)\n        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:995)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:397)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:170)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)\n        at com.companyname.mtix.sms.services.impl.message.SendTextMessage.sendTextMessage(SendTextMessage.java:127)\n        at com.companyname.mtix.sms.services.MessageServiceImpl.sendTextMessage(MessageServiceImpl.java:125)\n        at com.companyname.mtix.sms.services.remote.MessageServiceRemoteImpl.sendTextMessage(MessageServiceRemoteImpl.java:43)\n        at sun.reflect.GeneratedMethodAccessor203.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)\n        at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)\n        at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)\n        at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)\n        at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)\n        at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)\n        at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:453)\n        at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)\n        at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)\n        at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n        at com.companyname.mtix.sms.http.filters.NoCacheFilter.doFilter(NoCacheFilter.java:63)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n        at com.companyname.mtix.sms.http.filters.MessageFilter.doFilter(MessageFilter.java:53)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:61)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n        at org.ajaxanywhere.AAFilter.doFilter(AAFilter.java:46)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)\n        at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)\n        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)\n        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)\n        at java.lang.Thread.run(Thread.java:595)\n    \n\n\n\nOur component is a web application, running under Tomcat, that calls a third party Web service that sends SMS messages, it so happens. The line of our code on which the exception gets thrown from is the last line in the code snippet below.\n\nString aggregatorResponse = null;\nHttpClient httpClient = prepareHttpClient( username, password );\nPostMethod postMethod = preparePostMethod( textUrl );\n\ntry {\n  SybaseTextMessageBuilder builder = new SybaseTextMessageBuilder();\n  URL notifyUrl = buildNotificationUrl( textMessage, codeSetManager );\n  String smsRequestDocument = builder.buildTextMessage( textMessage, notifyUrl );\n  LOG.debug( \"Sybase MT document created as: \\n\" + smsRequestDocument );\n\n  postMethod.setRequestEntity( new StringRequestEntity( smsRequestDocument ) );\n  LOG.debug( \"commiting SMS to aggregator: \" + textMessage.toString() );\n  int httpStatus = httpClient.executeMethod( postMethod );\n\n    ",
        "votes": 147,
        "tags": [
            "connection-reset",
            "java",
            "sockets",
            "socketexception"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 581,
            "fecha": { "$date" : "2009-02-25 11:30:57Z" },
            "decripcion": "\nThe javadoc for SocketException states that it is\n\n\n  Thrown to indicate that there is an error in the underlying protocol such as a TCP error\n\n\nIn your case it seems that the connection has been closed by the server end of the connection. This could be an issue with the request you are sending or an issue at their end.\n\nTo aid debugging you could look at using a tool such as Wireshark to view the actual network packets. Also, is there an alternative client to your Java code that you could use to test the web service? If this was successful it could indicate a bug in the Java code.\n\nAs you are using Commons HTTP Client have a look at the Common HTTP Client Logging Guide. This will tell you how to log the request at the HTTP level. \n    ",
            "votes": 65,
            "comentarios": [
                {
                    "decripcion": "I don't believe that Connection Reset means that the server closed the connection (via sending a FYN flag). I believe that it means it is no longer responding to ACK flags, or that it is not responding per TCP/IP). If the FYN flag was sent, or rather the server closed the connection, you would just get -1 from read(), and an EOFException. When I get home I plan on confirming this either way.",
                    "fecha": { "$date" : "2010-04-22 15:39:57Z" },
                    "usuario": "Zombies",
                    "usuario_id": 918
                },
                {
                    "decripcion": "In response to Zombies comment, did anyone ever find out if the connection reset means the server has closed the connection?",
                    "fecha": { "$date" : "2011-06-14 17:26:05Z" },
                    "usuario": "James",
                    "usuario_id": 533
                },
                {
                    "decripcion": "In my experience with a similar problem in the past, the cause was a bad network connection on the server side that causes too many connections timeout. The problem with the timeout of a Socket is that it's default behavior is not to timeout (infinite timeout). (Continues)",
                    "fecha": { "$date" : "2011-07-27 11:37:57Z" },
                    "usuario": "Filipe Palrinhas",
                    "usuario_id": 919
                },
                {
                    "decripcion": "(Continuation) Even HTTPClient doesn't set a default timeout on the created sockets. On the other hand, the server side all sockets must timeout after a few minutes or the connections will get stuck (very bad idea on a server). So if the connection times out on the server side, the client will get a connection reset (server closed the connection), if the client times out first the exception will be a ConnectionTimeoutException. Since this is a transient problem, the solution is to catch and log all this exceptions and retry again.",
                    "fecha": { "$date" : "2011-07-27 11:38:19Z" },
                    "usuario": "Filipe Palrinhas",
                    "usuario_id": 919
                },
                {
                    "decripcion": "@FilipePalrinhas you're very right about the fact that HttpClient doesn't set a finite timeout on the socket connection.",
                    "fecha": { "$date" : "2013-09-20 06:01:46Z" },
                    "usuario": "asgs",
                    "usuario_id": 920
                }
            ],
            "usuario": "Mark",
            "usuario_id": 921
        },
        "respuestas": [
            581,
            582,
            583,
            584,
            585,
            586,
            587,
            588,
            589,
            590,
            591,
            592,
            593,
            594
        ],
        "comentarios": [
            {
                "decripcion": "As you see from the full stack it starts with read operation . Your client is gone but you try to read from its stream. See my ServerSocket solution stackoverflow.com/a/31741436/413032.",
                "fecha": { "$date" : "2015-07-31 08:56:51Z" },
                "usuario": "Davut G\u00fcrb\u00fcz",
                "usuario_id": 939
            }
        ],
        "usuario": "Richard Ev",
        "usuario_id": 940
    },
    {
        "_id": 36,
        "titulo": "Getting the IP address of the current machine using Java",
        "fecha": { "$date" : "2017-04-11 08:38:12Z" },
        "decripcion": "\n                \nI am trying to develop a system where there are different nodes that are run on different system or on different ports on the same system. \n\nNow all the nodes create a Socket with a target IP as the IP of a special node known as a bootstrapping node. The nodes then create their own ServerSocket and start listening for connections. \n\nThe bootstrapping node maintains a list of Nodes and returns them on being queried.\n\nNow what I need is the node must register its IP to the bootstrapping node. I tried using cli.getInetAddress() once the client connects to the ServerSocket of bootstrapping node but that didn't work.\n\n\nI need the client to register its PPP IP if available;\nOtherwise the LAN IP if available; \nOtherwise it must register 127.0.0.1 assuming its the same computer.\n\n\nUsing the code:\n\nSystem.out.println(Inet4Address.getLocalHost().getHostAddress());\n\n\nor\n\nSystem.out.println(InetAddress.getLocalHost().getHostAddress());\n\n\nMy PPP Connection IP address is: 117.204.44.192 but the above returns me 192.168.1.2\n\nEDIT\n\nI am using the following code:\n\nEnumeration e = NetworkInterface.getNetworkInterfaces();\nwhile(e.hasMoreElements())\n{\n    NetworkInterface n = (NetworkInterface) e.nextElement();\n    Enumeration ee = n.getInetAddresses();\n    while (ee.hasMoreElements())\n    {\n        InetAddress i = (InetAddress) ee.nextElement();\n        System.out.println(i.getHostAddress());\n    }\n}\n\n\nI am able to get all the IP addresses associated all NetworkInterfaces, but how do I distinguish them? This is the output I am getting:\n\n127.0.0.1\n192.168.1.2\n192.168.56.1\n117.204.44.19\n\n    ",
        "votes": 319,
        "tags": [
            "ip",
            "java",
            "sockets"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 596,
            "fecha": { "$date" : "2020-02-24 03:24:17Z" },
            "decripcion": "\nimport java.net.DatagramSocket;\nimport java.net.InetAddress;\n\ntry(final DatagramSocket socket = new DatagramSocket()){\n  socket.connect(InetAddress.getByName(\"8.8.8.8\"), 10002);\n  ip = socket.getLocalAddress().getHostAddress();\n}\n\n\nThis way works well when there are multiple network interfaces. It always returns the preferred outbound IP. The destination 8.8.8.8 is not needed to be reachable. \n\nConnect on a UDP socket has the following effect: it sets the destination for Send/Recv, discards all packets from other addresses, and - which is what we use - transfers the socket into \"connected\" state, settings its appropriate fields. This includes checking the existence of the route to the destination according to the system's routing table and setting the local endpoint accordingly. The last part seems to be undocumented officially but it looks like an integral trait of Berkeley sockets API (a side effect of UDP \"connected\" state) that works reliably in both Windows and Linux across versions and distributions. \n\nSo, this method will give the local address that would be used to connect to the specified remote host. There is no real connection established, hence the specified remote ip can be unreachable.\n\nEdit:\n\nAs @macomgil says, for MacOS you can do this:\n\nSocket socket = new Socket();\nsocket.connect(new InetSocketAddress(\"google.com\", 80));\nSystem.out.println(socket.getLocalAddress());\n\n    ",
            "votes": 151,
            "comentarios": [
                {
                    "decripcion": "It worked for me on linux but on OsX i get : \"0.0.0.0\"",
                    "fecha": { "$date" : "2017-09-10 22:09:06Z" },
                    "usuario": "Radu Toader",
                    "usuario_id": 944
                },
                {
                    "decripcion": "@Jeef,  answer is updated. If it doesnt work on OsX,  then you need pick another way.",
                    "fecha": { "$date" : "2018-03-20 10:50:21Z" },
                    "usuario": "Mr.Wang from Next Door",
                    "usuario_id": 945
                },
                {
                    "decripcion": "Brilliant! FYI, when dealing with closed inner network, just replace 8.8.8.8 with something every host can reach",
                    "fecha": { "$date" : "2018-08-03 07:23:14Z" },
                    "usuario": "Murphy Ng",
                    "usuario_id": 946
                },
                {
                    "decripcion": "Works on Windows; can we confirm if OSX is still a problem?",
                    "fecha": { "$date" : "2018-10-02 14:31:06Z" },
                    "usuario": "trilogy",
                    "usuario_id": 947
                },
                {
                    "decripcion": "@trilogy I'm still getting 0.0.0.0 on OSX",
                    "fecha": { "$date" : "2019-03-12 16:02:51Z" },
                    "usuario": "Peter Tutervai",
                    "usuario_id": 948
                }
            ],
            "usuario": "Mr.Wang from Next Door",
            "usuario_id": 945
        },
        "respuestas": [
            595,
            596,
            597,
            598,
            599,
            600,
            601,
            602,
            603,
            604,
            605,
            606,
            607,
            608,
            609,
            610,
            611
        ],
        "comentarios": [
            {
                "decripcion": "Inet4Address.getLocalHost() should work right ?",
                "fecha": { "$date" : "2012-02-28 12:29:50Z" },
                "usuario": "Sears India",
                "usuario_id": 975
            },
            {
                "decripcion": "Inside the loop if I add n.isPointToPoint() will that work??  My idea is to return \"127.0.0.1\" if no Point to Point network is found. Will that work??",
                "fecha": { "$date" : "2012-02-28 18:48:25Z" },
                "usuario": "sasidhar",
                "usuario_id": 959
            },
            {
                "decripcion": "@sasidhar : Please dont' post your genuine IP address. do write 117.xxx.xxx.xxx, for private IP that's okay.",
                "fecha": { "$date" : "2012-02-28 19:01:14Z" },
                "usuario": "nIcE cOw",
                "usuario_id": 960
            },
            {
                "decripcion": "@GagandeepBali Thanks for the advice but my IP is a dynamic IP and i get a new IP every time i disconnect and connect my internet. So shouldn't be a problem, I guess.",
                "fecha": { "$date" : "2012-02-29 17:59:47Z" },
                "usuario": "sasidhar",
                "usuario_id": 959
            },
            {
                "decripcion": "Related: stackoverflow.com/questions/6064510/\u2026",
                "fecha": { "$date" : "2014-06-11 09:43:51Z" },
                "usuario": "AlikElzin-kilaka",
                "usuario_id": 976
            }
        ],
        "usuario": "sasidhar",
        "usuario_id": 959
    },
    {
        "_id": 37,
        "titulo": "java.net.SocketException: Connection reset",
        "fecha": { "$date" : "2012-11-06 09:25:18Z" },
        "decripcion": "\n                \nI am getting the following error trying to read from a socket. I'm doing a readInt() on that InputStream, and I am getting this error. Perusing the documentation this suggests that the client part of the connection closed the connection. In this scenario, I am the server.\n\nI have access to the client log files and it is not closing the connection, and in fact its log files suggest I am closing the connection. So does anybody have an idea why this is happening? What else to check for? Does this arise when there are local resources that are perhaps reaching thresholds?\n\n\n\nI do note that I have the following line:\n\nsocket.setSoTimeout(10000);\n\n\njust prior to the readInt(). There is a reason for this (long story), but just curious, are there circumstances under which this might lead to the indicated error? I have the server running in my IDE, and I happened to leave my IDE stuck on a breakpoint, and I then noticed the exact same errors begin appearing in my own logs in my IDE.\n\nAnyway, just mentioning it, hopefully not a red herring. :-(\n    ",
        "votes": 153,
        "tags": [
            "sockets",
            "socketexception",
            "networking",
            "connection",
            "java"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            612,
            613,
            614,
            615,
            616,
            617,
            618,
            619,
            620,
            621,
            622,
            623
        ],
        "comentarios": [
            {
                "decripcion": "Do you have stack traces from both sides?  Can you describe the network architecture a bit more?  (Over the wild Internet?  On the same machine?  Somewhere in between?)  Does it happen all the time?  Or intermittently?",
                "fecha": { "$date" : "2008-09-15 13:45:39Z" },
                "usuario": "Stu Thompson",
                "usuario_id": 990
            },
            {
                "decripcion": "See stackoverflow.com/questions/585599/\u2026",
                "fecha": { "$date" : "2018-11-13 22:13:46Z" },
                "usuario": "Raedwald",
                "usuario_id": 927
            },
            {
                "decripcion": "I've had the same problem using WAMP, but fixed it working on a remote server.",
                "fecha": { "$date" : "2021-02-02 12:32:45Z" },
                "usuario": "Florian-Martin",
                "usuario_id": 991
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 38,
        "titulo": "How do I debug error ECONNRESET in Node.js?",
        "fecha": { "$date" : "2020-01-28 00:28:08Z" },
        "decripcion": "\n                \nI'm running an Express.js application using Socket.io for a chat webapp\nand I get the following error randomly around 5 times during 24h.\nThe node process is wrapped in forever and it restarts itself immediately.\n\nThe problem is that restarting Express kicks my users out of their rooms \nand nobody wants that.\n\nThe web server is proxied by HAProxy. There are no socket stability issues, \njust using websockets and flashsockets transports.\nI cannot reproduce this on purpose.\n\nThis is the error with Node v0.10.11:\n\n    events.js:72\n            throw er; // Unhandled 'error' event\n                  ^\n    Error: read ECONNRESET     //alternatively it s a 'write'\n        at errnoException (net.js:900:11)\n        at TCP.onread (net.js:555:19)\n    error: Forever detected script exited with code: 8\n    error: Forever restarting script for 2 time\n\n\nEDIT (2013-07-22)\n\nAdded both socket.io client error handler and the uncaught exception handler.\nSeems that this one catches the error:\n\n    process.on('uncaughtException', function (err) {\n      console.error(err.stack);\n      console.log(\"Node NOT Exiting...\");\n    });\n\n\nSo I suspect it's not a Socket.io issue but an HTTP request to another server \nthat I do or a MySQL/Redis connection. The problem is that the error stack \ndoesn't help me identify my code issue. Here is the log output:\n\n    Error: read ECONNRESET\n        at errnoException (net.js:900:11)\n        at TCP.onread (net.js:555:19)\n\n\nHow do I know what causes this? How do I get more out of the error?\n\nOk, not very verbose but here's the stacktrace with Longjohn:\n\n    Exception caught: Error ECONNRESET\n    { [Error: read ECONNRESET]\n      code: 'ECONNRESET',\n      errno: 'ECONNRESET',\n      syscall: 'read',\n      __cached_trace__:\n       [ { receiver: [Object],\n           fun: [Function: errnoException],\n           pos: 22930 },\n         { receiver: [Object], fun: [Function: onread], pos: 14545 },\n         {},\n         { receiver: [Object],\n           fun: [Function: fireErrorCallbacks],\n           pos: 11672 },\n         { receiver: [Object], fun: [Function], pos: 12329 },\n         { receiver: [Object], fun: [Function: onread], pos: 14536 } ],\n      __previous__:\n       { [Error]\n         id: 1061835,\n         location: 'fireErrorCallbacks (net.js:439)',\n         __location__: 'process.nextTick',\n         __previous__: null,\n         __trace_count__: 1,\n         __cached_trace__: [ [Object], [Object], [Object] ] } }\n\n\nHere I serve the flash socket policy file:\n\n    net = require(\"net\")\n    net.createServer( (socket) =>\n      socket.write(\"<?xml version=\\\"1.0\\\"?>\\n\")\n      socket.write(\"<!DOCTYPE cross-domain-policy SYSTEM \\\"http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd\\\">\\n\")\n      socket.write(\"<cross-domain-policy>\\n\")\n      socket.write(\"<allow-access-from domain=\\\"*\\\" to-ports=\\\"*\\\"/>\\n\")\n      socket.write(\"</cross-domain-policy>\\n\")\n      socket.end()\n    ).listen(843)\n\n\nCan this be the cause?\n    ",
        "votes": 346,
        "tags": [
            "node.js",
            "tcp",
            "sockets",
            "express"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 625,
            "fecha": { "$date" : "2013-07-23 08:38:09Z" },
            "decripcion": "\nA simple tcp server I had for serving the flash policy file was causing this. I can now catch the error using a handler:\n\n# serving the flash policy file\nnet = require(\"net\")\n\nnet.createServer((socket) =>\n  //just added\n  socket.on(\"error\", (err) =>\n    console.log(\"Caught flash policy server socket error: \")\n    console.log(err.stack)\n  )\n\n  socket.write(\"<?xml version=\\\"1.0\\\"?>\\n\")\n  socket.write(\"<!DOCTYPE cross-domain-policy SYSTEM \\\"http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd\\\">\\n\")\n  socket.write(\"<cross-domain-policy>\\n\")\n  socket.write(\"<allow-access-from domain=\\\"*\\\" to-ports=\\\"*\\\"/>\\n\")\n  socket.write(\"</cross-domain-policy>\\n\")\n  socket.end()\n).listen(843)\n\n    ",
            "votes": 47,
            "comentarios": [
                {
                    "decripcion": "Is there anything wrong with the code? Should I have checked if the socket is writable before writing?",
                    "fecha": { "$date" : "2013-07-23 08:38:53Z" },
                    "usuario": "Samson",
                    "usuario_id": 995
                },
                {
                    "decripcion": "Doh, didn't see that you already found the solution before I posted pretty much the same thing :) As to your question though, even if you check that the socket is writable, it may not be when you write to it microseconds later and would still throw an error, so this is \"the way\" to be sure.",
                    "fecha": { "$date" : "2013-07-23 09:10:59Z" },
                    "usuario": "Joachim Isaksson",
                    "usuario_id": 996
                },
                {
                    "decripcion": "ok, and is there a safe way out if this? like socket.close() inside the error handler? because i think my CPU load is increasing after these errors (not sure)",
                    "fecha": { "$date" : "2013-07-23 09:49:47Z" },
                    "usuario": "Samson",
                    "usuario_id": 995
                },
                {
                    "decripcion": "I've always called socket.destroy() in the error handler to make sure. Sadly I can't find documentation whether it is required, but it does not emit an error to do so.",
                    "fecha": { "$date" : "2013-07-23 10:03:09Z" },
                    "usuario": "Joachim Isaksson",
                    "usuario_id": 996
                },
                {
                    "decripcion": "socket.destroy()  saved my day, whatever it works !! Thank you!",
                    "fecha": { "$date" : "2016-10-29 18:18:47Z" },
                    "usuario": "Firas Abd Alrahman",
                    "usuario_id": 997
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            624,
            625,
            626,
            627,
            628,
            629,
            630,
            631,
            632,
            633,
            634,
            635,
            636,
            637,
            638,
            639
        ],
        "comentarios": [
            {
                "decripcion": "@GottZ maybe this can help (spoke to someone working within node js) gist.github.com/samsonradu/1b0c6feb438f5a53e30e. I ll deploy the socket.error handler today and let you know.",
                "fecha": { "$date" : "2013-06-25 07:45:36Z" },
                "usuario": "Samson",
                "usuario_id": 995
            },
            {
                "decripcion": "@Gottz the socket.error handles doesn t help, but process.on('uncaughtException') catches the error. Here is the console.log of the error: { [Error: read ECONNRESET] code: 'ECONNRESET', errno: 'ECONNRESET', syscall: 'read' }",
                "fecha": { "$date" : "2013-07-03 20:37:58Z" },
                "usuario": "Samson",
                "usuario_id": 995
            },
            {
                "decripcion": "ECONNRESET could be from network problem. As you know it is impossible to catch all the exceptions when testing. Some will show up on your production server. You will have to make your server robust. You can handle the session deletion by using Redis as storage. It makes your sessions persist even after your node server goes down.",
                "fecha": { "$date" : "2013-07-08 05:32:38Z" },
                "usuario": "user568109",
                "usuario_id": 1005
            },
            {
                "decripcion": "Why is that related with session deletion? They are handled by Redis anyway.",
                "fecha": { "$date" : "2013-07-08 07:28:24Z" },
                "usuario": "Samson",
                "usuario_id": 995
            },
            {
                "decripcion": "You have at-least one TCP socket listening that does not have the handler set. So now it's time to check where that one is :D",
                "fecha": { "$date" : "2013-07-10 12:34:25Z" },
                "usuario": "Moss",
                "usuario_id": 115
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 39,
        "titulo": "What does \"connection reset by peer\" mean?",
        "fecha": { "$date" : "2017-04-28 09:58:30Z" },
        "decripcion": "\n                \nWhat is the meaning of the \"connection reset by peer\" error on a TCP connection? Is it a fatal error or just a notification or related to the network failure?\n    ",
        "votes": 750,
        "tags": [
            "tcp",
            "sockets"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 640,
            "fecha": { "$date" : "2014-07-19 18:34:04Z" },
            "decripcion": "\nIt's fatal. The remote server has sent you a RST packet, which indicates an immediate dropping of the connection, rather than the usual handshake. This bypasses the normal half-closed state transition. I like this description:\n\n\n  \"Connection reset by peer\" is the TCP/IP equivalent of slamming the phone back on the hook. It's more polite than merely not replying, leaving one hanging. But it's not the FIN-ACK expected of the truly polite TCP/IP converseur. \n\n    ",
            "votes": 895,
            "comentarios": [
                {
                    "decripcion": "Why is it labelled \"connection reset by peer\u201d? It sounds like it should be \"connection reset by the host\", or \"connection reset by the server\"",
                    "fecha": { "$date" : "2014-09-26 13:57:13Z" },
                    "usuario": "Robert",
                    "usuario_id": 138
                },
                {
                    "decripcion": "@Robert Because that's where the reset came from. The peer sent an RST packet.",
                    "fecha": { "$date" : "2014-12-17 22:44:08Z" },
                    "usuario": "user207421",
                    "usuario_id": 877
                },
                {
                    "decripcion": "... Robert, your concern makes no sense to me. Peer is just strictly more general than that. In a typical client-server model, the server can just as easily receive this notification from the \"client\". The machine that initially requests the connection has just as much power to send this notification. On a TCP level, it looks identical once the connection is ongoing. The two machines, when communicating, are just peers.",
                    "fecha": { "$date" : "2015-07-06 19:52:02Z" },
                    "usuario": "codetaku",
                    "usuario_id": 1006
                },
                {
                    "decripcion": "This packed could have been sent by another device in the middle like a router?",
                    "fecha": { "$date" : "2016-09-23 12:15:42Z" },
                    "usuario": "Arnold Roa",
                    "usuario_id": 1007
                },
                {
                    "decripcion": "It cannot be called 'connection reset by server' because it can be sent by the client or the server. It cannot be 'bypassed'. If a client receives this error this means the TCP connection is no longer open in the server, for example since the server crashed and was restarted.",
                    "fecha": { "$date" : "2017-07-17 08:06:53Z" },
                    "usuario": "Johannes Overmann",
                    "usuario_id": 1008
                }
            ],
            "usuario": "ire_and_curses",
            "usuario_id": 1009
        },
        "respuestas": [
            640,
            641
        ],
        "comentarios": [],
        "usuario": "Franck Freiburger",
        "usuario_id": 1013
    },
    {
        "_id": 40,
        "titulo": "Can two applications listen to the same port?",
        "fecha": { "$date" : "2016-11-10 20:34:37Z" },
        "decripcion": "\n                \nCan two applications on the same machine bind to the same port and IP address? Taking it a step further, can one app listen to requests coming from a certain IP and the other to another remote IP? \nI know I can have one application that starts off two threads (or forks) to have similar behavior, but can two applications that have nothing in common do the same?\n    ",
        "votes": 320,
        "tags": [
            "port",
            "sockets",
            "communication",
            "udp",
            "tcp"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 642,
            "fecha": { "$date" : "2019-08-20 19:30:41Z" },
            "decripcion": "\nThe answer differs depending on what OS is being considered. In general though:\n\nFor TCP, no. You can only have one application listening on the same port at one time. Now if you had 2 network cards, you could have one application listen on the first IP and the second one on the second IP using the same port number.\n\nFor UDP (Multicasts), multiple applications can subscribe to the same port.\n\nEdit: Since Linux Kernel 3.9 and later, support for multiple applications listening to the same port was added using the SO_REUSEPORT option. More information is available at this lwn.net article.\n    ",
            "votes": 282,
            "comentarios": [
                {
                    "decripcion": "\"one application listening on a single port\" that's the reason why ports exist -- to allow multiple applications to share the network without conflicts.",
                    "fecha": { "$date" : "2009-11-07 19:41:07Z" },
                    "usuario": "S.Lott",
                    "usuario_id": 416
                },
                {
                    "decripcion": "One listener per port per IP address.  Adding another network interface is a way to get a second IP address.  Your platform probably supports virtual interfaces which is another way to get two IP addresses with one physical network card.",
                    "fecha": { "$date" : "2009-11-09 22:02:13Z" },
                    "usuario": "John M",
                    "usuario_id": 1014
                },
                {
                    "decripcion": "Although I was of the same opinion until now, it turns out I was able to bind two different processes to same ip and TCP port! This is possible if you set ServerSocket.setReuseAddress(true) in Java before binding to it. Really unexpected behaviour.",
                    "fecha": { "$date" : "2013-05-17 17:03:34Z" },
                    "usuario": "Eugen",
                    "usuario_id": 1015
                },
                {
                    "decripcion": "(1) The actual meaning of your answer is 'For TCP, yes, provided ...' (2) Multicast is not a precondition for UDP port sharing, but SO_REUSEADDR is.",
                    "fecha": { "$date" : "2013-09-23 00:39:13Z" },
                    "usuario": "user207421",
                    "usuario_id": 877
                },
                {
                    "decripcion": "For UDP (Multicasts), multiple applications can subscribe to the same port. If one packet has arrived from client, which application receive it?",
                    "fecha": { "$date" : "2014-08-18 01:38:21Z" },
                    "usuario": "Yang Juven",
                    "usuario_id": 1016
                }
            ],
            "usuario": "Chris Dail",
            "usuario_id": 1017
        },
        "respuestas": [
            642,
            643,
            644,
            645,
            646,
            647,
            648,
            649,
            650,
            651,
            652,
            653,
            654,
            655,
            656,
            657,
            658
        ],
        "comentarios": [
            {
                "decripcion": "For a good detailed answer on reusing addresses/ports with multiple sockets: stackoverflow.com/questions/14388706/\u2026",
                "fecha": { "$date" : "2014-10-14 12:30:42Z" },
                "usuario": "Bjarke Freund-Hansen",
                "usuario_id": 1041
            }
        ],
        "usuario": "nadiv",
        "usuario_id": 1028
    },
    {
        "_id": 41,
        "titulo": "iPhone Data Usage Tracking/Monitoring",
        "fecha": { "$date" : "2011-10-30 18:32:10Z" },
        "decripcion": "\n                \nI've searched over this topic but found very few details which were helpful. With these details I've tried to cook some code as follows.\n\nNote: Please compare the details shared in this post with other posts before marking this as DUPLICATE, and not just by the subject.\n\n- (NSArray *)getDataCountersForType:(int)type {\n    BOOL success;\n    struct ifaddrs *addrs = nil;\n    const struct ifaddrs *cursor = nil;\n    const struct sockaddr_dl *dlAddr = nil;\n    const struct if_data *networkStatisc = nil; \n\n    int dataSent = 0;\n    int dataReceived = 0;\n\n    success = getifaddrs(&addrs) == 0;\n    if (success) {\n        cursor = addrs;\n        while (cursor != NULL) {\n            if (cursor->ifa_addr->sa_family == AF_LINK) {\n                dlAddr = (const struct sockaddr_dl *) cursor->ifa_addr;\n                networkStatisc = (const struct if_data *) cursor->ifa_data;\n\n                if (type == WiFi) {\n                    dataSent += networkStatisc->ifi_opackets;\n                    dataReceived += networkStatisc->ifi_ipackets;   \n                }\n                else if (type == WWAN) {\n                    dataSent += networkStatisc->ifi_obytes;\n                    dataReceived += networkStatisc->ifi_ibytes; \n                }\n            }\n            cursor = cursor->ifa_next;\n        }\n        freeifaddrs(addrs);\n    }       \n    return [NSArray arrayWithObjects:[NSNumber numberWithInt:dataSent], [NSNumber numberWithInt:dataReceived], nil];    \n}\n\n\nThis code collects information of internet usage of an iPhone device (and not my application alone). \n\nNow, if I use internet through WiFi or through 3G, I get the the data (bytes) only in ifi_obytes (sent) and ifi_ibytes (received) but I think I should get WiFi usage in ifi_opackets and ifi_ipackets.\n\nAlso wanted to add that if I'm connected to a WiFi network, but am not using internet, I still get value added to ifi_obytes and ifi_ibytes.\n\nMay be I'm wrong in the implementation or understanding. Need someone to help me out.\n\n\n\nEdit: Instead of AF_LINK I tried AF_INET (sockaddr_in instead of sockaddr_dl). This crashes the application.\n    ",
        "votes": 138,
        "tags": [
            "ios",
            "iphone",
            "sockets"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 659,
            "fecha": { "$date" : "2019-01-28 06:46:19Z" },
            "decripcion": "\nThe thing is that pdp_ip0 is one of interfaces, all pdpXXX are WWAN interfaces dedicated to different functions, voicemail, general networking interface.\n\nI read in Apple forum that :\nThe OS does not keep network statistics on a process-by-process basis. As such, there's no exact solution to this problem. You can, however, get network statistics for each network interface.\n\nIn general en0 is your Wi-Fi interface and pdp_ip0 is your WWAN interface.\n\nThere is no good way to get  information wifi/cellular network data since, particular date-time! \n\nData statistic (ifa_data->ifi_obytes and ifa_data->ifi_ibytes) are stored from previous device reboot.  \n\nI don't know why, but ifi_opackets and ifi_ipackets are shown just for lo0 (I think its main interface ).\n\nYes. Then  device is connected via WiFi and doesn't use internet if_iobytes values still come because this method provides network  bytes exchanges and not just internet.\n\n#include <net/if.h>\n#include <ifaddrs.h>\n\nstatic NSString *const DataCounterKeyWWANSent = @\"WWANSent\";\nstatic NSString *const DataCounterKeyWWANReceived = @\"WWANReceived\";\nstatic NSString *const DataCounterKeyWiFiSent = @\"WiFiSent\";\nstatic NSString *const DataCounterKeyWiFiReceived = @\"WiFiReceived\";\n\nNSDictionary *DataCounters()\n{\n    struct ifaddrs *addrs;\n    const struct ifaddrs *cursor;\n\n    u_int32_t WiFiSent = 0;\n    u_int32_t WiFiReceived = 0;\n    u_int32_t WWANSent = 0;\n    u_int32_t WWANReceived = 0;\n\n    if (getifaddrs(&addrs) == 0)\n    {\n        cursor = addrs;\n        while (cursor != NULL)\n        {\n            if (cursor->ifa_addr->sa_family == AF_LINK)\n            {\n#ifdef DEBUG\n                const struct if_data *ifa_data = (struct if_data *)cursor->ifa_data;\n                if (ifa_data != NULL)\n                {\n                    NSLog(@\"Interface name %s: sent %tu received %tu\",cursor->ifa_name,ifa_data->ifi_obytes,ifa_data->ifi_ibytes);\n                }\n#endif\n\n                // name of interfaces:\n                // en0 is WiFi\n                // pdp_ip0 is WWAN\n                NSString *name = @(cursor->ifa_name);\n                if ([name hasPrefix:@\"en\"])\n                {\n                    const struct if_data *ifa_data = (struct if_data *)cursor->ifa_data;\n                    if (ifa_data != NULL)\n                    {\n                        WiFiSent += ifa_data->ifi_obytes;\n                        WiFiReceived += ifa_data->ifi_ibytes;\n                    }\n                }\n\n                if ([name hasPrefix:@\"pdp_ip\"])\n                {\n                    const struct if_data *ifa_data = (struct if_data *)cursor->ifa_data;\n                    if (ifa_data != NULL)\n                    {\n                        WWANSent += ifa_data->ifi_obytes;\n                        WWANReceived += ifa_data->ifi_ibytes;\n                    }\n                }\n            }\n\n            cursor = cursor->ifa_next;\n        }\n\n        freeifaddrs(addrs);\n    }\n\n    return @{DataCounterKeyWiFiSent : @(WiFiSent),\n             DataCounterKeyWiFiReceived : @(WiFiReceived),\n             DataCounterKeyWWANSent : @(WWANSent),\n             DataCounterKeyWWANReceived : @(WWANReceived)};\n}\n\n\nImproved copy/paste support ! \n    ",
            "votes": 177,
            "comentarios": [
                {
                    "decripcion": "Thanks a lot. This code worked wonders. Also thanks for explaining the stuff.",
                    "fecha": { "$date" : "2011-11-05 14:10:03Z" },
                    "usuario": "Sahil Khanna",
                    "usuario_id": 1042
                },
                {
                    "decripcion": "You need to import this libraries: #include <arpa/inet.h> #include <net/if.h> #include <ifaddrs.h> #include <net/if_dl.h>",
                    "fecha": { "$date" : "2012-02-11 21:51:53Z" },
                    "usuario": "user982705",
                    "usuario_id": 1043
                },
                {
                    "decripcion": "Is it possible with this code to track data traffic per iOS application ?",
                    "fecha": { "$date" : "2012-04-30 15:36:24Z" },
                    "usuario": "fvisticot",
                    "usuario_id": 1044
                },
                {
                    "decripcion": "@Mat: The solution I've designed if for enterprise clients and is not deployed on the AppStore.",
                    "fecha": { "$date" : "2012-05-21 04:48:05Z" },
                    "usuario": "Sahil Khanna",
                    "usuario_id": 1042
                },
                {
                    "decripcion": "Has anybody figured out how to get the data per app? Share the code please :)",
                    "fecha": { "$date" : "2015-01-27 11:10:08Z" },
                    "usuario": "Bob de Graaf",
                    "usuario_id": 1045
                }
            ],
            "usuario": "user982705",
            "usuario_id": 1043
        },
        "respuestas": [
            659,
            660,
            661,
            662,
            663,
            664,
            665
        ],
        "comentarios": [],
        "usuario": "Sahil Khanna",
        "usuario_id": 1042
    },
    {
        "_id": 42,
        "titulo": "An existing connection was forcibly closed by the remote host",
        "fecha": { "$date" : "2021-04-15 18:09:19Z" },
        "decripcion": "\n                \nI am working with a commercial application which is throwing a SocketException with the message,\n\nAn existing connection was forcibly closed by the remote host\n\nThis happens with a socket connection between client and server. The connection is alive and well, and heaps of data is being transferred, but it then becomes disconnected out of nowhere.\nHas anybody seen this before? What could the causes be? I can kind of guess a few causes, but also is there any way to add more into this code to work out what the cause could be?\nAny comments / ideas are welcome.\n... The latest ...\nI have some logging from some .NET tracing,\nSystem.Net.Sockets Verbose: 0 : [8188] Socket#30180123::Send() DateTime=2010-04-07T20:49:48.6317500Z\n\nSystem.Net.Sockets Error: 0 : [8188] Exception in the Socket#30180123::Send - An existing connection was forcibly closed by the remote host DateTime=2010-04-07T20:49:48.6317500Z \n\nSystem.Net.Sockets Verbose: 0 : [8188] Exiting Socket#30180123::Send() -> 0#0\n\nBased on other parts of the logging I have seen the fact that it says 0#0 means a packet of 0 bytes length is being sent. But what does that really mean?\nOne of two possibilities is occurring, and I am not sure which,\n\nThe connection is being closed, but data is then being written to the socket, thus creating the exception above. The 0#0 simply means that nothing was sent because the socket was already closed.\n\nThe connection is still open, and a packet of zero bytes is being sent (i.e. the code has a bug) and the 0#0 means that a packet of zero bytes is trying to be sent.\n\n\nWhat do you reckon? It might be inconclusive I guess, but perhaps someone else has seen this kind of thing?\n    ",
        "votes": 194,
        "tags": [
            ".net",
            "networking",
            "sockets",
            "c#"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 666,
            "fecha": { "$date" : "2019-07-30 20:49:58Z" },
            "decripcion": "\nThis generally means that the remote side closed the connection (usually by sending a TCP/IP RST packet). If you're working with a third-party application, the likely causes are:\n\n\nYou are sending malformed data to the application (which could include sending an HTTPS request to an HTTP server)\nThe network link between the client and server is going down for some reason\nYou have triggered a bug in the third-party application that caused it to crash\nThe third-party application has exhausted system resources\n\n\nIt's likely that the first case is what's happening.\n\nYou can fire up Wireshark to see exactly what is happening on the wire to narrow down the problem.\n\nWithout more specific information, it's unlikely that anyone here can really help you much.\n    ",
            "votes": 124,
            "comentarios": [
                {
                    "decripcion": "Great. Thanks. The other thing about wireshark. It collects so much data, how would I be able to filter out something like this? If wireshark shows up something I might post it here later on ...",
                    "fecha": { "$date" : "2010-04-06 01:26:38Z" },
                    "usuario": "peter",
                    "usuario_id": 1055
                },
                {
                    "decripcion": "You should be able to filter the Wireshark dump by IP address and port number, at least. After that, it's probably most helpful to look at the end of the stream (where something went wrong) and work backwards until you can spot where things first get messed up. Depending on the complexity of the protocol involved, it can be really easy to almost impossible...",
                    "fecha": { "$date" : "2010-04-06 02:02:26Z" },
                    "usuario": "RarrRarrRarr",
                    "usuario_id": 1056
                },
                {
                    "decripcion": "Is there a source for the bulleted items, or did gamer's answer below just copy your list?",
                    "fecha": { "$date" : "2014-06-17 16:48:36Z" },
                    "usuario": "Zack",
                    "usuario_id": 1057
                },
                {
                    "decripcion": "Please note that \"sending malformed data\" could mean sending a https request to a http server and probably vice versa.",
                    "fecha": { "$date" : "2017-09-25 14:29:55Z" },
                    "usuario": "AXMIM",
                    "usuario_id": 1058
                },
                {
                    "decripcion": "In my case, I was getting this exception only when calling an api when running app locally.  No problems in dev, qa, or prod environments.  The fix?  Using http instead of https locally.  We think it may be related to a load balancer.  But we just updated our dev, qa, and prod web.configs with transforms for https.  Problem solved.",
                    "fecha": { "$date" : "2018-11-13 23:03:45Z" },
                    "usuario": "Kershaw",
                    "usuario_id": 1059
                }
            ],
            "usuario": "RarrRarrRarr",
            "usuario_id": 1056
        },
        "respuestas": [
            666,
            667,
            668,
            669,
            670,
            671,
            672,
            673,
            674,
            675,
            676,
            677,
            678,
            679
        ],
        "comentarios": [
            {
                "decripcion": "Just an update. It seems that wireshark is not going to cut it in this case because of our network setup. But I am hopefully going to try this, blogs.msdn.com/dgorti/archive/2005/09/18/471003.aspx which is tracing using .NET which should produce some log files. I will keep you posted ...",
                "fecha": { "$date" : "2010-04-06 22:50:39Z" },
                "usuario": "peter",
                "usuario_id": 1055
            },
            {
                "decripcion": "comcast is also known to send \"zero\" packets spoofed with fake id to mess with p2p traffic---",
                "fecha": { "$date" : "2012-04-16 01:34:25Z" },
                "usuario": "NA",
                "usuario_id": 53
            }
        ],
        "usuario": "peter",
        "usuario_id": 1055
    },
    {
        "_id": 43,
        "titulo": "TypeError: 'module' object is not callable",
        "fecha": { "$date" : "2021-05-28 13:35:04Z" },
        "decripcion": "\n                \nFile \"C:\\Users\\Administrator\\Documents\\Mibot\\oops\\blinkserv.py\", line 82, in __init__\n    self.serv = socket(AF_INET,SOCK_STREAM)\nTypeError: 'module' object is not callable\n\n\nWhy am I getting this error?\nI'm confused.\n\nWhat do you need to know to answer my question?\n    ",
        "votes": 661,
        "tags": [
            "python",
            "sockets"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            680,
            681,
            682,
            683,
            684,
            685,
            686,
            687,
            688,
            689,
            690,
            691
        ],
        "comentarios": [
            {
                "decripcion": "I once got this error because I had both a (global) variable and a function with the same name.",
                "fecha": { "$date" : "2017-06-13 12:35:32Z" },
                "usuario": "remustata",
                "usuario_id": 1105
            }
        ],
        "usuario": "user551717",
        "usuario_id": 1083
    },
    {
        "_id": 44,
        "titulo": "Instantly detect client disconnection from server socket",
        "fecha": { "$date" : "2012-05-08 13:28:53Z" },
        "decripcion": "\n                \nHow can I detect that a client has disconnected from my server?\n\nI have the following code in my AcceptCallBack method\n\nstatic Socket handler = null;\npublic static void AcceptCallback(IAsyncResult ar)\n{\n  //Accept incoming connection\n  Socket listener = (Socket)ar.AsyncState;\n  handler = listener.EndAccept(ar);\n}\n\n\nI need to find a way to discover as soon as possible that the client has disconnected from the handler Socket.\n\nI've tried:\n\n\nhandler.Available;\nhandler.Send(new byte[1], 0,\nSocketFlags.None);\nhandler.Receive(new byte[1], 0,\nSocketFlags.None);\n\n\nThe above approaches work when you are connecting to a server and want to detect when the server disconnects but they do not work when you are the server and want to detect client disconnection.\n\nAny help will be appreciated.\n    ",
        "votes": 85,
        "tags": [
            ".net",
            "sockets",
            "c#",
            "connection",
            "tcp"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 692,
            "fecha": { "$date" : "2009-04-06 16:46:22Z" },
            "decripcion": "\nSince there are no events available to signal when the socket is disconnected, you will have to poll it at a frequency that is acceptable to you.\n\nUsing this extension method, you can have a reliable method to detect if a socket is disconnected.\n\nstatic class SocketExtensions\n{\n  public static bool IsConnected(this Socket socket)\n  {\n    try\n    {\n      return !(socket.Poll(1, SelectMode.SelectRead) && socket.Available == 0);\n    }\n    catch (SocketException) { return false; }\n  }\n}\n\n    ",
            "votes": 119,
            "comentarios": [
                {
                    "decripcion": "This worked. Thanks. I changed the method to  return !(socket.Available == 0 && socket.Poll(1, SelectMode.SelectRead));  because I suspect socket.Available is faster than Socket.Poll()",
                    "fecha": { "$date" : "2009-04-06 18:52:41Z" },
                    "usuario": "NA",
                    "usuario_id": 53
                },
                {
                    "decripcion": "This method does not work unless the other end of the connection actually closes/shutdowns the socket. An unplugged network/power cable won't be noticed before the timeout period. The only way to be notified of disconnects right away is with a heartbeat function to continously check the connection.",
                    "fecha": { "$date" : "2009-08-27 15:47:21Z" },
                    "usuario": "Kasper Holdum",
                    "usuario_id": 1106
                },
                {
                    "decripcion": "@Smart Alec: actually, you should use the example as it's shown above. There is a potential race condition if you change the order: if socket.Available returns 0 and you receive a packet just before socket.Poll gets called, Poll will return true and method will return false, although the socket is actually still healthy.",
                    "fecha": { "$date" : "2010-05-28 09:05:13Z" },
                    "usuario": "Groo",
                    "usuario_id": 1107
                },
                {
                    "decripcion": "This works well 99% of the time, sometimes it gives a false disconnect though.",
                    "fecha": { "$date" : "2013-06-03 05:29:26Z" },
                    "usuario": "Matthew Finlay",
                    "usuario_id": 1108
                },
                {
                    "decripcion": "Just like Matthew Finlay noticed, this will report false disconnects sometimes as there is still a race condition between the result of the Poll method and checking the Available property. A packet could be almost ready to be read but not yet, thus Available being 0 - but a millisecond later, there's data to be read.  A better option is to try to Receive one byte and the SocketFlags.Peek flag. Or implement some form of heartbeat and keep the connection status at a higher level. Or rely on the error handling at your send/receive methods (& callbacks, if using the async versions).",
                    "fecha": { "$date" : "2015-03-16 21:03:01Z" },
                    "usuario": "mbargiel",
                    "usuario_id": 1109
                }
            ],
            "usuario": "Samuel",
            "usuario_id": 1023
        },
        "respuestas": [
            692,
            693,
            694,
            695,
            696,
            697,
            698,
            699,
            700,
            701,
            702,
            703,
            704,
            705,
            706
        ],
        "comentarios": [
            {
                "decripcion": "@Samuel: The TCP and connection tags are very much relevant to this post in that TCP maintains a connection (whereas other network protocols such as UDP do not).",
                "fecha": { "$date" : "2009-04-06 16:54:25Z" },
                "usuario": "Noldorin",
                "usuario_id": 1125
            },
            {
                "decripcion": "More on the heartbeat solution from my blog: Detection of Half-Open (Dropped) Connections",
                "fecha": { "$date" : "2010-04-29 13:50:06Z" },
                "usuario": "Stephen Cleary",
                "usuario_id": 1126
            },
            {
                "decripcion": "The solution described here works well for me: stackoverflow.com/questions/1387459/\u2026",
                "fecha": { "$date" : "2015-03-19 20:01:59Z" },
                "usuario": "Rawk",
                "usuario_id": 1127
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 45,
        "titulo": "How do I update the GUI from another thread?",
        "fecha": { "$date" : "2020-02-28 12:29:30Z" },
        "decripcion": "\n                \nWhich is the simplest way to update a Label from another Thread?\n\n\nI have a Form running on thread1, and from that I'm starting another thread (thread2). \nWhile thread2 is processing some files I would like to update a Label on the Form with the current status of thread2's work.\n\n\nHow could I do that?\n    ",
        "votes": 1499,
        "tags": [
            ".net",
            "winforms",
            "user-interface",
            "c#",
            "multithreading"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 708,
            "fecha": { "$date" : "2015-03-03 00:52:09Z" },
            "decripcion": "\nFor .NET 2.0, here's a nice bit of code I wrote that does exactly what you want, and works for any property on a Control:\n\nprivate delegate void SetControlPropertyThreadSafeDelegate(\n    Control control, \n    string propertyName, \n    object propertyValue);\n\npublic static void SetControlPropertyThreadSafe(\n    Control control, \n    string propertyName, \n    object propertyValue)\n{\n  if (control.InvokeRequired)\n  {\n    control.Invoke(new SetControlPropertyThreadSafeDelegate               \n    (SetControlPropertyThreadSafe), \n    new object[] { control, propertyName, propertyValue });\n  }\n  else\n  {\n    control.GetType().InvokeMember(\n        propertyName, \n        BindingFlags.SetProperty, \n        null, \n        control, \n        new object[] { propertyValue });\n  }\n}\n\n\nCall it like this:\n\n// thread-safe equivalent of\n// myLabel.Text = status;\nSetControlPropertyThreadSafe(myLabel, \"Text\", status);\n\n\nIf you're using .NET 3.0 or above, you could rewrite the above method as an extension method of the Control class, which would then simplify the call to:\n\nmyLabel.SetPropertyThreadSafe(\"Text\", status);\n\n\nUPDATE 05/10/2010:\n\nFor .NET 3.0 you should use this code:\n\nprivate delegate void SetPropertyThreadSafeDelegate<TResult>(\n    Control @this, \n    Expression<Func<TResult>> property, \n    TResult value);\n\npublic static void SetPropertyThreadSafe<TResult>(\n    this Control @this, \n    Expression<Func<TResult>> property, \n    TResult value)\n{\n  var propertyInfo = (property.Body as MemberExpression).Member \n      as PropertyInfo;\n\n  if (propertyInfo == null ||\n      !@this.GetType().IsSubclassOf(propertyInfo.ReflectedType) ||\n      @this.GetType().GetProperty(\n          propertyInfo.Name, \n          propertyInfo.PropertyType) == null)\n  {\n    throw new ArgumentException(\"The lambda expression 'property' must reference a valid property on this Control.\");\n  }\n\n  if (@this.InvokeRequired)\n  {\n      @this.Invoke(new SetPropertyThreadSafeDelegate<TResult> \n      (SetPropertyThreadSafe), \n      new object[] { @this, property, value });\n  }\n  else\n  {\n      @this.GetType().InvokeMember(\n          propertyInfo.Name, \n          BindingFlags.SetProperty, \n          null, \n          @this, \n          new object[] { value });\n  }\n}\n\n\nwhich uses LINQ and lambda expressions to allow much cleaner, simpler and safer syntax:\n\nmyLabel.SetPropertyThreadSafe(() => myLabel.Text, status); // status has to be a string or this will fail to compile\n\n\nNot only is the property name now checked at compile time, the property's type is as well, so it's impossible to (for example) assign a string value to a boolean property, and hence cause a runtime exception.\n\nUnfortunately this doesn't stop anyone from doing stupid things such as passing in another Control's property and value, so the following will happily compile:\n\nmyLabel.SetPropertyThreadSafe(() => aForm.ShowIcon, false);\n\n\nHence I added the runtime checks to ensure that the passed-in property does actually belong to the Control that the method's being called on. Not perfect, but still a lot better than the .NET 2.0 version.\n\nIf anyone has any further suggestions on how to improve this code for compile-time safety, please comment!\n    ",
            "votes": 805,
            "comentarios": [
                {
                    "decripcion": "There are cases when this.GetType() evaluates to the same as propertyInfo.ReflectedType (e.g. LinkLabel on WinForms). I don't have a large C# experience, but I think that the condition for exception should be:  if (propertyInfo == null ||                 (!@this.GetType().IsSubclassOf(propertyInfo.ReflectedType) && @this.GetType() != propertyInfo.ReflectedType) ||                 @this.GetType().GetProperty(propertyInfo.Name, propertyInfo.PropertyType) == null)",
                    "fecha": { "$date" : "2011-01-31 13:03:20Z" },
                    "usuario": "Corvin",
                    "usuario_id": 1131
                },
                {
                    "decripcion": "@lan can this SetControlPropertyThreadSafe(myLabel, \"Text\", status) be called from another module or class or form",
                    "fecha": { "$date" : "2011-06-23 10:58:31Z" },
                    "usuario": "Smith",
                    "usuario_id": 1132
                },
                {
                    "decripcion": "The solution provided is unnecessarily complex. See Marc Gravell's solution, or Zaid Masud's solution, if you value simplicity.",
                    "fecha": { "$date" : "2014-03-28 17:23:09Z" },
                    "usuario": "Frank Hileman",
                    "usuario_id": 1133
                },
                {
                    "decripcion": "This solution does waste ton's of resources if you update multiple properties as every Invoke costs a lot of resources. I don't think this is how the feature of Thread Safety was intended anyway. Do Encapsulte your UI update actions and Invoke it ONCE (and not per property)",
                    "fecha": { "$date" : "2014-08-06 12:09:30Z" },
                    "usuario": "quadroid",
                    "usuario_id": 1134
                },
                {
                    "decripcion": "Why on earth would you use this code over the BackgroundWorker component?",
                    "fecha": { "$date" : "2016-10-08 17:11:20Z" },
                    "usuario": "Andy",
                    "usuario_id": 1135
                }
            ],
            "usuario": "Ian Kemp",
            "usuario_id": 1136
        },
        "respuestas": [
            707,
            708,
            709,
            710,
            711,
            712,
            713,
            714,
            715,
            716,
            717,
            718,
            719,
            720,
            721,
            722,
            723,
            724,
            725,
            726,
            727,
            728,
            729,
            730,
            731,
            732,
            733,
            734,
            735,
            736
        ],
        "comentarios": [
            {
                "decripcion": "Doesn't .net 2.0+ have the BackgroundWorker class just for this. It UI thread aware. 1. Create a BackgroundWorker 2. Add two delegates (one for processing, and one for completion)",
                "fecha": { "$date" : "2009-03-19 10:30:29Z" },
                "usuario": "Preet Sangha",
                "usuario_id": 1185
            },
            {
                "decripcion": "maybe a little late : codeproject.com/KB/cs/Threadsafe_formupdating.aspx",
                "fecha": { "$date" : "2010-01-19 14:15:40Z" },
                "usuario": "MichaelD",
                "usuario_id": 1186
            },
            {
                "decripcion": "See the answer for .NET 4.5 and C# 5.0: stackoverflow.com/a/18033198/2042090",
                "fecha": { "$date" : "2013-08-03 13:21:36Z" },
                "usuario": "Ryszard D\u017cegan",
                "usuario_id": 1138
            },
            {
                "decripcion": "This question does not apply to Gtk# GUI. For Gtk# see this and this answer.",
                "fecha": { "$date" : "2014-04-01 21:52:54Z" },
                "usuario": "hlovdal",
                "usuario_id": 1187
            },
            {
                "decripcion": "Beware: the answers on this question are now a cluttered mess of OT (\"here's what I did for my WPF app\") and historical .NET 2.0 artifacts.",
                "fecha": { "$date" : "2018-07-11 19:48:29Z" },
                "usuario": "Marc L.",
                "usuario_id": 1173
            }
        ],
        "usuario": "CruelIO",
        "usuario_id": 1161
    },
    {
        "_id": 46,
        "titulo": "How do servlets work? Instantiation, sessions, shared variables and multithreading",
        "fecha": { "$date" : "2020-04-19 11:32:28Z" },
        "decripcion": "\n                \nSuppose, I have a webserver which holds numerous servlets. For information passing among those servlets I am setting session and instance variables.\n\nNow, if 2 or more users send request to this server then what happens to the session variables?\nWill they all be common for all the users or they will be different for each user?\nIf they are different, then how was the server able to differentiate between different users?\n\nOne more similar question, if there are n users accessing a particular servlet, then this servlet gets instantiated only the first time the first user accessed it or does it get instantiated for all the users separately?\nIn other words, what happens to the instance variables?\n    ",
        "votes": 1201,
        "tags": [
            "servlets",
            "session-variables",
            "java",
            "multithreading",
            "instance-variables"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 737,
            "fecha": { "$date" : "2019-07-05 11:24:54Z" },
            "decripcion": "\nServletContext\n\nWhen the servlet container (like Apache Tomcat) starts up, it will deploy and load all its web applications. When a web application is loaded, the servlet container creates the ServletContext once and keeps it in the server's memory. The web app's web.xml and all of included web-fragment.xml files is parsed, and each <servlet>, <filter> and <listener> found (or each class annotated with @WebServlet, @WebFilter and @WebListener respectively) is instantiated once and kept in the server's memory as well. For each instantiated filter, its init() method is invoked with a new FilterConfig.\n\nWhen a Servlet has a <servlet><load-on-startup> or @WebServlet(loadOnStartup) value greater than 0, then its init() method is also invoked during startup with a new ServletConfig. Those servlets are initialized in the same order specified by that value (1 is 1st, 2 is 2nd, etc). If the same value is specified for more than one servlet, then each of those servlets is loaded in the same order as they appear in the web.xml, web-fragment.xml, or @WebServlet classloading. In the event the \"load-on-startup\" value is absent, the init() method will be invoked whenever the HTTP request hits that servlet for the very first time. \n\nWhen the servlet container is finished with all of the above described initialization steps, then the ServletContextListener#contextInitialized() will be invoked.\n\nWhen the servlet container shuts down, it unloads all web applications, invokes the destroy() method of all its initialized servlets and filters, and all ServletContext, Servlet, Filter and Listener instances are trashed. Finally the ServletContextListener#contextDestroyed() will be invoked.\n\nHttpServletRequest and HttpServletResponse\n\nThe servlet container is attached to a web server that listens for HTTP requests on a certain port number (port 8080 is usually used during development and port 80 in production). When a client (e.g. user with a web browser, or programmatically using URLConnection) sends an HTTP request, the servlet container creates new HttpServletRequest and HttpServletResponse objects and passes them through any defined Filter in the chain and, eventually, the Servlet instance. \n\nIn the case of filters, the doFilter() method is invoked. When the servlet container's code calls chain.doFilter(request, response), the request and response continue on to the next filter, or hit the servlet if there are no remaining filters.\n\nIn the case of servlets, the service() method is invoked. By default, this method determines which one of the doXxx() methods to invoke based off of  request.getMethod(). If the determined method is absent from the servlet, then an HTTP 405 error is returned in the response. \n\nThe request object provides access to all of the information about the HTTP request, such as its URL, headers, query string and body. The response object provides the ability to control and send the HTTP response the way you want by, for instance, allowing you to set the headers and the body (usually with generated HTML content from a JSP file). When the HTTP response is committed and finished, both the request and response objects are recycled and made available for reuse.\n\nHttpSession\n\nWhen a client visits the webapp for the first time and/or the HttpSession is obtained for the first time via request.getSession(), the servlet container creates a new HttpSession object, generates a long and unique ID (which you can get by session.getId()), and stores it in the server's memory. The servlet container also sets a Cookie in the Set-Cookie header of the HTTP response with JSESSIONID as its name and the unique session ID as its value. \n\nAs per the HTTP cookie specification (a contract any decent web browser and web server must adhere to), the client (the web browser) is required to send this cookie back in subsequent requests in the Cookie header for as long as the cookie is valid (i.e. the unique ID must refer to an unexpired session and the domain and path are correct). Using your browser's built-in HTTP traffic monitor, you can verify that the cookie is valid (press F12 in Chrome / Firefox 23+ / IE9+, and check the Net/Network tab). The servlet container will check the Cookie header of every incoming HTTP request for the presence of the cookie with the name JSESSIONID and use its value (the session ID) to get the associated HttpSession from server's memory.\n\nThe HttpSession stays alive until it has been idle (i.e. not used in a request) for more than the timeout value specified in <session-timeout>, a setting in web.xml. The timeout value defaults to 30 minutes. So, when the client doesn't visit the web app for longer than the time specified, the servlet container trashes the session. Every subsequent request, even with the cookie specified, will not have access to the same session anymore; the servlet container will create a new session.\n\nOn the client side, the session cookie stays alive for as long as the browser instance is running. So, if the client closes the browser instance (all tabs/windows), then the session is trashed on the client's side. In a new browser instance, the cookie associated with the session wouldn't exist, so it would no longer be sent. This causes an entirely new HttpSession to be created, with an entirely new session cookie being used.\n\nIn a nutshell\n\n\nThe ServletContext lives for as long as the web app lives. It is shared among all requests in all sessions.\nThe HttpSession lives for as long as the client is interacting with the web app with the same browser instance, and the session hasn't timed out at the server side. It is shared among all requests in the same session.\nThe HttpServletRequest and HttpServletResponse live from the time the servlet receives an HTTP request from the client, until the complete response (the web page) has arrived. It is not shared elsewhere.\nAll Servlet, Filter and Listener instances live as long as the web app lives. They are shared among all requests in all sessions.\nAny attribute that is defined in ServletContext, HttpServletRequest and HttpSession will live as long as the object in question lives. The object itself represents the \"scope\" in bean management frameworks such as JSF, CDI, Spring, etc. Those frameworks store their scoped beans as an attribute of its closest matching scope.\n\n\nThread Safety\n\nThat said, your major concern is possibly thread safety. You should now know that servlets and filters are shared among all requests. That's the nice thing about Java, it's multithreaded and different threads (read: HTTP requests) can make use of the same instance. It would otherwise be too expensive to recreate, init() and destroy() them for every single request.\n\nYou should also realize that you should never assign any request or session scoped data as an instance variable of a servlet or filter. It will be shared among all other requests in other sessions. That's not thread-safe! The below example illustrates this:\n\npublic class ExampleServlet extends HttpServlet {\n\n    private Object thisIsNOTThreadSafe;\n\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        Object thisIsThreadSafe;\n\n        thisIsNOTThreadSafe = request.getParameter(\"foo\"); // BAD!! Shared among all requests!\n        thisIsThreadSafe = request.getParameter(\"foo\"); // OK, this is thread safe.\n    } \n}\n\n\nSee also:\n\n\nWhat is the difference between JSF, Servlet and JSP?\nBest option for Session management in Java\nDifference between / and /* in servlet mapping url pattern\ndoGet and doPost in Servlets\nServlet seems to handle multiple concurrent browser requests synchronously\nWhy Servlets are not thread Safe?\n\n    ",
            "votes": 1895,
            "comentarios": [
                {
                    "decripcion": "So when I somehow can find out the JSessionId which gets send to a client, I can steal his session?",
                    "fecha": { "$date" : "2011-11-30 13:37:58Z" },
                    "usuario": "Toskan",
                    "usuario_id": 1188
                },
                {
                    "decripcion": "@Toskan: that's correct. It's known as session fixation hack. Please note that this is not specific to JSP/Servlet. All other server side languages which maintains the session by a cookie are sensitive as well, like PHP with PHPSESSID cookie, ASP.NET with ASP.NET_SessionID cookie, etcetera. That's also why URL rewriting with ;jsessionid=xxx as some JSP/Servlet MVC frameworks automatically do is frowned upon. Just make sure that session ID is never exposed in URL or by other means in webpages so that the unaware enduser won't be attacked.",
                    "fecha": { "$date" : "2011-11-30 13:45:39Z" },
                    "usuario": "BalusC",
                    "usuario_id": 1189
                },
                {
                    "decripcion": "@Toskan: Also, make sure that your webapp is not sensitive to XSS attacks. I.e. do not redisplay any user-controlled input in unescaped form. XSS put doors open to ways to collect session IDs of all endusers. See also What is the general concept behind XSS?",
                    "fecha": { "$date" : "2011-11-30 13:48:52Z" },
                    "usuario": "BalusC",
                    "usuario_id": 1189
                },
                {
                    "decripcion": "@BalusC, Sorry for my stupidity. It means all user access the same instance of thisIsNOTThreadSafe right?",
                    "fecha": { "$date" : "2014-08-26 03:35:52Z" },
                    "usuario": "overshadow",
                    "usuario_id": 1190
                },
                {
                    "decripcion": "@TwoThumbSticks 404 is returned when whole servlet itself is absent. 405 is returned when servlet is present but desired doXxx() method is not implemented.",
                    "fecha": { "$date" : "2017-02-20 11:52:58Z" },
                    "usuario": "BalusC",
                    "usuario_id": 1189
                }
            ],
            "usuario": "BalusC",
            "usuario_id": 1189
        },
        "respuestas": [
            737,
            738,
            739,
            740,
            741,
            742,
            743,
            744
        ],
        "comentarios": [],
        "usuario": "Ku Jon",
        "usuario_id": 1195
    },
    {
        "_id": 47,
        "titulo": "Cross-thread operation not valid: Control accessed from a thread other than the thread it was created on",
        "fecha": { "$date" : "2013-07-30 08:35:40Z" },
        "decripcion": "\n                \nI have a scenario. (Windows Forms, C#, .NET)\n\n\nThere is a main form which hosts some user control.\nThe user control does some heavy data operation, such that if I directly call the UserControl_Load method the UI become nonresponsive for the duration for load method execution.\nTo overcome this I load data on different thread (trying to change existing code as little as I can)  \nI used a background worker thread which will be loading the data and when done will notify the application that it has done its work.  \nNow came a real problem. All the UI (main form and its child usercontrols) was created on the primary main thread. In the LOAD method of the usercontrol I'm fetching data based on the values of some control (like textbox) on userControl. \n\n\nThe pseudocode would look like this:\n\nCODE 1\n\nUserContrl1_LoadDataMethod()\n{\n    if (textbox1.text == \"MyName\") // This gives exception\n    {\n        //Load data corresponding to \"MyName\".\n        //Populate a globale variable List<string> which will be binded to grid at some later stage.\n    }\n}\n\n\nThe Exception it gave was\n\n\n  Cross-thread operation not valid: Control accessed from a thread other than the thread it was created on.\n\n\nTo know more about this I did some googling and a suggestion came up like using the following code\n\nCODE 2\n\nUserContrl1_LoadDataMethod()\n{\n    if (InvokeRequired) // Line #1\n    {\n        this.Invoke(new MethodInvoker(UserContrl1_LoadDataMethod));\n        return;\n    }\n\n    if (textbox1.text == \"MyName\") // Now it wont give an exception\n    {\n    //Load data correspondin to \"MyName\"\n        //Populate a globale variable List<string> which will be binded to grid at some later stage\n    }\n}\n\n\nBUT BUT BUT... it seems I'm back to square one. The Application again \nbecome nonresponsive. It seems to be due to the execution of line #1 if condition. The loading task is again done by the parent thread and not the third that I spawned.\n\nI don't know whether I perceived this right or wrong. I'm new to threading.\n\nHow do I resolve this and also what is the effect of execution of Line#1 if block?\n\nThe situation is this: I want to load data into a global variable based on the value of a control. I don't want to change the value of a control from the child thread. I'm not going to do it ever from a child thread. \n\nSo only accessing the value so that the corresponding data can be fetched from the database.\n    ",
        "votes": 625,
        "tags": [
            "winforms",
            "invoke",
            "multithreading",
            "c#"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 745,
            "fecha": { "$date" : "2020-06-20 09:12:55Z" },
            "decripcion": "\nAs per Prerak K's update comment (since deleted):\n\nI guess I have not presented the question properly.\nSituation is this: I want to load data into a global variable based on the value of a control. I don't want to change the value of a control from the child thread. I'm not going to do it ever from a child thread.\nSo only accessing the value so that corresponding data can be fetched from the database.\n\nThe solution you want then should look like:\nUserContrl1_LOadDataMethod()\n{\n    string name = \"\";\n    if(textbox1.InvokeRequired)\n    {\n        textbox1.Invoke(new MethodInvoker(delegate { name = textbox1.text; }));\n    }\n    if(name == \"MyName\")\n    {\n        // do whatever\n    }\n}\n\nDo your serious processing in the separate thread before you attempt to switch back to the control's thread. For example:\nUserContrl1_LOadDataMethod()\n{\n    if(textbox1.text==\"MyName\") //<<======Now it wont give exception**\n    {\n        //Load data correspondin to \"MyName\"\n        //Populate a globale variable List<string> which will be\n        //bound to grid at some later stage\n        if(InvokeRequired)\n        {\n            // after we've done all the processing, \n            this.Invoke(new MethodInvoker(delegate {\n                // load the control with the appropriate data\n            }));\n            return;\n        }\n    }\n}\n\n    ",
            "votes": 459,
            "comentarios": [
                {
                    "decripcion": "It's been a while now since I've done C# programming, but based on the MSDN article and my patchy knowledge, it looks like it.",
                    "fecha": { "$date" : "2016-12-13 21:17:17Z" },
                    "usuario": "Jeff Hubbard",
                    "usuario_id": 1206
                },
                {
                    "decripcion": "The difference is, BeginInvoke() is asynchronous while Invoke() runs synchronously. stackoverflow.com/questions/229554/\u2026",
                    "fecha": { "$date" : "2017-10-13 00:18:48Z" },
                    "usuario": "frzsombor",
                    "usuario_id": 1207
                }
            ],
            "usuario": "Jeff Hubbard",
            "usuario_id": 1206
        },
        "respuestas": [
            745,
            746,
            747,
            748,
            749,
            750,
            751,
            752,
            753,
            754,
            755,
            756,
            757,
            758,
            759,
            760,
            761,
            762,
            763,
            764,
            765,
            766
        ],
        "comentarios": [
            {
                "decripcion": "For my particular instance of this error, I found the workaround to be to use a BackgroundWorker on the form to handle the data-intensive parts of the code. (i.e. put all of the problem code into the backgroundWorker1_DoWork() method and call it via backgroundWorker1.RunWorkerAsync())... These two sources pointed me in the correct direction: stackoverflow.com/questions/4806742/\u2026  youtube.com/watch?v=MLrrbG6V1zM",
                "fecha": { "$date" : "2019-09-18 19:12:28Z" },
                "usuario": "Giollia",
                "usuario_id": 1233
            }
        ],
        "usuario": "Prerak K",
        "usuario_id": 1209
    },
    {
        "_id": 48,
        "titulo": "Is there any way to kill a Thread?",
        "fecha": { "$date" : "2018-10-14 15:23:54Z" },
        "decripcion": "\n                \nIs it possible to terminate a running thread without setting/checking any flags/semaphores/etc.?\n    ",
        "votes": 847,
        "tags": [
            "python",
            "terminate",
            "multithreading",
            "kill"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 767,
            "fecha": { "$date" : "2020-11-09 14:25:00Z" },
            "decripcion": "\nIt is generally a bad pattern to kill a thread abruptly, in Python, and in any language. Think of the following cases:\n\nthe thread is holding a critical resource that must be closed properly\nthe thread has created several other threads that must be killed as well.\n\nThe nice way of handling this, if you can afford it (if you are managing your own threads), is to have an exit_request flag that each thread checks on a regular interval to see if it is time for it to exit.\nFor example:\nimport threading\n\nclass StoppableThread(threading.Thread):\n    \"\"\"Thread class with a stop() method. The thread itself has to check\n    regularly for the stopped() condition.\"\"\"\n\n    def __init__(self,  *args, **kwargs):\n        super(StoppableThread, self).__init__(*args, **kwargs)\n        self._stop_event = threading.Event()\n\n    def stop(self):\n        self._stop_event.set()\n\n    def stopped(self):\n        return self._stop_event.is_set()\n\nIn this code, you should call stop() on the thread when you want it to exit, and wait for the thread to exit properly using join(). The thread should check the stop flag at regular intervals.\nThere are cases, however, when you really need to kill a thread. An example is when you are wrapping an external library that is busy for long calls, and you want to interrupt it.\nThe following code allows (with some restrictions) to raise an Exception in a Python thread:\ndef _async_raise(tid, exctype):\n    '''Raises an exception in the threads with id tid'''\n    if not inspect.isclass(exctype):\n        raise TypeError(\"Only types can be raised (not instances)\")\n    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(tid),\n                                                     ctypes.py_object(exctype))\n    if res == 0:\n        raise ValueError(\"invalid thread id\")\n    elif res != 1:\n        # \"if it returns a number greater than one, you're in trouble,\n        # and you should call it again with exc=NULL to revert the effect\"\n        ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(tid), None)\n        raise SystemError(\"PyThreadState_SetAsyncExc failed\")\n\nclass ThreadWithExc(threading.Thread):\n    '''A thread class that supports raising an exception in the thread from\n       another thread.\n    '''\n    def _get_my_tid(self):\n        \"\"\"determines this (self's) thread id\n\n        CAREFUL: this function is executed in the context of the caller\n        thread, to get the identity of the thread represented by this\n        instance.\n        \"\"\"\n        if not self.isAlive():\n            raise threading.ThreadError(\"the thread is not active\")\n\n        # do we have it cached?\n        if hasattr(self, \"_thread_id\"):\n            return self._thread_id\n\n        # no, look for it in the _active dict\n        for tid, tobj in threading._active.items():\n            if tobj is self:\n                self._thread_id = tid\n                return tid\n\n        # TODO: in python 2.6, there's a simpler way to do: self.ident\n\n        raise AssertionError(\"could not determine the thread's id\")\n\n    def raiseExc(self, exctype):\n        \"\"\"Raises the given exception type in the context of this thread.\n\n        If the thread is busy in a system call (time.sleep(),\n        socket.accept(), ...), the exception is simply ignored.\n\n        If you are sure that your exception should terminate the thread,\n        one way to ensure that it works is:\n\n            t = ThreadWithExc( ... )\n            ...\n            t.raiseExc( SomeException )\n            while t.isAlive():\n                time.sleep( 0.1 )\n                t.raiseExc( SomeException )\n\n        If the exception is to be caught by the thread, you need a way to\n        check that your thread has caught it.\n\n        CAREFUL: this function is executed in the context of the\n        caller thread, to raise an exception in the context of the\n        thread represented by this instance.\n        \"\"\"\n        _async_raise( self._get_my_tid(), exctype )\n\n(Based on Killable Threads by Tomer Filiba. The quote about the return value of PyThreadState_SetAsyncExc appears to be from an old version of Python.)\nAs noted in the documentation, this is not a magic bullet because if the thread is busy outside the Python interpreter, it will not catch the interruption.\nA good usage pattern of this code is to have the thread catch a specific exception and perform the cleanup. That way, you can interrupt a task and still have proper cleanup.\n    ",
            "votes": 751,
            "comentarios": [
                {
                    "decripcion": "@Bluebird75: Furthermore, I'm not sure I get the argument that threads should not be killed abruptly \"because the thread might be holding a critical resource that must be closed properly\": this is also true from a main program, and main programs can be killed abruptly by the user (Ctrl-C in Unix, for instance)\u2013in which case they try to handle this possibility as nicely as possible.  So, I fail to see what is special with threads, and why they should not receive the same treatment as main programs (namely that they can be killed abruptly). :)  Could you elaborate on this?",
                    "fecha": { "$date" : "2011-07-14 16:53:10Z" },
                    "usuario": "Eric O Lebigot",
                    "usuario_id": 1234
                },
                {
                    "decripcion": "@EOL: On the other hand, if all the resources that the thread is owning are local resources (open files, sockets), Linux is reasonably good at the process cleanup and this does not leak. I had cases though where I created a server using socket, and if I do a brutal interruption with Ctrl-C, I can non longer launch the program because it can not binds the socket. I need to wait 5 minutes. Proper solution was to catch Ctrl-C and do clean socket deconnection.",
                    "fecha": { "$date" : "2011-08-02 09:45:03Z" },
                    "usuario": "Philippe F",
                    "usuario_id": 1235
                },
                {
                    "decripcion": "@Bluebird75: btw. you can use SO_REUSEADDR socket option to avoid Address already in use error.",
                    "fecha": { "$date" : "2011-09-11 09:09:55Z" },
                    "usuario": "Messa",
                    "usuario_id": 1236
                },
                {
                    "decripcion": "Note about this answer: at least for me (py2.6), I had to pass None instead of 0 for the res != 1 case, and I had to call ctypes.c_long(tid) and pass that to any ctypes function rather than the tid directly.",
                    "fecha": { "$date" : "2011-11-17 21:16:35Z" },
                    "usuario": "Walt W",
                    "usuario_id": 1237
                },
                {
                    "decripcion": "Its worth mentioning that _stop is already occupied in the Python 3 threading library. As such, maybe use a different variable otherwise you will get an error.",
                    "fecha": { "$date" : "2013-01-18 01:51:59Z" },
                    "usuario": "diedthreetimes",
                    "usuario_id": 1238
                }
            ],
            "usuario": "Philippe F",
            "usuario_id": 1235
        },
        "respuestas": [
            767,
            768,
            769,
            770,
            771,
            772,
            773,
            774,
            775,
            776,
            777,
            778,
            779,
            780,
            781,
            782,
            783,
            784,
            785,
            786,
            787,
            788,
            789,
            790,
            791,
            792,
            793,
            794,
            795
        ],
        "comentarios": [],
        "usuario": "Sudden Def",
        "usuario_id": 1291
    },
    {
        "_id": 49,
        "titulo": "\"implements Runnable\" vs \"extends Thread\" in Java",
        "fecha": { "$date" : "2021-08-17 09:22:55Z" },
        "decripcion": "\n                \nFrom what time I've spent with threads in Java, I've found these two ways to write threads:\nWith implements Runnable:\npublic class MyRunnable implements Runnable {\n    public void run() {\n        //Code\n    }\n}\n//Started with a \"new Thread(new MyRunnable()).start()\" call\n\nOr, with extends Thread:\npublic class MyThread extends Thread {\n    public MyThread() {\n        super(\"MyThread\");\n    }\n    public void run() {\n        //Code\n    }\n}\n//Started with a \"new MyThread().start()\" call\n\nIs there any significant difference in these two blocks of code?\n    ",
        "votes": 2238,
        "tags": [
            "implements",
            "multithreading",
            "java-threads",
            "java",
            "runnable"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 796,
            "fecha": { "$date" : "2020-10-26 14:02:08Z" },
            "decripcion": "\nYes: implements Runnable is the preferred way to do it, IMO. You're not really specialising the thread's behaviour.  You're just giving it something to run. That means composition is the philosophically \"purer\" way to go.\nIn practical terms, it means you can implement Runnable and extend from another class as well... and you can also implement Runnable via a lambda expression as of Java 8.\n    ",
            "votes": 1758,
            "comentarios": [
                {
                    "decripcion": "Exactly, well put.  What behavior are we trying to overwrite in Thread by extending it?  I would argue most people are not trying to overwrite any behavior, but trying to use behavior of Thread.",
                    "fecha": { "$date" : "2009-02-12 16:50:22Z" },
                    "usuario": "hooknc",
                    "usuario_id": 1292
                },
                {
                    "decripcion": "As a side comment, if you instantiate a Thread and do not call its start() method you are creating a memory leak in Java < 5 (this does not happen with Runnables): stackoverflow.com/questions/107823/\u2026",
                    "fecha": { "$date" : "2013-02-07 13:48:02Z" },
                    "usuario": "Nacho Coloma",
                    "usuario_id": 1293
                },
                {
                    "decripcion": "One minor advantage of Runnable is that, if in certain circumstances you don't care about, or don't want to use threading, and you just want to execute the code, you have the option to simply call run().  e.g. (very handwavy)  if (numberCores > 4) myExecutor.excute(myRunnable); else myRunnable.run()",
                    "fecha": { "$date" : "2013-03-06 19:30:18Z" },
                    "usuario": "user949300",
                    "usuario_id": 1294
                },
                {
                    "decripcion": "@user949300 you can also do that with extends Thread and if you don't want threading why would you even implement Runnable...",
                    "fecha": { "$date" : "2013-04-23 08:15:52Z" },
                    "usuario": "m0skit0",
                    "usuario_id": 1295
                },
                {
                    "decripcion": "To paraphrase Sierra and Bates, a key benefit of implementing Runnable is that you are architecturally seperating the \"job\" from the \"runner\".",
                    "fecha": { "$date" : "2014-02-12 09:28:00Z" },
                    "usuario": "8bitjunkie",
                    "usuario_id": 1296
                }
            ],
            "usuario": "Jon Skeet",
            "usuario_id": 1210
        },
        "respuestas": [
            796,
            797,
            798,
            799,
            800,
            801,
            802,
            803,
            804,
            805,
            806,
            807,
            808,
            809,
            810,
            811,
            812,
            813,
            814,
            815,
            816,
            817,
            818,
            819,
            820,
            821,
            822,
            823,
            824,
            825
        ],
        "comentarios": [
            {
                "decripcion": "Thanks for this question, the answers cleared up a lot of misconceptions I had. I looked into the correct way to do Java threads before SO existed and there was a lot of misinformation/outdated information out there.",
                "fecha": { "$date" : "2009-05-08 20:56:28Z" },
                "usuario": "James McMahon",
                "usuario_id": 1343
            },
            {
                "decripcion": "there is one reason you might want to extend Thread (but I do not recommend it), you can preemptively handle interrupt(). Again, it's an idea, it might be useful in the right case, however I do not recommend it.",
                "fecha": { "$date" : "2011-02-12 23:23:57Z" },
                "usuario": "bestsss",
                "usuario_id": 1344
            },
            {
                "decripcion": "Please see also the answer, nicely explained: stackoverflow.com/q/5562720/285594",
                "fecha": { "$date" : "2011-04-06 10:06:08Z" },
                "usuario": "NA",
                "usuario_id": 53
            },
            {
                "decripcion": "@bestsss, I'm trying to puzzle out what you might mean about handling interrupt().  Are you trying to override the method?",
                "fecha": { "$date" : "2011-04-25 13:29:28Z" },
                "usuario": "Bob Cross",
                "usuario_id": 1298
            },
            {
                "decripcion": "yes.As per the code,class Thread A can extend any class whereas class Thread B cant extend any other class",
                "fecha": { "$date" : "2014-01-27 08:31:56Z" },
                "usuario": "mani deepak",
                "usuario_id": 1345
            }
        ],
        "usuario": "user65374",
        "usuario_id": 1346
    },
    {
        "_id": 50,
        "titulo": "Loop doesn't see value changed by other thread without a print statement",
        "fecha": { "$date" : "2019-01-10 11:59:20Z" },
        "decripcion": "\n                \nIn my code I have a loop that waits for some state to be changed from a different thread. The other thread works, but my loop never sees the changed value. It waits forever. However, when I put a System.out.println statement in the loop, it suddenly works! Why?\n\n\n\nThe following is an example of my code:\n\nclass MyHouse {\n    boolean pizzaArrived = false;\n\n    void eatPizza() {\n        while (pizzaArrived == false) {\n            //System.out.println(\"waiting\");\n        }\n\n        System.out.println(\"That was delicious!\");\n    }\n\n    void deliverPizza() {\n        pizzaArrived = true;\n    }\n}\n\n\nWhile the while loop is running, I call deliverPizza() from a different thread to set the pizzaArrived variable. But the loop only works when I uncomment the System.out.println(\"waiting\"); statement. What's going on?\n    ",
        "votes": 95,
        "tags": [
            "java",
            "busy-waiting",
            "multithreading",
            "synchronization"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 826,
            "fecha": { "$date" : "2014-11-17 16:28:39Z" },
            "decripcion": "\nThe JVM is allowed to assume that other threads do not change the pizzaArrived variable during the loop. In other words, it can hoist the pizzaArrived == false test outside the loop, optimizing this:\n\nwhile (pizzaArrived == false) {}\n\n\ninto this:\n\nif (pizzaArrived == false) while (true) {}\n\n\nwhich is an infinite loop.\n\nTo ensure that changes made by one thread are visible to other threads you must always add some synchronization between the threads. The simplest way to do this is to make the shared variable volatile:\n\nvolatile boolean pizzaArrived = false;\n\n\nMaking a variable volatile guarantees that different threads will see the effects of each other's changes to it. This prevents the JVM from caching the value of pizzaArrived or hoisting the test outside the loop. Instead, it must read the value of the real variable every time.\n\n(More formally, volatile creates a happens-before relationship between accesses to the variable. This means that all other work a thread did before delivering the pizza is also visible to the thread receiving the pizza, even if those other changes are not to volatile variables.)\n\nSynchronized methods are used principally to implement mutual exclusion (preventing two things happening at the same time), but they also have all the same side-effects that volatile has. Using them when reading and writing a variable is another way to make the changes visible to other threads:\n\nclass MyHouse {\n    boolean pizzaArrived = false;\n\n    void eatPizza() {\n        while (getPizzaArrived() == false) {}\n        System.out.println(\"That was delicious!\");\n    }\n\n    synchronized boolean getPizzaArrived() {\n        return pizzaArrived;\n    }\n\n    synchronized void deliverPizza() {\n        pizzaArrived = true;\n    }\n}\n\n\n\n\nThe effect of a print statement\n\nSystem.out is a PrintStream object. The methods of PrintStream are synchronized like this:\n\npublic void println(String x) {\n    synchronized (this) {\n        print(x);\n        newLine();\n    }\n}\n\n\nThe synchronization prevents pizzaArrived being cached during the loop. Strictly speaking, both threads must synchronize on the same object to guarantee that changes to the variable are visible. (For example, calling println after setting pizzaArrived and calling it again before reading pizzaArrived would be correct.) If only one thread synchronizes on a particular object, the JVM is allowed to ignore it. In practice, the JVM is not smart enough to prove that other threads won't call println after setting pizzaArrived, so it assumes that they might. Therefore, it cannot cache the variable during the loop if you call System.out.println. That's why loops like this work when they have a print statement, although it is not a correct fix.\n\nUsing System.out is not the only way to cause this effect, but it is the one people discover most often, when they are trying to debug why their loop doesn't work!\n\n\n\nThe bigger problem\n\nwhile (pizzaArrived == false) {} is a busy-wait loop. That's bad! While it waits, it hogs the CPU, which slows down other applications, and increases the power usage, temperature, and fan speed of the system. Ideally, we would like the loop thread to sleep while it waits, so it does not hog the CPU.\n\nHere are some ways to do that:\n\nUsing wait/notify\n\nA low-level solution is to use the wait/notify methods of Object:\n\nclass MyHouse {\n    boolean pizzaArrived = false;\n\n    void eatPizza() {\n        synchronized (this) {\n            while (!pizzaArrived) {\n                try {\n                    this.wait();\n                } catch (InterruptedException e) {}\n            }\n        }\n\n        System.out.println(\"That was delicious!\");\n    }\n\n    void deliverPizza() {\n        synchronized (this) {\n            pizzaArrived = true;\n            this.notifyAll();\n        }\n    }\n}\n\n\nIn this version of the code, the loop thread calls wait(), which puts the thread the sleep. It will not use any CPU cycles while sleeping. After the second thread sets the variable, it calls notifyAll() to wake up any/all threads which were waiting on that object. This is like having the pizza guy ring the doorbell, so you can sit down and rest while waiting, instead of standing awkwardly at the door.\n\nWhen calling wait/notify on an object you must hold the synchronization lock of that object, which is what the above code does. You can use any object you like so long as both threads use the same object: here I used this (the instance of MyHouse). Usually, two threads would not be able to enter synchronized blocks of the same object simultaneously (which is part of the purpose of synchronization) but it works here because a thread temporarily releases the synchronization lock when it is inside the wait() method.\n\nBlockingQueue\n\nA BlockingQueue is used to implement producer-consumer queues. \"Consumers\" take items from the front of the queue, and \"producers\" push items on at the back. An example:\n\nclass MyHouse {\n    final BlockingQueue<Object> queue = new LinkedBlockingQueue<>();\n\n    void eatFood() throws InterruptedException {\n        // take next item from the queue (sleeps while waiting)\n        Object food = queue.take();\n        // and do something with it\n        System.out.println(\"Eating: \" + food);\n    }\n\n    void deliverPizza() throws InterruptedException {\n        // in producer threads, we push items on to the queue.\n        // if there is space in the queue we can return immediately;\n        // the consumer thread(s) will get to it later\n        queue.put(\"A delicious pizza\");\n    }\n}\n\n\nNote: The put and take methods of BlockingQueue can throw InterruptedExceptions, which are checked exceptions which must be handled. In the above code, for simplicity, the exceptions are rethrown. You might prefer to catch the exceptions in the methods and retry the put or take call to be sure it succeeds. Apart from that one point of ugliness, BlockingQueue is very easy to use.\n\nNo other synchronization is needed here because a BlockingQueue makes sure that everything threads did before putting items in the queue is visible to the threads taking those items out.\n\nExecutors\n\nExecutors are like ready-made BlockingQueues which execute tasks. Example:\n\n// A \"SingleThreadExecutor\" has one work thread and an unlimited queue\nExecutorService executor = Executors.newSingleThreadExecutor();\n\nRunnable eatPizza = () -> { System.out.println(\"Eating a delicious pizza\"); };\nRunnable cleanUp = () -> { System.out.println(\"Cleaning up the house\"); };\n\n// we submit tasks which will be executed on the work thread\nexecutor.execute(eatPizza);\nexecutor.execute(cleanUp);\n// we continue immediately without needing to wait for the tasks to finish\n\n\nFor details see the doc for Executor, ExecutorService, and Executors.\n\nEvent handling\n\nLooping while waiting for the user to click something in a UI is wrong. Instead, use the event handling features of the UI toolkit. In Swing, for example:\n\nJLabel label = new JLabel();\nJButton button = new JButton(\"Click me\");\nbutton.addActionListener((ActionEvent e) -> {\n    // This event listener is run when the button is clicked.\n    // We don't need to loop while waiting.\n    label.setText(\"Button was clicked\");\n});\n\n\nBecause the event handler runs on the event dispatch thread, doing long work in the event handler blocks other interaction with the UI until the work is finished. Slow operations can be started on a new thread, or dispatched to a waiting thread using one of the above techniques (wait/notify, a BlockingQueue, or Executor). You can also use a SwingWorker, which is designed exactly for this, and automatically supplies a background worker thread:\n\nJLabel label = new JLabel();\nJButton button = new JButton(\"Calculate answer\");\n\n// Add a click listener for the button\nbutton.addActionListener((ActionEvent e) -> {\n\n    // Defines MyWorker as a SwingWorker whose result type is String:\n    class MyWorker extends SwingWorker<String,Void> {\n        @Override\n        public String doInBackground() throws Exception {\n            // This method is called on a background thread.\n            // You can do long work here without blocking the UI.\n            // This is just an example:\n            Thread.sleep(5000);\n            return \"Answer is 42\";\n        }\n\n        @Override\n        protected void done() {\n            // This method is called on the Swing thread once the work is done\n            String result;\n            try {\n                result = get();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n            label.setText(result); // will display \"Answer is 42\"\n        }\n    }\n\n    // Start the worker\n    new MyWorker().execute();\n});\n\n\nTimers\n\nTo perform periodic actions, you can use a java.util.Timer. It is easier to use than writing your own timing loop, and easier to start and stop. This demo prints the current time once per second:\n\nTimer timer = new Timer();\nTimerTask task = new TimerTask() {\n    @Override\n    public void run() {\n        System.out.println(System.currentTimeMillis());\n    }\n};\ntimer.scheduleAtFixedRate(task, 0, 1000);\n\n\nEach java.util.Timer has its own background thread which is used to execute its scheduled TimerTasks. Naturally, the thread sleeps between tasks, so it does not hog the CPU.\n\nIn Swing code, there is also a javax.swing.Timer, which is similar, but it executes the listener on the Swing thread, so you can safely interact with Swing components without needing to manually switch threads:\n\nJFrame frame = new JFrame();\nframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\nTimer timer = new Timer(1000, (ActionEvent e) -> {\n    frame.setTitle(String.valueOf(System.currentTimeMillis()));\n});\ntimer.setRepeats(true);\ntimer.start();\nframe.setVisible(true);\n\n\nOther ways\n\nIf you are writing multithreaded code, it is worth exploring the classes in these packages to see what is available:\n\n\njava.util.concurrent\njava.util.concurrent.atomic\njava.util.concurrent.locks\n\n\nAnd also see the Concurrency section of the Java tutorials. Multithreading is complicated, but there is lots of help available!\n    ",
            "votes": 163,
            "comentarios": [
                {
                    "decripcion": "Very professional answer, after reading this no misconception is left on my mind, thank you",
                    "fecha": { "$date" : "2015-08-30 12:39:14Z" },
                    "usuario": "Humoyun Ahmad",
                    "usuario_id": 1347
                },
                {
                    "decripcion": "Awesome answer. I am working with Java threads for quite a while and still learned something here (wait() releases the synchronization lock!).",
                    "fecha": { "$date" : "2015-10-15 20:05:00Z" },
                    "usuario": "brimborium",
                    "usuario_id": 1348
                },
                {
                    "decripcion": "Thank you, Boann! Great answer, it's like a full article with examples! Yes, also liked \"wait() releases the synchronization lock\"",
                    "fecha": { "$date" : "2016-10-14 17:28:49Z" },
                    "usuario": "Kiryl Ivanou",
                    "usuario_id": 1349
                },
                {
                    "decripcion": "java public class ThreadTest {     private static boolean flag = false;      private static class Reader extends Thread {          @Override         public void run() {             while(flag == false) {}             System.out.println(flag);         }      }      public static void main(String[] args) {         new Reader().start();         flag = true;     } }  @Boann, this code doesn't  hoist the pizzaArrived == false test outside the loop, and loop can see flag changed by main thread,why?",
                    "fecha": { "$date" : "2019-12-21 18:30:47Z" },
                    "usuario": "gaussclb",
                    "usuario_id": 1350
                },
                {
                    "decripcion": "@gaussclb If you mean that you decompiled a class file, correct. The Java compiler does almost no optimization. The hoisting is done by the JVM. You need to disassemble the native machine code. Try: wiki.openjdk.java.net/display/HotSpot/PrintAssembly",
                    "fecha": { "$date" : "2019-12-22 13:48:24Z" },
                    "usuario": "Boann",
                    "usuario_id": 613
                }
            ],
            "usuario": "Boann",
            "usuario_id": 613
        },
        "respuestas": [
            826
        ],
        "comentarios": [],
        "usuario": "Boann",
        "usuario_id": 613
    },
    {
        "_id": 51,
        "titulo": "Start thread with member function",
        "fecha": { "$date" : "2015-04-20 17:58:29Z" },
        "decripcion": "\n                \nI am trying to construct a std::thread with a member function that takes no arguments and returns void. I can't figure out any syntax that works - the compiler complains no matter what. What is the correct way to implement spawn() so that it returns a std::thread that executes test()?\n\n#include <thread>\nclass blub {\n  void test() {\n  }\npublic:\n  std::thread spawn() {\n    return { test };\n  }\n};\n\n    ",
        "votes": 338,
        "tags": [
            "c++11",
            "multithreading",
            "c++"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 827,
            "fecha": { "$date" : "2013-11-05 10:26:54Z" },
            "decripcion": "\n#include <thread>\n#include <iostream>\n\nclass bar {\npublic:\n  void foo() {\n    std::cout << \"hello from member function\" << std::endl;\n  }\n};\n\nint main()\n{\n  std::thread t(&bar::foo, bar());\n  t.join();\n}\n\n\nEDIT:\nAccounting your edit, you have to do it like this:\n\n  std::thread spawn() {\n    return std::thread(&blub::test, this);\n  }\n\n\n\n\nUPDATE: I want to explain some more points, some of them have also been discussed in the comments.\n\nThe syntax described above is defined in terms of the INVOKE definition (\u00a720.8.2.1):\n\n\n  Define INVOKE (f, t1, t2, ..., tN) as follows: \n  \n  \n  (t1.*f)(t2, ..., tN) when f is a pointer to a member function of a class T and t1 is an object of type T or a reference to an object of\n  type T or a reference to an object of a type derived from T;\n  ((*t1).*f)(t2, ..., tN) when f is a pointer to a member function of a class T and t1 is not one of the types described in the previous\n  item;\n  t1.*f when N ==    1 and f is a pointer to member data of a class T and  t  1 is an object of type T or a\n  reference to an object of type T or a reference to an object of a\n  type derived from T;\n  (*t1).*f when N == 1 and f is a pointer to member data of a class T and t 1 is not one of the types described in the previous item;\n  f(t1, t2, ..., tN) in all other cases.\n  \n\n\n\n\nAnother general fact which I want to point out is that by default the thread constructor will copy all arguments passed to it. The reason for this is that the arguments may need to outlive the calling thread, copying the arguments guarantees that. Instead, if you want to really pass a reference, you can use a std::reference_wrapper created by std::ref.\n\nstd::thread (foo, std::ref(arg1));\n\n\nBy doing this, you are promising that you will take care of guaranteeing that the arguments will still exist when the thread operates on them.\n\n\n\nNote that all the things mentioned above can also be applied to std::async and std::bind.\n    ",
            "votes": 433,
            "comentarios": [
                {
                    "decripcion": "At least this way it compiles. Though I have no idea why you are passing the instance as the second argument.",
                    "fecha": { "$date" : "2012-05-20 13:37:46Z" },
                    "usuario": "abergmeier",
                    "usuario_id": 1351
                },
                {
                    "decripcion": "@LCID: The multi-argument version of the std::thread constructor works as if the arguments were passed to std::bind.  To call a member function, the first argument to std::bind must be a pointer, reference, or shared pointer to an object of the appropriate type.",
                    "fecha": { "$date" : "2012-05-20 13:49:51Z" },
                    "usuario": "Dave S",
                    "usuario_id": 1352
                },
                {
                    "decripcion": "Where do you take it from that the constructor acts like an implicit bind? I can't find that anywhere.",
                    "fecha": { "$date" : "2012-05-20 13:58:56Z" },
                    "usuario": "Kerrek SB",
                    "usuario_id": 1353
                },
                {
                    "decripcion": "@KerrekSB, compare [thread.thread.constr]p4 with [func.bind.bind]p3, the semantics are quite similar, defined in terms of the INVOKE pseudocode, which defines how member functions are called",
                    "fecha": { "$date" : "2012-05-20 14:39:04Z" },
                    "usuario": "Jonathan Wakely",
                    "usuario_id": 1354
                },
                {
                    "decripcion": "remember that not static member functions as first parameter take instance of class (it's not visible for programmer), so when passing this method as raw function you will always encounter a problem during compilation and declaration mismatch.",
                    "fecha": { "$date" : "2013-10-10 11:56:54Z" },
                    "usuario": "zoska",
                    "usuario_id": 1355
                }
            ],
            "usuario": "Stephan Dollberg",
            "usuario_id": 1356
        },
        "respuestas": [
            827,
            828,
            829,
            830,
            831
        ],
        "comentarios": [
            {
                "decripcion": "Do u mean the function returns void, called void or it just doesn't have any parameters. Can u add the code for what you are trying to do?",
                "fecha": { "$date" : "2012-05-20 13:02:09Z" },
                "usuario": "Zaid Amir",
                "usuario_id": 1366
            },
            {
                "decripcion": "Have you tested? (I haven't yet.) Your code seems to rely on the RVO (return-value-optimzation), but I don't think you are supposed to do so. I think using std::move( std::thread(func) ); is better, for std::thread doesn't have a copy-constructor.",
                "fecha": { "$date" : "2013-10-10 11:28:11Z" },
                "usuario": "RnMss",
                "usuario_id": 1359
            },
            {
                "decripcion": "@RnMss: you can rely on RVO, using std::move is redundant in this case - were this not true, and there was no copy constructor, the compiler would give an error anyway.",
                "fecha": { "$date" : "2015-10-22 13:19:55Z" },
                "usuario": "Qualia",
                "usuario_id": 1367
            }
        ],
        "usuario": "abergmeier",
        "usuario_id": 1351
    },
    {
        "_id": 52,
        "titulo": "Timeout on a function call",
        "fecha": { "$date" : "2016-05-23 20:52:07Z" },
        "decripcion": "\n                \nI'm calling a function in Python which I know may stall and force me to restart the script. \n\nHow do I call the function or what do I wrap it in so that if it takes longer than 5 seconds the script cancels it and does something else?\n    ",
        "votes": 390,
        "tags": [
            "python",
            "python-multithreading",
            "multithreading",
            "timeout"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 832,
            "fecha": { "$date" : "2020-07-25 11:40:16Z" },
            "decripcion": "\nYou may use the signal package if you are running on UNIX:\nIn [1]: import signal\n\n# Register an handler for the timeout\nIn [2]: def handler(signum, frame):\n   ...:     print(\"Forever is over!\")\n   ...:     raise Exception(\"end of time\")\n   ...: \n\n# This function *may* run for an indetermined time...\nIn [3]: def loop_forever():\n   ...:     import time\n   ...:     while 1:\n   ...:         print(\"sec\")\n   ...:         time.sleep(1)\n   ...:         \n   ...:         \n\n# Register the signal function handler\nIn [4]: signal.signal(signal.SIGALRM, handler)\nOut[4]: 0\n\n# Define a timeout for your function\nIn [5]: signal.alarm(10)\nOut[5]: 0\n\nIn [6]: try:\n   ...:     loop_forever()\n   ...: except Exception, exc: \n   ...:     print(exc)\n   ....: \nsec\nsec\nsec\nsec\nsec\nsec\nsec\nsec\nForever is over!\nend of time\n\n# Cancel the timer if the function returned before timeout\n# (ok, mine won't but yours maybe will :)\nIn [7]: signal.alarm(0)\nOut[7]: 0\n\n10 seconds after the call signal.alarm(10), the handler is called. This raises an exception that you can intercept from the regular Python code.\nThis module doesn't play well with threads (but then, who does?)\nNote that since we raise an exception when timeout happens, it may end up caught and ignored inside the function, for example of one such function:\ndef loop_forever():\n    while 1:\n        print('sec')\n        try:\n            time.sleep(10)\n        except:\n            continue\n\n    ",
            "votes": 276,
            "comentarios": [
                {
                    "decripcion": "I use Python 2.5.4. There is such an error: Traceback (most recent call last):   File \"aa.py\", line 85, in func     signal.signal(signal.SIGALRM, handler) AttributeError: 'module' object has no attribute 'SIGALRM'",
                    "fecha": { "$date" : "2011-05-13 01:59:51Z" },
                    "usuario": "flypen",
                    "usuario_id": 1368
                },
                {
                    "decripcion": "@flypen that's because signal.alarm and the related SIGALRM are not available on Windows platforms.",
                    "fecha": { "$date" : "2011-08-19 16:20:28Z" },
                    "usuario": "Double AA",
                    "usuario_id": 1369
                },
                {
                    "decripcion": "If there are a lot of processes, and each calls signal.signal --- will they all work properly? Won't each signal.signal call cancel \"concurrent\" one?",
                    "fecha": { "$date" : "2012-05-10 08:28:47Z" },
                    "usuario": "brownian",
                    "usuario_id": 1370
                },
                {
                    "decripcion": "Warning for those wishing to use this with a C extension: The Python signal handler won't be called until the C function returns control to the Python interpreter. For this use case, use ATOzTOA's answer: stackoverflow.com/a/14924210/1286628",
                    "fecha": { "$date" : "2014-02-20 20:25:26Z" },
                    "usuario": "wkschwartz",
                    "usuario_id": 1371
                },
                {
                    "decripcion": "I second the warning about threads.  signal.alarm only works on main thread. I tried to use this in Django views - immediate fail with verbiage about main thread only.",
                    "fecha": { "$date" : "2015-04-02 06:51:30Z" },
                    "usuario": "JL Peyret",
                    "usuario_id": 1372
                }
            ],
            "usuario": "piro",
            "usuario_id": 1373
        },
        "respuestas": [
            832,
            833,
            834,
            835,
            836,
            837,
            838,
            839,
            840,
            841,
            842,
            843,
            844,
            845,
            846,
            847,
            848,
            849,
            850,
            851
        ],
        "comentarios": [
            {
                "decripcion": "This libray looks maintained: pypi.org/project/wrapt-timeout-decorator",
                "fecha": { "$date" : "2021-04-09 08:44:27Z" },
                "usuario": "guettli",
                "usuario_id": 1425
            }
        ],
        "usuario": "Teifion",
        "usuario_id": 1426
    },
    {
        "_id": 53,
        "titulo": "How can I use threading in Python?",
        "fecha": { "$date" : "2019-12-09 16:42:26Z" },
        "decripcion": "\n                \nI am trying to understand threading in Python. I've looked at the documentation and examples, but quite frankly, many examples are overly sophisticated and I'm having trouble understanding them.\n\nHow do you clearly show tasks being divided for multi-threading?\n    ",
        "votes": 1400,
        "tags": [
            "concurrency",
            "python",
            "python-multithreading",
            "multithreading"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            852,
            853,
            854,
            855,
            856,
            857,
            858,
            859,
            860,
            861,
            862,
            863,
            864,
            865,
            866,
            867,
            868,
            869,
            870,
            871,
            872
        ],
        "comentarios": [
            {
                "decripcion": "A good general discussion around this topic can be found in  Python's Hardest Problem by Jeff Knupp.  In summary, it seems threading is not for beginners.",
                "fecha": { "$date" : "2013-09-04 07:12:39Z" },
                "usuario": "Matthew Walker",
                "usuario_id": 1477
            },
            {
                "decripcion": "haha, I tend to think that threading is for everyone, but beginners are not for threading :)))))",
                "fecha": { "$date" : "2013-09-17 03:37:04Z" },
                "usuario": "Bohdan",
                "usuario_id": 1478
            },
            {
                "decripcion": "Just to flag that people should read all the answers as later ones are arguably better as new language features are taken advantage of...",
                "fecha": { "$date" : "2015-03-01 08:14:06Z" },
                "usuario": "Gwyn Evans",
                "usuario_id": 1479
            },
            {
                "decripcion": "Remember to write your core logic in C and call it via ctypes to really take advantage of Python threading.",
                "fecha": { "$date" : "2015-07-09 00:52:01Z" },
                "usuario": "aaa90210",
                "usuario_id": 1480
            },
            {
                "decripcion": "I just wanted to add that PyPubSub is a great way to send and receive messages to control Thread flow",
                "fecha": { "$date" : "2015-08-07 09:12:52Z" },
                "usuario": "ytpillai",
                "usuario_id": 26
            }
        ],
        "usuario": "albruno",
        "usuario_id": 1481
    },
    {
        "_id": 54,
        "titulo": "What is a race condition?",
        "fecha": { "$date" : "2020-04-19 13:45:40Z" },
        "decripcion": "\n                \nWhen writing multithreaded applications, one of the most common problems experienced is race conditions.  \n\nMy questions to the community are:\n\nWhat is the race condition?\nHow do you detect them?\nHow do you handle them?\nFinally, how do you prevent them from occurring?  \n    ",
        "votes": 1153,
        "tags": [
            "concurrency",
            "terminology",
            "race-condition",
            "multithreading"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 873,
            "fecha": { "$date" : "2015-04-07 11:03:02Z" },
            "decripcion": "\nA race condition occurs when two or more threads can access shared data and they try to change it at the same time. Because the thread scheduling algorithm can swap between threads at any time, you don't know the order in which the threads will attempt to access the shared data. Therefore, the result of the change in data is dependent on the thread scheduling algorithm, i.e. both threads are \"racing\" to access/change the data. \n\nProblems often occur when one thread does a \"check-then-act\" (e.g. \"check\" if the value is X, then \"act\" to do something that depends on the value being X) and another thread does something to the value in between the \"check\" and the \"act\". E.g:\n\nif (x == 5) // The \"Check\"\n{\n   y = x * 2; // The \"Act\"\n\n   // If another thread changed x in between \"if (x == 5)\" and \"y = x * 2\" above,\n   // y will not be equal to 10.\n}\n\n\nThe point being, y could be 10, or it could be anything, depending on whether another thread changed x in between the check and act. You have no real way of knowing.\n\nIn order to prevent race conditions from occurring, you would typically put a lock around the shared data to ensure only one thread can access the data at a time. This would mean something like this:\n\n// Obtain lock for x\nif (x == 5)\n{\n   y = x * 2; // Now, nothing can change x until the lock is released. \n              // Therefore y = 10\n}\n// release lock for x\n\n    ",
            "votes": 1445,
            "comentarios": [
                {
                    "decripcion": "What does the other thread do when it encounters the lock? Does it wait? Error?",
                    "fecha": { "$date" : "2009-10-19 01:58:26Z" },
                    "usuario": "Brian Ortiz",
                    "usuario_id": 1482
                },
                {
                    "decripcion": "Yes, the other thread will have to wait until the lock is released before it can proceed. This makes it very important that the lock is released by the holding thread when it is finished with it. If it never releases it, then the other thread will wait indefinitely.",
                    "fecha": { "$date" : "2009-10-22 09:01:39Z" },
                    "usuario": "Lehane",
                    "usuario_id": 1483
                },
                {
                    "decripcion": "@Ian In a multithreaded system there will always be times when resources need to be shared. To say that one approach is bad without giving an alternative just isn't productive. I'm always looking for ways to improve and if there is an alternative I will gladly research it and weigh the pro's and cons.",
                    "fecha": { "$date" : "2012-05-03 05:16:27Z" },
                    "usuario": "Despertar",
                    "usuario_id": 1484
                },
                {
                    "decripcion": "@Despertar ...also, its not necessarily the case that resources will always need to be shared in a milti-threaded system. For example you might have an array where each element needs processing. You could possibly partition the array and have a thread for each partition and the threads can do their work completely independently of one another.",
                    "fecha": { "$date" : "2012-05-03 17:29:21Z" },
                    "usuario": "Ian Warburton",
                    "usuario_id": 1485
                },
                {
                    "decripcion": "For a race to occur it's enough that a single thread attempts to change the shared data while rest of the threads can either read or change it.",
                    "fecha": { "$date" : "2012-11-09 16:13:30Z" },
                    "usuario": "SomeWittyUsername",
                    "usuario_id": 1486
                }
            ],
            "usuario": "Lehane",
            "usuario_id": 1483
        },
        "respuestas": [
            873,
            874,
            875,
            876,
            877,
            878,
            879,
            880,
            881,
            882,
            883,
            884,
            885,
            886,
            887,
            888,
            889,
            890
        ],
        "comentarios": [
            {
                "decripcion": "I'd like to mention that - without specifying the language - most parts of this question cannot be answered properly, because in different languages, the definition, the consequences and the tools to prevent them might differ.",
                "fecha": { "$date" : "2015-04-21 17:18:00Z" },
                "usuario": "MikeMB",
                "usuario_id": 1514
            },
            {
                "decripcion": "@MikeMB.  Agreed, except when analyzing byte code execution, like it is done by Race Catcher (see this thread stackoverflow.com/a/29361427/1363844) we can address all those approximately 62 languages that compile to byte code  (see en.wikipedia.org/wiki/List_of_JVM_languages)",
                "fecha": { "$date" : "2016-08-12 05:49:28Z" },
                "usuario": "Ben",
                "usuario_id": 183
            }
        ],
        "usuario": "bmurphy1976",
        "usuario_id": 1519
    },
    {
        "_id": 55,
        "titulo": "Android \"Only the original thread that created a view hierarchy can touch its views.\"",
        "fecha": { "$date" : "2017-12-10 17:10:41Z" },
        "decripcion": "\n                \nI've built a simple music player in Android. The view for each song contains a SeekBar, implemented like this: \n\npublic class Song extends Activity implements OnClickListener,Runnable {\n    private SeekBar progress;\n    private MediaPlayer mp;\n\n    // ...\n\n    private ServiceConnection onService = new ServiceConnection() {\n          public void onServiceConnected(ComponentName className,\n            IBinder rawBinder) {\n              appService = ((MPService.LocalBinder)rawBinder).getService(); // service that handles the MediaPlayer\n              progress.setVisibility(SeekBar.VISIBLE);\n              progress.setProgress(0);\n              mp = appService.getMP();\n              appService.playSong(title);\n              progress.setMax(mp.getDuration());\n              new Thread(Song.this).start();\n          }\n          public void onServiceDisconnected(ComponentName classname) {\n              appService = null;\n          }\n    };\n\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.song);\n\n        // ...\n\n        progress = (SeekBar) findViewById(R.id.progress);\n\n        // ...\n    }\n\n    public void run() {\n    int pos = 0;\n    int total = mp.getDuration();\n    while (mp != null && pos<total) {\n        try {\n            Thread.sleep(1000);\n            pos = appService.getSongPosition();\n        } catch (InterruptedException e) {\n            return;\n        } catch (Exception e) {\n            return;\n        }\n        progress.setProgress(pos);\n    }\n}\n\n\nThis works fine. Now I want a timer counting the seconds/minutes of the progress of the song. So I put a TextView in the layout, get it with findViewById() in onCreate(), and put this in run() after progress.setProgress(pos):\n\nString time = String.format(\"%d:%d\",\n            TimeUnit.MILLISECONDS.toMinutes(pos),\n            TimeUnit.MILLISECONDS.toSeconds(pos),\n            TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(\n                    pos))\n            );\ncurrentTime.setText(time);  // currentTime = (TextView) findViewById(R.id.current_time);\n\n\nBut that last line gives me the exception:\n\n\n  android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.\n\n\nYet I'm doing basically the same thing here as I'm doing with the SeekBar - creating the view in onCreate, then touching it in run() - and it doesn't give me this complaint.\n    ",
        "votes": 1081,
        "tags": [
            "android",
            "multithreading"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 891,
            "fecha": { "$date" : "2018-04-22 00:59:09Z" },
            "decripcion": "\nYou have to move the portion of the background task that updates the UI onto the main thread. There is a simple piece of code for this:\n\nrunOnUiThread(new Runnable() {\n\n    @Override\n    public void run() {\n\n        // Stuff that updates the UI\n\n    }\n});\n\n\nDocumentation for Activity.runOnUiThread.\n\nJust nest this inside the method that is running in the background, and then copy paste the code that implements any updates in the middle of the block. Include only the smallest amount of code possible, otherwise you start to defeat the purpose of the background thread.\n    ",
            "votes": 2142,
            "comentarios": [
                {
                    "decripcion": "worked like a charm. for me the only problem here is that I wanted to do an error.setText(res.toString()); inside the run() method, but I couldn't use the res because it wasn't final.. too bad",
                    "fecha": { "$date" : "2011-08-01 12:31:01Z" },
                    "usuario": "noloman",
                    "usuario_id": 1520
                },
                {
                    "decripcion": "One brief comment on this. I had a separate thread that was trying to modify the UI, and the above code worked, but I had call runOnUiThread from the Activity object.  I had to do something like  myActivityObject.runOnUiThread(etc)",
                    "fecha": { "$date" : "2012-02-17 21:27:14Z" },
                    "usuario": "Kirby",
                    "usuario_id": 1521
                },
                {
                    "decripcion": "@Kirby Thank you for this reference. You can simply do 'MainActivity.this' and it should work as well so you don't have to keep reference to your activity class.",
                    "fecha": { "$date" : "2013-04-05 14:37:52Z" },
                    "usuario": "JRomero",
                    "usuario_id": 1522
                },
                {
                    "decripcion": "It took me a while to figure out that runOnUiThread() is a method of Activity. I was running my code in a fragment. I ended up doing getActivity().runOnUiThread(etc) and it worked. Fantastic!;",
                    "fecha": { "$date" : "2013-08-19 20:07:06Z" },
                    "usuario": "lejonl",
                    "usuario_id": 1523
                },
                {
                    "decripcion": "Can we stop the task being performed that is written in the body of   'runOnUiThread' method ?",
                    "fecha": { "$date" : "2014-09-04 20:18:10Z" },
                    "usuario": "Karan Sharma",
                    "usuario_id": 1524
                }
            ],
            "usuario": "providence",
            "usuario_id": 1525
        },
        "respuestas": [
            891,
            892,
            893,
            894,
            895,
            896,
            897,
            898,
            899,
            900,
            901,
            902,
            903,
            904,
            905,
            906,
            907,
            908,
            909,
            910,
            911,
            912,
            913,
            914,
            915,
            916,
            917,
            918,
            919,
            920
        ],
        "comentarios": [],
        "usuario": "herpderp",
        "usuario_id": 1568
    },
    {
        "_id": 56,
        "titulo": "Multiprocessing vs Threading Python [duplicate]",
        "fecha": { "$date" : "2020-02-08 22:57:41Z" },
        "decripcion": "\n                    \n            \n        \n            \n                \n                    \n                        This question already has answers here:\n                        \n                    \n                \n            \n                    \n                        What are the differences between the threading and multiprocessing modules?\n                            \n                                (6 answers)\n                            \n                    \n                Closed last year.\n        \n\n\n    \n\nI am trying to understand the advantages of multiprocessing over threading. I know that multiprocessing gets around the Global Interpreter Lock, but what other advantages are there, and can threading not do the same thing?\n    ",
        "votes": 901,
        "tags": [
            "multiprocessing",
            "python",
            "multithreading"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 922,
            "fecha": { "$date" : "2020-02-09 02:35:02Z" },
            "decripcion": "\nThe threading module uses threads, the multiprocessing module uses processes. The difference is that threads run in the same memory space, while processes have separate memory. This makes it a bit harder to share objects between processes with multiprocessing. Since threads use the same memory, precautions have to be taken or two threads will write to the same memory at the same time. This is what the global interpreter lock is for.\n\nSpawning processes is a bit slower than spawning threads.\n    ",
            "votes": 807,
            "comentarios": [
                {
                    "decripcion": "The GIL in cPython does not protect your program state.  It protects the interpreter's state.",
                    "fecha": { "$date" : "2010-06-15 14:19:57Z" },
                    "usuario": "Jeremy Brown",
                    "usuario_id": 1572
                },
                {
                    "decripcion": "Also, the OS handles process scheduling.  The threading library handles thread scheduling.  And, threads share I/O scheduling -- which can be a bottleneck.  Processes have independent I/O scheduling.",
                    "fecha": { "$date" : "2010-06-15 14:36:48Z" },
                    "usuario": "S.Lott",
                    "usuario_id": 416
                },
                {
                    "decripcion": "how about IPC performance of multiprocessing? FOr a program which requires frequent share of objects among processes (e.g., through multiprocessing.Queue), what's the performance comparison to the in-process queue?",
                    "fecha": { "$date" : "2012-10-21 23:48:36Z" },
                    "usuario": "KFL",
                    "usuario_id": 1573
                },
                {
                    "decripcion": "There is actually a good deal of difference: eli.thegreenplace.net/2012/01/16/\u2026",
                    "fecha": { "$date" : "2013-05-29 11:36:40Z" },
                    "usuario": "Andrew Sledge",
                    "usuario_id": 1574
                },
                {
                    "decripcion": "Is there a problem though if there are too many processes being spawned too often since the CPU might run out of processes/memory. But it can be the same in case of too many threads spawned too often but still lesser overhead than multiple processes. Right?",
                    "fecha": { "$date" : "2015-02-23 20:13:07Z" },
                    "usuario": "TommyT",
                    "usuario_id": 1575
                }
            ],
            "usuario": "Sjoerd",
            "usuario_id": 1576
        },
        "respuestas": [
            921,
            922,
            923,
            924,
            925,
            926,
            927,
            928,
            929,
            930,
            931,
            932
        ],
        "comentarios": [
            {
                "decripcion": "I think this can be useful in general: blogs.datalogics.com/2013/09/25/\u2026 Though there can be interesting thing depending on language. E.g. according to Andrew Sledge's link the python threads are slower. By java things are quite the opposite, java processes are much slower than threads, because you need a new jvm to start a new process.",
                "fecha": { "$date" : "2016-02-03 09:17:02Z" },
                "usuario": "inf3rno",
                "usuario_id": 1593
            },
            {
                "decripcion": "neither of the top two answers(current top, second answer)covers the GIL in any significant way. here is an answer that does cover the GIL aspect: stackoverflow.com/a/18114882/52074",
                "fecha": { "$date" : "2016-10-19 15:35:54Z" },
                "usuario": "Trevor Boyd Smith",
                "usuario_id": 1594
            },
            {
                "decripcion": "@AndrasDeak can we close the other way around as per: meta.stackoverflow.com/questions/251938/\u2026 since this has much more upvotes/answers?",
                "fecha": { "$date" : "2020-02-28 11:51:26Z" },
                "usuario": "Ciro Santilli \u65b0\u7586\u518d\u6559\u80b2\u8425\u516d\u56db\u4e8b\u4ef6\u6cd5\u8f6e\u529f\u90dd\u6d77\u4e1c",
                "usuario_id": 298
            },
            {
                "decripcion": "@CiroSantilli the reason I chose this direction is because the answers on this question are terrible. The accepted answer has little substance, in the context of python it's unacceptable. The top-voted answer is better, but still lacks proper explanation. The dupe's accepted answer has a detailed explanation from one of the best contributors (and teachers) in the tag, actually explaining what the \"GIL limitations\" are and why you'd want to use either. I'd much prefer to keep the dupe in this direction. I think we discussed this in python chat, but I can ask for opinions there if you'd like.",
                "fecha": { "$date" : "2020-02-28 12:01:58Z" },
                "usuario": "Andras Deak",
                "usuario_id": 1583
            },
            {
                "decripcion": "@CiroSantilli ah, I missed that you had an answer here! When I said \"the answers [...] are terrible\" I of course excluded present company ;) I think it'd be a lot better to have your answer there!",
                "fecha": { "$date" : "2020-02-28 12:05:16Z" },
                "usuario": "Andras Deak",
                "usuario_id": 1583
            }
        ],
        "usuario": "John",
        "usuario_id": 474
    },
    {
        "_id": 57,
        "titulo": "What is the volatile keyword useful for?",
        "fecha": { "$date" : "2021-04-23 08:37:00Z" },
        "decripcion": "\n                \nAt work today, I came across the volatile keyword in Java. Not being very familiar with it, I found this explanation.\nGiven the detail in which that article explains the keyword in question, do you ever use it or could you ever see a case in which you could use this keyword in the correct manner?\n    ",
        "votes": 728,
        "tags": [
            "keyword",
            "java",
            "multithreading",
            "volatile"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 933,
            "fecha": { "$date" : "2017-05-11 07:44:40Z" },
            "decripcion": "\nvolatile has semantics for memory visibility. Basically, the value of a volatile field becomes visible to all readers (other threads in particular) after a write operation completes on it. Without volatile, readers could see some non-updated value.\n\nTo answer your question: Yes, I use a volatile variable to control whether some code continues a loop. The loop tests the volatile value and continues if it is true. The condition can be set to false by calling a \"stop\" method. The loop sees false and terminates when it tests the value after the stop method completes execution.\n\nThe book \"Java Concurrency in Practice,\" which I highly recommend, gives a good explanation of volatile. This book is written by the same person who wrote the IBM article that is referenced in the question (in fact, he cites his book at the bottom of that article). My use of volatile is what his article calls the \"pattern 1 status flag.\"\n\nIf you want to learn more about how volatile works under the hood, read up on the Java memory model. If you want to go beyond that level, check out a good computer architecture book like Hennessy & Patterson and read about cache coherence and cache consistency.\n    ",
            "votes": 794,
            "comentarios": [
                {
                    "decripcion": "This answer is correct, but incomplete. It omits an important property of volatile that came with the new Java Memory Model defined in JSR 133: that when a thread reads a volatile variable it sees not only the value last written to it by some other thread, but also all other writes to other variables that were visible in that other thread at the time of the volatile write. See this answer and this reference.",
                    "fecha": { "$date" : "2013-07-18 12:32:53Z" },
                    "usuario": "Adam Zalcman",
                    "usuario_id": 1595
                },
                {
                    "decripcion": "For beginners, I'd request you to demonstrate with some code (please?)",
                    "fecha": { "$date" : "2014-02-22 06:43:38Z" },
                    "usuario": "Hungry Blue Dev",
                    "usuario_id": 1596
                },
                {
                    "decripcion": "The article linked in the question has code examples.",
                    "fecha": { "$date" : "2014-02-22 23:37:13Z" },
                    "usuario": "Greg Mattes",
                    "usuario_id": 1597
                },
                {
                    "decripcion": "I think the link 'Hennessy & Patterson' is broken. And the link to 'the Java memory model' actually leads to Oracle's Java Language Specification 'Chapter 17. Threads and Locks'.",
                    "fecha": { "$date" : "2015-09-18 17:56:32Z" },
                    "usuario": "Kris",
                    "usuario_id": 1598
                },
                {
                    "decripcion": "@fefrei: \u201cimmediately\u201d is a colloquial term. Of course, that can\u2019t be guaranteed when neither, execution timing nor thread scheduling algorithms, are actually specified. The only way for a program to find out whether a volatile read is subsequent to a particular volatile write, is by checking whether the seen value is the expected written one.",
                    "fecha": { "$date" : "2017-07-05 08:06:36Z" },
                    "usuario": "Holger",
                    "usuario_id": 1599
                }
            ],
            "usuario": "Greg Mattes",
            "usuario_id": 1597
        },
        "respuestas": [
            933,
            934,
            935,
            936,
            937,
            938,
            939,
            940,
            941,
            942,
            943,
            944,
            945,
            946,
            947,
            948,
            949,
            950,
            951,
            952,
            953,
            954,
            955,
            956
        ],
        "comentarios": [],
        "usuario": "Richard",
        "usuario_id": 1637
    },
    {
        "_id": 58,
        "titulo": "How do you kill a Thread in Java?",
        "fecha": { "$date" : "2021-01-10 10:14:04Z" },
        "decripcion": "\n                \nHow do you kill a java.lang.Thread in Java?\n    ",
        "votes": 392,
        "tags": [
            "java",
            "multithreading"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 957,
            "fecha": { "$date" : "2018-02-04 19:14:48Z" },
            "decripcion": "\nSee this thread by Sun on why they deprecated Thread.stop().  It goes into detail about why this was a bad method and what should be done to safely stop threads in general.  \n\nThe way they recommend is to use a shared variable as a flag which asks the background thread to stop.  This variable can then be set by a different object requesting the thread terminate.  \n    ",
            "votes": 198,
            "comentarios": [
                {
                    "decripcion": "if you check the thread that you have interrupted isAlive() it will return you true and they will continue adding to your current ThreadGroup[], you can see this using Thread.currentThread.getThreadGroup().list(); it will prints all the threads its has and you will see multiple instances of  your thread if you repeat your flow.",
                    "fecha": { "$date" : "2011-06-10 14:08:35Z" },
                    "usuario": "AZ_",
                    "usuario_id": 1638
                },
                {
                    "decripcion": "If you are on a PC then its no problem but if you are developing a software for mobile (android i have experienced it) then you will get OutOfMemoryError",
                    "fecha": { "$date" : "2011-06-10 14:09:21Z" },
                    "usuario": "AZ_",
                    "usuario_id": 1638
                },
                {
                    "decripcion": "It could/should be noted, that to ensure prompt communication of the stop-request via flag, the variable must be volatile (or access to the variable must be synchronized), as stated in the recommendation.",
                    "fecha": { "$date" : "2011-06-18 19:32:21Z" },
                    "usuario": "mtsz",
                    "usuario_id": 1639
                },
                {
                    "decripcion": "That link has been killed at this point.  I was able to find it on archive.org, though: web.archive.org/web/20090202093154/http://java.sun.com/j2se/\u2026",
                    "fecha": { "$date" : "2011-09-27 16:38:39Z" },
                    "usuario": "Jay Taylor",
                    "usuario_id": 1640
                },
                {
                    "decripcion": "I use method getConnection() from java.sql.DriverManager. If the connection attemt takes too long I try to kill the corresponding thread by calling Thread.interrupt() but it doesn't influence the thread at all. The Thread.stop() works however, although oracle says it shouldn't work if interrupt() doesn't. I wonder how make it work and avoid using deprecated method.",
                    "fecha": { "$date" : "2014-04-24 14:42:16Z" },
                    "usuario": "Danny Lo",
                    "usuario_id": 1641
                }
            ],
            "usuario": "JaredPar",
            "usuario_id": 1642
        },
        "respuestas": [
            957,
            958,
            959,
            960,
            961,
            962,
            963,
            964,
            965,
            966,
            967,
            968,
            969,
            970,
            971,
            972
        ],
        "comentarios": [
            {
                "decripcion": "till now you can not kill a thread; because destroy() is never implemented due to dead-lock prone",
                "fecha": { "$date" : "2011-06-10 14:14:58Z" },
                "usuario": "AZ_",
                "usuario_id": 1638
            },
            {
                "decripcion": "I prefer the answer regarding ExecutorStatus on this question: stackoverflow.com/questions/2275443/how-to-timeout-a-thread",
                "fecha": { "$date" : "2011-06-17 01:17:52Z" },
                "usuario": "Kirby",
                "usuario_id": 1521
            },
            {
                "decripcion": "@loungerdork \"I think Java should implement a safe stop/destroy method for runaway threads that you have no control over, despite the caveats of losing locks and other pitfalls\" So you want an unsafe thread stop. I think you already have one.",
                "fecha": { "$date" : "2015-06-10 14:41:33Z" },
                "usuario": "DJClayworth",
                "usuario_id": 1675
            },
            {
                "decripcion": "It's amazing what kind of questions would get 212 upvotes in 2009. This would be immediately destroyed today.",
                "fecha": { "$date" : "2016-03-11 19:34:09Z" },
                "usuario": "Jonathon Reinhart",
                "usuario_id": 1676
            },
            {
                "decripcion": "@JonathonReinhart: Why is that? It seems to be a legit question, even these days. Maybe you don't know the frustration it causes when you have runaway threads and can only use deprecated functions to handle this somehow?",
                "fecha": { "$date" : "2016-05-07 17:30:41Z" },
                "usuario": "TFuto",
                "usuario_id": 1677
            }
        ],
        "usuario": "flybywire",
        "usuario_id": 1678
    },
    {
        "_id": 59,
        "titulo": "WebBrowser Control in a new thread",
        "fecha": { "$date" : "2011-12-13 01:05:43Z" },
        "decripcion": "\n                \nI have a list Uri's that I want \"clicked\" To achieve this I\"m trying to create a new web-browser control per Uri. I create a new thread per Uri. The problem I'm having is the thread end before the document is fully loaded, so I never get to make use of the DocumentComplete event. How can I overcome this?\n\nvar item = new ParameterizedThreadStart(ClicIt.Click); \nvar thread = new Thread(item) {Name = \"ClickThread\"}; \nthread.Start(uriItem);\n\npublic static void Click(object o)\n{\n    var url = ((UriItem)o);\n    Console.WriteLine(@\"Clicking: \" + url.Link);\n    var clicker = new WebBrowser { ScriptErrorsSuppressed = true };\n    clicker.DocumentCompleted += BrowseComplete;\n    if (String.IsNullOrEmpty(url.Link)) return;\n    if (url.Link.Equals(\"about:blank\")) return;\n    if (!url.Link.StartsWith(\"http://\") && !url.Link.StartsWith(\"https://\"))\n        url.Link = \"http://\" + url.Link;\n    clicker.Navigate(url.Link);\n}\n\n    ",
        "votes": 84,
        "tags": [
            "browser",
            "multithreading",
            "c#"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 973,
            "fecha": { "$date" : "2010-11-24 21:09:43Z" },
            "decripcion": "\nYou have to create an STA thread that pumps a message loop.  That's the only hospitable environment for an ActiveX component like WebBrowser.  You won't get the DocumentCompleted event otherwise.  Some sample code:\n\nprivate void runBrowserThread(Uri url) {\n    var th = new Thread(() => {\n        var br = new WebBrowser();\n        br.DocumentCompleted += browser_DocumentCompleted;\n        br.Navigate(url);\n        Application.Run();\n    });\n    th.SetApartmentState(ApartmentState.STA);\n    th.Start();\n}\n\nvoid browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {\n    var br = sender as WebBrowser;\n    if (br.Url == e.Url) {\n        Console.WriteLine(\"Natigated to {0}\", e.Url);\n        Application.ExitThread();   // Stops the thread\n    }\n}\n\n    ",
            "votes": 156,
            "comentarios": [
                {
                    "decripcion": "Yes! Just add System.Windows.Forms. Saved my day, too. Thanks",
                    "fecha": { "$date" : "2012-08-07 15:31:51Z" },
                    "usuario": "zee",
                    "usuario_id": 1679
                },
                {
                    "decripcion": "I'm trying to adapt this code to my situation. I have to keep the WebBrowser object alive (to save state/cookies etc.) and perform multiple Navigate() calls over time. But I'm not sure where to place my Application.Run() call, becuz it blocks further code from executing. Any clues?",
                    "fecha": { "$date" : "2014-02-14 06:16:23Z" },
                    "usuario": "dotNET",
                    "usuario_id": 1680
                },
                {
                    "decripcion": "You can call Application.Exit(); to let Application.Run() return.",
                    "fecha": { "$date" : "2014-12-02 08:04:10Z" },
                    "usuario": "Mike de Klerk",
                    "usuario_id": 1681
                }
            ],
            "usuario": "Hans Passant",
            "usuario_id": 1682
        },
        "respuestas": [
            973,
            974,
            975,
            976
        ],
        "comentarios": [],
        "usuario": "Art W",
        "usuario_id": 1687
    },
    {
        "_id": 60,
        "titulo": "Retrieve only the queried element in an object array in MongoDB collection",
        "fecha": { "$date" : "2019-01-03 06:45:02Z" },
        "decripcion": "\n                \n\n\nSuppose you have the following documents in my collection:\n\n{  \n   \"_id\":ObjectId(\"562e7c594c12942f08fe4192\"),\n   \"shapes\":[  \n      {  \n         \"shape\":\"square\",\n         \"color\":\"blue\"\n      },\n      {  \n         \"shape\":\"circle\",\n         \"color\":\"red\"\n      }\n   ]\n},\n{  \n   \"_id\":ObjectId(\"562e7c594c12942f08fe4193\"),\n   \"shapes\":[  \n      {  \n         \"shape\":\"square\",\n         \"color\":\"black\"\n      },\n      {  \n         \"shape\":\"circle\",\n         \"color\":\"green\"\n      }\n   ]\n}\n\n\n\n\nDo query:\n\ndb.test.find({\"shapes.color\": \"red\"}, {\"shapes.color\": 1})\n\n\nOr\n\ndb.test.find({shapes: {\"$elemMatch\": {color: \"red\"}}}, {\"shapes.color\": 1})\n\n\n\n\nReturns matched document (Document 1), but always with ALL array items in shapes:\n\n{ \"shapes\": \n  [\n    {\"shape\": \"square\", \"color\": \"blue\"},\n    {\"shape\": \"circle\", \"color\": \"red\"}\n  ] \n}\n\n\nHowever, I'd like to get the document (Document 1) only with the array that contains color=red:\n\n{ \"shapes\": \n  [\n    {\"shape\": \"circle\", \"color\": \"red\"}\n  ] \n}\n\n\nHow can I do this?\n    ",
        "votes": 427,
        "tags": [
            "mongodb-query",
            "aggregation-framework",
            "mongodb",
            "projection"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 977,
            "fecha": { "$date" : "2018-09-25 18:04:43Z" },
            "decripcion": "\nMongoDB 2.2's new $elemMatch projection operator provides another way to alter the returned document to contain only the first matched shapes element:\n\n\n\ndb.test.find(\n    {\"shapes.color\": \"red\"}, \n    {_id: 0, shapes: {$elemMatch: {color: \"red\"}}});\n\n\nReturns:\n\n{\"shapes\" : [{\"shape\": \"circle\", \"color\": \"red\"}]}\n\n\nIn 2.2 you can also do this using the $ projection operator, where the $ in a projection object field name represents the index of the field's first matching array element from the query.  The following returns the same results as above:\n\ndb.test.find({\"shapes.color\": \"red\"}, {_id: 0, 'shapes.$': 1});\n\n\nMongoDB 3.2 Update\n\nStarting with the 3.2 release, you can use the new $filter aggregation operator to filter an array during projection, which has the benefit of including all matches, instead of just the first one.\n\ndb.test.aggregate([\n    // Get just the docs that contain a shapes element where color is 'red'\n    {$match: {'shapes.color': 'red'}},\n    {$project: {\n        shapes: {$filter: {\n            input: '$shapes',\n            as: 'shape',\n            cond: {$eq: ['$$shape.color', 'red']}\n        }},\n        _id: 0\n    }}\n])\n\n\nResults:\n\n[ \n    {\n        \"shapes\" : [ \n            {\n                \"shape\" : \"circle\",\n                \"color\" : \"red\"\n            }\n        ]\n    }\n]\n\n    ",
            "votes": 472,
            "comentarios": [
                {
                    "decripcion": "any solution if I want it to return every elements that matches it instead of just the first?",
                    "fecha": { "$date" : "2013-12-25 08:12:53Z" },
                    "usuario": "Steve Ng",
                    "usuario_id": 1691
                },
                {
                    "decripcion": "I'm afraid I am using Mongo 3.0.X :-(",
                    "fecha": { "$date" : "2016-01-10 20:33:49Z" },
                    "usuario": "charliebrownie",
                    "usuario_id": 1692
                },
                {
                    "decripcion": "@charliebrownie Then use one of the other answers that use aggregate.",
                    "fecha": { "$date" : "2016-01-10 21:14:50Z" },
                    "usuario": "JohnnyHK",
                    "usuario_id": 672
                },
                {
                    "decripcion": "this query only return the array \"shapes\" and it won't return other fields. Anyone knows how to return other fields also?",
                    "fecha": { "$date" : "2016-07-29 00:24:45Z" },
                    "usuario": "Mark Thien",
                    "usuario_id": 1693
                },
                {
                    "decripcion": "This also works: db.test.find({}, {shapes: {$elemMatch: {color: \"red\"}}});",
                    "fecha": { "$date" : "2017-07-14 19:15:07Z" },
                    "usuario": "Paul",
                    "usuario_id": 930
                }
            ],
            "usuario": "JohnnyHK",
            "usuario_id": 672
        },
        "respuestas": [
            977,
            978,
            979,
            980,
            981,
            982,
            983,
            984,
            985,
            986,
            987,
            988,
            989,
            990
        ],
        "comentarios": [],
        "usuario": "Sebtm",
        "usuario_id": 1717
    },
    {
        "_id": 61,
        "titulo": "Update MongoDB field using value of another field",
        "fecha": { "$date" : "2016-05-17 15:28:56Z" },
        "decripcion": "\n                \nIn MongoDB, is it possible to update the value of a field using the value from another field?  The equivalent SQL would be something like:\n\nUPDATE Person SET Name = FirstName + ' ' + LastName\n\n\nAnd the MongoDB pseudo-code would be:\n\ndb.person.update( {}, { $set : { name : firstName + ' ' + lastName } );\n\n    ",
        "votes": 448,
        "tags": [
            "mongodb-query",
            "aggregation-framework",
            "mongodb"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 991,
            "fecha": { "$date" : "2020-01-28 06:24:28Z" },
            "decripcion": "\nThe best way to do this is in version 4.2+ which allows using of aggregation pipeline in the update document and the updateOne, updateMany or update collection method. Note that the latter has been deprecated in most if not all languages drivers.\n\nMongoDB 4.2+\n\nVersion 4.2 also introduced the $set pipeline stage operator which is an alias for  $addFields. I will use $set here as it maps with what we are trying to achieve.\n\ndb.collection.<update method>(\n    {},\n    [\n        {\"$set\": {\"name\": { \"$concat\": [\"$firstName\", \" \", \"$lastName\"]}}}\n    ]\n)\n\n\nMongoDB 3.4+\n\nIn 3.4+ you can use $addFields and the $out aggregation pipeline operators.\n\ndb.collection.aggregate(\n    [\n        { \"$addFields\": { \n            \"name\": { \"$concat\": [ \"$firstName\", \" \", \"$lastName\" ] } \n        }},\n        { \"$out\": \"collection\" }\n    ]\n)\n\n\nNote that this does not update your collection but instead replace the existing collection or create a new one. Also for update operations that require \"type casting\" you will need client side processing, and depending on the operation, you may need to use the find() method instead of the .aggreate() method.\n\nMongoDB 3.2 and 3.0\n\nThe way we do this is by $projecting our documents and use the $concat string aggregation operator to return the concatenated string.\nwe From there, you then iterate the cursor and use the $set update operator to add the new field to your documents using bulk operations for maximum efficiency.\n\nAggregation query:\n\nvar cursor = db.collection.aggregate([ \n    { \"$project\":  { \n        \"name\": { \"$concat\": [ \"$firstName\", \" \", \"$lastName\" ] } \n    }}\n])\n\n\nMongoDB 3.2 or newer\n\nfrom this, you need to use the bulkWrite method.\n\nvar requests = [];\ncursor.forEach(document => { \n    requests.push( { \n        'updateOne': {\n            'filter': { '_id': document._id },\n            'update': { '$set': { 'name': document.name } }\n        }\n    });\n    if (requests.length === 500) {\n        //Execute per 500 operations and re-init\n        db.collection.bulkWrite(requests);\n        requests = [];\n    }\n});\n\nif(requests.length > 0) {\n     db.collection.bulkWrite(requests);\n}\n\n\nMongoDB 2.6 and  3.0\n\nFrom this version you need to use the now deprecated Bulk API and its associated methods.\n\nvar bulk = db.collection.initializeUnorderedBulkOp();\nvar count = 0;\n\ncursor.snapshot().forEach(function(document) { \n    bulk.find({ '_id': document._id }).updateOne( {\n        '$set': { 'name': document.name }\n    });\n    count++;\n    if(count%500 === 0) {\n        // Excecute per 500 operations and re-init\n        bulk.execute();\n        bulk = db.collection.initializeUnorderedBulkOp();\n    }\n})\n\n// clean up queues\nif(count > 0) {\n    bulk.execute();\n}\n\n\nMongoDB 2.4\n\ncursor[\"result\"].forEach(function(document) {\n    db.collection.update(\n        { \"_id\": document._id }, \n        { \"$set\": { \"name\": document.name } }\n    );\n})\n\n    ",
            "votes": 391,
            "comentarios": [
                {
                    "decripcion": "4.2+ Doesn't work. MongoError: The dollar ($) prefixed field '$concat' in 'name.$concat' is not valid for storage.",
                    "fecha": { "$date" : "2019-10-16 04:25:32Z" },
                    "usuario": "Josh Woodcock",
                    "usuario_id": 1718
                },
                {
                    "decripcion": "@JoshWoodcock, I think you had a typo in the query you are running. I suggest you double check.",
                    "fecha": { "$date" : "2019-10-17 21:33:43Z" },
                    "usuario": "styvane",
                    "usuario_id": 1719
                },
                {
                    "decripcion": "For those running into the same problem @JoshWoodcock described: pay attention that the answer for 4.2+ describes an aggregation pipeline, so don't miss the square brackets in the second parameter!",
                    "fecha": { "$date" : "2020-01-07 20:05:36Z" },
                    "usuario": "philsch",
                    "usuario_id": 1720
                },
                {
                    "decripcion": "Is it possible to do the same thing as in this solution but instead of concatenating two strings together, add two numbers together?",
                    "fecha": { "$date" : "2020-01-30 14:03:32Z" },
                    "usuario": "Isaac Vidrine",
                    "usuario_id": 1721
                },
                {
                    "decripcion": "@IsaacVidrine Yes, use $add instead of $concat.  docs.mongodb.com/master/reference/operator/aggregation/add/\u2026",
                    "fecha": { "$date" : "2020-10-08 11:58:00Z" },
                    "usuario": "Paul",
                    "usuario_id": 930
                }
            ],
            "usuario": "styvane",
            "usuario_id": 1719
        },
        "respuestas": [
            991,
            992,
            993,
            994,
            995,
            996,
            997,
            998,
            999,
            1000,
            1001
        ],
        "comentarios": [],
        "usuario": "Chris Fulstow",
        "usuario_id": 1740
    },
    {
        "_id": 62,
        "titulo": "How to Update Multiple Array Elements in mongodb",
        "fecha": { "$date" : "2018-04-23 05:38:38Z" },
        "decripcion": "\n                \nI have a Mongo document which holds an array of elements.\n\nI'd like to reset the .handled attribute of all objects in the array where .profile = XX.\n\nThe document is in the following form: \n\n{\n    \"_id\": ObjectId(\"4d2d8deff4e6c1d71fc29a07\"),\n    \"user_id\": \"714638ba-2e08-2168-2b99-00002f3d43c0\",\n    \"events\": [{\n            \"handled\": 1,\n            \"profile\": 10,\n            \"data\": \".....\"\n        } {\n            \"handled\": 1,\n            \"profile\": 10,\n            \"data\": \".....\"\n        } {\n            \"handled\": 1,\n            \"profile\": 20,\n            \"data\": \".....\"\n        }\n        ...\n    ]\n}\n\n\nso, I tried the following:\n\n.update({\"events.profile\":10},{$set:{\"events.$.handled\":0}},false,true)\n\n\nHowever it updates only the first matched array element in each document. (That's the defined behaviour for $ - the positional operator.)\n\nHow can I update all matched array elements?\n    ",
        "votes": 207,
        "tags": [
            "mongodb-query",
            "mongodb",
            "arrays"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1002,
            "fecha": { "$date" : "2021-01-03 16:37:06Z" },
            "decripcion": "\nUPDATE:\nAs of Mongo version 3.6, this answer is no longer valid as the mentioned issue was fixed and there are ways to achieve this. Please check other answers.\n\nAt this moment it is not possible to use the positional operator to update all items in an array. See JIRA http://jira.mongodb.org/browse/SERVER-1243\nAs a work around you can:\n\nUpdate each item individually\n(events.0.handled events.1.handled\n...) or...\nRead the document, do the edits\nmanually and save it replacing the\nolder one (check \"Update if\nCurrent\" if you want to ensure\natomic updates)\n\n    ",
            "votes": 115,
            "comentarios": [
                {
                    "decripcion": "if you have similar problem, vote for this issue - jira.mongodb.org/browse/SERVER-1243",
                    "fecha": { "$date" : "2011-01-12 16:08:45Z" },
                    "usuario": "LiorH",
                    "usuario_id": 1741
                },
                {
                    "decripcion": "I actually like the read document and save approach.  But I used Couch before Mongo so that approach seems more natural since there is no query API for Couch, just a REST api for whole documents",
                    "fecha": { "$date" : "2011-12-15 19:50:14Z" },
                    "usuario": "adam",
                    "usuario_id": 1742
                },
                {
                    "decripcion": "Both of these approaches require quite high amount of memory, right? If there's a lot of documents which have to be searched, and have to load all of them (or the nested arrays) in order to update... + also a bit troublesome to implement if this has to be done asynchronously...",
                    "fecha": { "$date" : "2013-10-01 20:24:07Z" },
                    "usuario": "User",
                    "usuario_id": 1743
                },
                {
                    "decripcion": "All technical difficulties aside, it is rather astonishing that this feature is not available in MongoDB. This constraint takes away much freedom from customizing database schema.",
                    "fecha": { "$date" : "2016-02-17 04:13:54Z" },
                    "usuario": "Sung Cho",
                    "usuario_id": 1744
                },
                {
                    "decripcion": "Neil Lunn stackoverflow.com/a/46054172/337401 answered this for version 3.6. Since this is a popular question it might be worth while to update this accepted answer with a referral to the answer by Neil Lunn.",
                    "fecha": { "$date" : "2017-12-08 20:52:53Z" },
                    "usuario": "Jaap",
                    "usuario_id": 1745
                }
            ],
            "usuario": "Javier Ferrero",
            "usuario_id": 1746
        },
        "respuestas": [
            1002,
            1003,
            1004,
            1005,
            1006,
            1007,
            1008,
            1009,
            1010,
            1011,
            1012,
            1013,
            1014,
            1015,
            1016
        ],
        "comentarios": [
            {
                "decripcion": "Updating a subset or all array items has been added to mongodb 3.6: docs.mongodb.com/manual/reference/operator/update/\u2026",
                "fecha": { "$date" : "2017-12-08 14:48:51Z" },
                "usuario": "Jaap",
                "usuario_id": 1745
            },
            {
                "decripcion": "be sure to check out arrayFilters and consider which query to use to make the update efficient. Check out the answer by Neil Lunn: stackoverflow.com/a/46054172/337401",
                "fecha": { "$date" : "2017-12-08 20:48:12Z" },
                "usuario": "Jaap",
                "usuario_id": 1745
            }
        ],
        "usuario": "LiorH",
        "usuario_id": 1741
    },
    {
        "_id": 63,
        "titulo": "How do I perform the SQL Join equivalent in MongoDB?",
        "fecha": { "$date" : "2019-02-22 08:00:40Z" },
        "decripcion": "\n                \nHow do I perform the SQL Join equivalent in MongoDB?\n\nFor example say you have two collections (users and comments) and I want to pull all the comments with pid=444 along with the user info for each. \n\ncomments\n  { uid:12345, pid:444, comment=\"blah\" }\n  { uid:12345, pid:888, comment=\"asdf\" }\n  { uid:99999, pid:444, comment=\"qwer\" }\n\nusers\n  { uid:12345, name:\"john\" }\n  { uid:99999, name:\"mia\"  }\n\n\nIs there a way to pull all the comments with a certain field (eg. ...find({pid:444}) ) and the user information associated with each comment in one go?\n\nAt the moment, I am first getting the comments which match my criteria, then figuring out all the uid's in that result set, getting the user objects, and merging them with the comment's results. Seems like I am doing it wrong. \n    ",
        "votes": 544,
        "tags": [
            "join",
            "mongodb"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            1017,
            1018,
            1019,
            1020,
            1021,
            1022,
            1023,
            1024,
            1025,
            1026,
            1027,
            1028,
            1029,
            1030,
            1031,
            1032,
            1033,
            1034,
            1035
        ],
        "comentarios": [
            {
                "decripcion": "The last answer on this question is probably the most relevant, since MongoDB 3.2+ implemented a join solution called $lookup. Thought I would push it here because maybe not everyone will read to the bottom. stackoverflow.com/a/33511166/2593330",
                "fecha": { "$date" : "2015-11-22 16:33:25Z" },
                "usuario": "thefourtheye",
                "usuario_id": 369
            },
            {
                "decripcion": "Correct, $lookup was introduced in MongoDB 3.2. Details can be found at docs.mongodb.org/master/reference/operator/aggregation/lookup/\u2026",
                "fecha": { "$date" : "2015-11-23 13:20:43Z" },
                "usuario": "NDB",
                "usuario_id": 1812
            },
            {
                "decripcion": "Convert any query to mongo, check the answer: stackoverflow.com/questions/68155715/\u2026",
                "fecha": { "$date" : "2021-07-27 18:32:55Z" },
                "usuario": "KushalSeth",
                "usuario_id": 1813
            }
        ],
        "usuario": "The Unknown",
        "usuario_id": 1814
    },
    {
        "_id": 64,
        "titulo": "MongoDB relationships: embed or reference?",
        "fecha": { "$date" : "2017-05-23 11:47:29Z" },
        "decripcion": "\n                \nI'm new to MongoDB--coming from a relational database background. I want to design a question structure with some comments, but I don't know which relationship to use for comments: embed or reference?\n\nA question with some comments, like stackoverflow, would have a structure like this:\n\nQuestion\n    title = 'aaa'\n    content = bbb'\n    comments = ???\n\n\nAt first, I want to use embeded comments (I think embed is recommended in MongoDB), like this:\n\nQuestion\n    title = 'aaa'\n    content = 'bbb'\n    comments = [ { content = 'xxx', createdAt = 'yyy'}, \n                 { content = 'xxx', createdAt = 'yyy'}, \n                 { content = 'xxx', createdAt = 'yyy'} ]\n\n\nIt clear, but I'm worried about this case: If I want to edit a specified comment, how do I get its content and its question? There is no _id to let me find one, nor question_ref to let me find its question. (I'm so newbie, that I don't know if there's any way to do this without _id and question_ref.)\n\nDo I have to use ref not embed? Then I have to create a new collection for comments?\n    ",
        "votes": 579,
        "tags": [
            "mongodb",
            "reference",
            "embed"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1036,
            "fecha": { "$date" : "2020-06-26 18:28:35Z" },
            "decripcion": "\nThis is more an art than a science. The Mongo Documentation on Schemas is a good reference, but here are some things to consider:\n\nPut as much in as possible\nThe joy of a Document database is that it eliminates lots of Joins.  Your first instinct should be to place as much in a single document as you can.  Because MongoDB documents have structure, and because you can efficiently query within that structure (this means that you can take the part of the document that you need, so document size shouldn't worry you much) there is no immediate need to normalize data like you would in SQL.  In particular any data that is not useful apart from its parent document should be part of the same document.\n\nSeparate data that can be referred to from multiple places into its own collection.\nThis is not so much a \"storage space\" issue as it is a \"data consistency\" issue.  If many records will refer to the same data it is more efficient and less error prone to update a single record and keep references to it in other places.\n\nDocument size considerations\nMongoDB imposes a 4MB (16MB with 1.8) size limit on a single document.  In a world of GB of data this sounds small, but it is also 30 thousand tweets or 250 typical Stack Overflow answers or 20 flicker photos.  On the other hand, this is far more information than one might want to present at one time on a typical web page.  First consider what will make your queries easier.  In many cases concern about document sizes will be premature optimization.\n\nComplex data structures:\nMongoDB can store arbitrary deep nested data structures, but cannot search them efficiently.  If your data forms a tree, forest or graph, you effectively need to store each node and its edges in a separate document.  (Note that there are data stores specifically designed for this type of data that one should consider as well)\nIt has also been pointed out than it is impossible to return a subset of elements in a document.  If you need to pick-and-choose a few bits of each document, it will be easier to separate them out.\n\nData Consistency\nMongoDB makes a trade off between efficiency and consistency.  The rule is changes to a single document are always atomic, while updates to multiple documents should never be assumed to be atomic.  There is also no way to \"lock\" a record on the server (you can build this into the client's logic using for example a \"lock\" field).  When you design your schema consider how you will keep your data consistent.  Generally, the more that you keep in a document the better.\n\n\nFor what you are describing, I would embed the comments, and give each comment an id field with an ObjectID.  The ObjectID has a time stamp embedded in it so you can use that instead of created at if you like.\n    ",
            "votes": 821,
            "comentarios": [
                {
                    "decripcion": "I'd like to add to the OP question: My comments model contains the user name and link to his avatar. What would be the best approach, considering a user can modify his name/avatar?",
                    "fecha": { "$date" : "2013-02-05 09:36:17Z" },
                    "usuario": "user1102018",
                    "usuario_id": 1815
                },
                {
                    "decripcion": "Regarding 'Complex data structures', it seems it is possible to return a subset of elements in a document using the aggregation framework (try $unwind).",
                    "fecha": { "$date" : "2013-09-23 10:33:08Z" },
                    "usuario": "Eyal Roth",
                    "usuario_id": 1816
                },
                {
                    "decripcion": "Errr, This technique was either not possibel or not widely known in MongoDB at the beginning of 2012. Given the popularity of this question, I would encourage you to write your own updated answer. I'm afraid I've stepped away from active development on MongoDB and I am not in a good position to address you comment within my original post.",
                    "fecha": { "$date" : "2013-09-27 01:51:07Z" },
                    "usuario": "John F. Miller",
                    "usuario_id": 1817
                },
                {
                    "decripcion": "16MB = 30 million tweets? ths menas about 0,5 byte per tweet?!",
                    "fecha": { "$date" : "2014-11-15 19:13:40Z" },
                    "usuario": "Paolo",
                    "usuario_id": 1818
                },
                {
                    "decripcion": "Yes, it appears I was off by a factor of 1000 and some people find this important.  I will edit the post. WRT 560bytes per tweet, when I rote this in 2011 twitter was still tied to text messages and Ruby 1.4 strings; in other words still ASCII chars only.",
                    "fecha": { "$date" : "2017-09-08 18:52:02Z" },
                    "usuario": "John F. Miller",
                    "usuario_id": 1817
                }
            ],
            "usuario": "John F. Miller",
            "usuario_id": 1817
        },
        "respuestas": [
            1036,
            1037,
            1038,
            1039,
            1040,
            1041,
            1042,
            1043,
            1044,
            1045
        ],
        "comentarios": [
            {
                "decripcion": "All Mongo objects are created with an _ID, whether you create the field or not. So technically each comment will still have an ID.",
                "fecha": { "$date" : "2014-01-10 05:31:28Z" },
                "usuario": "Robbie Guilfoyle",
                "usuario_id": 1839
            },
            {
                "decripcion": "@RobbieGuilfoyle not true-- see stackoverflow.com/a/11263912/347455",
                "fecha": { "$date" : "2014-05-14 20:57:41Z" },
                "usuario": "pennstatephil",
                "usuario_id": 1840
            },
            {
                "decripcion": "I stand corrected, thanks @pennstatephil :)",
                "fecha": { "$date" : "2014-05-15 13:23:29Z" },
                "usuario": "Robbie Guilfoyle",
                "usuario_id": 1839
            },
            {
                "decripcion": "What he maybe means is that all mongoose objects are created with an _id for those who use this framework \u2013 see mongoose subdocs",
                "fecha": { "$date" : "2016-12-09 22:31:26Z" },
                "usuario": "Luca Steeb",
                "usuario_id": 1841
            },
            {
                "decripcion": "A very good book for learning mongo db relationships is \"MongoDB Applied Design Patterns - O'Reilly\". Chapter one, talk about this decision, to embed or reference?",
                "fecha": { "$date" : "2019-03-25 02:45:04Z" },
                "usuario": "Felipe Toledo",
                "usuario_id": 1842
            }
        ],
        "usuario": "Freewind",
        "usuario_id": 1843
    },
    {
        "_id": 65,
        "titulo": "How to query MongoDB with \"like\"",
        "fecha": { "$date" : "2021-05-11 14:00:10Z" },
        "decripcion": "\n                \nI want to query something with SQL's like query:\nSELECT * FROM users  WHERE name LIKE '%m%'\n\nHow can I achieve the same in MongoDB? I can't find an operator for like in the documentation.\n    ",
        "votes": 1641,
        "tags": [
            "mongodb-query",
            "sql-like",
            "mongodb",
            "sql"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1046,
            "fecha": { "$date" : "2021-05-11 14:03:03Z" },
            "decripcion": "\nThat would have to be:\ndb.users.find({\"name\": /.*m.*/})\n\nOr, similar:\ndb.users.find({\"name\": /m/})\n\nYou're looking for something that contains \"m\" somewhere (SQL's '%' operator is equivalent to regular expressions' '.*'), not something that has \"m\" anchored to the beginning of the string.\nNote: MongoDB uses regular expressions which are more powerful than \"LIKE\" in SQL. With regular expressions you can create any pattern that you imagine.\nFor more information on regular expressions, refer to Regular expressions (MDN).\n    ",
            "votes": 2236,
            "comentarios": [
                {
                    "decripcion": "is searching by regex expensive?",
                    "fecha": { "$date" : "2010-07-22 10:13:54Z" },
                    "usuario": "Freewind",
                    "usuario_id": 1843
                },
                {
                    "decripcion": "Actually, it depends. If the query doesn't use an index, and must do a table scan, then it can certainly be expensive. If you're doing a 'starts with' regex query, then that can use an index. Best to run an explain() to see what's happening.",
                    "fecha": { "$date" : "2010-07-22 14:49:44Z" },
                    "usuario": "Kyle Banker",
                    "usuario_id": 1844
                },
                {
                    "decripcion": "When not anchored to the beginning of the string, it is somewhat expensive. But then again, so is a LIKE query in SQL.",
                    "fecha": { "$date" : "2010-07-26 18:50:07Z" },
                    "usuario": "Emily",
                    "usuario_id": 1845
                },
                {
                    "decripcion": "I would add regex i javascript  db.users.find({ \"name\": { $regex: /m/i } })   ",
                    "fecha": { "$date" : "2015-06-19 03:24:42Z" },
                    "usuario": "Doron Segal",
                    "usuario_id": 1846
                },
                {
                    "decripcion": "It is worth mentioning that if you want to use it from Node app and you want a dynamic search, you can use:   users.find({\"name\": new RegExp('.*' + searchVariable + '.*')})  So, this way you can use it with other operators like $in, $nin, etc.",
                    "fecha": { "$date" : "2021-07-30 21:18:02Z" },
                    "usuario": "Ivan Cabrera",
                    "usuario_id": 1847
                }
            ],
            "usuario": "Kyle H",
            "usuario_id": 1848
        },
        "respuestas": [
            1046,
            1047,
            1048,
            1049,
            1050,
            1051,
            1052,
            1053,
            1054,
            1055,
            1056,
            1057,
            1058,
            1059,
            1060,
            1061,
            1062,
            1063,
            1064,
            1065,
            1066,
            1067,
            1068,
            1069,
            1070,
            1071,
            1072,
            1073,
            1074,
            1075
        ],
        "comentarios": [
            {
                "decripcion": "see mongodb's docs: Advanced Queries -- Regular expressions mongodb.org/display/DOCS/\u2026",
                "fecha": { "$date" : "2011-11-22 13:21:04Z" },
                "usuario": "douyw",
                "usuario_id": 1881
            },
            {
                "decripcion": "Your question has at least 5 votes for the like-operator tag. Could I kindly request that you suggest sql-like as a synonym?",
                "fecha": { "$date" : "2013-04-02 18:36:41Z" },
                "usuario": "Kermit",
                "usuario_id": 1882
            },
            {
                "decripcion": "db.users.find({'name': {'$regex': 'sometext', '$options': 'i'}})",
                "fecha": { "$date" : "2020-06-13 11:53:00Z" },
                "usuario": "Ashish Choubey",
                "usuario_id": 1883
            }
        ],
        "usuario": "Freewind",
        "usuario_id": 1843
    },
    {
        "_id": 66,
        "titulo": "Updating a Nested Array with MongoDB",
        "fecha": { "$date" : "2021-07-08 02:34:26Z" },
        "decripcion": "\n                \nI am trying to update a value in the nested array but can't get it to work.\nMy object is like this\n {\n    \"_id\": {\n        \"$oid\": \"1\"\n    },\n    \"array1\": [\n        {\n            \"_id\": \"12\",\n            \"array2\": [\n                  {\n                      \"_id\": \"123\",\n                      \"answeredBy\": [],   // need to push \"success\" \n                  },\n                  {\n                      \"_id\": \"124\",\n                      \"answeredBy\": [],\n                  }\n             ],\n         }\n     ]\n }\n\nI need to push a value to \"answeredBy\" array.\nIn the below example, I tried pushing \"success\" string to the \"answeredBy\" array of the \"123 _id\" object but it does not work.\ncallback = function(err,value){\n     if(err){\n         res.send(err);\n     }else{\n         res.send(value);\n     }\n};\nconditions = {\n    \"_id\": 1,\n    \"array1._id\": 12,\n    \"array2._id\": 123\n  };\nupdates = {\n   $push: {\n     \"array2.$.answeredBy\": \"success\"\n   }\n};\noptions = {\n  upsert: true\n};\nModel.update(conditions, updates, options, callback);\n\nI found this link, but its answer only says I should use object like structure instead of array's. This cannot be applied in my situation.  I really need my object to be nested in arrays\nIt would be great if you can help me out here. I've been spending hours to figure this out.\nThank you in advance!\n    ",
        "votes": 48,
        "tags": [
            "mongodb-query",
            "node.js",
            "mongoose",
            "mongodb",
            "javascript"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1076,
            "fecha": { "$date" : "2020-06-20 09:12:55Z" },
            "decripcion": "\nGeneral Scope and Explanation\nThere are a few things wrong with what you are doing here. Firstly your query conditions. You are referring to several _id values where you should not need to, and at least one of which is not on the top level.\nIn order to get into a \"nested\" value and also presuming that _id value is unique and would not appear in any other document, you query form should be like this:\n\nModel.update(\n    { \"array1.array2._id\": \"123\" },\n    { \"$push\": { \"array1.0.array2.$.answeredBy\": \"success\" } },\n    function(err,numAffected) {\n       // something with the result in here\n    }\n);\n\nNow that would actually work, but really it is only a fluke that it does as there are very good reasons why it should not work for you.\nThe important reading is in the official documentation for the positional $ operator under the subject of \"Nested Arrays\". What this says is:\n\nThe positional $ operator cannot be used for queries which traverse more than one array, such as queries that traverse arrays nested within other arrays, because the replacement for the $ placeholder is a single value\n\nSpecifically what that means is the element that will be matched and returned in the positional placeholder is the value of the index from the first matching array. This means in your case the matching index on the \"top\" level array.\nSo if you look at the query notation as shown, we have \"hardcoded\" the first ( or 0 index ) position in the top level array, and it just so happens that the matching element within \"array2\" is also the zero index entry.\nTo demonstrate this you can change the matching _id value to \"124\" and the result will $push an new entry onto the element with _id \"123\" as they are both in the zero index entry of \"array1\" and that is the value returned to the placeholder.\nSo that is the general problem with nesting arrays. You could remove one of the levels and you would still be able to $push to the correct element in your \"top\" array, but there would still be multiple levels.\nTry to avoid nesting arrays as you will run into update problems as is shown.\nThe general case is to \"flatten\" the things you \"think\" are \"levels\" and actually make theses \"attributes\" on the final detail items. For example, the \"flattened\" form of the structure in the question should be something like:\n {\n   \"answers\": [\n     { \"by\": \"success\", \"type2\": \"123\", \"type1\": \"12\" }\n   ]\n }\n\nOr even when accepting the inner array is $push only, and never updated:\n {\n   \"array\": [\n     { \"type1\": \"12\", \"type2\": \"123\", \"answeredBy\": [\"success\"] },\n     { \"type1\": \"12\", \"type2\": \"124\", \"answeredBy\": [] }\n   ]\n }\n\nWhich both lend themselves to atomic updates within the scope of the positional $ operator\n\nMongoDB 3.6 and Above\nFrom MongoDB 3.6 there are new features available to work with nested arrays. This uses the positional filtered $[<identifier>] syntax in order to match the specific elements and apply different conditions through arrayFilters in the update statement:\nModel.update(\n  {\n    \"_id\": 1,\n    \"array1\": {\n      \"$elemMatch\": {\n        \"_id\": \"12\",\"array2._id\": \"123\"\n      }\n    }\n  },\n  {\n    \"$push\": { \"array1.$[outer].array2.$[inner].answeredBy\": \"success\" }\n  },\n  {\n    \"arrayFilters\": [{ \"outer._id\": \"12\" },{ \"inner._id\": \"123\" }] \n  }\n)\n\nThe \"arrayFilters\" as passed to the options for .update() or even\n.updateOne(), .updateMany(), .findOneAndUpdate() or .bulkWrite() method specifies the conditions to match on the identifier given in the update statement. Any elements that match the condition given will be updated.\nBecause the structure is \"nested\", we actually use \"multiple filters\" as is specified with an \"array\" of filter definitions as shown. The marked \"identifier\" is used in matching against the positional filtered $[<identifier>] syntax actually used in the update block of the statement. In this case inner and outer are the identifiers used for each condition as specified with the nested chain.\nThis new expansion makes the update of nested array content possible, but it does not really help with the practicality of \"querying\" such data, so the same caveats apply as explained earlier.\nYou typically really \"mean\" to express as \"attributes\", even if your brain initially thinks \"nesting\", it's just usually a reaction to how you believe the \"previous relational parts\" come together. In reality you really need more denormalization.\nAlso see How to Update Multiple Array Elements in mongodb, since these new update operators actually match and update \"multiple array elements\" rather than just the first, which has been the previous action of positional updates.\n\nNOTE Somewhat ironically, since this is specified in the \"options\" argument for .update() and like methods, the syntax is generally compatible with all recent release driver versions.\nHowever this is not true of the mongo shell, since the way the method is implemented there ( \"ironically for backward compatibility\" ) the arrayFilters argument is not recognized and removed by an internal method that parses the options in order to deliver \"backward compatibility\" with prior MongoDB server versions and a \"legacy\" .update() API call syntax.\nSo if you want to use the command in the mongo shell or other \"shell based\" products ( notably Robo 3T ) you need a latest version from either the development branch or production release as of 3.6 or greater.\n\nSee also positional all $[] which also updates \"multiple array elements\" but without applying to specified conditions and applies to all elements in the array where that is the desired action.\n    ",
            "votes": 77,
            "comentarios": [
                {
                    "decripcion": "thanks, your explanation of arrayFilters is so much better than the mongoDB site documentation. they just don't demonstrate how a nested array update would work.",
                    "fecha": { "$date" : "2018-07-29 08:33:26Z" },
                    "usuario": "Nir",
                    "usuario_id": 1884
                },
                {
                    "decripcion": "Wow! You are a genius! your explanation is so clear and straightforward. Thank you!",
                    "fecha": { "$date" : "2020-06-05 14:04:45Z" },
                    "usuario": "Daggie Blanqx - Douglas Mwangi",
                    "usuario_id": 1885
                }
            ],
            "usuario": "Neil Lunn",
            "usuario_id": 1750
        },
        "respuestas": [
            1076,
            1077
        ],
        "comentarios": [],
        "usuario": "masanorinyo",
        "usuario_id": 1887
    },
    {
        "_id": 67,
        "titulo": "Find objects between two dates MongoDB",
        "fecha": { "$date" : "2015-08-11 07:20:56Z" },
        "decripcion": "\n                \nI've been playing around storing tweets inside mongodb, each object looks like this:\n\n{\n\"_id\" : ObjectId(\"4c02c58de500fe1be1000005\"),\n\"contributors\" : null,\n\"text\" : \"Hello world\",\n\"user\" : {\n    \"following\" : null,\n    \"followers_count\" : 5,\n    \"utc_offset\" : null,\n    \"location\" : \"\",\n    \"profile_text_color\" : \"000000\",\n    \"friends_count\" : 11,\n    \"profile_link_color\" : \"0000ff\",\n    \"verified\" : false,\n    \"protected\" : false,\n    \"url\" : null,\n    \"contributors_enabled\" : false,\n    \"created_at\" : \"Sun May 30 18:47:06 +0000 2010\",\n    \"geo_enabled\" : false,\n    \"profile_sidebar_border_color\" : \"87bc44\",\n    \"statuses_count\" : 13,\n    \"favourites_count\" : 0,\n    \"description\" : \"\",\n    \"notifications\" : null,\n    \"profile_background_tile\" : false,\n    \"lang\" : \"en\",\n    \"id\" : 149978111,\n    \"time_zone\" : null,\n    \"profile_sidebar_fill_color\" : \"e0ff92\"\n},\n\"geo\" : null,\n\"coordinates\" : null,\n\"in_reply_to_user_id\" : 149183152,\n\"place\" : null,\n\"created_at\" : \"Sun May 30 20:07:35 +0000 2010\",\n\"source\" : \"web\",\n\"in_reply_to_status_id\" : {\n    \"floatApprox\" : 15061797850\n},\n\"truncated\" : false,\n\"favorited\" : false,\n\"id\" : {\n    \"floatApprox\" : 15061838001\n}\n\n\nHow would I write a query which checks the created_at and finds all objects between 18:47 and 19:00? Do I need to update my documents so the dates are stored in a specific format?\n    ",
        "votes": 496,
        "tags": [
            "twitter",
            "mongodb-query",
            "datetime",
            "mongodb"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1078,
            "fecha": { "$date" : "2016-09-02 13:54:20Z" },
            "decripcion": "\nQuerying for a Date Range (Specific Month or Day) in the MongoDB Cookbook has a very good explanation on the matter, but below is something I tried out myself and it seems to work.\n\nitems.save({\n    name: \"example\",\n    created_at: ISODate(\"2010-04-30T00:00:00.000Z\")\n})\nitems.find({\n    created_at: {\n        $gte: ISODate(\"2010-04-29T00:00:00.000Z\"),\n        $lt: ISODate(\"2010-05-01T00:00:00.000Z\")\n    }\n})\n=> { \"_id\" : ObjectId(\"4c0791e2b9ec877893f3363b\"), \"name\" : \"example\", \"created_at\" : \"Sun May 30 2010 00:00:00 GMT+0300 (EEST)\" }\n\n\nBased on my experiments you will need to serialize your dates into a format that MongoDB supports, because the following gave undesired search results.\n\nitems.save({\n    name: \"example\",\n    created_at: \"Sun May 30 18.49:00 +0000 2010\"\n})\nitems.find({\n    created_at: {\n        $gte:\"Mon May 30 18:47:00 +0000 2015\",\n        $lt: \"Sun May 30 20:40:36 +0000 2010\"\n    }\n})\n=> { \"_id\" : ObjectId(\"4c079123b9ec877893f33638\"), \"name\" : \"example\", \"created_at\" : \"Sun May 30 18.49:00 +0000 2010\" }\n\n\nIn the second example no results were expected, but there was still one gotten. This is because a basic string comparison is done.\n    ",
            "votes": 758,
            "comentarios": [
                {
                    "decripcion": "Looks interesting, but does the stored date need to be in a specific format. I've just been storing what was provided by twitter, does this need to be changed into a different format?",
                    "fecha": { "$date" : "2010-05-31 16:24:55Z" },
                    "usuario": "Tom",
                    "usuario_id": 233
                },
                {
                    "decripcion": "You've probably stored the timestamps as strings, so I am guessing MongoDB won't realize that they are in fact dates. Thus doing a range query on them would result in an alphabetical range query (e.g. \"Jan Mon 01.01.2010\" being before \"Jan Sun 01.01.1000\"). It would probably make sense to format all date data into the MongoDB format, which I think is just plain JavaScript Date.",
                    "fecha": { "$date" : "2010-05-31 16:47:54Z" },
                    "usuario": "ponzao",
                    "usuario_id": 1888
                },
                {
                    "decripcion": "I just used this to convert my strings to date objects stackoverflow.com/questions/2900674/\u2026",
                    "fecha": { "$date" : "2010-05-31 21:07:44Z" },
                    "usuario": "Tom",
                    "usuario_id": 233
                },
                {
                    "decripcion": "Okay cool! I'd guess the range queries mentioned in the cookbook should work then, did you try them out already?",
                    "fecha": { "$date" : "2010-05-31 21:26:22Z" },
                    "usuario": "ponzao",
                    "usuario_id": 1888
                },
                {
                    "decripcion": "Yep once I was storing the dates correct the cookbook examples worked as expected.",
                    "fecha": { "$date" : "2010-06-15 08:46:23Z" },
                    "usuario": "Tom",
                    "usuario_id": 233
                }
            ],
            "usuario": "ponzao",
            "usuario_id": 1888
        },
        "respuestas": [
            1078,
            1079,
            1080,
            1081,
            1082,
            1083,
            1084,
            1085,
            1086,
            1087,
            1088,
            1089,
            1090,
            1091,
            1092
        ],
        "comentarios": [
            {
                "decripcion": "You don't say about which field you want query ?",
                "fecha": { "$date" : "2010-05-31 11:49:13Z" },
                "usuario": "shingara",
                "usuario_id": 1909
            },
            {
                "decripcion": "Oops, I want to query the created_at and find all between two dates.",
                "fecha": { "$date" : "2010-05-31 16:23:10Z" },
                "usuario": "Tom",
                "usuario_id": 233
            },
            {
                "decripcion": "I am curious that why not use timestamp, any advantages by using of the Date Obj?",
                "fecha": { "$date" : "2016-06-03 10:25:48Z" },
                "usuario": "Leo",
                "usuario_id": 334
            },
            {
                "decripcion": "@Leo The biggest advantage with the Date object over milliseconds since the epoch or whatever is human readability. In this case, setting your start range to 2010-04-29T00:00:00.000Z is much easier than calculating the same date/time in milliseconds. You can also do time zone conversion pretty easily. Also, Dates already handle things like leap days, leap seconds, and other oddities that you usually don't want to handle yourself.",
                "fecha": { "$date" : "2017-01-23 19:22:19Z" },
                "usuario": "Thunderforge",
                "usuario_id": 1910
            }
        ],
        "usuario": "Tom",
        "usuario_id": 233
    },
    {
        "_id": 68,
        "titulo": "\"Large data\" workflows using pandas",
        "fecha": { "$date" : "2020-12-07 19:53:31Z" },
        "decripcion": "\n                \nI have tried to puzzle out an answer to this question for many months while learning pandas.  I use SAS for my day-to-day work and it is great for it's out-of-core support.  However, SAS is horrible as a piece of software for numerous other reasons.\n\nOne day I hope to replace my use of SAS with python and pandas, but I currently lack an out-of-core workflow for large datasets.  I'm not talking about \"big data\" that requires a distributed network, but rather files too large to fit in memory but small enough to fit on a hard-drive.\n\nMy first thought is to use HDFStore to hold large datasets on disk and pull only the pieces I need into dataframes for analysis.  Others have mentioned MongoDB as an easier to use alternative.  My question is this:\n\nWhat are some best-practice workflows for accomplishing the following:\n\n\nLoading flat files into a permanent, on-disk database structure\nQuerying that database to retrieve data to feed into a pandas data structure\nUpdating the database after manipulating pieces in pandas\n\n\nReal-world examples would be much appreciated, especially from anyone who uses pandas on \"large data\".\n\nEdit -- an example of how I would like this to work:\n\n\nIteratively import a large flat-file and store it in a permanent, on-disk database structure.  These files are typically too large to fit in memory.\nIn order to use Pandas, I would like to read subsets of this data (usually just a few columns at a time) that can fit in memory.\nI would create new columns by performing various operations on the selected columns.\nI would then have to append these new columns into the database structure.\n\n\nI am trying to find a best-practice way of performing these steps. Reading links about pandas and pytables it seems that appending a new column could be a problem.\n\nEdit -- Responding to Jeff's questions specifically:\n\n\nI am building consumer credit risk models. The kinds of data include phone, SSN and address characteristics; property values; derogatory information like criminal records, bankruptcies, etc... The datasets I use every day have nearly 1,000 to 2,000 fields on average of mixed data types: continuous, nominal and ordinal variables of both numeric and character data.  I rarely append rows, but I do perform many operations that create new columns.\nTypical operations involve combining several columns using conditional logic into a new, compound column. For example, if var1 > 2 then newvar = 'A' elif var2 = 4 then newvar = 'B'.  The result of these operations is a new column for every record in my dataset.\nFinally, I would like to append these new columns into the on-disk data structure.  I would repeat step 2, exploring the data with crosstabs and descriptive statistics trying to find interesting, intuitive relationships to model.\nA typical project file is usually about 1GB.  Files are organized into such a manner where a row consists of a record of consumer data.  Each row has the same number of columns for every record.  This will always be the case.\nIt's pretty rare that I would subset by rows when creating a new column.  However, it's pretty common for me to subset on rows when creating reports or generating descriptive statistics.  For example, I might want to create a simple frequency for a specific line of business, say Retail credit cards.  To do this, I would select only those records where the line of business = retail in addition to whichever columns I want to report on.  When creating new columns, however, I would pull all rows of data and only the columns I need for the operations.\nThe modeling process requires that I analyze every column, look for interesting relationships with some outcome variable, and create new compound columns that describe those relationships.  The columns that I explore are usually done in small sets.  For example, I will focus on a set of say 20 columns just dealing with property values and observe how they relate to defaulting on a loan.  Once those are explored and new columns are created, I then move on to another group of columns, say college education, and repeat the process.  What I'm doing is creating candidate variables that explain the relationship between my data and some outcome.  At the very end of this process, I apply some learning techniques that create an equation out of those compound columns.\n\n\nIt is rare that I would ever add rows to the dataset.  I will nearly always be creating new columns (variables or features in statistics/machine learning parlance).\n    ",
        "votes": 1113,
        "tags": [
            "pandas",
            "mongodb",
            "python",
            "large-data",
            "hdf5"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1093,
            "fecha": { "$date" : "2020-03-11 20:29:47Z" },
            "decripcion": "\nI routinely use tens of gigabytes of data in just this fashion\ne.g. I have tables on disk that I read via queries, create data and append back.\n\nIt's worth reading the docs and late in this thread for several suggestions for how to store your data.\n\nDetails which will affect how you store your data, like:\nGive as much detail as you can; and I can help you develop a structure.\n\n\nSize of data, # of rows, columns, types of columns; are you appending\nrows, or just columns? \nWhat will typical operations look like. E.g. do a query on columns to select a bunch of rows and specific columns, then do an operation (in-memory), create new columns, save these.\n(Giving a toy example could enable us to offer more specific recommendations.)\nAfter that processing, then what do you do? Is step 2 ad hoc, or repeatable?\nInput flat files: how many, rough total size in Gb. How are these organized e.g. by records? Does each one contains different fields, or do they have some records per file with all of the fields in each file?\nDo you ever select subsets of rows (records) based on criteria (e.g. select the rows with field A > 5)? and then do something, or do you just select fields A, B, C with all of the records (and then do something)?\nDo you 'work on' all of your columns (in groups), or are there a good proportion that you may only use for reports (e.g. you want to keep the data around, but don't need to pull in that column explicity until final results time)?\n\n\nSolution\n\nEnsure you have pandas at least 0.10.1 installed.\n\nRead iterating files chunk-by-chunk and multiple table queries.\n\nSince pytables is optimized to operate on row-wise (which is what you query on), we will create a table for each group of fields. This way it's easy to select a small group of fields (which will work with a big table, but it's more efficient to do it this way... I think I may be able to fix this limitation in the future... this is more intuitive anyhow):\n(The following is pseudocode.)\n\nimport numpy as np\nimport pandas as pd\n\n# create a store\nstore = pd.HDFStore('mystore.h5')\n\n# this is the key to your storage:\n#    this maps your fields to a specific group, and defines \n#    what you want to have as data_columns.\n#    you might want to create a nice class wrapping this\n#    (as you will want to have this map and its inversion)  \ngroup_map = dict(\n    A = dict(fields = ['field_1','field_2',.....], dc = ['field_1',....,'field_5']),\n    B = dict(fields = ['field_10',......        ], dc = ['field_10']),\n    .....\n    REPORTING_ONLY = dict(fields = ['field_1000','field_1001',...], dc = []),\n\n)\n\ngroup_map_inverted = dict()\nfor g, v in group_map.items():\n    group_map_inverted.update(dict([ (f,g) for f in v['fields'] ]))\n\n\nReading in the files and creating the storage (essentially doing what append_to_multiple does):\n\nfor f in files:\n   # read in the file, additional options may be necessary here\n   # the chunksize is not strictly necessary, you may be able to slurp each \n   # file into memory in which case just eliminate this part of the loop \n   # (you can also change chunksize if necessary)\n   for chunk in pd.read_table(f, chunksize=50000):\n       # we are going to append to each table by group\n       # we are not going to create indexes at this time\n       # but we *ARE* going to create (some) data_columns\n\n       # figure out the field groupings\n       for g, v in group_map.items():\n             # create the frame for this group\n             frame = chunk.reindex(columns = v['fields'], copy = False)    \n\n             # append it\n             store.append(g, frame, index=False, data_columns = v['dc'])\n\n\nNow you have all of the tables in the file (actually you could store them in separate files if you wish, you would prob have to add the filename to the group_map, but probably this isn't necessary).\n\nThis is how you get columns and create new ones:\n\nframe = store.select(group_that_I_want)\n# you can optionally specify:\n# columns = a list of the columns IN THAT GROUP (if you wanted to\n#     select only say 3 out of the 20 columns in this sub-table)\n# and a where clause if you want a subset of the rows\n\n# do calculations on this frame\nnew_frame = cool_function_on_frame(frame)\n\n# to 'add columns', create a new group (you probably want to\n# limit the columns in this new_group to be only NEW ones\n# (e.g. so you don't overlap from the other tables)\n# add this info to the group_map\nstore.append(new_group, new_frame.reindex(columns = new_columns_created, copy = False), data_columns = new_columns_created)\n\n\nWhen you are ready for post_processing:\n\n# This may be a bit tricky; and depends what you are actually doing.\n# I may need to modify this function to be a bit more general:\nreport_data = store.select_as_multiple([groups_1,groups_2,.....], where =['field_1>0', 'field_1000=foo'], selector = group_1)\n\n\nAbout data_columns, you don't actually need to define ANY data_columns; they allow you to sub-select rows based on the column. E.g. something like:\n\nstore.select(group, where = ['field_1000=foo', 'field_1001>0'])\n\n\nThey may be most interesting to you in the final report generation stage (essentially a data column is segregated from other columns, which might impact efficiency somewhat if you define a lot).\n\nYou also might want to:\n\n\ncreate a function which takes a list of fields, looks up the groups in the groups_map, then selects these and concatenates the results so you get the resulting frame (this is essentially what select_as_multiple does). This way the structure would be pretty transparent to you.\nindexes on certain data columns (makes row-subsetting much faster).\nenable compression.\n\n\nLet me know when you have questions!\n    ",
            "votes": 686,
            "comentarios": [
                {
                    "decripcion": "Thanks for the links.  The second link makes me a bit worried that I can't append new columns to the tables in HDFStore?  Is that correct?  Also, I added an example of how I would use this setup.",
                    "fecha": { "$date" : "2013-01-10 23:53:26Z" },
                    "usuario": "Zelazny7",
                    "usuario_id": 1911
                },
                {
                    "decripcion": "The actual structure in the hdf is up to you. Pytables is row oriented, with fixed columns at creation time. You cannot append columns once a table is created. However, you can create a new table indexed the same as your existing table. (see the select_as_multiple examples in the docs). This way you can create arbitrary sized objects while having pretty efficient queries. The way you use the data is key to how it should be organized on-disk. Send me an off-list e-mail with pseudo code of a more specific example.",
                    "fecha": { "$date" : "2013-01-11 00:27:41Z" },
                    "usuario": "Jeff",
                    "usuario_id": 1912
                },
                {
                    "decripcion": "I have updated my question to respond to your detailed points.  I will work on an example to send you off-list.  Thanks!",
                    "fecha": { "$date" : "2013-01-11 04:29:50Z" },
                    "usuario": "Zelazny7",
                    "usuario_id": 1911
                },
                {
                    "decripcion": "@Jeff, with Pandas being at 0.17.x now have the issues outlined above been resolved in Pandas?",
                    "fecha": { "$date" : "2016-01-13 09:33:18Z" },
                    "usuario": "ctrl-alt-delete",
                    "usuario_id": 1913
                },
                {
                    "decripcion": "@Jeff keen on adding a quick update on your answer to promote dask?",
                    "fecha": { "$date" : "2016-09-09 18:10:32Z" },
                    "usuario": "Zeugma",
                    "usuario_id": 1914
                }
            ],
            "usuario": "Jeff",
            "usuario_id": 1912
        },
        "respuestas": [
            1093,
            1094,
            1095,
            1096,
            1097,
            1098,
            1099,
            1100,
            1101,
            1102,
            1103,
            1104,
            1105,
            1106,
            1107,
            1108
        ],
        "comentarios": [
            {
                "decripcion": "Is the ratio core size / full size 1 %, 10 % ?  Does it matter -- if you could compress cols to int8, or filter out noisy rows, would that change your compute-think loop from say hours to minutes ?  (Also add tag large-data.)",
                "fecha": { "$date" : "2013-03-18 11:26:49Z" },
                "usuario": "denis",
                "usuario_id": 1937
            },
            {
                "decripcion": "Storing float32 instead of float64, and int8 where possible, should be trivial (don't know what tools / functions do float64 internally though)",
                "fecha": { "$date" : "2013-03-18 11:59:56Z" },
                "usuario": "denis",
                "usuario_id": 1937
            },
            {
                "decripcion": "can you split your task into chunks of work?",
                "fecha": { "$date" : "2017-12-08 03:09:05Z" },
                "usuario": "Andrew Scott Evans",
                "usuario_id": 1938
            },
            {
                "decripcion": "a nice 2019 solution to doing pandas like operations on \"medium\" data that don't fit in memory is dask",
                "fecha": { "$date" : "2019-10-30 17:56:30Z" },
                "usuario": "lunguini",
                "usuario_id": 1939
            },
            {
                "decripcion": "There are alternatives to python+pandas which you might want to consider seeing as you're just starting out. Consider the fact that Python is a general-purpose programming language (not a DSL for data munging and analysis) and that pandas is a library tacked on top of that. I would consider looking at R or kdb.",
                "fecha": { "$date" : "2019-11-16 14:02:41Z" },
                "usuario": "Henry Henrinson",
                "usuario_id": 1940
            }
        ],
        "usuario": "Zelazny7",
        "usuario_id": 1911
    },
    {
        "_id": 69,
        "titulo": "Querying after populate in Mongoose",
        "fecha": { "$date" : "2012-07-03 22:45:33Z" },
        "decripcion": "\n                \nI'm pretty new to Mongoose and MongoDB in general so I'm having a difficult time figuring out if something like this is possible: \n\nItem = new Schema({\n    id: Schema.ObjectId,\n    dateCreated: { type: Date, default: Date.now },\n    title: { type: String, default: 'No Title' },\n    description: { type: String, default: 'No Description' },\n    tags: [ { type: Schema.ObjectId, ref: 'ItemTag' }]\n});\n\nItemTag = new Schema({\n    id: Schema.ObjectId,\n    tagId: { type: Schema.ObjectId, ref: 'Tag' },\n    tagName: { type: String }\n});\n\n\n\nvar query = Models.Item.find({});\n\nquery\n    .desc('dateCreated')\n    .populate('tags')\n    .where('tags.tagName').in(['funny', 'politics'])\n    .run(function(err, docs){\n       // docs is always empty\n    });\n\n\nIs there a better way do this?\n\nEdit\n\nApologies for any confusion. What I'm trying to do is get all Items that contain either the funny tag or politics tag.\n\nEdit\n\nDocument without where clause:\n\n[{ \n    _id: 4fe90264e5caa33f04000012,\n    dislikes: 0,\n    likes: 0,\n    source: '/uploads/loldog.jpg',\n    comments: [],\n    tags: [{\n        itemId: 4fe90264e5caa33f04000012,\n        tagName: 'movies',\n        tagId: 4fe64219007e20e644000007,\n        _id: 4fe90270e5caa33f04000015,\n        dateCreated: Tue, 26 Jun 2012 00:29:36 GMT,\n        rating: 0,\n        dislikes: 0,\n        likes: 0 \n    },\n    { \n        itemId: 4fe90264e5caa33f04000012,\n        tagName: 'funny',\n        tagId: 4fe64219007e20e644000002,\n        _id: 4fe90270e5caa33f04000017,\n        dateCreated: Tue, 26 Jun 2012 00:29:36 GMT,\n        rating: 0,\n        dislikes: 0,\n        likes: 0 \n    }],\n    viewCount: 0,\n    rating: 0,\n    type: 'image',\n    description: null,\n    title: 'dogggg',\n    dateCreated: Tue, 26 Jun 2012 00:29:24 GMT \n }, ... ]\n\n\nWith the where clause, I get an empty array.\n    ",
        "votes": 90,
        "tags": [
            "node.js",
            "mongoose",
            "mongodb"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1109,
            "fecha": { "$date" : "2018-05-12 03:57:46Z" },
            "decripcion": "\nWith a modern MongoDB greater than 3.2 you can use $lookup as an alternate to .populate() in most cases. This also has the advantage of actually doing the join \"on the server\" as opposed to what .populate() does which is actually \"multiple queries\" to \"emulate\" a join.\n\nSo .populate() is not really a \"join\" in the sense of how a relational database does it. The $lookup operator on the other hand, actually does the work on the server, and is more or less analogous to a \"LEFT JOIN\":\n\nItem.aggregate(\n  [\n    { \"$lookup\": {\n      \"from\": ItemTags.collection.name,\n      \"localField\": \"tags\",\n      \"foreignField\": \"_id\",\n      \"as\": \"tags\"\n    }},\n    { \"$unwind\": \"$tags\" },\n    { \"$match\": { \"tags.tagName\": { \"$in\": [ \"funny\", \"politics\" ] } } },\n    { \"$group\": {\n      \"_id\": \"$_id\",\n      \"dateCreated\": { \"$first\": \"$dateCreated\" },\n      \"title\": { \"$first\": \"$title\" },\n      \"description\": { \"$first\": \"$description\" },\n      \"tags\": { \"$push\": \"$tags\" }\n    }}\n  ],\n  function(err, result) {\n    // \"tags\" is now filtered by condition and \"joined\"\n  }\n)\n\n\n\n  N.B. The .collection.name here actually evaluates to the \"string\" that is the actual name of the MongoDB collection as assigned to the model. Since mongoose \"pluralizes\" collection names  by default and $lookup needs the actual MongoDB collection name as an argument ( since it's a server operation ), then this is a handy trick to use in mongoose code, as opposed to \"hard coding\" the collection name directly.\n\n\nWhilst we could also use $filter on arrays to remove the unwanted items, this is actually the most efficient form due to Aggregation Pipeline Optimization for the special condition of as $lookup followed by both an $unwind and a $match condition.\n\nThis actually results in the three pipeline stages being rolled into one:\n\n   { \"$lookup\" : {\n     \"from\" : \"itemtags\",\n     \"as\" : \"tags\",\n     \"localField\" : \"tags\",\n     \"foreignField\" : \"_id\",\n     \"unwinding\" : {\n       \"preserveNullAndEmptyArrays\" : false\n     },\n     \"matching\" : {\n       \"tagName\" : {\n         \"$in\" : [\n           \"funny\",\n           \"politics\"\n         ]\n       }\n     }\n   }}\n\n\nThis is highly optimal as the actual operation \"filters the collection to join first\", then it returns the results and \"unwinds\" the array. Both methods are employed so the results do not break the BSON limit of 16MB, which is a constraint that the client does not have.\n\nThe only problem is that it seems \"counter-intuitive\" in some ways, particularly when you want the results in an array, but that is what the $group is for here, as it reconstructs to the original document form.\n\nIt's also unfortunate that we simply cannot at this time actually write $lookup in the same eventual syntax the server uses. IMHO, this is an oversight to be corrected. But for now, simply using the sequence will work and is the most viable option with the best performance and scalability.\n\nAddendum - MongoDB 3.6 and upwards\n\nThough the pattern shown here is fairly optimized due to how the other stages get rolled into the $lookup, it does have one failing in that the \"LEFT JOIN\" which is normally inherent to both $lookup and the actions of populate() is negated by the \"optimal\" usage of $unwind here which does not preserve empty arrays. You can add the preserveNullAndEmptyArrays option, but this negates the \"optimized\" sequence described above and essentially leaves all three stages intact which would normally be combined in the optimization.\n\nMongoDB 3.6 expands with a \"more expressive\" form of $lookup allowing a \"sub-pipeline\" expression. Which not only meets the goal of retaining the \"LEFT JOIN\" but still allows an optimal query to reduce results returned and with a much simplified syntax:\n\nItem.aggregate([\n  { \"$lookup\": {\n    \"from\": ItemTags.collection.name,\n    \"let\": { \"tags\": \"$tags\" },\n    \"pipeline\": [\n      { \"$match\": {\n        \"tags\": { \"$in\": [ \"politics\", \"funny\" ] },\n        \"$expr\": { \"$in\": [ \"$_id\", \"$$tags\" ] }\n      }}\n    ]\n  }}\n])\n\n\nThe $expr used in order to match the declared \"local\" value with the \"foreign\" value is actually what MongoDB does \"internally\" now with the original $lookup syntax. By expressing in this form we can tailor the initial $match expression within the \"sub-pipeline\" ourselves.\n\nIn fact, as a true \"aggregation pipeline\" you can do just about anything you can do with an aggregation pipeline within this \"sub-pipeline\" expression, including \"nesting\" the levels of $lookup to other related collections.\n\nFurther usage is a bit beyond the scope of what the question here asks, but in relation to even \"nested population\" then the new usage pattern of $lookup allows this to be much the same, and a \"lot\" more powerful in it's full usage.\n\n\n\nWorking Example\n\nThe following gives an example using a static method on the model. Once that static method is implemented the call simply becomes:\n\n  Item.lookup(\n    {\n      path: 'tags',\n      query: { 'tags.tagName' : { '$in': [ 'funny', 'politics' ] } }\n    },\n    callback\n  )\n\n\nOr enhancing to be a bit more modern even becomes:\n\n  let results = await Item.lookup({\n    path: 'tags',\n    query: { 'tagName' : { '$in': [ 'funny', 'politics' ] } }\n  })\n\n\nMaking it very similar to .populate() in structure, but it's actually doing the join on the server instead. For completeness, the usage here casts the returned data back to mongoose document instances at according to both the parent and child cases.\n\nIt's fairly trivial and easy to adapt or just use as is for most common cases.\n\n\n  N.B The use of async here is just for brevity of running the enclosed example. The actual implementation is free of this dependency.\n\n\nconst async = require('async'),\n      mongoose = require('mongoose'),\n      Schema = mongoose.Schema;\n\nmongoose.Promise = global.Promise;\nmongoose.set('debug', true);\nmongoose.connect('mongodb://localhost/looktest');\n\nconst itemTagSchema = new Schema({\n  tagName: String\n});\n\nconst itemSchema = new Schema({\n  dateCreated: { type: Date, default: Date.now },\n  title: String,\n  description: String,\n  tags: [{ type: Schema.Types.ObjectId, ref: 'ItemTag' }]\n});\n\nitemSchema.statics.lookup = function(opt,callback) {\n  let rel =\n    mongoose.model(this.schema.path(opt.path).caster.options.ref);\n\n  let group = { \"$group\": { } };\n  this.schema.eachPath(p =>\n    group.$group[p] = (p === \"_id\") ? \"$_id\" :\n      (p === opt.path) ? { \"$push\": `$${p}` } : { \"$first\": `$${p}` });\n\n  let pipeline = [\n    { \"$lookup\": {\n      \"from\": rel.collection.name,\n      \"as\": opt.path,\n      \"localField\": opt.path,\n      \"foreignField\": \"_id\"\n    }},\n    { \"$unwind\": `$${opt.path}` },\n    { \"$match\": opt.query },\n    group\n  ];\n\n  this.aggregate(pipeline,(err,result) => {\n    if (err) callback(err);\n    result = result.map(m => {\n      m[opt.path] = m[opt.path].map(r => rel(r));\n      return this(m);\n    });\n    callback(err,result);\n  });\n}\n\nconst Item = mongoose.model('Item', itemSchema);\nconst ItemTag = mongoose.model('ItemTag', itemTagSchema);\n\nfunction log(body) {\n  console.log(JSON.stringify(body, undefined, 2))\n}\nasync.series(\n  [\n    // Clean data\n    (callback) => async.each(mongoose.models,(model,callback) =>\n      model.remove({},callback),callback),\n\n    // Create tags and items\n    (callback) =>\n      async.waterfall(\n        [\n          (callback) =>\n            ItemTag.create([{ \"tagName\": \"movies\" }, { \"tagName\": \"funny\" }],\n              callback),\n\n          (tags, callback) =>\n            Item.create({ \"title\": \"Something\",\"description\": \"An item\",\n              \"tags\": tags },callback)\n        ],\n        callback\n      ),\n\n    // Query with our static\n    (callback) =>\n      Item.lookup(\n        {\n          path: 'tags',\n          query: { 'tags.tagName' : { '$in': [ 'funny', 'politics' ] } }\n        },\n        callback\n      )\n  ],\n  (err,results) => {\n    if (err) throw err;\n    let result = results.pop();\n    log(result);\n    mongoose.disconnect();\n  }\n)\n\n\nOr a little more modern for Node 8.x and above with async/await and no additional dependencies:\n\nconst { Schema } = mongoose = require('mongoose');\nconst uri = 'mongodb://localhost/looktest';\n\nmongoose.Promise = global.Promise;\nmongoose.set('debug', true);\n\nconst itemTagSchema = new Schema({\n  tagName: String\n});\n\nconst itemSchema = new Schema({\n  dateCreated: { type: Date, default: Date.now },\n  title: String,\n  description: String,\n  tags: [{ type: Schema.Types.ObjectId, ref: 'ItemTag' }]\n});\n\nitemSchema.statics.lookup = function(opt) {\n  let rel =\n    mongoose.model(this.schema.path(opt.path).caster.options.ref);\n\n  let group = { \"$group\": { } };\n  this.schema.eachPath(p =>\n    group.$group[p] = (p === \"_id\") ? \"$_id\" :\n      (p === opt.path) ? { \"$push\": `$${p}` } : { \"$first\": `$${p}` });\n\n  let pipeline = [\n    { \"$lookup\": {\n      \"from\": rel.collection.name,\n      \"as\": opt.path,\n      \"localField\": opt.path,\n      \"foreignField\": \"_id\"\n    }},\n    { \"$unwind\": `$${opt.path}` },\n    { \"$match\": opt.query },\n    group\n  ];\n\n  return this.aggregate(pipeline).exec().then(r => r.map(m => \n    this({ ...m, [opt.path]: m[opt.path].map(r => rel(r)) })\n  ));\n}\n\nconst Item = mongoose.model('Item', itemSchema);\nconst ItemTag = mongoose.model('ItemTag', itemTagSchema);\n\nconst log = body => console.log(JSON.stringify(body, undefined, 2));\n\n(async function() {\n  try {\n\n    const conn = await mongoose.connect(uri);\n\n    // Clean data\n    await Promise.all(Object.entries(conn.models).map(([k,m]) => m.remove()));\n\n    // Create tags and items\n    const tags = await ItemTag.create(\n      [\"movies\", \"funny\"].map(tagName =>({ tagName }))\n    );\n    const item = await Item.create({ \n      \"title\": \"Something\",\n      \"description\": \"An item\",\n      tags \n    });\n\n    // Query with our static\n    const result = (await Item.lookup({\n      path: 'tags',\n      query: { 'tags.tagName' : { '$in': [ 'funny', 'politics' ] } }\n    })).pop();\n    log(result);\n\n    mongoose.disconnect();\n\n  } catch (e) {\n    console.error(e);\n  } finally {\n    process.exit()\n  }\n})()\n\n\nAnd from MongoDB 3.6 and upward, even without the $unwind and $group building:\n\nconst { Schema, Types: { ObjectId } } = mongoose = require('mongoose');\n\nconst uri = 'mongodb://localhost/looktest';\n\nmongoose.Promise = global.Promise;\nmongoose.set('debug', true);\n\nconst itemTagSchema = new Schema({\n  tagName: String\n});\n\nconst itemSchema = new Schema({\n  title: String,\n  description: String,\n  tags: [{ type: Schema.Types.ObjectId, ref: 'ItemTag' }]\n},{ timestamps: true });\n\nitemSchema.statics.lookup = function({ path, query }) {\n  let rel =\n    mongoose.model(this.schema.path(path).caster.options.ref);\n\n  // MongoDB 3.6 and up $lookup with sub-pipeline\n  let pipeline = [\n    { \"$lookup\": {\n      \"from\": rel.collection.name,\n      \"as\": path,\n      \"let\": { [path]: `$${path}` },\n      \"pipeline\": [\n        { \"$match\": {\n          ...query,\n          \"$expr\": { \"$in\": [ \"$_id\", `$$${path}` ] }\n        }}\n      ]\n    }}\n  ];\n\n  return this.aggregate(pipeline).exec().then(r => r.map(m =>\n    this({ ...m, [path]: m[path].map(r => rel(r)) })\n  ));\n};\n\nconst Item = mongoose.model('Item', itemSchema);\nconst ItemTag = mongoose.model('ItemTag', itemTagSchema);\n\nconst log = body => console.log(JSON.stringify(body, undefined, 2));\n\n(async function() {\n\n  try {\n\n    const conn = await mongoose.connect(uri);\n\n    // Clean data\n    await Promise.all(Object.entries(conn.models).map(([k,m]) => m.remove()));\n\n    // Create tags and items\n    const tags = await ItemTag.insertMany(\n      [\"movies\", \"funny\"].map(tagName => ({ tagName }))\n    );\n\n    const item = await Item.create({\n      \"title\": \"Something\",\n      \"description\": \"An item\",\n      tags\n    });\n\n    // Query with our static\n    let result = (await Item.lookup({\n      path: 'tags',\n      query: { 'tagName': { '$in': [ 'funny', 'politics' ] } }\n    })).pop();\n    log(result);\n\n\n    await mongoose.disconnect();\n\n  } catch(e) {\n    console.error(e)\n  } finally {\n    process.exit()\n  }\n\n})()\n\n    ",
            "votes": 68,
            "comentarios": [
                {
                    "decripcion": "I'm no longer using Mongo / Mongoose but I've accepted your answer since this is a popular question and looks like this has been helpful to others. Glad to see this problem has a more scalable solution now. Thanks for providing an updated answer.",
                    "fecha": { "$date" : "2018-05-12 02:27:03Z" },
                    "usuario": "jschr",
                    "usuario_id": 1941
                },
                {
                    "decripcion": "Thank You <3,,,,",
                    "fecha": { "$date" : "2021-03-04 11:12:46Z" },
                    "usuario": "talha_ah",
                    "usuario_id": 1942
                }
            ],
            "usuario": "Neil Lunn",
            "usuario_id": 1750
        },
        "respuestas": [
            1109,
            1110,
            1111,
            1112,
            1113,
            1114
        ],
        "comentarios": [],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 70,
        "titulo": "MongoDb query condition on comparing 2 fields",
        "fecha": { "$date" : "2017-08-21 17:32:17Z" },
        "decripcion": "\n                \nI have a collection T, with 2 fields: Grade1 and Grade2, and I want to select those with condition Grade1 > Grade2, how can I get a query like in MySQL?\n\nSelect * from T Where Grade1 > Grade2\n\n    ",
        "votes": 121,
        "tags": [
            "compare",
            "mongodb"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1115,
            "fecha": { "$date" : "2020-06-20 09:12:55Z" },
            "decripcion": "\nYou can use a $where. Just be aware it will be fairly slow (has to execute Javascript code on every record) so combine with indexed queries if you can.\ndb.T.find( { $where: function() { return this.Grade1 > this.Grade2 } } );\n\nor more compact:\ndb.T.find( { $where : \"this.Grade1 > this.Grade2\" } );\n\nUPD for mongodb v.3.6+\nyou can use $expr as described in recent answer\n    ",
            "votes": 135,
            "comentarios": [
                {
                    "decripcion": "Oops, I get it, just joint-use javascript or other shell scripts, thanks both of you guys!",
                    "fecha": { "$date" : "2010-12-14 19:59:50Z" },
                    "usuario": "Diego Cheng",
                    "usuario_id": 1954
                },
                {
                    "decripcion": "You can do this a little more compact too ... > db.T.find({ $where : \"this.Grade1 > this.Grade2\" });",
                    "fecha": { "$date" : "2010-12-14 20:03:25Z" },
                    "usuario": "Justin Jenkins",
                    "usuario_id": 1955
                },
                {
                    "decripcion": "how could I  $where: function() { return this.Grade1 - this.Grade2 > variable } ?",
                    "fecha": { "$date" : "2016-05-27 14:46:42Z" },
                    "usuario": "Luis Gonz\u00e1lez",
                    "usuario_id": 1956
                },
                {
                    "decripcion": "when i tried db.T.find({$where: function() {return this.startDate == ISODate(\"2017-01-20T10:55:08.000Z\");}}); it returns nothing, even one of the doc in the collection is ISODate(\"2017-01-20T10:55:08.000Z\"). But <= and >= seem work. any idea?",
                    "fecha": { "$date" : "2017-02-22 22:51:16Z" },
                    "usuario": "cateyes",
                    "usuario_id": 1957
                },
                {
                    "decripcion": "@cateyes A bit late perhaps... but pure javascript always returns false when doing an == compare between 2 dates. Mongo, however, lets you search for exact matches between dates in queries. One workaround is using .getTime() to convert to milliseconds or whatever: this.startDate.getTime() == ISODate(\"2017-01-20T10:55:08.000Z\").getTime()",
                    "fecha": { "$date" : "2019-10-01 10:28:02Z" },
                    "usuario": "leinaD_natipaC",
                    "usuario_id": 1958
                }
            ],
            "usuario": "Ian",
            "usuario_id": 1117
        },
        "respuestas": [
            1115,
            1116,
            1117,
            1118
        ],
        "comentarios": [],
        "usuario": "Diego Cheng",
        "usuario_id": 1954
    },
    {
        "_id": 71,
        "titulo": "Group result by 15 minutes time interval in MongoDb",
        "fecha": { "$date" : "2014-11-08 06:31:13Z" },
        "decripcion": "\n                \nI have a \"status\" collection like this strcture -\n\n{\n    _id: ObjectId(\"545a0b63b03dbcd1238b4567\"),\n    status: 1004,\n    comment: \"Rem dolor ipsam placeat omnis non. Aspernatur nobis qui nisi similique.\",\n    created_at: ISODate(\"2014-11-05T11:34:59.804Z\")\n},\n{\n    _id: ObjectId(\"545a0b66b03dbcd1238b4568\"),\n    status: 1001,\n    comment: \"Sint et eos vero ipsa voluptatem harum. Hic unde voluptatibus et blanditiis quod modi.\",\n    created_at: ISODate(\"2014-11-05T11:35:02.814Z\")\n}\n....\n....\n\n\nI need to get result grouped by 15 minutes interval from that collection.\n    ",
        "votes": 55,
        "tags": [
            "mongodb-query",
            "aggregation-framework",
            "mongodb"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            1119,
            1120,
            1121,
            1122,
            1123
        ],
        "comentarios": [
            {
                "decripcion": "Is their something in the provided answer that is unclear or does not apply to your situation? Noting that it is still not accepted.",
                "fecha": { "$date" : "2014-11-13 07:54:46Z" },
                "usuario": "Neil Lunn",
                "usuario_id": 1750
            },
            {
                "decripcion": "Don't bother, he already took answer, why bother yourself with accepting answers.",
                "fecha": { "$date" : "2016-08-26 21:07:39Z" },
                "usuario": "nurgasemetey",
                "usuario_id": 1969
            }
        ],
        "usuario": "Hein Zaw Htet",
        "usuario_id": 1970
    },
    {
        "_id": 72,
        "titulo": "Get names of all keys in the collection",
        "fecha": { "$date" : "2018-04-10 21:08:32Z" },
        "decripcion": "\n                \nI'd like to get the names of all the keys in a MongoDB collection.\n\nFor example, from this:\n\ndb.things.insert( { type : ['dog', 'cat'] } );\ndb.things.insert( { egg : ['cat'] } );\ndb.things.insert( { type : [] } );\ndb.things.insert( { hello : []  } );\n\n\nI'd like to get the unique keys:\n\ntype, egg, hello\n\n    ",
        "votes": 343,
        "tags": [
            "mongodb-query",
            "aggregation-framework",
            "mongodb"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1124,
            "fecha": { "$date" : "2014-06-09 14:27:00Z" },
            "decripcion": "\nYou could do this with MapReduce:\n\nmr = db.runCommand({\n  \"mapreduce\" : \"my_collection\",\n  \"map\" : function() {\n    for (var key in this) { emit(key, null); }\n  },\n  \"reduce\" : function(key, stuff) { return null; }, \n  \"out\": \"my_collection\" + \"_keys\"\n})\n\n\nThen run distinct on the resulting collection so as to find all the keys:\n\ndb[mr.result].distinct(\"_id\")\n[\"foo\", \"bar\", \"baz\", \"_id\", ...]\n\n    ",
            "votes": 370,
            "comentarios": [
                {
                    "decripcion": "Hi there! I've just posted a follow-up to this question asking how to make this snippet work even with keys located at deeper levels into the data structure (stackoverflow.com/questions/2997004/\u2026).",
                    "fecha": { "$date" : "2010-06-08 14:53:22Z" },
                    "usuario": "Andrea Fiore",
                    "usuario_id": 1971
                },
                {
                    "decripcion": "@kristina : How is it possible that I get entire things listed with the keys when using this on the things collection. It looks related to the history mechanism because I get things which I have modified in the past..",
                    "fecha": { "$date" : "2011-09-26 02:54:09Z" },
                    "usuario": "Shawn",
                    "usuario_id": 1972
                },
                {
                    "decripcion": "I know this is an old thread, but I seem to have a similar need. I'm using the nodejs mongodb native driver. The resulting temporary collection seems to empty always. I'm using the mapreduce function in the collection class for this. Is that not possible?",
                    "fecha": { "$date" : "2014-05-22 14:15:09Z" },
                    "usuario": "Deepak",
                    "usuario_id": 1973
                },
                {
                    "decripcion": "This may be obvious, but if you want to get a list of all the unique keys in a subdocument, just modify this line: for (var key in this.first_level.second_level.nth_level) { emit(key, null); }",
                    "fecha": { "$date" : "2016-01-07 22:51:02Z" },
                    "usuario": "dtbarne",
                    "usuario_id": 1974
                },
                {
                    "decripcion": "Instead of saving to a collection then running distinct on that, I use map(): db.runCommand({..., out: { \"inline\" : 1 }}).results.map(function(i) { return i._id; });",
                    "fecha": { "$date" : "2017-03-03 14:01:44Z" },
                    "usuario": "Ian Stanley",
                    "usuario_id": 1975
                }
            ],
            "usuario": "kristina",
            "usuario_id": 1976
        },
        "respuestas": [
            1124,
            1125,
            1126,
            1127,
            1128,
            1129,
            1130,
            1131,
            1132,
            1133,
            1134,
            1135,
            1136,
            1137,
            1138,
            1139,
            1140,
            1141,
            1142,
            1143,
            1144,
            1145
        ],
        "comentarios": [],
        "usuario": "Steve",
        "usuario_id": 291
    },
    {
        "_id": 73,
        "titulo": "Random record from MongoDB",
        "fecha": { "$date" : "2021-06-19 05:37:41Z" },
        "decripcion": "\n                \nI am looking to get a random record from a huge collection (100 million records).\nWhat is the fastest and most efficient way to do so?\nThe data is already there and there are no field in which I can generate a random number and obtain a random row.\n    ",
        "votes": 374,
        "tags": [
            "mongodb-query",
            "random",
            "mongodb"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            1146,
            1147,
            1148,
            1149,
            1150,
            1151,
            1152,
            1153,
            1154,
            1155,
            1156,
            1157,
            1158,
            1159,
            1160,
            1161,
            1162,
            1163,
            1164,
            1165,
            1166,
            1167,
            1168,
            1169,
            1170,
            1171,
            1172,
            1173
        ],
        "comentarios": [
            {
                "decripcion": "See also this SO question titled \"Ordering a result set randomly in mongo\". Thinking about randomly ordering a result set is a more general version of this question -- more powerful and more useful.",
                "fecha": { "$date" : "2012-06-15 20:30:49Z" },
                "usuario": "David J.",
                "usuario_id": 2019
            },
            {
                "decripcion": "This question keeps popping up. The latest information can likely be found at the feature request to get random items from a collection in the MongoDB ticket tracker. If implemented natively, it would likely be the most efficient option. (If you want the feature, go vote it up.)",
                "fecha": { "$date" : "2012-06-17 02:37:16Z" },
                "usuario": "David J.",
                "usuario_id": 2019
            },
            {
                "decripcion": "Is this a sharded collection?",
                "fecha": { "$date" : "2013-07-27 17:51:00Z" },
                "usuario": "Dylan Tong",
                "usuario_id": 2055
            },
            {
                "decripcion": "The correct answer has been given by @JohnnyHK below : db.mycoll.aggregate(    { $sample: { size: 1 } } )",
                "fecha": { "$date" : "2016-03-24 18:46:27Z" },
                "usuario": "Florian",
                "usuario_id": 2056
            },
            {
                "decripcion": "Does anyone know how much slower this is than just taking the first record? I\u2019m debating whether it\u2019s worth taking a random sample to do something vs just doing it in order.",
                "fecha": { "$date" : "2020-02-06 15:00:35Z" },
                "usuario": "David Kong",
                "usuario_id": 2057
            }
        ],
        "usuario": "Will M",
        "usuario_id": 2058
    },
    {
        "_id": 74,
        "titulo": "Find in Double Nested Array MongoDB",
        "fecha": { "$date" : "2017-06-30 09:15:40Z" },
        "decripcion": "\n                \nI have this Collection in mongodb\n\n{\n\"_id\" : \"777\",\n\"someKey\" : \"someValue\",\n\"someArray\" : [\n    {\n        \"name\" : \"name1\",\n        \"someNestedArray\" : [\n            {\n                \"name\" : \"value\"\n            },\n            {\n                \"name\" : \"delete me\"\n            }\n        ]\n    }\n  ]\n}\n\n\nI want to find document based on someArray.someNestedArray.name\nbut i can't find any useful link all search result about update nested array\ni am trying this but return nothing\n\ndb.mycollection.find({\"someArray.$.someNestedArray\":{\"$elemMatch\":{\"name\":\"1\"}}})\ndb.mycollection.find({\"someArray.$.someNestedArray.$.name\":\"1\"})\n\n\nand Some thing else\n\nhow can i find by element in double nested array mongodb?\n    ",
        "votes": 35,
        "tags": [
            "mongodb-query",
            "aggregation-framework",
            "mongodb"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1174,
            "fecha": { "$date" : "2017-06-30 09:15:25Z" },
            "decripcion": "\n\n\nIn the simplest sense this just follows the basic form of \"dot notation\" as used by MongoDB. That will work regardless of which array member the inner array member is in, as long as it matches a value:\n\ndb.mycollection.find({\n    \"someArray.someNestedArray.name\": \"value\"\n})\n\n\nThat is fine for a \"single field\" value, for matching multiple-fields you would use $elemMatch:\n\ndb.mycollection.find({\n    \"someArray\": { \n        \"$elemMatch\": {\n            \"name\": \"name1\",\n            \"someNestedArray\": {\n                \"$elemMatch\": {\n                    \"name\": \"value\",\n                    \"otherField\": 1\n                }\n            }\n        }\n    }\n})\n\n\nThat matches the document which would contain something with a a field at that \"path\" matching the value. If you intended to \"match and filter\" the result so only the matched element was returned, this is not possible with the positional operator projection, as quoted:\n\n\n  Nested Arrays\n  \n  The positional $ operator cannot be used for queries which traverse more than one array, such as queries that traverse arrays nested within other arrays, because the replacement for the $ placeholder is a single value\n\n\nModern MongoDB\n\nWe can do this by applying $filter and $map here. The $map is really needed because the \"inner\" array can change as a result of the \"filtering\", and the \"outer\" array of course does not match the conditions when the \"inner\" was stripped of all elements. \n\nAgain following the example of actually having multiple properties to match within each array:\n\ndb.mycollection.aggregate([\n  { \"$match\": {\n    \"someArray\": {\n      \"$elemMatch\": {\n         \"name\": \"name1\",\n         \"someNestedArray\": {\n           \"$elemMatch\": {\n             \"name\": \"value\",\n             \"otherField\": 1\n           }\n         }\n       }\n    }\n  }},\n  { \"$addFields\": {\n    \"someArray\": {\n      \"$filter\": {\n        \"input\": {\n          \"$map\": {\n            \"input\": \"$someArray\",\n            \"as\": \"sa\",\n            \"in\": {\n              \"name\": \"$$sa.name\",\n              \"someNestedArray\": {\n                \"$filter\": {\n                  \"input\": \"$$sa.someNestedArray\",\n                  \"as\": \"sn\",\n                  \"cond\": {\n                    \"$and\": [\n                      { \"$eq\": [ \"$$sn.name\", \"value\" ] },\n                      { \"$eq\": [ \"$$sn.otherField\", 1 ] }\n                    ]\n                  }\n                }\n              }             \n            }\n          },\n        },\n        \"as\": \"sa\",\n        \"cond\": {\n          \"$and\": [\n            { \"$eq\": [ \"$$sa.name\", \"name1\" ] },\n            { \"$gt\": [ { \"$size\": \"$$sa.someNestedArray\" }, 0 ] }\n          ]\n        }\n      }\n    }\n  }}\n])\n\n\nTherefore on the \"outer\" array the $filter actually looks at the $size of the \"inner\" array after it was \"filtered\" itself, so you can reject those results when the whole inner array does in fact match noting.\n\nOlder MongoDB\n\nIn order to \"project\" only the matched element, you need the .aggregate() method:\n\ndb.mycollection.aggregate([\n    // Match possible documents\n    { \"$match\": {\n        \"someArray.someNestedArray.name\": \"value\"\n    }},\n\n    // Unwind each array\n    { \"$unwind\": \"$someArray\" },\n    { \"$unwind\": \"$someArray.someNestedArray\" },\n\n    // Filter just the matching elements\n    { \"$match\": {\n        \"someArray.someNestedArray.name\": \"value\"\n    }},\n\n    // Group to inner array\n    { \"$group\": {\n        \"_id\": { \n            \"_id\": \"$_id\", \n            \"name\": \"$someArray.name\"\n        },\n        \"someKey\": { \"$first\": \"$someKey\" },\n        \"someNestedArray\": { \"$push\": \"$someArray.someNestedArray\" }\n    }},\n\n    // Group to outer array\n    { \"$group\": {\n        \"_id\": \"$_id._id\",\n        \"someKey\": { \"$first\": \"$someKey\" },\n        \"someArray\": { \"$push\": {\n            \"name\": \"$_id.name\",\n            \"someNestedArray\": \"$someNestedArray\"\n        }}\n    }} \n])\n\n\nThat allows you to \"filter\" the matches in nested arrays for one or more results within the document.\n    ",
            "votes": 70,
            "comentarios": [
                {
                    "decripcion": "Thanks, That is fine for a \"single field\" value, for matching multiple-fields you would use $elemMatch this line clarified me the exact use of elemMatch,",
                    "fecha": { "$date" : "2017-10-10 11:26:03Z" },
                    "usuario": "Sravan",
                    "usuario_id": 2059
                },
                {
                    "decripcion": "Your answer is a game changer for my project!",
                    "fecha": { "$date" : "2021-06-12 16:54:22Z" },
                    "usuario": "Luis Febro",
                    "usuario_id": 2060
                }
            ],
            "usuario": "Neil Lunn",
            "usuario_id": 1750
        },
        "respuestas": [
            1174,
            1175
        ],
        "comentarios": [],
        "usuario": "Ali Kianinejad",
        "usuario_id": 2061
    },
    {
        "_id": 75,
        "titulo": "RegEx match open tags except XHTML self-contained tags",
        "fecha": { "$date" : "2012-05-26 20:37:05Z" },
        "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        Locked. Comments on this question have been disabled, but it is still accepting new answers and other interactions. Learn more.\n                        \n                    \n                \n            \n        \n\n\n    \n\nI need to match all of these opening tags:\n\n<p>\n<a href=\"foo\">\n\n\nBut not these:\n\n<br />\n<hr class=\"foo\" />\n\n\nI came up with this and wanted to make sure I've got it right. I am only capturing the a-z.\n\n<([a-z]+) *[^/]*?>\n\n\nI believe it says:\n\n\nFind a less-than, then\nFind (and capture) a-z one or more times, then\nFind zero or more spaces, then\nFind any character zero or more times, greedy, except /, then\nFind a greater-than\n\n\nDo I have that right? And more importantly, what do you think?\n    ",
        "votes": 1821,
        "tags": [
            "regex",
            "xhtml",
            "html"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1176,
            "fecha": { "$date" : "2020-11-12 14:21:18Z" },
            "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        Locked. There are disputes about this answer\u2019s content being resolved at this time. It is not currently accepting new interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nYou can't parse [X]HTML with regex. Because HTML can't be parsed by regex. Regex is not a tool that can be used to correctly parse HTML. As I have answered in HTML-and-regex questions here so many times before, the use of regex will not allow you to consume HTML. Regular expressions are a tool that is insufficiently sophisticated to understand the constructs employed by HTML. HTML is not a regular language and hence cannot be parsed by regular expressions. Regex queries are not equipped to break down HTML into its meaningful parts. so many times but it is not getting to me. Even enhanced irregular regular expressions as used by Perl are not up to the task of parsing HTML. You will never make me crack. HTML is a language of sufficient complexity that it cannot be parsed by regular expressions. Even Jon Skeet cannot parse HTML using regular expressions. Every time you attempt to parse HTML with regular expressions, the unholy child weeps the blood of virgins, and Russian hackers pwn your webapp. Parsing HTML with regex summons tainted souls into the realm of the living. HTML and regex go together like love, marriage, and ritual infanticide. The <center> cannot hold it is too late. The force of regex and HTML together in the same conceptual space will destroy your mind like so much watery putty. If you parse HTML with regex you are giving in to Them and their blasphemous ways which doom us all to inhuman toil for the One whose Name cannot be expressed in the Basic Multilingual Plane, he comes. HTML-plus-regexp will liquify the n\u200berves of the sentient whilst you observe, your psyche withering in the onslaught of horror. Rege\u033f\u0314\u0309x-based HTML parsers are the cancer that is killing StackOverflow it is too late it is too late we cannot be saved the transgression of a chi\u0361ld ensures regex will consume all living tissue (except for HTML which it cannot, as previously prophesied) dear lord help us how can anyone survive this scourge using regex to parse HTML has doomed humanity to an eternity of dread torture and security holes using regex as a tool to process HTML establishes a breach between this world and the dread realm of c\u0352\u036ao\u035b\u036brrupt entities (like SGML entities, but more corrupt) a mere glimpse of the world of reg\u200bex parsers for HTML will ins\u200btantly transport a programmer's consciousness into a world of ceaseless screaming, he comes, the pestilent slithy regex-infection wil\u200bl devour your HT\u200bML parser, application and existence for all time like Visual Basic only worse he comes he comes do not fi\u200bght he com\u0321e\u0336s, \u0315h\u0335i\u200bs un\u0328ho\u035ely radian\u0341ce\u0341 destro\u0489ying all enli\u030d\u0344\u0302\u0344ghtenment, HTML tags lea\u0360ki\u0327n\u0358g fr\u0336o\u0328m \u0321yo\u200b\u035fur eye\u0362s\u0338 \u031bl\u0315ik\u034fe liq\u200buid pain, the song of re\u0338gular exp\u200bression parsing will exti\u200bnguish the voices of mor\u200btal man from the sp\u200bhere I can see it can you see \u0332\u035a\u0316\u0354\u0319i\u0302\u0341\u0329t\u0301\u030b\u0340\u0332\u034e\u0329\u0331\u0354 it is beautiful t\u200bhe final snuffing of the lie\u200bs of Man ALL IS LOS\u0301\u030f\u0344\u0356\u0329\u0347\u0317\u032aT ALL I\u200bS LOST the pon\u0337y he comes he c\u0336\u032eomes he comes the ich\u200bor permeates all MY FACE MY FACE \u1d52h god no NO NOO\u033cO\u200bO N\u0398 stop the an\u200b*\u0351\u033e\u033e\u0336\u200b\u0305\u036b\u034f\u0319\u0324g\u035b\u0346\u033e\u036b\u0311\u0346\u0347\u032bl\u030d\u036b\u0365\u0368\u0356\u0349\u0317\u0329\u0333\u031fe\u0305\u0320s \u034ea\u0327\u0348\u0356r\u033d\u033e\u0344\u0352\u0351e n\u200bot re\u0300\u0311\u0367\u030ca\u0368l\u0303\u0364\u0342\u033e\u0306\u0318\u031d\u0319 ZA\u0360\u0321\u034a\u035dLG\u038c IS\u036e\u0302\u0489\u032f\u0348\u0355\u0339\u0318\u0331 TO\u0345\u0347\u0339\u033a\u019d\u0334\u0233\u0333 TH\u0318E\u0344\u0309\u0356 \u0360P\u032f\u034d\u032dO\u031a\u200bN\u0310Y\u0321 H\u0368\u034a\u033d\u0305\u033e\u030e\u0321\u0338\u032a\u032fE\u033e\u035b\u036a\u0344\u0300\u0301\u0327\u0358\u032c\u0329 \u0367\u033e\u036c\u0327\u0336\u0328\u0331\u0339\u032d\u032fC\u036d\u030f\u0365\u036e\u035f\u0337\u0319\u0332\u031d\u0356O\u036e\u034f\u032e\u032a\u031d\u034dM\u034a\u0312\u031a\u036a\u0369\u036c\u031a\u035c\u0332\u0316E\u0311\u0369\u034c\u035d\u0334\u031f\u031f\u0359\u031eS\u036f\u033f\u0314\u0328\u0340\u0325\u0345\u032b\u034e\u032d\n\nHave you tried using an XML parser instead?\n\n\nModerator's Note\nThis post is locked to prevent inappropriate edits to its content. The post looks exactly as it is supposed to look - there are no problems with its content. Please do not flag it for our attention.\n\n    ",
            "votes": 4412,
            "comentarios": [
                {
                    "decripcion": "Kobi: I think it's time for me to quit the post of Assistant Don't Parse HTML With Regex Officer. No matter how many times we say it, they won't stop coming every day... every hour even. It is a lost cause, which someone else can fight for a bit. So go on, parse HTML with regex, if you must. It's only broken code, not life and death.",
                    "fecha": { "$date" : "2009-11-13 23:18:03Z" },
                    "usuario": "bobince",
                    "usuario_id": 2062
                },
                {
                    "decripcion": "If you can't see this post, here's a screencapture of it in all its glory: imgur.com/gOPS2.png",
                    "fecha": { "$date" : "2009-11-19 14:37:27Z" },
                    "usuario": "Andrew Keeton",
                    "usuario_id": 2063
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            1176,
            1177,
            1178,
            1179,
            1180,
            1181,
            1182,
            1183,
            1184,
            1185,
            1186,
            1187,
            1188,
            1189,
            1190,
            1191,
            1192,
            1193,
            1194,
            1195,
            1196,
            1197,
            1198,
            1199,
            1200,
            1201,
            1202,
            1203,
            1204,
            1205
        ],
        "comentarios": [],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 76,
        "titulo": "Reference - What does this regex mean?",
        "fecha": { "$date" : "2020-06-20 09:12:55Z" },
        "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question's answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nWhat is this?\nThis is a collection of common Q&A. This is also a Community Wiki, so everyone is invited to participate in maintaining it.\nWhy is this?\nregex is suffering from give me ze code type of questions and poor answers with no explanation. This reference is meant to provide links to quality Q&A.\nWhat's the scope?\nThis reference is meant for the following languages: php, perl, javascript, python, ruby, java, .net.\nThis might be too broad, but these languages share the same syntax. For specific features there's the tag of the language behind it, example:\n\nWhat are regular expression Balancing Groups? .net\n\n    ",
        "votes": 52,
        "tags": [
            ".net",
            "php5",
            "xpath",
            "objective-c",
            "perl",
            "go",
            "java-8",
            "haskell",
            "pcre",
            "xml-schema",
            "swift",
            "javascript",
            "java",
            "dotnet",
            "php",
            "xregexp",
            "icu",
            "python",
            "regex",
            "r",
            "ruby"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1206,
            "fecha": { "$date" : "2021-07-29 21:11:47Z" },
            "decripcion": "\nThe Stack Overflow Regular Expressions FAQ\nSee also a lot of general hints and useful links at the regex tag details page.\n\nOnline tutorials\n\nRegexOne \u21aa\nRegular Expressions Info \u21aa\n\nQuantifiers\n\nZero-or-more: *:greedy, *?:reluctant, *+:possessive\nOne-or-more: +:greedy, +?:reluctant, ++:possessive\n?:optional (zero-or-one)\nMin/max ranges (all inclusive): {n,m}:between n & m, {n,}:n-or-more, {n}:exactly n\nDifferences between greedy, reluctant (a.k.a. \"lazy\", \"ungreedy\") and possessive quantifier:\n\nGreedy vs. Reluctant vs. Possessive Quantifiers\nIn-depth discussion on the differences between greedy versus non-greedy\nWhat's the difference between {n} and {n}?\nCan someone explain Possessive Quantifiers to me? php, perl, java, ruby\nEmulating possessive quantifiers .net\nNon-Stack Overflow references: From Oracle, regular-expressions.info\n\n\n\nCharacter Classes\n\nWhat is the difference between square brackets and parentheses?\n[...]: any one character, [^...]: negated/any character but\n[^] matches any one character including newlines javascript\n[\\w-[\\d]] / [a-z-[qz]]: set subtraction .net, xml-schema, xpath, JGSoft\n[\\w&&[^\\d]]: set intersection java, ruby 1.9+\n[[:alpha:]]:POSIX character classes\nWhy do [^\\\\D2], [^[^0-9]2], [^2[^0-9]] get different results in Java? java\nShorthand:\n\nDigit: \\d:digit, \\D:non-digit\nWord character (Letter, digit, underscore): \\w:word character, \\W:non-word character\nWhitespace: \\s:whitespace, \\S:non-whitespace\n\n\nUnicode categories (\\p{L}, \\P{L}, etc.)\n\nEscape Sequences\n\nHorizontal whitespace: \\h:space-or-tab, \\t:tab\nNewlines:\n\n\\r, \\n:carriage return and line feed\n\\R:generic newline php java-8\n\n\nNegated whitespace sequences: \\H:Non horizontal whitespace character, \\V:Non vertical whitespace character, \\N:Non line feed character pcre php5 java-8\nOther: \\v:vertical tab, \\e:the escape character\n\nAnchors\n\n^:start of line/input, \\b:word boundary, and \\B:non-word boundary, $:end of line/input\n\\A:start of input, \\Z:end of input php, perl, ruby\n\\z:the very end of input (\\Z in Python) .net, php, pcre, java, ruby, icu, swift, objective-c\n\\G:start of match php, perl, ruby\n\n(Also see \"Flavor-Specific Information \u2192 Java \u2192 The functions in Matcher\")\nGroups\n\n(...):capture group, (?:):non-capture group\n\nWhy is my repeating capturing group only capturing the last match?\n\n\n\\1:backreference and capture-group reference, $1:capture group reference\n\nWhat's the meaning of a number after a backslash in a regular expression?\n\\g<1>123:How to follow a numbered capture group, such as \\1, with a number?: python\n\n\nWhat does a subpattern (?i:regex) mean?\nWhat does the 'P' in (?P<group_name>regexp) mean?\n(?>):atomic group or independent group,  (?|):branch reset\n\nEquivalent of branch reset in .NET/C# .net\n\n\nNamed capture groups:\n\nGeneral named capturing group reference at regular-expressions.info\njava: (?<groupname>regex): Overview and naming rules (Non-Stack Overflow links)\nOther languages: (?P<groupname>regex) python, (?<groupname>regex) .net, (?<groupname>regex) perl, (?P<groupname>regex) and (?<groupname>regex) php\n\n\n\nLookarounds\n\nLookaheads: (?=...):positive, (?!...):negative\nLookbehinds: (?<=...):positive, (?<!...):negative\nLookbehind limits in:\n\nLookbehinds need to be constant-length php, perl, python, ruby\nLookarounds of limited length {0,n} java\nVariable length lookbehinds are allowed .net\n\n\nLookbehind alternatives:\n\nUsing \\K php, perl (Flavors that support \\K)\nAlternative regex module for Python python\n\nThe hacky way\nJavaScript negative lookbehind equivalents External link\n\n\n\n\n\nModifiers\n\n\n\n\nflag\nmodifier\nflavors\n\n\n\n\na\nASCII\npython\n\n\nc\ncurrent position\nperl\n\n\ne\nexpression\nphp perl\n\n\ng\nglobal\nmost\n\n\ni\ncase-insensitive\nmost\n\n\nm\nmultiline\nphp perl python javascript .net java\n\n\nm\n(non)multiline\nruby\n\n\no\nonce\nperl ruby\n\n\nS\nstudy\nphp\n\n\ns\nsingle line\nruby\n\n\nU\nungreedy\nphp r\n\n\nu\nunicode\nmost\n\n\nx\nwhitespace-extended\nmost\n\n\ny\nsticky \u21aa\njavascript\n\n\n\n\n\nHow to convert preg_replace e to preg_replace_callback?\nWhat are inline modifiers?\nWhat is '?-mix' in a Ruby Regular Expression\n\nOther:\n\n|:alternation (OR) operator, .:any character, [.]:literal dot character\nWhat special characters must be escaped?\nControl verbs (php and perl): (*PRUNE), (*SKIP), (*FAIL) and (*F)\n\nphp only: (*BSR_ANYCRLF)\n\n\nRecursion (php and perl): (?R), (?0) and (?1), (?-1), (?&groupname)\n\nCommon Tasks\n\nGet a string between two curly braces: {...}\nMatch (or replace) a pattern except in situations s1, s2, s3...\nHow do I find all YouTube video ids in a string using a regex?\nValidation:\n\nInternet: email addresses, URLs (host/port: regex and non-regex alternatives), passwords\nNumeric: a number, min-max ranges (such as 1-31), phone numbers, date\nParsing HTML with regex: See \"General Information > When not to use Regex\"\n\n\n\nAdvanced Regex-Fu\n\nStrings and numbers:\n\nRegular expression to match a line that doesn't contain a word\nHow does this PCRE pattern detect palindromes?\nMatch strings whose length is a fourth power\nHow does this regex find triangular numbers?\nHow to determine if a number is a prime with regex?\nHow to match the middle character in a string with regex?\n\n\nOther:\n\nHow can we match a^n b^n?\nMatch nested brackets\n\nUsing a recursive pattern php, perl\nUsing balancing groups .net\n\n\n\u201cVertical\u201d regex matching in an ASCII \u201cimage\u201d\nList of highly up-voted regex questions on Code Golf\nHow to make two quantifiers repeat the same number of times?\nAn impossible-to-match regular expression: (?!a)a\nMatch/delete/replace this except in contexts A, B and C\nMatch nested brackets with regex without using recursion or balancing groups?\n\n\n\nFlavor-Specific Information\n(Except for those marked with *, this section contains non-Stack Overflow links.)\n\nJava\n\nOfficial documentation: Pattern Javadoc \u21aa, Oracle's regular expressions tutorial \u21aa\nThe differences between functions in java.util.regex.Matcher:\n\nmatches()): The match must be anchored to both input-start and -end\nfind()): A match may be anywhere in the input string (substrings)\nlookingAt(): The match must be anchored to input-start only\n(For anchors in general, see the section \"Anchors\")\n\n\nThe only java.lang.String functions that accept regular expressions: matches(s), replaceAll(s,s), replaceFirst(s,s), split(s), split(s,i)\n*An (opinionated and) detailed discussion of the disadvantages of and missing features in java.util.regex\n\n\n.NET\n\nHow to read a .NET regex with look-ahead, look-behind, capturing groups and back-references mixed together?\n\n\nOfficial documentation:\n\nBoost regex engine: General syntax, Perl syntax (used by TextPad, Sublime Text, UltraEdit, ...???)\nJavaScript general info and RegExp object\n.NET  MySQL  Oracle  Perl5 version 18.2\nPHP: pattern syntax, preg_match\nPython: Regular expression operations, search vs match, how-to\nRust: crate regex, struct regex::Regex\nSplunk: regex terminology and syntax and regex command\nTcl: regex syntax, manpage, regexp command\nVisual Studio Find and Replace\n\n\n\nGeneral information\n(Links marked with * are non-Stack Overflow links.)\n\nOther general documentation resources: Learning Regular Expressions, *Regular-expressions.info, *Wikipedia entry, *RexEgg, Open-Directory Project\nDFA versus NFA\nGenerating Strings matching regex\nBooks: Jeffrey Friedl's Mastering Regular Expressions\nWhen to not use regular expressions:\n\nSome people, when confronted with a problem, think \"I know, I'll use regular expressions.\" Now they have two problems. (blog post written by Stack Overflow's founder)*\nDo not use regex to parse HTML:\n\nDon't.  Please, just don't\nWell, maybe...if you're really determined (other answers in this question are also good)\n\n\n\n\n\nExamples of regex that can cause regex engine to fail\n\nWhy does this regular expression kill the Java regex engine?\n\nTools: Testers and Explainers\n(This section contains non-Stack Overflow links.)\n\nOnline (* includes replacement tester, + includes split tester):\n\nDebuggex (Also has a repository of useful regexes) javascript, python, pcre\n*Regular Expressions 101 php, pcre, python, javascript\nRegex Pal, regular-expressions.info javascript\nRubular ruby  RegExr   Regex Hero dotnet\n*+ regexstorm.net .net\n*RegexPlanet: Java java, Go go, Haskell haskell, JavaScript javascript, .NET dotnet, Perl perl php PCRE php, Python python, Ruby ruby, XRegExp xregexp\nfreeformatter.com xregexp\n*+regex.larsolavtorvik.com php PCRE and POSIX, javascript\nRefiddle javascript ruby .net\n\n\nOffline:\n\nMicrosoft Windows: RegexBuddy (analysis), RegexMagic (creation), Expresso (analysis, creation, free)\n\n\n\n\n    ",
            "votes": 1063,
            "comentarios": [
                {
                    "decripcion": "Related: the question for which an answer starts with \"You can't parse [X]HTML with regex.\".",
                    "fecha": { "$date" : "2020-07-22 12:47:34Z" },
                    "usuario": "Peter Mortensen",
                    "usuario_id": 246
                },
                {
                    "decripcion": "Perl has more ((?( for conditional, for example) but you can read the perl official documentation instead.",
                    "fecha": { "$date" : "2021-01-29 07:50:36Z" },
                    "usuario": "user202729",
                    "usuario_id": 2113
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            1206
        ],
        "comentarios": [
            {
                "decripcion": "I created a meta discussion, everyone is invited >>>",
                "fecha": { "$date" : "2014-04-08 18:26:38Z" },
                "usuario": "HamZa",
                "usuario_id": 2114
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 77,
        "titulo": "How can I validate an email address using a regular expression?",
        "fecha": { "$date" : "2021-07-12 21:11:35Z" },
        "decripcion": "\n                \nOver the years I have slowly developed a regular expression that validates most email addresses correctly, assuming they don't use an IP address as the server part.\nI use it in several PHP programs, and it works most of the time.  However, from time to time I get contacted by someone that is having trouble with a site that uses it, and I end up having to make some adjustment (most recently I realized that I wasn't allowing four-character TLDs).\nWhat is the best regular expression you have or have seen for validating emails?\nI've seen several solutions that use functions that use several shorter expressions, but I'd rather have one long complex expression in a simple function instead of several short expression in a more complex function.\n    ",
        "votes": 3644,
        "tags": [
            "email-validation",
            "email",
            "regex",
            "string-parsing",
            "validation"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1207,
            "fecha": { "$date" : "2019-12-31 23:46:34Z" },
            "decripcion": "\nThe fully RFC 822 compliant regex is inefficient and obscure because of its length.  Fortunately, RFC 822 was superseded twice and the current specification for email addresses is RFC 5322.  RFC 5322 leads to a regex that can be understood if studied for a few minutes and is efficient enough for actual use.\n\nOne RFC 5322 compliant regex can be found at the top of the page at http://emailregex.com/ but uses the IP address pattern that is floating around the internet with a bug that allows 00 for any of the unsigned byte decimal values in a dot-delimited address, which is illegal.  The rest of it appears to be consistent with the RFC 5322 grammar and passes several tests using grep -Po, including cases domain names, IP addresses, bad ones, and account names with and without quotes.\n\nCorrecting the 00 bug in the IP pattern, we obtain a working and fairly fast regex.  (Scrape the rendered version, not the markdown, for actual code.)\n\n\n  (?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])\n\n\nor:\n\n(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])\n\n\nHere is diagram of finite state machine for above regexp which is more clear than regexp itself\n\n\nThe more sophisticated patterns in Perl and PCRE (regex library used e.g. in PHP) can correctly parse RFC 5322 without a hitch. Python and C# can do that too, but they use a different syntax from those first two. However, if you are forced to use one of the many less powerful pattern-matching languages, then it\u2019s best to use a real parser.\n\nIt's also important to understand that validating it per the RFC tells you absolutely nothing about whether that address actually exists at the supplied domain, or whether the person entering the address is its true owner. People sign others up to mailing lists this way all the time. Fixing that requires a fancier kind of validation that involves sending that address a message that includes a confirmation token meant to be entered on the same web page as was the address. \n\nConfirmation tokens are the only way to know you got the address of the person entering it. This is why most mailing lists now use that mechanism to confirm sign-ups. After all, anybody can put down president@whitehouse.gov, and that will even parse as legal, but it isn't likely to be the person at the other end.\n\nFor PHP, you should not use the pattern given in Validate an E-Mail Address with PHP, the Right Way from which I quote:\n\n\n  There is some danger that common usage and widespread sloppy coding will establish a de facto standard for e-mail addresses that is more restrictive than the recorded formal standard.\n\n\nThat is no better than all the other non-RFC patterns. It isn\u2019t even smart enough to handle even RFC 822, let alone RFC 5322. This one, however, is.\n\nIf you want to get fancy and pedantic, implement a complete state engine. A regular expression can only act as a rudimentary filter. The problem with regular expressions is that telling someone that their perfectly valid e-mail address is invalid (a false positive) because your regular expression can't handle it is just rude and impolite from the user's perspective. A state engine for the purpose can both validate and even correct e-mail addresses that would otherwise be considered invalid as it disassembles the e-mail address according to each RFC. This allows for a potentially more pleasing experience, like\n\n\n  The specified e-mail address 'myemail@address,com' is invalid. Did you mean 'myemail@address.com'?\n\n\nSee also Validating Email Addresses, including the comments. Or Comparing E-mail Address Validating Regular Expressions.\n\n\n\nDebuggex Demo\n    ",
            "votes": 2823,
            "comentarios": [
                {
                    "decripcion": "You said \"There is no good regular expression.\" Is this general or specific to e-mail address validation?",
                    "fecha": { "$date" : "2008-10-14 14:33:33Z" },
                    "usuario": "Tomalak",
                    "usuario_id": 2115
                },
                {
                    "decripcion": "@Tomalak: only for email addresses. As bortzmeyer said, the RFC is extremely complicated",
                    "fecha": { "$date" : "2008-10-14 16:23:56Z" },
                    "usuario": "Luk",
                    "usuario_id": 2116
                },
                {
                    "decripcion": "The linux journal article you mention is factually wrong in several respects. In particular Lovell clearly hasn't read the errata to RFC3696 and repeats some of the errors in the published version of the RFC.  More here: dominicsayers.com/isemail",
                    "fecha": { "$date" : "2009-04-08 15:56:16Z" },
                    "usuario": "Dominic Sayers",
                    "usuario_id": 2117
                },
                {
                    "decripcion": "Jeff Atwood has a lovely regex in this blog post to validate all valid email addresses: codinghorror.com/blog/2005/02/regex-use-vs-regex-abuse.html",
                    "fecha": { "$date" : "2010-03-22 18:26:42Z" },
                    "usuario": "CMircea",
                    "usuario_id": 2118
                },
                {
                    "decripcion": "RFC 822, section 6.2.4. specifically and explicitly allows capital letters, but this answer does not. w3.org/Protocols/rfc822/#z26 Perhaps the author of this answer intended for their regex to be applied insensitively. If so, that should be made explicit in the body of the answer.",
                    "fecha": { "$date" : "2019-04-10 22:36:39Z" },
                    "usuario": "Jared Beck",
                    "usuario_id": 2119
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            1207,
            1208,
            1209,
            1210,
            1211,
            1212,
            1213,
            1214,
            1215,
            1216,
            1217,
            1218,
            1219,
            1220,
            1221,
            1222,
            1223,
            1224,
            1225,
            1226,
            1227,
            1228,
            1229,
            1230,
            1231,
            1232,
            1233,
            1234,
            1235,
            1236
        ],
        "comentarios": [
            {
                "decripcion": "The regex that can validate that an IDNA is correctly formatted does not fit in stackexchange. (the rules on canonicalisation ate really tortuous and particularly ill-suited to regex processing)",
                "fecha": { "$date" : "2017-08-29 23:51:50Z" },
                "usuario": "Jasen",
                "usuario_id": 2182
            },
            {
                "decripcion": "Why you should not do this: Can it cause harm to validate email addresses with a regex?",
                "fecha": { "$date" : "2018-01-09 14:30:16Z" },
                "usuario": "klutt",
                "usuario_id": 2183
            },
            {
                "decripcion": "The regexes may be variable as in some cases, an email con can contain a space, and in other times, it cannot contain any spaces.",
                "fecha": { "$date" : "2018-07-23 04:21:02Z" },
                "usuario": "\u1e42\u0173\u1efb\u1ecbg\u01fb\u0148\u1ea1c\u1ec3\u01a1\u1eed\u1e69",
                "usuario_id": 2184
            },
            {
                "decripcion": "@Jasen Fortunately, there is no requirement that email addresses must have a valid IDNA. Email addresses are defined this way for forwards-compatibility with extensions to the IDNA syntax.",
                "fecha": { "$date" : "2020-09-11 06:17:17Z" },
                "usuario": "awwright",
                "usuario_id": 2159
            },
            {
                "decripcion": "You can check Symfonys regex for loose and strict check: github.com/symfony/symfony/blob/5.x/src/Symfony/Component/\u2026",
                "fecha": { "$date" : "2021-05-16 16:15:14Z" },
                "usuario": "Did",
                "usuario_id": 2185
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 78,
        "titulo": "Learning Regular Expressions [closed]",
        "fecha": { "$date" : "2011-11-28 18:56:46Z" },
        "decripcion": "\n                    \n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        As it currently stands, this question is not a good fit for our Q&A format. We expect answers to be supported by facts, references,  or expertise, but this question will likely solicit debate, arguments, polling, or extended discussion. If you feel that this question  can be improved and possibly reopened, visit the help center for guidance.\n                        \n                    \n                \n            \n                Closed 9 years ago.\n        \n\n\n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question's answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nI don't really understand regular expressions.  Can you explain them to me in an easy-to-follow manner?  If there are any online tools or books, could you also link to them?\n    ",
        "votes": 166,
        "tags": [
            "regex"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            1237
        ],
        "comentarios": [],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 79,
        "titulo": "My regex is matching too much. How do I make it stop? [duplicate]",
        "fecha": { "$date" : "2020-03-02 16:50:33Z" },
        "decripcion": "\n                    \n            \n        \n            \n                \n                    \n                        This question already has answers here:\n                        \n                    \n                \n            \n                    \n                        Regular expression to stop at first match\n                            \n                                (9 answers)\n                            \n                    \n                Closed last year.\n        \n\n\n    \n\nI have this gigantic ugly string:\nJ0000000: Transaction A0001401 started on 8/22/2008 9:49:29 AM\nJ0000010: Project name: E:\\foo.pf\nJ0000011: Job name: MBiek Direct Mail Test\nJ0000020: Document 1 - Completed successfully\n\nI'm trying to extract pieces from it using regex. In this case, I want to grab everything after Project Name up to the part where it says J0000011: (the 11 is going to be a different number every time).\nHere's the regex I've been playing with:\nProject name:\\s+(.*)\\s+J[0-9]{7}:\n\nThe problem is that it doesn't stop until it hits the J0000020: at the end.\nHow do I make the regex stop at the first occurrence of J[0-9]{7}?\n    ",
        "votes": 104,
        "tags": [
            "regex"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1238,
            "fecha": { "$date" : "2016-12-15 09:27:19Z" },
            "decripcion": "\nMake .* non-greedy by adding '?' after it:\n\nProject name:\\s+(.*?)\\s+J[0-9]{7}:\n\n    ",
            "votes": 152,
            "comentarios": [],
            "usuario": "jj33",
            "usuario_id": 2190
        },
        "respuestas": [
            1238,
            1239,
            1240,
            1241,
            1242
        ],
        "comentarios": [
            {
                "decripcion": "Project name:[^\\n]*\\n(J[0-9]{7})",
                "fecha": { "$date" : "2019-05-06 20:36:54Z" },
                "usuario": "Aphton",
                "usuario_id": 2196
            }
        ],
        "usuario": "Mark Biek",
        "usuario_id": 2197
    },
    {
        "_id": 80,
        "titulo": "How to validate an email address in JavaScript",
        "fecha": { "$date" : "2021-08-19 08:55:17Z" },
        "decripcion": "\n                \nIs there a regular expression to verify an email address in JavaScript?\n    ",
        "votes": 4992,
        "tags": [
            "email-validation",
            "email",
            "regex",
            "javascript",
            "validation"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1243,
            "fecha": { "$date" : "2021-07-16 22:56:41Z" },
            "decripcion": "\nUsing regular expressions is probably the best way. You can see a bunch of tests here (taken from chromium)\nfunction validateEmail(email) {\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n}\n\nHere's the example of regular expresion that accepts unicode:\nconst re = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n\nBut keep in mind that one should not rely only upon JavaScript validation. JavaScript can easily be disabled. This should be validated on the server side as well.\nHere's an example of the above in action:\n\n\nfunction validateEmail(email) {\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(email);\n}\n\nfunction validate() {\n  const $result = $(\"#result\");\n  const email = $(\"#email\").val();\n  $result.text(\"\");\n\n  if (validateEmail(email)) {\n    $result.text(email + \" is valid :)\");\n    $result.css(\"color\", \"green\");\n  } else {\n    $result.text(email + \" is not valid :(\");\n    $result.css(\"color\", \"red\");\n  }\n  return false;\n}\n\n$(\"#email\").on(\"input\", validate);\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"></script>\n\n<label for=email>Enter an email address:</label>\n<input id=\"email\">\n<h2 id=\"result\"></h2>\n Run code snippetHide resultsExpand snippet\n\n\n    ",
            "votes": 5816,
            "comentarios": [
                {
                    "decripcion": "This regex eliminates valid, in-use emails.  Do not use.  Google for \"RFC822\" or \"RFC2822\" to get a proper regex.",
                    "fecha": { "$date" : "2010-09-08 02:34:23Z" },
                    "usuario": "Randal Schwartz",
                    "usuario_id": 2132
                },
                {
                    "decripcion": "This doesn't even accept the examples in RFC 822. Some simple cases it doesn't match a\\@b@c.com, a(b)@c.com. See the RFC for more. Here's a regex that won't reject any valid addresses [^@]+@[^@]+\\.[^@]+ and protects against common errors.",
                    "fecha": { "$date" : "2012-10-26 06:32:11Z" },
                    "usuario": "Vroo",
                    "usuario_id": 2198
                },
                {
                    "decripcion": "You cannot validate email addresses, period. The only one who can validate an email address is the provider of the email address. For example, this answer says these email addresses: %2@gmail.com, \"%2\"@gmail.com, \"a..b\"@gmail.com, \"a_b\"@gmail.com, _@gmail.com, 1@gmail.com , 1_example@something.gmail.com are all valid, but Gmail will never allow any of these email addresses. You should do this by accepting the email address and sending an email message to that email address, with a code/link the user must visit to confirm validity.",
                    "fecha": { "$date" : "2014-02-01 08:49:15Z" },
                    "usuario": "Kevin Fegan",
                    "usuario_id": 2199
                },
                {
                    "decripcion": "@KevinFegan let's be realistic: you would not be using JavaScript to confirm whether an e-mail is authentic. I see this validation as perfectly reasonable when a user signs up. You probably do not want to bother sending verification e-mails to addresses that cannot possibly exist. Some might also have outbound e-mail limits, making it north worth it to send e-mails to email@localhost, i don't have an email or any other funny user inputs.",
                    "fecha": { "$date" : "2021-07-16 23:02:29Z" },
                    "usuario": "undefined",
                    "usuario_id": 2200
                },
                {
                    "decripcion": "gautam+@Gmail.com - showing is valid which should not",
                    "fecha": { "$date" : "2021-08-06 06:33:05Z" },
                    "usuario": "Gautam Parmar",
                    "usuario_id": 2201
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            1243,
            1244,
            1245,
            1246,
            1247,
            1248,
            1249,
            1250,
            1251,
            1252,
            1253,
            1254,
            1255,
            1256,
            1257,
            1258,
            1259,
            1260,
            1261,
            1262,
            1263,
            1264,
            1265,
            1266,
            1267,
            1268,
            1269,
            1270,
            1271,
            1272
        ],
        "comentarios": [
            {
                "decripcion": "Warning!! The accepted answer if factually wrong as it does not conform to specifications. Read all answers for more details.",
                "fecha": { "$date" : "2021-02-16 18:25:46Z" },
                "usuario": "David M\u00e5rtensson",
                "usuario_id": 2214
            },
            {
                "decripcion": "@DavidM\u00e5rtensson It's mostly useless to validate emails according to the specification, the specification is much more liberal compared to what de facto is considered to be a well formed email. If your goal is for example to validate an email in a form to catch mistakes you can't conform to the specification, it's just too forgiving to catch actual user errors.",
                "fecha": { "$date" : "2021-03-19 11:02:23Z" },
                "usuario": "Alex",
                "usuario_id": 24
            },
            {
                "decripcion": "@Alex The reason I added this comment is that the suggested regex in the accepted answer will not allow existing live email addresses which is a bad start for a customer, and the really big problem is that even IF the address was accepted it still does not say if it works.  The only way to reliably verify that a supplied email is a working valid email is to send a mail with a verification link.  So, if your use case does not demand that you verify the email, just do a minimal test for @, otherwise use a verification email. Regex will only provide bad user experience.",
                "fecha": { "$date" : "2021-05-03 14:56:56Z" },
                "usuario": "David M\u00e5rtensson",
                "usuario_id": 2214
            },
            {
                "decripcion": "@David M\u00e5rtensson I added a + on your thoughts. However I do think that a verification email-link thing also can be bad user experience. One that can make you lose a customer.",
                "fecha": { "$date" : "2021-06-03 10:22:01Z" },
                "usuario": "mikael1000",
                "usuario_id": 2217
            },
            {
                "decripcion": "@mikael1000 Sure, but what is the purpose of a regex validation when you will not know if its a valid email anyway. If you do not want to intrude on the customer with a validation link just do the most simple validation <something> at <something> and leave it at that. It will ensure that the customer at least added something that might be an email, anything more it mostly a waste of code until you get to actually validating. You could possibly check if the domain exists with a dns lookup.",
                "fecha": { "$date" : "2021-06-04 14:23:12Z" },
                "usuario": "David M\u00e5rtensson",
                "usuario_id": 2214
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 81,
        "titulo": "How to validate phone numbers using regex",
        "fecha": { "$date" : "2020-02-14 19:35:49Z" },
        "decripcion": "\n                \nI'm trying to put together a comprehensive regex to validate phone numbers. Ideally it would handle international formats, but it must handle US formats, including the following:\n\n\n1-234-567-8901\n1-234-567-8901 x1234\n1-234-567-8901 ext1234\n1 (234) 567-8901\n1.234.567.8901\n1/234/567/8901\n12345678901\n\n\nI'll answer with my current attempt, but I'm hoping somebody has something better and/or more elegant.\n    ",
        "votes": 982,
        "tags": [
            "regex",
            "validation",
            "phone-number"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1273,
            "fecha": { "$date" : "2016-03-10 10:47:57Z" },
            "decripcion": "\nBetter option... just strip all non-digit characters on input (except 'x' and leading '+' signs), taking care because of the British tendency to write numbers in the non-standard form +44 (0) ... when asked to use the international prefix (in that specific case, you should discard the (0) entirely).\n\nThen, you end up with values like:\n\n 12345678901\n 12345678901x1234\n 345678901x1234\n 12344678901\n 12345678901\n 12345678901\n 12345678901\n +4112345678\n +441234567890\n\n\nThen when you display, reformat to your hearts content. e.g.\n\n  1 (234) 567-8901\n  1 (234) 567-8901 x1234\n\n    ",
            "votes": 537,
            "comentarios": [
                {
                    "decripcion": "The formatting code is going to be a waste of time if the numbers are allowed to come from outside the US.",
                    "fecha": { "$date" : "2009-07-21 12:13:05Z" },
                    "usuario": "Daniel Earwicker",
                    "usuario_id": 2218
                },
                {
                    "decripcion": "This is good and all, but it doesn't validate what was entered was actually a phone number. For example, what if the user doesn't enter the requisite 10 digits? This should be combined with good regex validation.",
                    "fecha": { "$date" : "2010-07-29 13:40:41Z" },
                    "usuario": "Hugh Jeffner",
                    "usuario_id": 2219
                },
                {
                    "decripcion": "Considering the question was about validation - this is a really really bad answer.",
                    "fecha": { "$date" : "2012-03-30 17:12:12Z" },
                    "usuario": "PlexQ",
                    "usuario_id": 2220
                },
                {
                    "decripcion": "@PlexQ I disagree.  The original problem is trying to handle phone number validation because it was trying to handle all the possible formatting options.  Rather than try to solve all that, take the input and \"pre-strip\" it of all formatting fluff until you have just the \"number\". Doing this solves 2 problems - testing the result is now easy and you can now ensure that values rendered back out for display can all be formatted consistently.  The first comment on this answer about the \"Complicator's Gloves\" is a good read... sometimes the answer to a problem is to approach it differently.",
                    "fecha": { "$date" : "2012-03-30 20:19:04Z" },
                    "usuario": "scunliffe",
                    "usuario_id": 2221
                },
                {
                    "decripcion": "How the hell is this such a highly voted answer? This doesn't validate anything. What's worse is all the other phone number validation questions reference this one...",
                    "fecha": { "$date" : "2014-06-19 18:37:14Z" },
                    "usuario": "jlars62",
                    "usuario_id": 2222
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            1273,
            1274,
            1275,
            1276,
            1277,
            1278,
            1279,
            1280,
            1281,
            1282,
            1283,
            1284,
            1285,
            1286,
            1287,
            1288,
            1289,
            1290,
            1291,
            1292,
            1293,
            1294,
            1295,
            1296,
            1297,
            1298,
            1299,
            1300,
            1301,
            1302
        ],
        "comentarios": [
            {
                "decripcion": "This answer has been added to the Stack Overflow Regular Expression FAQ, under \"Common Validation Tasks\".",
                "fecha": { "$date" : "2014-04-10 01:24:38Z" },
                "usuario": "aliteralmind",
                "usuario_id": 2268
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 82,
        "titulo": "Regular expression to match a line that doesn't contain a word",
        "fecha": { "$date" : "2021-07-18 11:53:29Z" },
        "decripcion": "\n                \nI know it's possible to match a word and then reverse the matches using other tools (e.g. grep -v). However, is it possible to match lines that do not contain a specific word, e.g. hede, using a regular expression?\nInput:\nhoho\nhihi\nhaha\nhede\n\nCode:\ngrep \"<Regex for 'doesn't contain hede'>\" input\n\nDesired output:\nhoho\nhihi\nhaha\n\n    ",
        "votes": 4755,
        "tags": [
            "regex",
            "regex-negation"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1303,
            "fecha": { "$date" : "2017-05-08 20:35:49Z" },
            "decripcion": "\nThe notion that regex doesn't support inverse matching is not entirely true. You can mimic this behavior by using negative look-arounds:\n\n^((?!hede).)*$\n\n\nThe regex above will match any string, or line without a line break, not containing the (sub)string 'hede'. As mentioned, this is not something regex is \"good\" at (or should do), but still, it is possible. \n\nAnd if you need to match line break chars as well, use the DOT-ALL modifier (the trailing s in the following pattern):\n\n/^((?!hede).)*$/s\n\n\nor use it inline:\n\n/(?s)^((?!hede).)*$/\n\n\n(where the /.../ are the regex delimiters, i.e., not part of the pattern)\n\nIf the DOT-ALL modifier is not available, you can mimic the same behavior with the character class [\\s\\S]:\n\n/^((?!hede)[\\s\\S])*$/\n\n\nExplanation\n\nA string is just a list of n characters. Before, and after each character, there's an empty string. So a list of n characters will have n+1 empty strings. Consider the string \"ABhedeCD\":\n\n    \u250c\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2510\nS = \u2502e1\u2502 A \u2502e2\u2502 B \u2502e3\u2502 h \u2502e4\u2502 e \u2502e5\u2502 d \u2502e6\u2502 e \u2502e7\u2502 C \u2502e8\u2502 D \u2502e9\u2502\n    \u2514\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2518\n\nindex    0      1      2      3      4      5      6      7\n\n\nwhere the e's are the empty strings. The regex (?!hede). looks ahead to see if there's no substring \"hede\" to be seen, and if that is the case (so something else is seen), then the . (dot) will match any character except a line break. Look-arounds are also called zero-width-assertions because they don't consume any characters. They only assert/validate something. \n\nSo, in my example, every empty string is first validated to see if there's no \"hede\" up ahead, before a character is consumed by the . (dot). The regex (?!hede). will do that only once, so it is wrapped in a group, and repeated zero or more times: ((?!hede).)*. Finally, the start- and end-of-input are anchored to make sure the entire input is consumed: ^((?!hede).)*$\n\nAs you can see, the input \"ABhedeCD\" will fail because on e3, the regex (?!hede) fails (there is \"hede\" up ahead!).\n    ",
            "votes": 6553,
            "comentarios": [
                {
                    "decripcion": "I would not go so far as to say that this is something regex is bad at. The convenience of this solution is pretty obvious and the performance hit compared to a programmatic search is often going to be unimportant.",
                    "fecha": { "$date" : "2016-03-03 16:09:36Z" },
                    "usuario": "Archimaredes",
                    "usuario_id": 2269
                },
                {
                    "decripcion": "Strictly speaking negative loook-ahead makes you regular expression not-regular.",
                    "fecha": { "$date" : "2016-11-18 15:03:19Z" },
                    "usuario": "Peter K",
                    "usuario_id": 2270
                },
                {
                    "decripcion": "@PeterK, sure, but this is SO, not MathOverflow or CS-Stackexchange. People asking a question here are generally looking for a practical answer. Most libraries or tools (like grep, which the OP mentions) with regex-support all have features that mke them non-regular in a theoretical sense.",
                    "fecha": { "$date" : "2016-11-18 15:08:29Z" },
                    "usuario": "Bart Kiers",
                    "usuario_id": 2271
                },
                {
                    "decripcion": "@Bart Kiers, no offense to you answer, just this abuse of terminology irritates me a bit. The really confusing part here is that regular expressions in the strict sense can very much do what OP wants, but the common language to write them does not allow it, which leads to (mathematically ugly) workarounds like look-aheads. Please see this answer below and my comment there for (theoretically aligned) proper way of doing it. Needless to say it works faster on large inputs.",
                    "fecha": { "$date" : "2016-11-18 15:33:07Z" },
                    "usuario": "Peter K",
                    "usuario_id": 2270
                },
                {
                    "decripcion": "In case you ever wondered how to do this in vim: ^\\(\\(hede\\)\\@!.\\)*$",
                    "fecha": { "$date" : "2016-11-24 11:58:11Z" },
                    "usuario": "baldrs",
                    "usuario_id": 2272
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            1303,
            1304,
            1305,
            1306,
            1307,
            1308,
            1309,
            1310,
            1311,
            1312,
            1313,
            1314,
            1315,
            1316,
            1317,
            1318,
            1319,
            1320,
            1321,
            1322,
            1323,
            1324,
            1325,
            1326,
            1327,
            1328,
            1329,
            1330,
            1331,
            1332
        ],
        "comentarios": [
            {
                "decripcion": "Probably a couple years late, but what's wrong with: ([^h]*(h([^e]|$)|he([^d]|$)|hed([^e]|$)))*? The idea is simple. Keep matching until you see the start of the unwanted string, then only match in the N-1 cases where the string is unfinished (where N is the length of the string). These N-1 cases are \"h followed by non-e\", \"he followed by non-d\", and \"hed followed by non-e\". If you managed to pass these N-1 cases, you successfully didn't match the unwanted string so you can start looking for [^h]* again",
                "fecha": { "$date" : "2011-09-29 03:44:32Z" },
                "usuario": "stevendesu",
                "usuario_id": 2309
            },
            {
                "decripcion": "@stevendesu: try this for 'a-very-very-long-word' or even better half a sentence. Have fun typing. BTW, it is nearly unreadable. Don't know about the performance impact.",
                "fecha": { "$date" : "2012-01-30 18:45:04Z" },
                "usuario": "Peter Schuetze",
                "usuario_id": 2310
            },
            {
                "decripcion": "@PeterSchuetze: Sure it's not pretty for very very long words, but it is a viable and correct solution. Although I haven't run tests on the performance, I wouldn't imagine it being too slow since most of the latter rules are ignored until you see an h (or the first letter of the word, sentence, etc.). And you could easily generate the regex string for long strings using iterative concatenation. If it works and can be generated quickly, is legibility important? That's what comments are for.",
                "fecha": { "$date" : "2012-02-02 03:14:07Z" },
                "usuario": "stevendesu",
                "usuario_id": 2309
            },
            {
                "decripcion": "@stevendesu: i'm even later, but that answer is almost completely wrong. for one thing, it requires the subject to contain \"h\" which it shouldn't have to, given the task is \"match lines which [do] not contain a specific word\". let us assume you meant to make the inner group optional, and that the pattern is anchored:  ^([^h]*(h([^e]|$)|he([^d]|$)|hed([^e]|$))?)*$  this fails when instances of \"hede\" are preceded by partial instances of \"hede\" such as in \"hhede\".",
                "fecha": { "$date" : "2012-09-10 10:41:24Z" },
                "usuario": "jaytea",
                "usuario_id": 2311
            },
            {
                "decripcion": "This question has been added to the Stack Overflow Regular Expression FAQ, under \"Advanced Regex-Fu\".",
                "fecha": { "$date" : "2014-04-10 01:30:10Z" },
                "usuario": "aliteralmind",
                "usuario_id": 2268
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 83,
        "titulo": "What is a non-capturing group in regular expressions?",
        "fecha": { "$date" : "2019-08-27 20:07:50Z" },
        "decripcion": "\n                \nHow are non-capturing groups, i.e. (?:), used in regular expressions and what are they good for?\n    ",
        "votes": 2056,
        "tags": [
            "capturing-group",
            "regex",
            "regex-group"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1333,
            "fecha": { "$date" : "2020-06-01 17:43:33Z" },
            "decripcion": "\nLet me try to explain this with an example.\n\nConsider the following text:\n\nhttp://stackoverflow.com/\nhttps://stackoverflow.com/questions/tagged/regex\n\n\nNow, if I apply the regex below over it...\n\n(https?|ftp)://([^/\\r\\n]+)(/[^\\r\\n]*)?\n\n\n... I would get the following result:\n\nMatch \"http://stackoverflow.com/\"\n     Group 1: \"http\"\n     Group 2: \"stackoverflow.com\"\n     Group 3: \"/\"\n\nMatch \"https://stackoverflow.com/questions/tagged/regex\"\n     Group 1: \"https\"\n     Group 2: \"stackoverflow.com\"\n     Group 3: \"/questions/tagged/regex\"\n\n\nBut I don't care about the protocol -- I just want the host and path of the URL. So, I change the regex to include the non-capturing group (?:).\n\n(?:https?|ftp)://([^/\\r\\n]+)(/[^\\r\\n]*)?\n\n\nNow, my result looks like this:\n\nMatch \"http://stackoverflow.com/\"\n     Group 1: \"stackoverflow.com\"\n     Group 2: \"/\"\n\nMatch \"https://stackoverflow.com/questions/tagged/regex\"\n     Group 1: \"stackoverflow.com\"\n     Group 2: \"/questions/tagged/regex\"\n\n\nSee? The first group has not been captured. The parser uses it to match the text, but ignores it later, in the final result.\n\n\n\nEDIT:\n\nAs requested, let me try to explain groups too.\n\nWell, groups serve many purposes. They can help you to extract exact information from a bigger match (which can also be named), they let you rematch a previous matched group, and can be used for substitutions. Let's try some examples, shall we?\n\nImagine you have some kind of XML or HTML (be aware that regex may not be the best tool for the job, but it is nice as an example). You want to parse the tags, so you could do something like this (I have added spaces to make it easier to understand):\n\n   \\<(?<TAG>.+?)\\> [^<]*? \\</\\k<TAG>\\>\nor\n   \\<(.+?)\\> [^<]*? \\</\\1\\>\n\n\nThe first regex has a named group (TAG), while the second one uses a common group. Both regexes do the same thing: they use the value from the first group (the name of the tag) to match the closing tag. The difference is that the first one uses the name to match the value, and the second one uses the group index (which starts at 1).\n\nLet's try some substitutions now. Consider the following text:\n\nLorem ipsum dolor sit amet consectetuer feugiat fames malesuada pretium egestas.\n\n\nNow, let's use this dumb regex over it:\n\n\\b(\\S)(\\S)(\\S)(\\S*)\\b\n\n\nThis regex matches words with at least 3 characters, and uses groups to separate the first three letters. The result is this:\n\nMatch \"Lorem\"\n     Group 1: \"L\"\n     Group 2: \"o\"\n     Group 3: \"r\"\n     Group 4: \"em\"\nMatch \"ipsum\"\n     Group 1: \"i\"\n     Group 2: \"p\"\n     Group 3: \"s\"\n     Group 4: \"um\"\n...\n\nMatch \"consectetuer\"\n     Group 1: \"c\"\n     Group 2: \"o\"\n     Group 3: \"n\"\n     Group 4: \"sectetuer\"\n...\n\n\nSo, if we apply the substitution string:\n\n$1_$3$2_$4\n\n\n... over it, we are trying to use the first group, add an underscore, use the third group, then the second group, add another underscore, and then the fourth group. The resulting string would be like the one below.\n\nL_ro_em i_sp_um d_lo_or s_ti_ a_em_t c_no_sectetuer f_ue_giat f_ma_es m_la_esuada p_er_tium e_eg_stas.\n\n\nYou can use named groups for substitutions too, using ${name}.\n\nTo play around with regexes, I recommend http://regex101.com/, which offers a good amount of details on how the regex works; it also offers a few regex engines to choose from.\n    ",
            "votes": 2640,
            "comentarios": [
                {
                    "decripcion": "@ajsie: Traditional (capturing) groups are most useful if you're performing a replacement operation on the results.  Here's an example where I'm grabbing comma-separated last & first names and then reversing their order (thanks to named groups)... regexhero.net/tester/?id=16892996-64d4-4f10-860a-24f28dad7e30",
                    "fecha": { "$date" : "2010-08-19 15:43:39Z" },
                    "usuario": "Steve Wortham",
                    "usuario_id": 2312
                },
                {
                    "decripcion": "Might also point out that non-capturing groups are uniquely useful when using regex as split delimiters: \"Alice and Bob\"-split\"\\s+(?:and|or)\\s+\"",
                    "fecha": { "$date" : "2014-05-07 18:06:49Z" },
                    "usuario": "Yevgeniy",
                    "usuario_id": 2313
                },
                {
                    "decripcion": "It would be interesting to have the difference between non-capturing groups (?:), and lookahead and lookbehind assertions (?=, ?!) explained. I just started learning about regular expressions, but from what I understand, non-capturing groups are used for matching and \"return\" what they match, but that \"return value\" is not \"stored\" for back-referencing. Lookahead and lookbehind assertions on the other hand are not only not \"stored\", they are also not part of a match, they just assert that something would match, but their \"match\" value is ignored, if I'm not mistaken... (Am I roughly right?)",
                    "fecha": { "$date" : "2014-05-11 20:40:27Z" },
                    "usuario": "Christian",
                    "usuario_id": 2314
                },
                {
                    "decripcion": "[] is a set;  [123] matches any char inside the set once;  [^123] matches anything NOT inside the set once; [^/\\r\\n]+ matches one or more chars that are different from /, \\r, \\n.",
                    "fecha": { "$date" : "2014-06-05 20:18:52Z" },
                    "usuario": "Ricardo Nolde",
                    "usuario_id": 2315
                },
                {
                    "decripcion": "Very good explanation, thanks. Just a small callout. In the first result snippet in the answer, group 1 should be \"https\" not \"http.\"",
                    "fecha": { "$date" : "2018-08-15 03:18:46Z" },
                    "usuario": "rudyg123",
                    "usuario_id": 2316
                }
            ],
            "usuario": "Ricardo Nolde",
            "usuario_id": 2315
        },
        "respuestas": [
            1333,
            1334,
            1335,
            1336,
            1337,
            1338,
            1339,
            1340,
            1341,
            1342,
            1343,
            1344,
            1345,
            1346,
            1347,
            1348,
            1349
        ],
        "comentarios": [
            {
                "decripcion": "This question has been added to the Stack Overflow Regular Expression FAQ, under \"Groups\".",
                "fecha": { "$date" : "2014-04-10 00:25:27Z" },
                "usuario": "aliteralmind",
                "usuario_id": 2268
            }
        ],
        "usuario": "never_had_a_name",
        "usuario_id": 2326
    },
    {
        "_id": 84,
        "titulo": "What special characters must be escaped in regular expressions?",
        "fecha": { "$date" : "2011-10-02 08:03:01Z" },
        "decripcion": "\n                \nI am tired of always trying to guess, if I should escape special characters like '()[]{}|' etc. when using many implementations of regexps.\n\nIt is different with, for example, Python, sed, grep, awk, Perl, rename, Apache, find and so on.\nIs there any rule set which tells when I should, and when I should not, escape special characters? Does it depend on the regexp type, like PCRE, POSIX or extended regexps?\n    ",
        "votes": 425,
        "tags": [
            "regex"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1350,
            "fecha": { "$date" : "2019-05-28 16:08:10Z" },
            "decripcion": "\nWhich characters you must and which you mustn't escape indeed depends on the regex flavor you're working with.\n\nFor PCRE, and most other so-called Perl-compatible flavors, escape these outside character classes:\n\n.^$*+?()[{\\|\n\n\nand these inside character classes:\n\n^-]\\\n\n\nFor POSIX extended regexes (ERE), escape these outside character classes (same as PCRE):\n\n.^$*+?()[{\\|\n\n\nEscaping any other characters is an error with POSIX ERE.\n\nInside character classes, the backslash is a literal character in POSIX regular expressions.  You cannot use it to escape anything.  You have to use \"clever placement\" if you want to include character class metacharacters as literals.  Put the ^ anywhere except at the start, the ] at the start, and the - at the start or the end of the character class to match these literally, e.g.:\n\n[]^-]\n\n\nIn POSIX basic regular expressions (BRE), these are metacharacters that you need to escape to suppress their meaning:\n\n.^$*[\\\n\n\nEscaping parentheses and curly brackets in BREs gives them the special meaning their unescaped versions have in EREs.  Some implementations (e.g. GNU) also give special meaning to other characters when escaped, such as \\? and +.  Escaping a character other than .^$*(){} is normally an error with BREs.\n\nInside character classes, BREs follow the same rule as EREs.\n\nIf all this makes your head spin, grab a copy of RegexBuddy.  On the Create tab, click Insert Token, and then Literal.  RegexBuddy will add escapes as needed.\n    ",
            "votes": 398,
            "comentarios": [
                {
                    "decripcion": "It seems to me you forgot the \"/\", which also needs to be escaped outside a class.",
                    "fecha": { "$date" : "2015-01-14 08:23:29Z" },
                    "usuario": "jackthehipster",
                    "usuario_id": 2339
                },
                {
                    "decripcion": "/ is not a metacharacter in any of the regular expression flavors I mentioned, so the regular expression syntax does not require escaping it.  When a regular expression is quoted as a literal in a programming language, then the string or regex formatting rules of that language may require / or \" or ' to be escaped, and may even require `\\` to be doubly escaped.",
                    "fecha": { "$date" : "2015-02-06 23:39:05Z" },
                    "usuario": "Jan Goyvaerts",
                    "usuario_id": 2340
                },
                {
                    "decripcion": "what about colon, \":\"? Shall it be escaped inside character classes as well as outside? en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions says \"PCRE has consistent escaping rules: any non-alpha-numeric character may be escaped to mean its literal value [...]\"",
                    "fecha": { "$date" : "2015-05-22 14:05:50Z" },
                    "usuario": "nicolallias",
                    "usuario_id": 2341
                },
                {
                    "decripcion": "MAY be escaped is not the same as SHOULD be escaped.  The PCRE syntax never requires a literal colon to be escaped, so escaping literal colons only makes your regex harder to read.",
                    "fecha": { "$date" : "2015-06-09 07:52:00Z" },
                    "usuario": "Jan Goyvaerts",
                    "usuario_id": 2340
                },
                {
                    "decripcion": "For non-POSIX ERE (the one I use most often because it's what's implemented by Tcl) escaping other things don't generate errors.",
                    "fecha": { "$date" : "2015-08-21 04:47:49Z" },
                    "usuario": "slebetman",
                    "usuario_id": 2342
                }
            ],
            "usuario": "Jan Goyvaerts",
            "usuario_id": 2340
        },
        "respuestas": [
            1350,
            1351,
            1352,
            1353,
            1354,
            1355,
            1356,
            1357,
            1358,
            1359,
            1360,
            1361
        ],
        "comentarios": [
            {
                "decripcion": "Good regex libraries have functions like \"escape()\" to allow using arbitrary strings as regex parts.",
                "fecha": { "$date" : "2013-06-27 08:38:01Z" },
                "usuario": "ivan_pozdeev",
                "usuario_id": 2355
            },
            {
                "decripcion": "You can use online Regex expression checkers like gskinner.com/RegExr (it's free). (Type in, then hover mouse over the regex you typed in)",
                "fecha": { "$date" : "2013-07-12 08:03:57Z" },
                "usuario": "hexicle",
                "usuario_id": 2356
            },
            {
                "decripcion": "Escape all non-alphanumeric characters. period.",
                "fecha": { "$date" : "2014-02-22 21:51:05Z" },
                "usuario": "Salman von Abbas",
                "usuario_id": 2357
            },
            {
                "decripcion": "This question has been added to the Stack Overflow Regular Expression FAQ, under \"Other\".",
                "fecha": { "$date" : "2014-04-10 01:05:22Z" },
                "usuario": "aliteralmind",
                "usuario_id": 2268
            },
            {
                "decripcion": "This question has been added to the Stack Overflow Regular Expression FAQ, under \"Escape Sequences\".",
                "fecha": { "$date" : "2014-04-10 02:28:34Z" },
                "usuario": "aliteralmind",
                "usuario_id": 2268
            }
        ],
        "usuario": "Igor Katson",
        "usuario_id": 2358
    },
    {
        "_id": 85,
        "titulo": "How to use Regular Expressions (Regex) in Microsoft Excel both in-cell and loops",
        "fecha": { "$date" : "2019-05-24 15:01:53Z" },
        "decripcion": "\n                \nHow can I use regular expressions in Excel and take advantage of Excel's powerful grid-like setup for data manipulation?\n\n\nIn-cell function to return a matched pattern or replaced value in a string.\nSub to loop through a column of data and extract matches to adjacent cells.\nWhat setup is necessary?\nWhat are Excel's special characters for Regular expressions?\n\n\n\n\nI understand Regex is not ideal for many situations (To use or not to use regular expressions?) since excel can use Left, Mid, Right, Instr type commands for similar manipulations.  \n    ",
        "votes": 675,
        "tags": [
            "regex",
            "vba",
            "excel"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1362,
            "fecha": { "$date" : "2020-12-07 14:32:45Z" },
            "decripcion": "\nRegular expressions are used for Pattern Matching.\nTo use in Excel follow these steps:\nStep 1: Add VBA reference to \"Microsoft VBScript Regular Expressions 5.5\"\n\nSelect \"Developer\" tab (I don't have this tab what do I do?)\nSelect \"Visual Basic\" icon from 'Code' ribbon section\nIn \"Microsoft Visual Basic for Applications\" window select \"Tools\" from the top menu.\nSelect \"References\"\nCheck the box next to \"Microsoft VBScript Regular Expressions 5.5\" to include in your workbook.\nClick \"OK\"\n\nStep 2: Define your pattern\nBasic definitions:\n-  Range.\n\nE.g. a-z matches an lower case letters from a to z\nE.g. 0-5 matches any number from 0 to 5\n\n[] Match exactly one of the objects inside these brackets.\n\nE.g. [a] matches the letter a\nE.g. [abc] matches a single letter which can be a, b or c\nE.g. [a-z] matches any single lower case letter of the alphabet.\n\n() Groups different matches for return purposes.  See examples below.\n{} Multiplier for repeated copies of pattern defined before it.\n\nE.g. [a]{2} matches two consecutive lower case letter a: aa\nE.g. [a]{1,3} matches at least one and up to three lower case letter a, aa, aaa\n\n+  Match at least one, or more, of the pattern defined before it.\n\nE.g. a+ will match consecutive a's a, aa, aaa, and so on\n\n?  Match zero or one of the pattern defined before it.\n\nE.g. Pattern may or may not be present but can only be matched one time.\nE.g. [a-z]? matches empty string or any single lower case letter.\n\n*  Match zero or more of the pattern defined before it.\n\nE.g. Wildcard for pattern that may or may not be present.\nE.g. [a-z]* matches empty string or string of lower case letters.\n\n.  Matches any character except newline \\n\n\nE.g. a. Matches a two character string starting with a and ending with anything except \\n\n\n|  OR operator\n\nE.g. a|b means either a or b can be matched.\nE.g. red|white|orange matches exactly one of the colors.\n\n^  NOT operator\n\nE.g. [^0-9] character can not contain a number\nE.g. [^aA] character can not be lower case a or upper case A\n\n\\  Escapes special character that follows (overrides above behavior)\n\nE.g. \\., \\\\, \\(, \\?, \\$, \\^\n\n\nAnchoring Patterns:\n^  Match must occur at start of string\n\nE.g. ^a First character must be lower case letter a\nE.g. ^[0-9] First character must be a number.\n\n$  Match must occur at end of string\n\nE.g. a$ Last character must be lower case letter a\n\n\nPrecedence table:\nOrder  Name                Representation\n1      Parentheses         ( )\n2      Multipliers         ? + * {m,n} {m, n}?\n3      Sequence & Anchors  abc ^ $\n4      Alternation         |\n\n\nPredefined Character Abbreviations:\nabr    same as       meaning\n\\d     [0-9]         Any single digit\n\\D     [^0-9]        Any single character that's not a digit\n\\w     [a-zA-Z0-9_]  Any word character\n\\W     [^a-zA-Z0-9_] Any non-word character\n\\s     [ \\r\\t\\n\\f]   Any space character\n\\S     [^ \\r\\t\\n\\f]  Any non-space character\n\\n     [\\n]          New line\n\n\nExample 1: Run as macro\nThe following example macro looks at the value in cell A1 to see if the first 1 or 2 characters are digits.  If so, they are removed and the rest of the string is displayed.  If not, then a box appears telling you that no match is found.  Cell A1 values of 12abc will return abc, value of 1abc will return abc, value of abc123 will return \"Not Matched\" because the digits were not at the start of the string.\nPrivate Sub simpleRegex()\n    Dim strPattern As String: strPattern = \"^[0-9]{1,2}\"\n    Dim strReplace As String: strReplace = \"\"\n    Dim regEx As New RegExp\n    Dim strInput As String\n    Dim Myrange As Range\n    \n    Set Myrange = ActiveSheet.Range(\"A1\")\n    \n    If strPattern <> \"\" Then\n        strInput = Myrange.Value\n        \n        With regEx\n            .Global = True\n            .MultiLine = True\n            .IgnoreCase = False\n            .Pattern = strPattern\n        End With\n        \n        If regEx.Test(strInput) Then\n            MsgBox (regEx.Replace(strInput, strReplace))\n        Else\n            MsgBox (\"Not matched\")\n        End If\n    End If\nEnd Sub\n\n\nExample 2: Run as an in-cell function\nThis example is the same as example 1 but is setup to run as an in-cell function. To use, change the code to this:\nFunction simpleCellRegex(Myrange As Range) As String\n    Dim regEx As New RegExp\n    Dim strPattern As String\n    Dim strInput As String\n    Dim strReplace As String\n    Dim strOutput As String\n    \n    \n    strPattern = \"^[0-9]{1,3}\"\n    \n    If strPattern <> \"\" Then\n        strInput = Myrange.Value\n        strReplace = \"\"\n        \n        With regEx\n            .Global = True\n            .MultiLine = True\n            .IgnoreCase = False\n            .Pattern = strPattern\n        End With\n        \n        If regEx.test(strInput) Then\n            simpleCellRegex = regEx.Replace(strInput, strReplace)\n        Else\n            simpleCellRegex = \"Not matched\"\n        End If\n    End If\nEnd Function\n\nPlace your strings (\"12abc\") in cell A1.  Enter this formula =simpleCellRegex(A1) in cell B1 and the result will be \"abc\".\n\n\nExample 3: Loop Through Range\nThis example is the same as example 1 but loops through a range of cells.\nPrivate Sub simpleRegex()\n    Dim strPattern As String: strPattern = \"^[0-9]{1,2}\"\n    Dim strReplace As String: strReplace = \"\"\n    Dim regEx As New RegExp\n    Dim strInput As String\n    Dim Myrange As Range\n    \n    Set Myrange = ActiveSheet.Range(\"A1:A5\")\n    \n    For Each cell In Myrange\n        If strPattern <> \"\" Then\n            strInput = cell.Value\n            \n            With regEx\n                .Global = True\n                .MultiLine = True\n                .IgnoreCase = False\n                .Pattern = strPattern\n            End With\n            \n            If regEx.Test(strInput) Then\n                MsgBox (regEx.Replace(strInput, strReplace))\n            Else\n                MsgBox (\"Not matched\")\n            End If\n        End If\n    Next\nEnd Sub\n\n\nExample 4: Splitting apart different patterns\nThis example loops through a range (A1, A2 & A3) and looks for a string starting with three digits followed by a single alpha character and then 4 numeric digits.  The output splits apart the pattern matches into adjacent cells by using the ().  $1 represents the first pattern matched within the first set of ().\nPrivate Sub splitUpRegexPattern()\n    Dim regEx As New RegExp\n    Dim strPattern As String\n    Dim strInput As String\n    Dim Myrange As Range\n    \n    Set Myrange = ActiveSheet.Range(\"A1:A3\")\n    \n    For Each C In Myrange\n        strPattern = \"(^[0-9]{3})([a-zA-Z])([0-9]{4})\"\n        \n        If strPattern <> \"\" Then\n            strInput = C.Value\n            \n            With regEx\n                .Global = True\n                .MultiLine = True\n                .IgnoreCase = False\n                .Pattern = strPattern\n            End With\n            \n            If regEx.test(strInput) Then\n                C.Offset(0, 1) = regEx.Replace(strInput, \"$1\")\n                C.Offset(0, 2) = regEx.Replace(strInput, \"$2\")\n                C.Offset(0, 3) = regEx.Replace(strInput, \"$3\")\n            Else\n                C.Offset(0, 1) = \"(Not matched)\"\n            End If\n        End If\n    Next\nEnd Sub\n\nResults:\n\n\nAdditional Pattern Examples\nString   Regex Pattern                  Explanation\na1aaa    [a-zA-Z][0-9][a-zA-Z]{3}       Single alpha, single digit, three alpha characters\na1aaa    [a-zA-Z]?[0-9][a-zA-Z]{3}      May or may not have preceding alpha character\na1aaa    [a-zA-Z][0-9][a-zA-Z]{0,3}     Single alpha, single digit, 0 to 3 alpha characters\na1aaa    [a-zA-Z][0-9][a-zA-Z]*         Single alpha, single digit, followed by any number of alpha characters\n\n</i8>    \\<\\/[a-zA-Z][0-9]\\>            Exact non-word character except any single alpha followed by any single digit\n\n    ",
            "votes": 1055,
            "comentarios": [
                {
                    "decripcion": "You should not forget to Set regEx = Nothing. You will get Out Of Memory exceptions, when that Sub is executed frequently enought.",
                    "fecha": { "$date" : "2015-03-13 10:28:07Z" },
                    "usuario": "Kiril",
                    "usuario_id": 2359
                },
                {
                    "decripcion": "I adapted example 4 with SubMatches for treating more complex regex, basically I don't use replace when splitting, if anyone is interested: stackoverflow.com/questions/30218413/\u2026",
                    "fecha": { "$date" : "2015-05-13 14:58:34Z" },
                    "usuario": "Armfoot",
                    "usuario_id": 2360
                },
                {
                    "decripcion": "Late binding line: Set regEx = CreateObject(\"VBScript.RegExp\")",
                    "fecha": { "$date" : "2015-12-05 11:23:33Z" },
                    "usuario": "ZygD",
                    "usuario_id": 2361
                },
                {
                    "decripcion": "Okay, I'm pretty sure it's because the code is in ThisWorkbook.  Try moving the code to a separate Module.",
                    "fecha": { "$date" : "2019-05-09 04:00:16Z" },
                    "usuario": "Automate This",
                    "usuario_id": 2362
                },
                {
                    "decripcion": "@PortlandRunner in the \"project explorer\" (?) this excel file lacked a \"Modules\" subfolder, although another file showed one. Right-clicked the file and chose 'insert module', then double-clicked \"Module 1\" and pasted the code. Saved. Back to workbook and keyed in the function again - it worked. Might be noteworthy in the answer, for the sake of the inexperienced like me? Thanks for the help.",
                    "fecha": { "$date" : "2019-05-10 05:52:01Z" },
                    "usuario": "youcantryreachingme",
                    "usuario_id": 2363
                }
            ],
            "usuario": "Automate This",
            "usuario_id": 2362
        },
        "respuestas": [
            1362,
            1363,
            1364,
            1365,
            1366,
            1367,
            1368,
            1369,
            1370
        ],
        "comentarios": [
            {
                "decripcion": "I high recommend this VB/VBA Regexp article by Patrick Matthews",
                "fecha": { "$date" : "2014-04-17 13:26:20Z" },
                "usuario": "brettdj",
                "usuario_id": 2384
            },
            {
                "decripcion": "Try this free add-in: seotoolsforexcel.com/regexpfind",
                "fecha": { "$date" : "2015-09-23 06:28:14Z" },
                "usuario": "Niels Bosma",
                "usuario_id": 2385
            },
            {
                "decripcion": "Let's not forget the Like operator, which provides a sort of light version of regex-style functionality. It's typically much faster than regex, even if wrapped in a sub or function procedure.",
                "fecha": { "$date" : "2018-11-01 10:09:29Z" },
                "usuario": "Egalth",
                "usuario_id": 2386
            }
        ],
        "usuario": "Automate This",
        "usuario_id": 2362
    },
    {
        "_id": 86,
        "titulo": "Using regular expressions to parse HTML: why not?",
        "fecha": { "$date" : "2014-05-12 19:28:55Z" },
        "decripcion": "\n                \nIt seems like every question on stackoverflow where the asker is using regex to grab some information from HTML will inevitably have an \"answer\" that says not to use regex to parse HTML.\n\nWhy not? I'm aware that there are quote-unquote \"real\" HTML parsers out there like Beautiful Soup, and I'm sure they're powerful and useful, but if you're just doing something simple, quick, or dirty, then why bother using something so complicated when a few regex statements will work just fine?\n\nMoreover, is there just something fundamental that I don't understand about regex that makes them a bad choice for parsing in general?\n    ",
        "votes": 219,
        "tags": [
            "regex",
            "html-parsing"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1371,
            "fecha": { "$date" : "2017-12-09 16:16:27Z" },
            "decripcion": "\nEntire HTML parsing is not possible with regular expressions, since it depends on matching the opening and the closing tag which is not possible with regexps.\n\nRegular expressions can only match regular languages but HTML is a context-free language and not a regular language (As @StefanPochmann pointed out, regular languages are also context-free, so context-free doesn't necessarily mean not regular). The only thing you can do with regexps on HTML is heuristics but that will not work on every condition. It should be possible to present a HTML file that will be matched wrongly by any regular expression.\n    ",
            "votes": 224,
            "comentarios": [
                {
                    "decripcion": "Best answer so far. If it can only match regular grammars then we would need an infinitely large regexp to parse a context-free grammar like HTML. I love when these things have clear theoretical answers.",
                    "fecha": { "$date" : "2009-02-26 14:48:00Z" },
                    "usuario": "ntownsend",
                    "usuario_id": 2387
                },
                {
                    "decripcion": "I assumed we were discussing Perl-type regexes where they aren't actually regular expressions.",
                    "fecha": { "$date" : "2009-02-26 16:12:27Z" },
                    "usuario": "Hank Gay",
                    "usuario_id": 2388
                },
                {
                    "decripcion": "Actually, .Net regular expressions can match opening with closing tags, to some extent, using balancing groups and a carefully crafted expression. Containing all of that in a regexp is still crazy of course, it would look like the great code Chtulhu and would probably summon the real one as well. And in the end it still won't work for all cases. They say that if you write a regular expression that can correctly parse any HTML the universe will collapse onto itself.",
                    "fecha": { "$date" : "2010-09-16 19:55:07Z" },
                    "usuario": "Alex Paven",
                    "usuario_id": 2389
                },
                {
                    "decripcion": "Some regex libs can do recursive regular expressions (effectively making them non-regular expressions :)",
                    "fecha": { "$date" : "2011-08-05 22:38:47Z" },
                    "usuario": "Ondra \u017di\u017eka",
                    "usuario_id": 663
                },
                {
                    "decripcion": "-1 This answer draws the right conclusion (\"It's a bad idea to parse HTML with Regex\") from wrong arguments (\"Because HTML isn't a regular language\"). The thing that most people nowadays mean when they say \"regex\" (PCRE) is well capable not only of parsing context-free grammars (that's trivial actually), but also of context-sensitive grammars (see stackoverflow.com/questions/7434272/\u2026).",
                    "fecha": { "$date" : "2011-09-17 22:14:36Z" },
                    "usuario": "NikiC",
                    "usuario_id": 2390
                }
            ],
            "usuario": "Johannes Weiss",
            "usuario_id": 2391
        },
        "respuestas": [
            1371,
            1372,
            1373,
            1374,
            1375,
            1376,
            1377,
            1378,
            1379,
            1380,
            1381,
            1382,
            1383,
            1384,
            1385,
            1386,
            1387,
            1388
        ],
        "comentarios": [
            {
                "decripcion": "i think this is a dupe of stackoverflow.com/questions/133601",
                "fecha": { "$date" : "2009-02-26 14:34:12Z" },
                "usuario": "jcrossley3",
                "usuario_id": 2411
            },
            {
                "decripcion": "Because only Chuck Norris can parse HTML with regex (as explained in this famous Zalgo thing: stackoverflow.com/questions/1732348/\u2026).",
                "fecha": { "$date" : "2010-06-23 08:01:09Z" },
                "usuario": "takeshin",
                "usuario_id": 2412
            },
            {
                "decripcion": "This question prompted me to ask another one which is somehow related. In case you are interested: Why it's not possible to use regex to parse HTML/XML: a formal explanation in layman's terms",
                "fecha": { "$date" : "2011-07-20 12:37:08Z" },
                "usuario": "mac",
                "usuario_id": 2413
            },
            {
                "decripcion": "Beware of Zalgo",
                "fecha": { "$date" : "2012-01-12 22:46:46Z" },
                "usuario": "Kelly S. French",
                "usuario_id": 2414
            },
            {
                "decripcion": "This question has been added to the Stack Overflow Regular Expression FAQ, under \"Common Validation Tasks\".",
                "fecha": { "$date" : "2014-04-10 01:27:53Z" },
                "usuario": "aliteralmind",
                "usuario_id": 2268
            }
        ],
        "usuario": "ntownsend",
        "usuario_id": 2387
    },
    {
        "_id": 87,
        "titulo": "What is the best regular expression to check if a string is a valid URL?",
        "fecha": { "$date" : "2016-12-29 17:03:11Z" },
        "decripcion": "\n                \nHow can I check if a given string is a valid URL address?\n\nMy knowledge of regular expressions is basic and doesn't allow me to choose from the hundreds of regular expressions I've already seen on the web.\n    ",
        "votes": 900,
        "tags": [
            "language-agnostic",
            "regex",
            "url"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            1389,
            1390,
            1391,
            1392,
            1393,
            1394,
            1395,
            1396,
            1397,
            1398,
            1399,
            1400,
            1401,
            1402,
            1403,
            1404,
            1405,
            1406,
            1407,
            1408,
            1409,
            1410,
            1411,
            1412,
            1413,
            1414,
            1415,
            1416,
            1417,
            1418
        ],
        "comentarios": [
            {
                "decripcion": "Any URL or just HTTP? E.g. does mailto:me@example.com count as a URL? A a AIM chat link?",
                "fecha": { "$date" : "2008-10-02 11:01:23Z" },
                "usuario": "Mecki",
                "usuario_id": 874
            },
            {
                "decripcion": "If a URL has no leading \"http(etc)\", how would you be able to distinguish it from any other arbitrary string that happens to have dots in it? Say something like \"MyClass.MyProperty.MyMethod\"? Or \"I somtimes miss the spacebar.is this a problem?\"",
                "fecha": { "$date" : "2009-05-07 08:51:25Z" },
                "usuario": "Tomalak",
                "usuario_id": 2115
            },
            {
                "decripcion": "i've already prefixed 'http:/ /www.' before the textbox. so the user doesn't need to enter 'http:/ /www.' and should just be concerned with entering the required uri name.",
                "fecha": { "$date" : "2009-05-07 09:07:51Z" },
                "usuario": "input",
                "usuario_id": 2490
            },
            {
                "decripcion": "What programming language are you using? You probably don't want to reinvent the wheel.",
                "fecha": { "$date" : "2009-05-11 05:49:11Z" },
                "usuario": "a paid nerd",
                "usuario_id": 2491
            },
            {
                "decripcion": "Microsoft has a Regex page that includes an expression for URLs. Surely a good start: msdn.microsoft.com/en-us/library/ff650303.aspx NB. The above page is retired, but the expressions in the table are essentially still valid for reference. The URL expression recommended (and which worked great for me) is: \"^(ht|f)tp(s?)\\:\\/\\/[0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*(:(0-9)*)*(\\/?)([a-zA-Z0-9\\-\\.\\?\\,\\'\\/\\\\\\+&amp;%\\$#_]*)?$\"",
                "fecha": { "$date" : "2012-02-01 23:39:34Z" },
                "usuario": "CMH",
                "usuario_id": 2492
            }
        ],
        "usuario": "Vitor Silva",
        "usuario_id": 2493
    },
    {
        "_id": 88,
        "titulo": "Is there a RegExp.escape function in JavaScript?",
        "fecha": { "$date" : "2020-10-13 16:08:51Z" },
        "decripcion": "\n                \nI just want to create a regular expression out of any possible string.\nvar usersString = \"Hello?!*`~World()[]\";\nvar expression = new RegExp(RegExp.escape(usersString))\nvar matches = \"Hello\".match(expression);\n\nIs there a built-in method for that? If not, what do people use? Ruby has RegExp.escape. I don't feel like I'd need to write my own, there have got to be something standard out there.\n    ",
        "votes": 501,
        "tags": [
            "javascript",
            "regex"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1419,
            "fecha": { "$date" : "2021-06-07 08:17:05Z" },
            "decripcion": "\nThe function linked in another answer is insufficient. It fails to escape ^ or $ (start and end of string), or -, which in a character group is used for ranges.\nUse this function:\nfunction escapeRegex(string) {\n    return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nWhile it may seem unnecessary at first glance, escaping - (as well as ^) makes the function suitable for escaping characters to be inserted into a character class as well as the body of the regex.\nEscaping / makes the function suitable for escaping characters to be used in a JavaScript regex literal for later evaluation.\nAs there is no downside to escaping either of them, it makes sense to escape to cover wider use cases.\nAnd yes, it is a disappointing failing that this is not part of standard JavaScript.\n    ",
            "votes": 665,
            "comentarios": [
                {
                    "decripcion": "actually, we don't need to escape / at all",
                    "fecha": { "$date" : "2013-02-14 20:53:00Z" },
                    "usuario": "thorn0",
                    "usuario_id": 2494
                },
                {
                    "decripcion": "@Paul: Perl quotemeta (\\Q), Python re.escape, PHP preg_quote, Ruby Regexp.quote...",
                    "fecha": { "$date" : "2013-10-03 10:24:12Z" },
                    "usuario": "bobince",
                    "usuario_id": 2062
                },
                {
                    "decripcion": "If you are going to use this function in a loop, it's probably best to make the RegExp object it's own variable var e = /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g; and then your function is return s.replace(e, '\\\\$&'); This way you only instantiate the RegExp once.",
                    "fecha": { "$date" : "2013-10-17 21:14:39Z" },
                    "usuario": "styfle",
                    "usuario_id": 2495
                },
                {
                    "decripcion": "bobince cares not for eslint's opinion",
                    "fecha": { "$date" : "2017-09-15 22:57:33Z" },
                    "usuario": "bobince",
                    "usuario_id": 2062
                },
                {
                    "decripcion": "But maybe you want to escape characters to put them inside a character range. IMO better to harmlessly overescape than to underescape and cause problems in niche cases. FWIW personally I'd rather see the characters explicitly here; we're not playing code golf.",
                    "fecha": { "$date" : "2017-10-12 20:54:22Z" },
                    "usuario": "bobince",
                    "usuario_id": 2062
                }
            ],
            "usuario": "bobince",
            "usuario_id": 2062
        },
        "respuestas": [
            1419,
            1420,
            1421,
            1422,
            1423,
            1424,
            1425,
            1426,
            1427,
            1428,
            1429,
            1430,
            1431,
            1432,
            1433
        ],
        "comentarios": [
            {
                "decripcion": "Just wanted to update you fine folk that RegExp.escape is currently worked on and anyone who thinks they have valuable input is very welcome to contribute. core-js and other polyfills offer it.",
                "fecha": { "$date" : "2015-06-14 22:48:58Z" },
                "usuario": "Benjamin Gruenbaum",
                "usuario_id": 489
            },
            {
                "decripcion": "According to the recent update of this answer this proposal was rejected: See the issue",
                "fecha": { "$date" : "2017-07-19 10:15:45Z" },
                "usuario": "try-catch-finally",
                "usuario_id": 2519
            },
            {
                "decripcion": "Yeah I believe @BenjaminGruenbaum may be the one who put forward the proposal. I tried to get code examples plus the es-shim npm module into an answer on stack overflow here: [ stackoverflow.com/a/63838890/5979634 ] because the proposal was eventually, unfortunately, rejected. Hopefully they change their minds or someone implements 'template tags' before I retire.",
                "fecha": { "$date" : "2020-09-13 10:13:34Z" },
                "usuario": "Drewry Pope",
                "usuario_id": 2511
            }
        ],
        "usuario": "Lance Pollard",
        "usuario_id": 2520
    },
    {
        "_id": 89,
        "titulo": "How do I match any character across multiple lines in a regular expression?",
        "fecha": { "$date" : "2015-04-19 20:59:53Z" },
        "decripcion": "\n                \nFor example, this regex\n\n(.*)<FooBar>\n\n\nwill match:\n\nabcde<FooBar>\n\n\nBut how do I get it to match across multiple lines?\n\nabcde\nfghij<FooBar>\n\n    ",
        "votes": 438,
        "tags": [
            "google-apps-script",
            "pcregrep",
            "objective-c",
            "perl",
            "postgresql",
            "vba",
            "re2",
            "go",
            "tre",
            "bash",
            "c++",
            "vbscript",
            "sed",
            "multiline",
            "powershell",
            "groovy",
            "swift",
            "scala",
            "stringr",
            "javascript",
            "java",
            "base-r",
            "php",
            "stringi",
            "gnu-grep",
            "matlab",
            "lua-patterns",
            "octave",
            "c#",
            "icu",
            "oracle",
            "tcl",
            "python",
            "regex",
            "boost",
            "r",
            "ruby"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1435,
            "fecha": { "$date" : "2008-10-01 18:52:18Z" },
            "decripcion": "\nIt depends on the language, but there should be a modifier that you can add to the regex pattern. In PHP it is:\n\n/(.*)<FooBar>/s\n\n\nThe s at the end causes the dot to match all characters including newlines.\n    ",
            "votes": 281,
            "comentarios": [
                {
                    "decripcion": "and what if i wanted just a new line and not all characters ?",
                    "fecha": { "$date" : "2011-04-11 12:02:23Z" },
                    "usuario": "Grace",
                    "usuario_id": 2526
                },
                {
                    "decripcion": "@Grace: use \\n to match a newline",
                    "fecha": { "$date" : "2011-04-11 21:05:54Z" },
                    "usuario": "Paige Ruten",
                    "usuario_id": 2527
                },
                {
                    "decripcion": "The s flag is (now?) invalid, at least in Chrome/V8. Instead use /([\\s\\S]*)<FooBar>/ character class (match space and non-space] instead of the period matcher. See other answers for more info.",
                    "fecha": { "$date" : "2013-05-09 15:37:53Z" },
                    "usuario": "Allen",
                    "usuario_id": 2528
                },
                {
                    "decripcion": "@Allen - JavaScript doesn't support the s modifier. Instead, do [^]* for the same effect.",
                    "fecha": { "$date" : "2015-07-12 22:26:26Z" },
                    "usuario": "Derek \u6715\u6703\u529f\u592b",
                    "usuario_id": 2529
                },
                {
                    "decripcion": "In Ruby, use the m modifier",
                    "fecha": { "$date" : "2015-07-15 22:57:17Z" },
                    "usuario": "Ryan Buckley",
                    "usuario_id": 2530
                }
            ],
            "usuario": "Paige Ruten",
            "usuario_id": 2527
        },
        "respuestas": [
            1434,
            1435,
            1436,
            1437,
            1438,
            1439,
            1440,
            1441,
            1442,
            1443,
            1444,
            1445,
            1446,
            1447,
            1448,
            1449,
            1450,
            1451,
            1452,
            1453,
            1454,
            1455,
            1456,
            1457
        ],
        "comentarios": [
            {
                "decripcion": "To clarify; I was originally using Eclipse to do a find and replace in multiple files. What I have discovered by the answers below is that my problem was the tool and not regex pattern.",
                "fecha": { "$date" : "2008-10-02 15:45:52Z" },
                "usuario": "andyuk",
                "usuario_id": 2561
            }
        ],
        "usuario": "andyuk",
        "usuario_id": 2561
    },
    {
        "_id": 90,
        "titulo": "'pip' is not recognized as an internal or external command",
        "fecha": { "$date" : "2020-06-27 17:08:13Z" },
        "decripcion": "\n                \nI'm running into a weird error when trying to install Django on my computer.\nThis is the sequence that I typed into my command line:\nC:\\Python34> python get-pip.py\nRequirement already up-to-date: pip in c:\\python34\\lib\\site-packages\nCleaning up...\n\nC:\\Python34> pip install Django\n'pip' is not recognized as an internal or external command,\noperable program or batch file.\n\nC:\\Python34> lib\\site-packages\\pip install Django\n'lib\\site-packages\\pip' is not recognized as an internal or external command,\noperable program or batch file.\n\nWhat could be causing this?\nThis is what I get when I type in echo %PATH%:\nC:\\Python34>echo %PATH%\nC:\\Program Files\\ImageMagick-6.8.8-Q16;C:\\Program Files (x86)\\Intel\\iCLS Client\\\n;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\S\nystem32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\\nWindows Live\\Shared;C:\\Program Files (x86)\\Intel\\OpenCL SDK\\2.0\\bin\\x86;C:\\Progr\nam Files (x86)\\Intel\\OpenCL SDK\\2.0\\bin\\x64;C:\\Program Files\\Intel\\Intel(R) Mana\ngement Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine C\nomponents\\IPT;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\n\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\P\nrogram Files (x86)\\nodejs\\;C:\\Program Files (x86)\\Heroku\\bin;C:\\Program Files (x\n86)\\git\\cmd;C:\\RailsInstaller\\Ruby2.0.0\\bin;C:\\RailsInstaller\\Git\\cmd;C:\\RailsIn\nstaller\\Ruby1.9.3\\bin;C:\\Users\\Javi\\AppData\\Roaming\\npm\n\n    ",
        "votes": 437,
        "tags": [
            "python",
            "windows",
            "pip",
            "django"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1458,
            "fecha": { "$date" : "2016-09-27 03:24:21Z" },
            "decripcion": "\nYou need to add the path of your pip installation to your PATH system variable. By default, pip is installed to C:\\Python34\\Scripts\\pip (pip now comes bundled with new versions of python), so the path \"C:\\Python34\\Scripts\" needs to be added to your PATH variable.\n\nTo check if it is already in your PATH variable, type echo %PATH% at the CMD prompt\n\nTo add the path of your pip installation to your PATH variable, you can use the Control Panel or the setx command. For example:\n\nsetx PATH \"%PATH%;C:\\Python34\\Scripts\"\n\n\n\n\nNote:\nAccording to the official documentation, \"[v]ariables set with setx variables are available in future command windows only, not in the current command window\". In particular, you will need to start a new cmd.exe instance after entering the above command in order to utilize the new environment variable. \n\nThanks to Scott Bartell for pointing this out.\n    ",
            "votes": 644,
            "comentarios": [
                {
                    "decripcion": "@fr1tz, the command did not work when being added from the cmd utility. I had to add it manually from system settings>advanced>environment variables. I am using Windows 8 64bit. Thanks!",
                    "fecha": { "$date" : "2015-01-04 17:19:34Z" },
                    "usuario": "Mohammed",
                    "usuario_id": 2562
                },
                {
                    "decripcion": "After this, you need to install any package from that Directory i.e. C:\\Python34\\Scripts (For example) pip install openpyxl",
                    "fecha": { "$date" : "2016-03-13 14:59:52Z" },
                    "usuario": "Fahad Naeem",
                    "usuario_id": 2563
                },
                {
                    "decripcion": "Note: you'll likely need to close and reopen your CMD prompt after you run the setx command.",
                    "fecha": { "$date" : "2016-05-21 22:07:11Z" },
                    "usuario": "Scott Bartell",
                    "usuario_id": 2564
                },
                {
                    "decripcion": "For python 3.5 installed on Windows 10, the path is: C:\\Users\\<username>\\AppData\\Local\\Programs\\Python\\Python35",
                    "fecha": { "$date" : "2017-03-05 05:48:04Z" },
                    "usuario": "derek",
                    "usuario_id": 2565
                },
                {
                    "decripcion": "By default, pip is installed to -- by who's default?",
                    "fecha": { "$date" : "2018-04-24 18:04:35Z" },
                    "usuario": "Alex Gordon",
                    "usuario_id": 2566
                }
            ],
            "usuario": "fr1tz",
            "usuario_id": 2567
        },
        "respuestas": [
            1458,
            1459,
            1460,
            1461,
            1462,
            1463,
            1464,
            1465,
            1466,
            1467,
            1468,
            1469,
            1470,
            1471,
            1472,
            1473,
            1474,
            1475,
            1476,
            1477,
            1478,
            1479,
            1480,
            1481,
            1482,
            1483,
            1484,
            1485,
            1486,
            1487
        ],
        "comentarios": [
            {
                "decripcion": "You may need to add pip to the PATH environment variable. Otherwise CMD prompt doesn't know what you're talking about",
                "fecha": { "$date" : "2014-05-17 07:51:37Z" },
                "usuario": "fr1tz",
                "usuario_id": 2567
            },
            {
                "decripcion": "Hmm I'm relatively new to programming have only done some ruby on rails. Can you explain a bit more what you mean by PATH environment variable? How?",
                "fecha": { "$date" : "2014-05-17 07:55:18Z" },
                "usuario": "user3597950",
                "usuario_id": 2609
            },
            {
                "decripcion": "@fr1tz I get a huge output... seemingly a really really long directory of files",
                "fecha": { "$date" : "2014-05-17 07:57:31Z" },
                "usuario": "user3597950",
                "usuario_id": 2609
            },
            {
                "decripcion": "@user3597960 do you know the location of your pip installation? You need to add this location to that really really long list of directories, which is actually the PATH system variable. To add it to the PATH variable you can either use setx PATH \"%PATH%;C:\\pip\" for example or you can add it via the control panel",
                "fecha": { "$date" : "2014-05-17 07:59:32Z" },
                "usuario": "fr1tz",
                "usuario_id": 2567
            },
            {
                "decripcion": "if the path of your Python\\Python37-32\\Scripts is too long like mine C:\\Users\\IT-admin\\AppData\\Local\\Programs\\Python\\Python37-32\\Scripts then command terminal trim the path and won't allow the addition of full path. In this case use the 'Advance system setting' from control panel to add manually as shown in screenshot by @KarthikeyanVK in below answer",
                "fecha": { "$date" : "2019-02-21 07:31:43Z" },
                "usuario": "Shriganesh Kolhe",
                "usuario_id": 2610
            }
        ],
        "usuario": "user3597950",
        "usuario_id": 2609
    },
    {
        "_id": 91,
        "titulo": "What is a NoReverseMatch error, and how do I fix it?",
        "fecha": { "$date" : "2016-07-15 07:22:59Z" },
        "decripcion": "\n                \nI have some code and when it executes, it throws a NoReverseMatch, saying:\n\n\n  NoReverseMatch at /my_url/ Reverse for 'my_url_name' with arguments '()' and keyword arguments '{}' not found. n pattern(s) tried: []\n\n\nWhat does this mean, and what can I do about it?\n    ",
        "votes": 138,
        "tags": [
            "django-urls",
            "django"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1488,
            "fecha": { "$date" : "2020-09-15 00:14:40Z" },
            "decripcion": "\nThe NoReverseMatch error is saying that Django cannot find a matching url pattern for the url you've provided in any of your installed app's urls.\n\nThe NoReverseMatch exception is raised by django.core.urlresolvers when a matching URL in your URLconf cannot be identified based on the parameters supplied.\n\nTo start debugging it, you need to start by disecting the error message given to you.\n\nNoReverseMatch at /my_url/\nThis is the url that is currently being rendered, it is this url that your application is currently trying to access but it contains a url that cannot be matched\n\nReverse for 'my_url_name'\nThis is the name of the url that it cannot find\n\nwith arguments '()' and\nThese are the non-keyword arguments its providing to the url\n\nkeyword arguments '{}' not found.\nThese are the keyword arguments its providing to the url\n\nn pattern(s) tried: []\nThese are the patterns that it was able to find in your urls.py files that it tried to match against\n\n\nStart by locating the code in your source relevant to the url that is currently being rendered - the url, the view, and any templates involved. In most cases, this will be the part of the code you're currently developing.\nOnce you've done this, read through the code in the order that django would be following until you reach the line of code that is trying to construct a url for your my_url_name. Again, this is probably in a place you've recently changed.\nNow that you've discovered where the error is occuring, use the other parts of the error message to work out the issue.\nThe url name\n\nAre there any typos?\nHave you provided the url you're trying to access the given name?\nIf you have set app_name in the app's urls.py (e.g. app_name = 'my_app') or if you included the app with a namespace (e.g. include('myapp.urls', namespace='myapp'), then you need to include the namespace when reversing, e.g. {% url 'myapp:my_url_name' %} or reverse('myapp:my_url_name').\n\nArguments and Keyword Arguments\nThe arguments and keyword arguments are used to match against any capture groups that are present within the given url which can be identified by the surrounding () brackets in the url pattern.\nAssuming the url you're matching requires additional arguments, take a look in the error message and first take a look if the value for the given arguments look to be correct.\nIf they aren't correct:\n\nThe value is missing or an empty string\nThis generally means that the value you're passing in doesn't contain the value you expect it to be. Take a look where you assign the value for it, set breakpoints, and you'll need to figure out why this value doesn't get passed through correctly.\n\nThe keyword argument has a typo\nCorrect this either in the url pattern, or in the url you're constructing.\n\n\nIf they are correct:\n\nDebug the regex\nYou can use a website such as regexr to quickly test whether your pattern matches the url you think you're creating, Copy the url pattern into the regex field at the top, and then use the text area to include any urls that you think it should match against.\nCommon Mistakes:\n\nMatching against the . wild card character or any other regex characters\nRemember to escape the specific characters with a \\ prefix\n\nOnly matching against lower/upper case characters\nTry using either a-Z or \\w instead of a-z or A-Z\n\n\n\nCheck that pattern you're matching is included within the patterns tried\nIf it isn't here then its possible that you have forgotten to include your app within the INSTALLED_APPS setting (or the ordering of the apps within INSTALLED_APPS may need looking at)\n\n\nDjango Version\nIn Django 1.10, the ability to reverse a url by its python path was removed. The named path should be used instead.\n\nIf you're still unable to track down the problem, then feel free to ask a new question that includes what you've tried, what you've researched (You can link to this question), and then include the relevant code to the issue - the url that you're matching, any relevant url patterns, the part of the error message that shows what django tried to match, and possibly the INSTALLED_APPS setting if applicable.\n    ",
            "votes": 284,
            "comentarios": [
                {
                    "decripcion": "Finally we have a canonical answer that we can provide as the dup target",
                    "fecha": { "$date" : "2016-07-15 07:26:49Z" },
                    "usuario": "e4c5",
                    "usuario_id": 2611
                },
                {
                    "decripcion": "can you please elaborate on named path in django 1.10?",
                    "fecha": { "$date" : "2018-04-27 11:46:41Z" },
                    "usuario": "sage poudel",
                    "usuario_id": 2612
                },
                {
                    "decripcion": "Yes, set app_name in the app's urls.py (e.g. app_name = 'my_app')  is the point",
                    "fecha": { "$date" : "2019-03-20 03:32:11Z" },
                    "usuario": "C.K.",
                    "usuario_id": 2613
                },
                {
                    "decripcion": "I find this live regex tester more helpful: regex101.com",
                    "fecha": { "$date" : "2019-10-07 12:21:35Z" },
                    "usuario": "obotezat",
                    "usuario_id": 2614
                },
                {
                    "decripcion": "Thank you for this superb tutorial on NoReverseMatch! I was able to sort out my issue.",
                    "fecha": { "$date" : "2020-07-05 13:21:42Z" },
                    "usuario": "newmachines_xyz",
                    "usuario_id": 2615
                }
            ],
            "usuario": "ANON",
            "usuario_id": 63
        },
        "respuestas": [
            1488,
            1489,
            1490,
            1491
        ],
        "comentarios": [],
        "usuario": "Sayse",
        "usuario_id": 2619
    },
    {
        "_id": 92,
        "titulo": "How can I combine two or more querysets in a Django view?",
        "fecha": { "$date" : "2021-05-11 22:30:34Z" },
        "decripcion": "\n                \nI am trying to build the search for a Django site I am building, and in that search, I am searching in three different models. And to get pagination on the search result list, I would like to use a generic object_list view to display the results. But to do that, I have to merge three querysets into one.\nHow can I do that? I've tried this:\nresult_list = []\npage_list = Page.objects.filter(\n    Q(title__icontains=cleaned_search_term) |\n    Q(body__icontains=cleaned_search_term))\narticle_list = Article.objects.filter(\n    Q(title__icontains=cleaned_search_term) |\n    Q(body__icontains=cleaned_search_term) |\n    Q(tags__icontains=cleaned_search_term))\npost_list = Post.objects.filter(\n    Q(title__icontains=cleaned_search_term) |\n    Q(body__icontains=cleaned_search_term) |\n    Q(tags__icontains=cleaned_search_term))\n\nfor x in page_list:\n    result_list.append(x)\nfor x in article_list:\n    result_list.append(x)\nfor x in post_list:\n    result_list.append(x)\n\nreturn object_list(\n    request,\n    queryset=result_list,\n    template_object_name='result',\n    paginate_by=10,\n    extra_context={\n        'search_term': search_term},\n    template_name=\"search/result_list.html\")\n\nBut this doesn't work. I get an error when I try to use that list in the generic view. The list is missing the clone attribute.\nHow can I merge the three lists, page_list, article_list and post_list?\n    ",
        "votes": 732,
        "tags": [
            "django-queryset",
            "django",
            "search",
            "django-q"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1492,
            "fecha": { "$date" : "2009-01-12 08:00:46Z" },
            "decripcion": "\nConcatenating the querysets into a list is the simplest approach. If the database will be hit for all querysets anyway (e.g. because the result needs to be sorted), this won't add further cost.\n\nfrom itertools import chain\nresult_list = list(chain(page_list, article_list, post_list))\n\n\nUsing itertools.chain is faster than looping each list and appending elements one by one, since itertools is implemented in C. It also consumes less memory than converting each queryset into a list before concatenating.\n\nNow it's possible to sort the resulting list e.g. by date (as requested in hasen j's comment to another answer). The sorted() function conveniently accepts a generator and returns a list:\n\nresult_list = sorted(\n    chain(page_list, article_list, post_list),\n    key=lambda instance: instance.date_created)\n\n\nIf you're using Python 2.4 or later, you can use attrgetter instead of a lambda. I remember reading about it being faster, but I didn't see a noticeable speed difference for a million item list.\n\nfrom operator import attrgetter\nresult_list = sorted(\n    chain(page_list, article_list, post_list),\n    key=attrgetter('date_created'))\n\n    ",
            "votes": 1142,
            "comentarios": [
                {
                    "decripcion": "If merging querysets from the same table to perform an OR query, and have duplicated rows you can eliminate them with the groupby function:  from itertools import groupby unique_results = [rows.next() for (key, rows) in groupby(result_list, key=lambda obj: obj.id)]",
                    "fecha": { "$date" : "2011-09-18 22:21:52Z" },
                    "usuario": "Josh Russo",
                    "usuario_id": 2620
                },
                {
                    "decripcion": "Ok, so nm about the groupby function in this context. With the the Q function you should be able to perform any OR query you need: https://docs.djangoproject.com/en/1.3/topics/db/queries/#complex-lookups-with-q-objects",
                    "fecha": { "$date" : "2011-09-18 22:41:41Z" },
                    "usuario": "Josh Russo",
                    "usuario_id": 2620
                },
                {
                    "decripcion": "@apelliciari Chain uses significantly less memory than list.extend, because it doesn't need to load both lists fully into memory.",
                    "fecha": { "$date" : "2015-04-15 17:17:21Z" },
                    "usuario": "Dan Gayle",
                    "usuario_id": 2621
                },
                {
                    "decripcion": "@AWrightIV Here's the new version of that link: docs.djangoproject.com/en/1.8/topics/db/queries/\u2026",
                    "fecha": { "$date" : "2015-09-12 16:27:43Z" },
                    "usuario": "Josh Russo",
                    "usuario_id": 2620
                },
                {
                    "decripcion": "trying this approacg but have 'list' object has no attribute 'complex_filter'",
                    "fecha": { "$date" : "2016-10-05 10:30:17Z" },
                    "usuario": "grillazz",
                    "usuario_id": 2622
                }
            ],
            "usuario": "akaihola",
            "usuario_id": 2623
        },
        "respuestas": [
            1492,
            1493,
            1494,
            1495,
            1496,
            1497,
            1498,
            1499,
            1500,
            1501,
            1502,
            1503,
            1504,
            1505
        ],
        "comentarios": [
            {
                "decripcion": "Looks like t_rybik has created a comprehensive solution at djangosnippets.org/snippets/1933",
                "fecha": { "$date" : "2010-03-21 18:17:21Z" },
                "usuario": "akaihola",
                "usuario_id": 2623
            },
            {
                "decripcion": "For searching it's better to use dedicated solutions like Haystack - it's very flexible.",
                "fecha": { "$date" : "2010-04-09 08:52:07Z" },
                "usuario": "minder",
                "usuario_id": 2650
            },
            {
                "decripcion": "Django users 1.11 and abv, see this answer - stackoverflow.com/a/42186970/6003362",
                "fecha": { "$date" : "2018-02-22 09:24:17Z" },
                "usuario": "Sahil Agarwal",
                "usuario_id": 2651
            },
            {
                "decripcion": "note: the question is limited to the very rare case when after merging 3 different models together you don't need extracting models again on the listing to distinguish data on types. For most cases - if distinction is expected - it will wrong interface. For the same models: see answers about union.",
                "fecha": { "$date" : "2019-07-15 17:18:25Z" },
                "usuario": "S\u0142awomir Lenart",
                "usuario_id": 2652
            }
        ],
        "usuario": "espenhogbakk",
        "usuario_id": 2635
    },
    {
        "_id": 93,
        "titulo": "Extending the User model with custom fields in Django",
        "fecha": { "$date" : "2019-06-27 12:03:51Z" },
        "decripcion": "\n                \nWhat's the best way to extend the User model (bundled with Django's authentication app) with custom fields? I would also possibly like to use the email as the username (for authentication purposes).\n\nI've already seen a few ways to do it, but can't decide on which one is the best.\n    ",
        "votes": 495,
        "tags": [
            "django",
            "django-authentication",
            "django-users",
            "django-models"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1506,
            "fecha": { "$date" : "2020-06-20 09:12:55Z" },
            "decripcion": "\nThe least painful and indeed Django-recommended way of doing this is through a OneToOneField(User) property.\n\nExtending the existing User model\n\u2026\nIf you wish to store information related to User, you can use a one-to-one relationship to a model containing the fields for additional information. This one-to-one model is often called a profile model, as it might store non-auth related information about a site user.\n\nThat said, extending django.contrib.auth.models.User and supplanting it also works...\n\nSubstituting a custom User model\nSome kinds of projects may have authentication requirements for which Django\u2019s built-in User model is not always appropriate. For instance, on some sites it makes more sense to use an email address as your identification token instead of a username.\n[Ed: Two warnings and a notification follow, mentioning that this is pretty drastic.]\n\nI would definitely stay away from changing the actual User class in your Django source tree and/or copying and altering the auth module.\n    ",
            "votes": 280,
            "comentarios": [
                {
                    "decripcion": "FYI the new (1.0+) recommended method is OneToOneField(User) docs.djangoproject.com/en/dev/topics/auth/\u2026",
                    "fecha": { "$date" : "2010-11-18 01:39:16Z" },
                    "usuario": "Dave Forgac",
                    "usuario_id": 2653
                },
                {
                    "decripcion": "Shawn Rider of PBS gave some really good reasons why you should not extend django.contrib.auth.models.User. Use OneToOneField(User) instead.",
                    "fecha": { "$date" : "2011-01-14 18:38:58Z" },
                    "usuario": "pydanny",
                    "usuario_id": 2654
                },
                {
                    "decripcion": "user = models.ForeignKey(User, unique=True) is this the same as user = models.OneToOneField(User) ? I would think the end effect is the same? But maybe the implementation in the backend is different.",
                    "fecha": { "$date" : "2011-04-23 06:04:41Z" },
                    "usuario": "Sam Stoelinga",
                    "usuario_id": 2655
                },
                {
                    "decripcion": "Can anyone link to Shawn Riders argument/reasoning for that?",
                    "fecha": { "$date" : "2012-03-28 23:00:39Z" },
                    "usuario": "Jeremy Blanchard",
                    "usuario_id": 2656
                },
                {
                    "decripcion": "Here is some additional info about extending user models as of the django 1.7 docs",
                    "fecha": { "$date" : "2014-11-20 22:17:02Z" },
                    "usuario": "Derek Adair",
                    "usuario_id": 2657
                }
            ],
            "usuario": "Ryan Duffield",
            "usuario_id": 2658
        },
        "respuestas": [
            1506,
            1507,
            1508,
            1509,
            1510,
            1511,
            1512,
            1513,
            1514,
            1515,
            1516,
            1517,
            1518,
            1519,
            1520
        ],
        "comentarios": [
            {
                "decripcion": "Most answer are outdated/deprecated. Please see stackoverflow.com/a/22856042/781695 & stackoverflow.com/q/14104677/781695 & stackoverflow.com/q/16880461/781695",
                "fecha": { "$date" : "2014-04-04 07:17:16Z" },
                "usuario": "user",
                "usuario_id": 2662
            },
            {
                "decripcion": "@buffer - The first question you linked to (stackoverflow.com/a/22856042/781695) has now been deleted. The others are still valid.",
                "fecha": { "$date" : "2015-05-19 19:53:13Z" },
                "usuario": "Tony",
                "usuario_id": 2691
            },
            {
                "decripcion": "To use email instead of username for authentication, this article is useful.",
                "fecha": { "$date" : "2015-07-15 12:49:03Z" },
                "usuario": "NA",
                "usuario_id": 53
            },
            {
                "decripcion": "learnbatta.com/blog/using-custom-user-model-in-django-23",
                "fecha": { "$date" : "2018-02-03 04:12:11Z" },
                "usuario": "anjaneyulubatta505",
                "usuario_id": 2692
            },
            {
                "decripcion": "I am quite fascinated to see the question was asked in 2008 before Django was released @Farinha",
                "fecha": { "$date" : "2019-09-20 14:39:16Z" },
                "usuario": "Trect",
                "usuario_id": 2693
            }
        ],
        "usuario": "Farinha",
        "usuario_id": 2694
    },
    {
        "_id": 94,
        "titulo": "CORS: Cannot use wildcard in Access-Control-Allow-Origin when credentials flag is true",
        "fecha": { "$date" : "2015-10-01 12:12:37Z" },
        "decripcion": "\n                \nI have a setup involving\n\nFrontend server (Node.js, domain: localhost:3000) <---> Backend (Django, Ajax, domain: localhost:8000)\n\nBrowser <-- webapp <-- Node.js (Serve the app)\n\nBrowser (webapp) --> Ajax --> Django(Serve ajax POST requests)\n\nNow, my problem here is with CORS setup which the webapp uses to make Ajax calls to the backend server. In chrome, I keep getting\n\n\n  Cannot use wildcard in Access-Control-Allow-Origin when credentials flag is true.\n\n\ndoesn't work on firefox either.\n\nMy Node.js setup is:\n\nvar allowCrossDomain = function(req, res, next) {\n    res.header('Access-Control-Allow-Origin', 'http://localhost:8000/');\n    res.header('Access-Control-Allow-Credentials', true);\n    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');\n    res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n    next();\n};\n\n\nAnd in Django I'm using this middleware along with this\n\nThe webapp makes requests as such:\n\n$.ajax({\n    type: \"POST\",\n    url: 'http://localhost:8000/blah',\n    data: {},\n    xhrFields: {\n        withCredentials: true\n    },\n    crossDomain: true,\n    dataType: 'json',\n    success: successHandler\n});\n\n\nSo, the request headers that the webapp sends looks like:\n\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: \"Origin, X-Requested-With, Content-Type, Accept\"\nAccess-Control-Allow-Methods: 'GET,PUT,POST,DELETE'\nContent-Type: application/json \nAccept: */*\nAccept-Encoding: gzip,deflate,sdch\nAccept-Language: en-US,en;q=0.8\nCookie: csrftoken=***; sessionid=\"***\"\n\n\nAnd here's the response header:\n\nAccess-Control-Allow-Headers: Content-Type,*\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Origin: *\nAccess-Control-Allow-Methods: POST,GET,OPTIONS,PUT,DELETE\nContent-Type: application/json\n\n\nWhere am I going wrong?!\n\nEdit 1: I've been using chrome --disable-web-security, but now want things to actually work.\n\nEdit 2: Answer:\n\nSo, solution for me django-cors-headers config:\n\nCORS_ORIGIN_ALLOW_ALL = False\nCORS_ALLOW_CREDENTIALS = True\nCORS_ORIGIN_WHITELIST = (\n    'http://localhost:3000' # Here was the problem indeed and it has to be http://localhost:3000, not http://localhost:3000/\n)\n\n    ",
        "votes": 375,
        "tags": [
            "django-cors-headers",
            "django",
            "node.js",
            "ajax",
            "cors"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1521,
            "fecha": { "$date" : "2017-05-23 12:26:10Z" },
            "decripcion": "\nThis is a part of security, you cannot do that. If you want to allow credentials then your Access-Control-Allow-Origin must not use *. You will have to specify the exact protocol + domain + port. For reference see these questions :\n\n\nAccess-Control-Allow-Origin wildcard subdomains, ports and protocols\nCross Origin Resource Sharing with Credentials\n\n\nBesides * is too permissive and would defeat use of credentials. So set http://localhost:3000 or http://localhost:8000 as the allow origin header.\n    ",
            "votes": 301,
            "comentarios": [
                {
                    "decripcion": "But what if there's more than one domain?",
                    "fecha": { "$date" : "2014-10-08 00:57:05Z" },
                    "usuario": "aroth",
                    "usuario_id": 1611
                },
                {
                    "decripcion": "@aroth You can give a list of domains. Related question: stackoverflow.com/questions/1653308/\u2026",
                    "fecha": { "$date" : "2014-10-08 07:19:28Z" },
                    "usuario": "user568109",
                    "usuario_id": 1005
                },
                {
                    "decripcion": "@user568109 Could you explain \"Besides * is too permissive and would defeat use of credentials.\"?",
                    "fecha": { "$date" : "2016-06-24 14:13:47Z" },
                    "usuario": "Hugo Wood",
                    "usuario_id": 2695
                },
                {
                    "decripcion": "What is the \"exact domain\" if the request comes from mobile device, like it can happen with Cordova?",
                    "fecha": { "$date" : "2016-07-02 12:36:22Z" },
                    "usuario": "Christian",
                    "usuario_id": 2314
                },
                {
                    "decripcion": "@Christian kinda old, but if anyone still curious, this problem happens only for applications running on browsers, because this error is thrown by the browser for security reasons. Other clients such as a mobile app, postman or any other backend code using http client to make a request won't have this problem, so you don't have to worry about the origin and the exact domain.",
                    "fecha": { "$date" : "2019-04-10 05:19:40Z" },
                    "usuario": "Alisson",
                    "usuario_id": 2696
                }
            ],
            "usuario": "user568109",
            "usuario_id": 1005
        },
        "respuestas": [
            1521,
            1522,
            1523,
            1524,
            1525,
            1526,
            1527,
            1528,
            1529,
            1530
        ],
        "comentarios": [
            {
                "decripcion": "For me it is localhost:3000 without http, like this:      CORS_ORIGIN_WHITELIST = (         'localhost:3000',     )",
                "fecha": { "$date" : "2017-08-03 15:36:42Z" },
                "usuario": "Andrei",
                "usuario_id": 2712
            },
            {
                "decripcion": "Do you mean you use develop the  frontend and backend in one PC?",
                "fecha": { "$date" : "2017-12-12 04:34:10Z" },
                "usuario": "fanhualuojin154873",
                "usuario_id": 2713
            },
            {
                "decripcion": "how about the frontend and backend in different PC?",
                "fecha": { "$date" : "2017-12-12 10:59:08Z" },
                "usuario": "fanhualuojin154873",
                "usuario_id": 2713
            },
            {
                "decripcion": "@ixaxaar why you say with the http works for you? we all only ` 'localhost:3000'` works.",
                "fecha": { "$date" : "2018-03-16 08:41:05Z" },
                "usuario": "user7693832",
                "usuario_id": 2714
            },
            {
                "decripcion": "@244boy yeah the point is not the http, it is the / at the end. I suppose omitting http could work, but I've not really worked on this stuff for some years, so don't really know what works now!",
                "fecha": { "$date" : "2018-03-17 21:02:53Z" },
                "usuario": "ixaxaar",
                "usuario_id": 2699
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    },
    {
        "_id": 95,
        "titulo": "How to upload a file in Django? [closed]",
        "fecha": { "$date" : "2016-01-12 20:09:53Z" },
        "decripcion": "\n                    \n            \n        \n            \n                \n                    \n                        Closed. This question needs to be more focused. It is not currently accepting answers.\n                        \n                    \n                \n            \n        \n            \n        \n                \n                    \n                \n            \n                \n                    Want to improve this question? Update the question so it focuses on one problem only by editing this post.\n                \n                    Closed 5 years ago.\n\n            \n        \n            \n                    \n                        Improve this question\n                    \n            \n\n\n    \n\nAs a newbie to Django, I am having difficulty making an upload app in Django 1.3. I could not find any up-to-date example/snippets. May someone post a minimal but complete (Model, View, Template) example code to do so?\n    ",
        "votes": 716,
        "tags": [
            "django",
            "file",
            "upload"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1531,
            "fecha": { "$date" : "2017-05-23 12:02:58Z" },
            "decripcion": "\nPhew, Django documentation really does not have good example about this. I spent over 2 hours to dig up all the pieces to understand how this works. With that knowledge I implemented a project that makes possible to upload files and show them as list. To download  source for the project, visit https://github.com/axelpale/minimal-django-file-upload-example or clone it:\n\n> git clone https://github.com/axelpale/minimal-django-file-upload-example.git\n\n\nUpdate 2013-01-30: The source at GitHub has also implementation for Django 1.4 in addition to 1.3. Even though there is few changes the following tutorial is also useful for 1.4.\n\nUpdate 2013-05-10: Implementation for Django 1.5 at GitHub. Minor changes in redirection in urls.py and usage of url template tag in list.html. Thanks to hubert3 for the effort.\n\nUpdate 2013-12-07: Django 1.6 supported at GitHub. One import changed in myapp/urls.py. Thanks goes to Arthedian.\n\nUpdate 2015-03-17: Django 1.7 supported at GitHub, thanks to aronysidoro.\n\nUpdate 2015-09-04: Django 1.8 supported at GitHub, thanks to nerogit.\n\nUpdate 2016-07-03: Django 1.9 supported at GitHub, thanks to daavve and nerogit\n\nProject tree\n\nA basic Django 1.3 project with single app and media/ directory for uploads. \n\nminimal-django-file-upload-example/\n    src/\n        myproject/\n            database/\n                sqlite.db\n            media/\n            myapp/\n                templates/\n                    myapp/\n                        list.html\n                forms.py\n                models.py\n                urls.py\n                views.py\n            __init__.py\n            manage.py\n            settings.py\n            urls.py\n\n\n1. Settings: myproject/settings.py\n\nTo upload and serve files, you need to specify where Django stores uploaded files and from what URL Django serves them. MEDIA_ROOT and MEDIA_URL are in settings.py by default but they are empty. See the first lines in Django Managing Files for details. Remember also set the database and add myapp to INSTALLED_APPS\n\n...\nimport os\n\nBASE_DIR = os.path.dirname(os.path.dirname(__file__))\n...\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'database.sqlite3'),\n        'USER': '',\n        'PASSWORD': '',\n        'HOST': '',\n        'PORT': '',\n    }\n}\n...\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media')\nMEDIA_URL = '/media/'\n...\nINSTALLED_APPS = (\n    ...\n    'myapp',\n)\n\n\n2. Model: myproject/myapp/models.py\n\nNext you need a model with a FileField. This particular field stores files e.g. to media/documents/2011/12/24/ based on current date and MEDIA_ROOT. See FileField reference.\n\n# -*- coding: utf-8 -*-\nfrom django.db import models\n\nclass Document(models.Model):\n    docfile = models.FileField(upload_to='documents/%Y/%m/%d')\n\n\n3. Form: myproject/myapp/forms.py\n\nTo handle upload nicely, you need a form. This form has only one field but that is enough. See Form FileField reference for details.\n\n# -*- coding: utf-8 -*-\nfrom django import forms\n\nclass DocumentForm(forms.Form):\n    docfile = forms.FileField(\n        label='Select a file',\n        help_text='max. 42 megabytes'\n    )\n\n\n4. View: myproject/myapp/views.py\n\nA view where all the magic happens. Pay attention how request.FILES are handled. For me, it was really hard to spot the fact that request.FILES['docfile'] can be saved to models.FileField just like that. The model's save() handles the storing of the file to the filesystem automatically.\n\n# -*- coding: utf-8 -*-\nfrom django.shortcuts import render_to_response\nfrom django.template import RequestContext\nfrom django.http import HttpResponseRedirect\nfrom django.core.urlresolvers import reverse\n\nfrom myproject.myapp.models import Document\nfrom myproject.myapp.forms import DocumentForm\n\ndef list(request):\n    # Handle file upload\n    if request.method == 'POST':\n        form = DocumentForm(request.POST, request.FILES)\n        if form.is_valid():\n            newdoc = Document(docfile = request.FILES['docfile'])\n            newdoc.save()\n\n            # Redirect to the document list after POST\n            return HttpResponseRedirect(reverse('myapp.views.list'))\n    else:\n        form = DocumentForm() # A empty, unbound form\n\n    # Load documents for the list page\n    documents = Document.objects.all()\n\n    # Render list page with the documents and the form\n    return render_to_response(\n        'myapp/list.html',\n        {'documents': documents, 'form': form},\n        context_instance=RequestContext(request)\n    )\n\n\n5. Project URLs: myproject/urls.py\n\nDjango does not serve MEDIA_ROOT by default. That would be dangerous in production environment. But in development stage, we could cut short. Pay attention to the last line. That line enables Django to serve files from MEDIA_URL. This works only in developement stage.\n\nSee django.conf.urls.static.static reference for details. See also this discussion about serving media files.\n\n# -*- coding: utf-8 -*-\nfrom django.conf.urls import patterns, include, url\nfrom django.conf import settings\nfrom django.conf.urls.static import static\n\nurlpatterns = patterns('',\n    (r'^', include('myapp.urls')),\n) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n\n\n6. App URLs: myproject/myapp/urls.py\n\nTo make the view accessible, you must specify urls for it. Nothing special here.\n\n# -*- coding: utf-8 -*-\nfrom django.conf.urls import patterns, url\n\nurlpatterns = patterns('myapp.views',\n    url(r'^list/$', 'list', name='list'),\n)\n\n\n7. Template: myproject/myapp/templates/myapp/list.html\n\nThe last part: template for the list and the upload form below it. The form must have enctype-attribute set to \"multipart/form-data\" and method set to \"post\" to make upload to Django possible. See File Uploads documentation for details.\n\nThe FileField has many attributes that can be used in templates. E.g. {{ document.docfile.url }} and {{ document.docfile.name }} as in the template. See more about these in Using files in models article and The File object documentation.\n\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Minimal Django File Upload Example</title>   \n    </head>\n    <body>\n    <!-- List of uploaded documents -->\n    {% if documents %}\n        <ul>\n        {% for document in documents %}\n            <li><a href=\"{{ document.docfile.url }}\">{{ document.docfile.name }}</a></li>\n        {% endfor %}\n        </ul>\n    {% else %}\n        <p>No documents.</p>\n    {% endif %}\n\n        <!-- Upload form. Note enctype attribute! -->\n        <form action=\"{% url 'list' %}\" method=\"post\" enctype=\"multipart/form-data\">\n            {% csrf_token %}\n            <p>{{ form.non_field_errors }}</p>\n            <p>{{ form.docfile.label_tag }} {{ form.docfile.help_text }}</p>\n            <p>\n                {{ form.docfile.errors }}\n                {{ form.docfile }}\n            </p>\n            <p><input type=\"submit\" value=\"Upload\" /></p>\n        </form>\n    </body>\n</html> \n\n\n8. Initialize\n\nJust run syncdb and runserver.\n\n> cd myproject\n> python manage.py syncdb\n> python manage.py runserver\n\n\nResults\n\nFinally, everything is ready. On default Django developement environment the list of uploaded documents can be seen at localhost:8000/list/. Today the files are uploaded to /path/to/myproject/media/documents/2011/12/17/ and can be opened from the list.\n\nI hope this answer will help someone as much as it would have helped me.\n    ",
            "votes": 1326,
            "comentarios": [
                {
                    "decripcion": "Found the location in django docs that shows file uploads.  The example in this answer is excellent, but the info in the django docs will be kept up to date with new releases.  docs.djangoproject.com/en/dev/topics/http/file-uploads",
                    "fecha": { "$date" : "2012-11-29 08:20:41Z" },
                    "usuario": "TaiwanGrapefruitTea",
                    "usuario_id": 2715
                },
                {
                    "decripcion": "The example doesn't work for Django \"1.5\". In the HTML {% url list %} becomes {% url \"list\" %}.",
                    "fecha": { "$date" : "2013-06-13 09:52:47Z" },
                    "usuario": "Matthieu Riegler",
                    "usuario_id": 2716
                },
                {
                    "decripcion": "Thank you very much . It really works for me. However, for the upcoming viewers, you should check the code in gitHub for the best compatibility with new versions of Python and Django. For example, the the views.py, render_to_response() should be replaced with render(request,...,) to avoid the CSRF error. Cheers.",
                    "fecha": { "$date" : "2016-07-28 22:22:26Z" },
                    "usuario": "Huy Than",
                    "usuario_id": 2717
                },
                {
                    "decripcion": "it is possible doing this without FORMS?",
                    "fecha": { "$date" : "2016-09-08 07:13:47Z" },
                    "usuario": "Roel",
                    "usuario_id": 2718
                },
                {
                    "decripcion": "Can the file be .zip, or other compressed files?",
                    "fecha": { "$date" : "2017-11-27 08:34:06Z" },
                    "usuario": "qg_java_17137",
                    "usuario_id": 2719
                }
            ],
            "usuario": "Akseli Pal\u00e9n",
            "usuario_id": 2720
        },
        "respuestas": [
            1531,
            1532,
            1533,
            1534,
            1535,
            1536,
            1537,
            1538,
            1539,
            1540
        ],
        "comentarios": [],
        "usuario": "qliq",
        "usuario_id": 2721
    },
    {
        "_id": 96,
        "titulo": "Set up a scheduled job?",
        "fecha": { "$date" : "2020-03-25 19:06:50Z" },
        "decripcion": "\n                \nI've been working on a web app using Django, and I'm curious if there is a way to schedule a job to run periodically. \n\nBasically I just want to run through the database and make some calculations/updates on an automatic, regular basis, but I can't seem to find any documentation on doing this.\n\nDoes anyone know how to set this up?\n\nTo clarify:  I know I can set up a cron job to do this, but I'm curious if there is some feature in Django that provides this functionality.   I'd like people to be able to deploy this app themselves without having to do much config (preferably zero).\n\nI've considered triggering these actions \"retroactively\" by simply checking if a job should have been run since the last time a request was sent to the site, but I'm hoping for something a bit cleaner.\n    ",
        "votes": 553,
        "tags": [
            "python",
            "web-applications",
            "scheduled-tasks",
            "django"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1541,
            "fecha": { "$date" : "2019-08-05 06:15:32Z" },
            "decripcion": "\nOne solution that I have employed is to do this:\n\n1) Create a custom management command, e.g. \n\npython manage.py my_cool_command\n\n\n2) Use cron (on Linux) or at (on Windows) to run my command at the required times.\n\nThis is a simple solution that doesn't require installing a heavy AMQP stack. However there are nice advantages to using something like Celery, mentioned in the other answers. In particular, with Celery it is nice to not have to spread your application logic out into crontab files. However the cron solution works quite nicely for a small to medium sized application and where you don't want a lot of external dependencies.\n\nEDIT:\n\nIn later version of windows the at command is deprecated for Windows 8, Server 2012 and above. You can use schtasks.exe for same use.\n\n**** UPDATE ****\nThis the new link of django doc for writing the custom management command\n    ",
            "votes": 388,
            "comentarios": [
                {
                    "decripcion": "Is this a way to do this without external services but using an only running django framework process?",
                    "fecha": { "$date" : "2011-10-14 13:57:45Z" },
                    "usuario": "sergzach",
                    "usuario_id": 476
                },
                {
                    "decripcion": "@Brian_Neal django_cron application.",
                    "fecha": { "$date" : "2011-12-04 22:13:01Z" },
                    "usuario": "sergzach",
                    "usuario_id": 476
                },
                {
                    "decripcion": "Please help me understand how will I run a management command in a virtual environment using cron on the last day of every month.",
                    "fecha": { "$date" : "2012-03-29 23:17:27Z" },
                    "usuario": "mmrs151",
                    "usuario_id": 2744
                },
                {
                    "decripcion": "@sergzach I followed up on this comment and it turns out there are two packages with this name. The django-cron on Google Code and the django-cron on Github. They are slightly different but both interesting. Both allow you to define crons in a 'Djangonic' way. The first one is a bit older and aims to work without an external task (i.e. the cron). The second one on the other hand requires you to set a cron to run python manage.py runcrons which then runs all crons you have defined and registered.",
                    "fecha": { "$date" : "2012-10-18 14:18:16Z" },
                    "usuario": "driftcatcher",
                    "usuario_id": 2745
                },
                {
                    "decripcion": "@sergzach I am assuming you are referring to the first one, \"django-cron on Google Code\". You are right about that one. This is actually why I opt for the second one, \"django-cron on GitHub\", because it makes it so you have a simple crontab setup/management - only one crontab, referring to the management command - but since you are using a separate cron process you avoid this synchronization issue (as far as I can tell).",
                    "fecha": { "$date" : "2012-10-18 15:26:58Z" },
                    "usuario": "driftcatcher",
                    "usuario_id": 2745
                }
            ],
            "usuario": "Brian Neal",
            "usuario_id": 2746
        },
        "respuestas": [
            1541,
            1542,
            1543,
            1544,
            1545,
            1546,
            1547,
            1548,
            1549,
            1550,
            1551,
            1552,
            1553,
            1554,
            1555,
            1556,
            1557,
            1558,
            1559,
            1560,
            1561,
            1562,
            1563,
            1564,
            1565
        ],
        "comentarios": [
            {
                "decripcion": "If you are a high-performance site and already using RabbitMQ here's a trick to get around cron: Using AMQP to do cron-like scheduling",
                "fecha": { "$date" : "2009-03-07 08:47:27Z" },
                "usuario": "Van Gale",
                "usuario_id": 2755
            },
            {
                "decripcion": "what do you think of this? github.com/reavis/django-cron",
                "fecha": { "$date" : "2010-11-23 14:25:00Z" },
                "usuario": "Domenico Monaco",
                "usuario_id": 2778
            },
            {
                "decripcion": "Tick is been though just to avoid you all this work. [Disclaimer] I build tick.",
                "fecha": { "$date" : "2014-03-06 21:41:24Z" },
                "usuario": "Siscia",
                "usuario_id": 2779
            },
            {
                "decripcion": "github.com/coleifer/huey Huey needs a mention here. It's ridiculously easy to setup with Django.",
                "fecha": { "$date" : "2018-12-03 18:49:14Z" },
                "usuario": "Brandon Bertelsen",
                "usuario_id": 2780
            }
        ],
        "usuario": "TM.",
        "usuario_id": 2751
    },
    {
        "_id": 97,
        "titulo": "Django CSRF check failing with an Ajax POST request",
        "fecha": { "$date" : "2016-04-13 03:11:47Z" },
        "decripcion": "\n                \nI could use some help complying with Django's CSRF protection mechanism via my AJAX post. I've followed the directions here:\n\nhttp://docs.djangoproject.com/en/dev/ref/contrib/csrf/\n\nI've copied the AJAX sample code they have on that page exactly:\n\nhttp://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax\n\nI put an alert printing the contents of getCookie('csrftoken') before the xhr.setRequestHeader call and it is indeed populated with some data. I'm not sure how to verify that the token is correct, but I'm encouraged that it's finding and sending something.\n\nBut Django is still rejecting my AJAX post.\n\nHere's my JavaScript:\n\n$.post(\"/memorize/\", data, function (result) {\n    if (result != \"failure\") {\n        get_random_card();\n    }\n    else {\n        alert(\"Failed to save card data.\");\n    }\n});\n\n\nHere's the error I'm seeing from Django:\n\n\n  [23/Feb/2011 22:08:29] \"POST /memorize/ HTTP/1.1\" 403 2332\n\n\nI'm sure I'm missing something, and maybe it's simple, but I don't know what it is.  I've searched around SO and saw some information about turning off the CSRF check for my view via the csrf_exempt decorator, but I find that unappealing.  I've tried that out and it works, but I'd rather get my POST to work the way Django was designed to expect it, if possible.\n\nJust in case it's helpful, here's the gist of what my view is doing:\n\ndef myview(request):\n\n    profile = request.user.profile\n\n    if request.method == 'POST':\n        \"\"\"\n        Process the post...\n        \"\"\"\n        return HttpResponseRedirect('/memorize/')\n    else: # request.method == 'GET'\n\n        ajax = request.GET.has_key('ajax')\n\n        \"\"\"\n        Some irrelevent code...\n        \"\"\"\n\n        if ajax:\n            response = HttpResponse()\n            profile.get_stack_json(response)\n            return response\n        else:\n            \"\"\"\n            Get data to send along with the content of the page.\n            \"\"\"\n\n        return render_to_response('memorize/memorize.html',\n                \"\"\" My data \"\"\"\n                context_instance=RequestContext(request))\n\n\nThanks for your replies!\n    ",
        "votes": 199,
        "tags": [
            "ajax",
            "python",
            "csrf",
            "django"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1567,
            "fecha": { "$date" : "2019-04-14 22:52:11Z" },
            "decripcion": "\nReal solution\n\nOk, I managed to trace the problem down. It lies in the Javascript (as I suggested below) code.\n\nWhat you need is this:\n\n$.ajaxSetup({ \n     beforeSend: function(xhr, settings) {\n         function getCookie(name) {\n             var cookieValue = null;\n             if (document.cookie && document.cookie != '') {\n                 var cookies = document.cookie.split(';');\n                 for (var i = 0; i < cookies.length; i++) {\n                     var cookie = jQuery.trim(cookies[i]);\n                     // Does this cookie string begin with the name we want?\n                     if (cookie.substring(0, name.length + 1) == (name + '=')) {\n                         cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                         break;\n                     }\n                 }\n             }\n             return cookieValue;\n         }\n         if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {\n             // Only send the token to relative URLs i.e. locally.\n             xhr.setRequestHeader(\"X-CSRFToken\", getCookie('csrftoken'));\n         }\n     } \n});\n\n\ninstead of the code posted in the official docs:\nhttps://docs.djangoproject.com/en/2.2/ref/csrf/\n\nThe working code, comes from this Django entry: http://www.djangoproject.com/weblog/2011/feb/08/security/\n\nSo the general solution is: \"use ajaxSetup handler instead of ajaxSend handler\". I don't know why it works. But it works for me :)\n\nPrevious post (without answer)\n\nI'm experiencing the same problem actually.\n\nIt occurs after updating to Django 1.2.5 - there were no errors with AJAX POST requests in Django 1.2.4 (AJAX wasn't protected in any way, but it worked just fine).\n\nJust like OP, I have tried the JavaScript snippet posted in Django documentation. I'm using jQuery 1.5. I'm also using the \"django.middleware.csrf.CsrfViewMiddleware\" middleware.\n\nI tried to follow the the middleware code and I know that it fails on this:\n\nrequest_csrf_token = request.META.get('HTTP_X_CSRFTOKEN', '')\n\n\nand then\n\nif request_csrf_token != csrf_token:\n    return self._reject(request, REASON_BAD_TOKEN)\n\n\nthis \"if\" is true, because \"request_csrf_token\" is empty.\n\nBasically it means that the header is NOT set. So is there anything wrong with this JS line:\n\nxhr.setRequestHeader(\"X-CSRFToken\", getCookie('csrftoken'));\n\n\n?\n\nI hope that provided details will help us in resolving the issue :)\n    ",
            "votes": 187,
            "comentarios": [
                {
                    "decripcion": "This Worked! I put in the .ajaxSetup function as you pasted it above and I'm now able to post without a 403 error.  Thank you for sharing the solution, Jakub. Good find. :)",
                    "fecha": { "$date" : "2011-02-26 04:38:14Z" },
                    "usuario": "firebush",
                    "usuario_id": 2787
                },
                {
                    "decripcion": "Using ajaxSetup rather than ajaxSend runs counter to the jQuery docs: api.jquery.com/jQuery.ajaxSetup",
                    "fecha": { "$date" : "2011-05-09 14:07:14Z" },
                    "usuario": "Mark Lavin",
                    "usuario_id": 2788
                },
                {
                    "decripcion": "using 1.3, the official django documentation entry worked for me.",
                    "fecha": { "$date" : "2011-08-15 14:22:57Z" },
                    "usuario": "monkut",
                    "usuario_id": 2752
                },
                {
                    "decripcion": "I tried but this doesn't seem to work for me, I am using jQuery v1.7.2, my question is stackoverflow.com/questions/11812694/\u2026",
                    "fecha": { "$date" : "2012-08-04 23:56:03Z" },
                    "usuario": "daydreamer",
                    "usuario_id": 2789
                },
                {
                    "decripcion": "I have to add annotation @ensure_csrf_cookie to my view function to force set csrf cookie when the page is requested from mobile devices.",
                    "fecha": { "$date" : "2014-01-22 07:12:12Z" },
                    "usuario": "Kane",
                    "usuario_id": 2790
                }
            ],
            "usuario": "Jakub Goc\u0142awski",
            "usuario_id": 2791
        },
        "respuestas": [
            1566,
            1567,
            1568,
            1569,
            1570,
            1571,
            1572,
            1573,
            1574,
            1575,
            1576,
            1577,
            1578,
            1579,
            1580,
            1581,
            1582,
            1583,
            1584,
            1585,
            1586,
            1587
        ],
        "comentarios": [
            {
                "decripcion": "What version of django are you using?",
                "fecha": { "$date" : "2011-02-24 07:46:53Z" },
                "usuario": "zsquare",
                "usuario_id": 2818
            },
            {
                "decripcion": "Have you added in the correct CSRF middleware classes and put them in the correct order?",
                "fecha": { "$date" : "2011-02-24 07:57:50Z" },
                "usuario": "darren",
                "usuario_id": 2819
            },
            {
                "decripcion": "Jakub answered my question below, but just in case it's useful to other people:  @zsquare: version 1.2.3.  @mongoose_za: Yes, they are added and in the right order.",
                "fecha": { "$date" : "2011-02-26 04:42:48Z" },
                "usuario": "firebush",
                "usuario_id": 2787
            }
        ],
        "usuario": "firebush",
        "usuario_id": 2787
    },
    {
        "_id": 98,
        "titulo": "Dynamically adding a form to a Django formset",
        "fecha": { "$date" : "2021-03-13 01:50:48Z" },
        "decripcion": "\n                \nI want to dynamically add new forms to a Django formset, so that when the user clicks an \"add\" button it runs JavaScript that adds a new form (which is part of the formset) to the page.\n    ",
        "votes": 269,
        "tags": [
            "django"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1588,
            "fecha": { "$date" : "2009-09-16 06:42:13Z" },
            "decripcion": "\nThis is how I do it, using jQuery:\n\nMy template:\n\n<h3>My Services</h3>\n{{ serviceFormset.management_form }}\n{% for form in serviceFormset.forms %}\n    <div class='table'>\n    <table class='no_error'>\n        {{ form.as_table }}\n    </table>\n    </div>\n{% endfor %}\n<input type=\"button\" value=\"Add More\" id=\"add_more\">\n<script>\n    $('#add_more').click(function() {\n        cloneMore('div.table:last', 'service');\n    });\n</script>\n\n\nIn a javascript file:\n\nfunction cloneMore(selector, type) {\n    var newElement = $(selector).clone(true);\n    var total = $('#id_' + type + '-TOTAL_FORMS').val();\n    newElement.find(':input').each(function() {\n        var name = $(this).attr('name').replace('-' + (total-1) + '-','-' + total + '-');\n        var id = 'id_' + name;\n        $(this).attr({'name': name, 'id': id}).val('').removeAttr('checked');\n    });\n    newElement.find('label').each(function() {\n        var newFor = $(this).attr('for').replace('-' + (total-1) + '-','-' + total + '-');\n        $(this).attr('for', newFor);\n    });\n    total++;\n    $('#id_' + type + '-TOTAL_FORMS').val(total);\n    $(selector).after(newElement);\n}\n\n\nWhat it does:\n\ncloneMore accepts selector as the first argument, and the type of formset as the 2nd one. What the selector should do is pass it what it should duplicate. In this case, I pass it div.table:last so that jQuery looks for the last table with a class of table. The :last part of it is important because the selector is also used to determine what the new form will be inserted after. More than likely you'd want it at the end of the rest of the forms. The type argument is so that we can update the management_form field, notably TOTAL_FORMS, as well as the actual form fields. If you have a formset full of, say, Client models, the management fields will have IDs of id_clients-TOTAL_FORMS and id_clients-INITIAL_FORMS, while the form fields will be in a format of id_clients-N-fieldname with N being the form number, starting with 0. So with the type argument the cloneMore function looks at how many forms there currently are, and goes through every input and label inside the new form replacing all the field names/ids from something like id_clients-(N)-name to id_clients-(N+1)-name and so on. After it is finished, it updates the TOTAL_FORMS field to reflect the new form and adds it to the end of the set.\n\nThis function is particularly helpful to me because the way it is setup it allows me to use it throughout the app when I want to provide more forms in a formset, and doesn't make me need to have a hidden \"template\" form to duplicate as long as I pass it the formset name and the format in which the forms are laid out. Hope it helps.\n    ",
            "votes": 230,
            "comentarios": [
                {
                    "decripcion": "In IE, a clone from a cloned element is represented as <undefined> when selecting in JS, why?",
                    "fecha": { "$date" : "2009-10-13 14:46:57Z" },
                    "usuario": "panchicore",
                    "usuario_id": 2820
                },
                {
                    "decripcion": "I found that in Django 1.1 you'll need to assign a value to the prefix member of the Formset Object. This should the same value as the type argument for the cloneMore function.",
                    "fecha": { "$date" : "2010-02-11 18:46:54Z" },
                    "usuario": "Derek Reynolds",
                    "usuario_id": 2821
                },
                {
                    "decripcion": "I modified this to take the selector without :last and used var total = $(selector).length; to get my total because a refresh of the page would remove my formsets but leave the TOTAL increase leading to the wrong number being saved. I then added :last to the selector as needed. Thank for this.",
                    "fecha": { "$date" : "2010-11-05 00:47:27Z" },
                    "usuario": "Greg",
                    "usuario_id": 2822
                },
                {
                    "decripcion": "I have found that this using  $(this).attr({'name': name, 'id': id}).val('').removeAttr('checked'); To clear the input will mess up checkboxes. Setting val('') gives the checkboxes an empty value attribute. And since checkboxes don't use the value attribute this will never be updated - no matter how many times you click it. But it seems that value has higher priority than the \"checked\" attributed of checkboxes. Which will mean that you will always post non checked checkboxes.",
                    "fecha": { "$date" : "2011-07-14 19:28:02Z" },
                    "usuario": "niklasdstrom",
                    "usuario_id": 2823
                },
                {
                    "decripcion": "please paolo can you check my problem stackoverflow.com/questions/62252867/\u2026",
                    "fecha": { "$date" : "2020-06-09 14:47:07Z" },
                    "usuario": "art_cs",
                    "usuario_id": 2824
                }
            ],
            "usuario": "Paolo Bergantino",
            "usuario_id": 2825
        },
        "respuestas": [
            1588,
            1589,
            1590,
            1591,
            1592,
            1593,
            1594,
            1595,
            1596,
            1597
        ],
        "comentarios": [
            {
                "decripcion": "I'm just guessing at your use case here, is it something like the \"Attach Another File\" feature in gmail, where the user is presented with a file upload field and new fields are added to the DOM on the fly as the user clicks to \"Attach Another File\" plus button?",
                "fecha": { "$date" : "2009-02-02 00:56:37Z" },
                "usuario": "prairiedogg",
                "usuario_id": 2837
            },
            {
                "decripcion": "This is something I was going to work on soon, so I'll also be interested in any answers.",
                "fecha": { "$date" : "2009-02-02 04:09:08Z" },
                "usuario": "Van Gale",
                "usuario_id": 2755
            },
            {
                "decripcion": "I think this is a much better solution. stackoverflow.com/questions/2353710/\u2026 Does things clone doesn't: - Add form when no initial forms exists - Handles javascript in the form better, for example django-ckeditor - Keep initial data",
                "fecha": { "$date" : "2011-07-25 16:21:10Z" },
                "usuario": "Bufke",
                "usuario_id": 2838
            }
        ],
        "usuario": "Brian Tol",
        "usuario_id": 2839
    },
    {
        "_id": 99,
        "titulo": "Django template how to look up a dictionary value with a variable",
        "fecha": { "$date" : "2017-12-14 13:14:27Z" },
        "decripcion": "\n                \nmydict = {\"key1\":\"value1\", \"key2\":\"value2\"}\n\n\nThe regular way to lookup a dictionary value in a Django template is {{ mydict.key1 }},  {{ mydict.key2 }}. What if the key is a loop variable? ie:\n\n{% for item in list %} # where item has an attribute NAME\n  {{ mydict.item.NAME }} # I want to look up mydict[item.NAME]\n{% endfor %}\n\n\nmydict.item.NAME fails. How to fix this?\n    ",
        "votes": 265,
        "tags": [
            "python",
            "dictionary",
            "django",
            "templates"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1598,
            "fecha": { "$date" : "2020-09-15 08:02:34Z" },
            "decripcion": "\nWrite a custom template filter:\nfrom django.template.defaulttags import register\n...\n@register.filter\ndef get_item(dictionary, key):\n    return dictionary.get(key)\n\n(I use .get so that if the key is absent, it returns none. If you do dictionary[key] it will raise a KeyError then.)\nusage:\n{{ mydict|get_item:item.NAME }}\n\n    ",
            "votes": 411,
            "comentarios": [
                {
                    "decripcion": "Django Custom Template Tag documentation, for those finding this in the future.",
                    "fecha": { "$date" : "2012-08-25 21:26:32Z" },
                    "usuario": "Jeff",
                    "usuario_id": 1912
                },
                {
                    "decripcion": "Why is this not built in by default? :-(",
                    "fecha": { "$date" : "2012-12-28 15:23:07Z" },
                    "usuario": "Berislav Lopac",
                    "usuario_id": 2840
                },
                {
                    "decripcion": "I think @Jeff meant Django Custom Template Filter documentation",
                    "fecha": { "$date" : "2013-07-24 10:08:17Z" },
                    "usuario": "Jorge Leitao",
                    "usuario_id": 2841
                },
                {
                    "decripcion": "in Jinja2 {{ mydict[key] }}",
                    "fecha": { "$date" : "2014-11-12 02:45:20Z" },
                    "usuario": "Evgeny",
                    "usuario_id": 696
                },
                {
                    "decripcion": "Does the filter go in views.py, some extra filters.py, or what file?",
                    "fecha": { "$date" : "2015-06-28 18:10:10Z" },
                    "usuario": "AlanSE",
                    "usuario_id": 2842
                }
            ],
            "usuario": "culebr\u00f3n",
            "usuario_id": 2843
        },
        "respuestas": [
            1598,
            1599,
            1600,
            1601,
            1602,
            1603,
            1604,
            1605
        ],
        "comentarios": [],
        "usuario": "Stan",
        "usuario_id": 2857
    },
    {
        "_id": 100,
        "titulo": "What is related_name used for?",
        "fecha": { "$date" : "2021-08-22 04:30:02Z" },
        "decripcion": "\n                \nWhat is the related_name argument useful for on ManyToManyField and ForeignKey fields? For example, given the following code, what is the effect of related_name='maps'?\n\nclass Map(db.Model):\n    members = models.ManyToManyField(User, related_name='maps',\n                                     verbose_name=_('members'))\n\n    ",
        "votes": 530,
        "tags": [
            "python",
            "foreign-keys",
            "many-to-many",
            "django"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1606,
            "fecha": { "$date" : "2013-09-13 15:42:32Z" },
            "decripcion": "\nThe related_name attribute specifies the name of the reverse relation from the User model back to your model.\n\nIf you don't specify a related_name, Django automatically creates one using the name of your model with the suffix _set, for instance User.map_set.all(). \n\nIf you do specify, e.g. related_name=maps on the User model, User.map_set will still work, but the User.maps. syntax is obviously a bit cleaner and less clunky; so for example, if you had a user object current_user, you could use current_user.maps.all() to get all instances of your Map model that have a relation to current_user. \n\nThe Django documentation has more details.\n    ",
            "votes": 723,
            "comentarios": [
                {
                    "decripcion": "Okay, I know this is an old post. But I'm just trying to figure this out - what's the + trick at the end of the related name? For instance, what happens if I did related_name='maps+' in the example above?",
                    "fecha": { "$date" : "2014-05-07 04:12:33Z" },
                    "usuario": "Sidd",
                    "usuario_id": 2858
                },
                {
                    "decripcion": "if you add the +, django disables the mapping",
                    "fecha": { "$date" : "2014-06-16 15:04:21Z" },
                    "usuario": "josephmisiti",
                    "usuario_id": 2859
                },
                {
                    "decripcion": "for OneToOneField default related_name will be small case class name. For example in the given example if members would be OneToOnefield then \"User.map\" will work.",
                    "fecha": { "$date" : "2014-11-12 09:44:36Z" },
                    "usuario": "ancho",
                    "usuario_id": 2860
                },
                {
                    "decripcion": "if you specify related_name, does _set still work in django1.11 > ??",
                    "fecha": { "$date" : "2018-09-03 14:54:16Z" },
                    "usuario": "Esir Kings",
                    "usuario_id": 2861
                },
                {
                    "decripcion": "I use Django 2.1.3 and I can note those are exclusive. Once related_name is specified, _set does not work anymore.",
                    "fecha": { "$date" : "2018-12-03 21:07:13Z" },
                    "usuario": "stockersky",
                    "usuario_id": 2862
                }
            ],
            "usuario": "Wogan",
            "usuario_id": 2863
        },
        "respuestas": [
            1606,
            1607,
            1608,
            1609,
            1610,
            1611
        ],
        "comentarios": [
            {
                "decripcion": "@DanielRoseman Is it somehow good for performance or good practice to use related_name='+' when backwards relation is not necessary?",
                "fecha": { "$date" : "2012-10-25 23:02:04Z" },
                "usuario": "lajarre",
                "usuario_id": 2872
            },
            {
                "decripcion": "I'd be curious to know the answer to @lajarre's question.",
                "fecha": { "$date" : "2013-09-13 15:28:43Z" },
                "usuario": "3cheesewheel",
                "usuario_id": 2873
            },
            {
                "decripcion": "@lajarre - I assume that won't change performance at all. I've had to use it once with FeinCMS content types. I personally think it's good practice to always specify the related_name so if you know you won't use it, I guess it's a good thing. That's a personal opinion of course.",
                "fecha": { "$date" : "2017-03-24 07:20:19Z" },
                "usuario": "Fran\u00e7ois Constant",
                "usuario_id": 2874
            },
            {
                "decripcion": "@3cheesewheel it's in the docs now: docs.djangoproject.com/en/2.0/ref/models/fields/\u2026 + means do not create reverse relation",
                "fecha": { "$date" : "2018-05-01 15:00:11Z" },
                "usuario": "Myer",
                "usuario_id": 2875
            }
        ],
        "usuario": "zjm1126",
        "usuario_id": 2876
    },
    {
        "_id": 101,
        "titulo": "Numeric for loop in Django templates",
        "fecha": { "$date" : "2009-07-10 04:48:04Z" },
        "decripcion": "\n                \nHow do I write a numeric for loop in a Django template? I mean something like\n\nfor i = 1 to n\n\n    ",
        "votes": 299,
        "tags": [
            "django-templates",
            "django"
        ],
        "respondida": false,
        "respuesta_aceptada": "NA",
        "respuestas": [
            1612,
            1613,
            1614,
            1615,
            1616,
            1617,
            1618,
            1619,
            1620,
            1621,
            1622,
            1623,
            1624,
            1625,
            1626,
            1627,
            1628,
            1629,
            1630,
            1631,
            1632
        ],
        "comentarios": [],
        "usuario": "Lev",
        "usuario_id": 2915
    },
    {
        "_id": 102,
        "titulo": "How to query as GROUP BY in django?",
        "fecha": { "$date" : "2019-03-24 18:34:11Z" },
        "decripcion": "\n                \nI query a model:\n\nMembers.objects.all()\n\n\nAnd it returns:\n\nEric, Salesman, X-Shop\nFreddie, Manager, X2-Shop\nTeddy, Salesman, X2-Shop\nSean, Manager, X2-Shop\n\n\nWhat I want is to know the best Django way to fire\na group_by query to my database, like:\n\nMembers.objects.all().group_by('designation')\n\n\nWhich doesn't work, of course.\nI know we can do some tricks on django/db/models/query.py, but I am just curious to know how to do it without patching.\n    ",
        "votes": 407,
        "tags": [
            "python",
            "django",
            "django-models"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1633,
            "fecha": { "$date" : "2021-04-13 11:14:55Z" },
            "decripcion": "\nIf you mean to do aggregation you can use the aggregation features of the ORM:\nfrom django.db.models import Count\nresult = (Members.objects\n    .values('designation')\n    .annotate(dcount=Count('designation'))\n    .order_by()\n)\n\nThis results in a query similar to\nSELECT designation, COUNT(designation) AS dcount\nFROM members GROUP BY designation\n\nand the output would be of the form\n[{'designation': 'Salesman', 'dcount': 2}, \n {'designation': 'Manager', 'dcount': 2}]\n\nIf you don't include the order_by(), you may get incorrect results if the default sorting is not what you expect.\nIf you want to include multiple fields in the results, just add them as arguments to values, for example:\n    .values('designation', 'first_name', 'last_name')\n\nReferences:\n\nDjango documentation: values(), annotate(), and Count\nDjango documentation: Aggregation, and in particular the section entitled Interaction with default ordering or order_by()\n\n    ",
            "votes": 602,
            "comentarios": [
                {
                    "decripcion": "@Harry: You can chain it. Something like: Members.objects.filter(date=some_date).values('designation').annotate(dcount=Count('designation'))",
                    "fecha": { "$date" : "2013-05-15 23:14:47Z" },
                    "usuario": "Eli",
                    "usuario_id": 585
                },
                {
                    "decripcion": "i have a question, this query is only returning designation and dcount, what if i want to get other values of the table too?",
                    "fecha": { "$date" : "2014-03-05 08:02:39Z" },
                    "usuario": "A.J.",
                    "usuario_id": 2826
                },
                {
                    "decripcion": "Note that if your sorting is a field other than designation, it will not work without resetting the sort. See stackoverflow.com/a/1341667/202137",
                    "fecha": { "$date" : "2014-05-05 19:41:13Z" },
                    "usuario": "Gidgidonihah",
                    "usuario_id": 2916
                },
                {
                    "decripcion": "@Gidgidonihah True, the example should read Members.objects.order_by('disignation').values('designation').annotate(dcount=Count('designation'))",
                    "fecha": { "$date" : "2014-10-30 15:16:33Z" },
                    "usuario": "bjunix",
                    "usuario_id": 2917
                },
                {
                    "decripcion": "i have a question, this query is only returning designation and dcount, what if i want to get other values of the table too?",
                    "fecha": { "$date" : "2016-10-26 02:18:39Z" },
                    "usuario": "Yann\u53f6",
                    "usuario_id": 2918
                }
            ],
            "usuario": "Gu\u00f0mundur H",
            "usuario_id": 2919
        },
        "respuestas": [
            1633,
            1634,
            1635,
            1636,
            1637,
            1638,
            1639,
            1640,
            1641,
            1642
        ],
        "comentarios": [],
        "usuario": "simplyharsh",
        "usuario_id": 2920
    },
    {
        "_id": 103,
        "titulo": "In a Django form, how do I make a field readonly (or disabled) so that it cannot be edited?",
        "fecha": { "$date" : "2016-07-30 01:58:02Z" },
        "decripcion": "\n                \nIn a Django form, how do I make a field read-only (or disabled)?\n\nWhen the form is being used to create a new entry, all fields should be enabled - but when the record is in update mode some fields need to be read-only.\n\nFor example, when creating a new Item model, all fields must be editable, but while updating the record, is there a way to disable the sku field so that it is visible, but cannot be edited?\n\nclass Item(models.Model):\n    sku = models.CharField(max_length=50)\n    description = models.CharField(max_length=200)\n    added_by = models.ForeignKey(User)\n\n\nclass ItemForm(ModelForm):\n    class Meta:\n        model = Item\n        exclude = ('added_by')\n\ndef new_item_view(request):\n    if request.method == 'POST':\n        form = ItemForm(request.POST)\n        # Validate and save\n    else:\n            form = ItemForm()\n    # Render the view\n\n\nCan class ItemForm be reused? What changes would be required in the ItemForm or Item model class? Would I need to write another class, \"ItemUpdateForm\", for updating the item?\n\ndef update_item_view(request):\n    if request.method == 'POST':\n        form = ItemUpdateForm(request.POST)\n        # Validate and save\n    else:\n        form = ItemUpdateForm()\n\n    ",
        "votes": 475,
        "tags": [
            "django",
            "field",
            "forms",
            "readonly"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1643,
            "fecha": { "$date" : "2019-02-13 18:04:50Z" },
            "decripcion": "\nAs pointed out in this answer, Django 1.9 added the Field.disabled attribute:\n\n\n  The disabled boolean argument, when set to True, disables a form field using the disabled HTML attribute so that it won\u2019t be editable by users. Even if a user tampers with the field\u2019s value submitted to the server, it will be ignored in favor of the value from the form\u2019s initial data.\n\n\nWith Django 1.8 and earlier, to disable entry on the widget and prevent malicious POST hacks you must scrub the input in addition to setting the readonly attribute on the form field:\n\nclass ItemForm(ModelForm):\n    def __init__(self, *args, **kwargs):\n        super(ItemForm, self).__init__(*args, **kwargs)\n        instance = getattr(self, 'instance', None)\n        if instance and instance.pk:\n            self.fields['sku'].widget.attrs['readonly'] = True\n\n    def clean_sku(self):\n        instance = getattr(self, 'instance', None)\n      \u00a0 if instance and instance.pk:\n        \u00a0 \u00a0 return instance.sku\n      \u00a0 else:\n        \u00a0 \u00a0 return self.cleaned_data['sku']\n\n\nOr, replace if instance and instance.pk with another condition indicating you're editing.  You could also set the attribute disabled on the input field, instead of readonly.\n\nThe clean_sku function will ensure that the readonly value won't be overridden by a POST.\n\nOtherwise, there is no built-in Django form field which will render a value while rejecting bound input data.  If this is what you desire, you should instead create a separate ModelForm that excludes the uneditable field(s), and just print them inside your template.\n    ",
            "votes": 463,
            "comentarios": [
                {
                    "decripcion": "Daniel, Thanks for posting an answer. It is not clear to me how to use this code? wouldn't this code work for same for new as well update mode? Can you edit your answer to give examples on how to use it for new and update forms? Thanks.",
                    "fecha": { "$date" : "2008-11-29 16:29:09Z" },
                    "usuario": "X10",
                    "usuario_id": 2935
                },
                {
                    "decripcion": "The key to Daniel's example is testing the .id field. Newly created objects will have id==None. By the way, one of the oldest open Django tickets is about this issue. See code.djangoproject.com/ticket/342 .",
                    "fecha": { "$date" : "2008-11-29 16:52:31Z" },
                    "usuario": "Peter Rowell",
                    "usuario_id": 2936
                },
                {
                    "decripcion": "@moadeep add a clean_description method to the form class.",
                    "fecha": { "$date" : "2015-04-17 16:41:14Z" },
                    "usuario": "Daniel Naab",
                    "usuario_id": 2832
                },
                {
                    "decripcion": "on linux (ubuntu 15 ) / chrome v45, readonly changes the pointer to a \"disabled hand\" but the field is then clickable. with disabled it works as expected",
                    "fecha": { "$date" : "2015-10-08 10:19:48Z" },
                    "usuario": "simone cittadini",
                    "usuario_id": 2937
                },
                {
                    "decripcion": "This answer needs to be updated. A new field argument disabled is added in Django 1.9. If Field.disabled is set to True, then POST value for that Field is ignored. So if you're using 1.9, there's no need to override clean, just set disabled = True. Check this answer.",
                    "fecha": { "$date" : "2016-06-05 05:09:05Z" },
                    "usuario": "narendra-choudhary",
                    "usuario_id": 2938
                }
            ],
            "usuario": "Daniel Naab",
            "usuario_id": 2832
        },
        "respuestas": [
            1643,
            1644,
            1645,
            1646,
            1647,
            1648,
            1649,
            1650,
            1651,
            1652,
            1653,
            1654,
            1655,
            1656,
            1657,
            1658,
            1659,
            1660,
            1661,
            1662,
            1663,
            1664,
            1665,
            1666,
            1667,
            1668
        ],
        "comentarios": [
            {
                "decripcion": "See also SO question: Why are read-only form fields in Django a bad idea? @ stackoverflow.com/questions/2902024 , Accepted answer (by Daniel Naab) takes care of malicious POST hacks.",
                "fecha": { "$date" : "2011-08-13 02:14:34Z" },
                "usuario": "X10",
                "usuario_id": 2935
            },
            {
                "decripcion": "forms.fields.Field.disabled",
                "fecha": { "$date" : "2020-10-06 14:18:30Z" },
                "usuario": "djvg",
                "usuario_id": 2956
            }
        ],
        "usuario": "X10",
        "usuario_id": 2935
    },
    {
        "_id": 104,
        "titulo": "Why does DEBUG=False setting make my django Static Files Access fail?",
        "fecha": { "$date" : "2018-06-04 11:31:22Z" },
        "decripcion": "\n                \nAm building an app using Django as my workhorse. All has been well so far - specified db settings, configured static directories, urls, views etc. But trouble started sneaking in the moment I wanted to render my own beautiful and custom 404.html and 500.html pages.\n\nI read the docs on custom error handling, and set necessary configurations in UrlsConf, created corresponding views and added the 404.html and the 500.html to my app's template directory (specified in the settings.py too).\n\nBut the docs say you can actually view custom error views until Debug is Off, so I did turn it off to test my stuff, and that's when stuff goes berserk!\n\nNot only do I fail to view the custom 404.html (actually, it loads, but because my error pages each contain a graphic error message -as some nice image), the source of the error page loads, but nothing else loads! Not even linked CSS or Javascript!\n\nGenerally, once I set DEBUG = False, all views will load, but any linked content (CSS, Javascript, Images, etc) wont load! What's happening? Is there something am missing, concerning static files and the DEBUG setting?\n    ",
        "votes": 428,
        "tags": [
            "django",
            "django-staticfiles",
            "django-views"
        ],
        "respondida": true,
        "respuesta_aceptada": {
            "_id": 1670,
            "fecha": { "$date" : "2011-04-29 19:53:49Z" },
            "decripcion": "\nWith debug turned off Django won't handle static files for you any more - your production web server (Apache or something) should take care of that.\n    ",
            "votes": 428,
            "comentarios": [
                {
                    "decripcion": "This actually settles my curiosity, so now it makes sense, and i can indeed take care of it with Apache if need be then. I'd thought it was a problem with my own settings. Thanks",
                    "fecha": { "$date" : "2011-04-29 20:07:37Z" },
                    "usuario": "JWL",
                    "usuario_id": 2733
                },
                {
                    "decripcion": "I found this answer very helpful. Just in case someone else is in my same situation (using Google App Engine for the app with nonrel django): don't forget to update app.yaml.",
                    "fecha": { "$date" : "2011-08-20 16:14:46Z" },
                    "usuario": "Lyndsey Ferguson",
                    "usuario_id": 2982
                },
                {
                    "decripcion": "handlers: - url: /static   static_dir: static",
                    "fecha": { "$date" : "2011-08-20 16:15:26Z" },
                    "usuario": "Lyndsey Ferguson",
                    "usuario_id": 2982
                },
                {
                    "decripcion": "Doesn't make sense to me. I would like to test it locally somehow with Debug=False",
                    "fecha": { "$date" : "2020-06-23 13:55:07Z" },
                    "usuario": "Philipp S.",
                    "usuario_id": 2983
                },
                {
                    "decripcion": "manage.py runserver --insecure works for serving static files with debug=True",
                    "fecha": { "$date" : "2021-04-13 07:08:21Z" },
                    "usuario": "Sami",
                    "usuario_id": 2984
                }
            ],
            "usuario": "Marek Sapota",
            "usuario_id": 2985
        },
        "respuestas": [
            1669,
            1670,
            1671,
            1672,
            1673,
            1674,
            1675,
            1676,
            1677,
            1678,
            1679,
            1680,
            1681,
            1682,
            1683,
            1684,
            1685
        ],
        "comentarios": [
            {
                "decripcion": "How are you hosting? Local machine with the test server?",
                "fecha": { "$date" : "2011-04-29 19:50:48Z" },
                "usuario": "j_syk",
                "usuario_id": 2995
            },
            {
                "decripcion": "local machine with test server. I basically want to see how my custom error handling would work by locally simulating scenarios such as accessing non-existing pages and causing run-time errors - but my static content wont load.",
                "fecha": { "$date" : "2011-04-29 19:56:20Z" },
                "usuario": "JWL",
                "usuario_id": 2733
            },
            {
                "decripcion": "Either it can be done at server level like here or it can be handled at Django level by adding urlpattern. I found this below question for the same problem. stackoverflow.com/questions/6405173/\u2026",
                "fecha": { "$date" : "2015-02-09 10:18:40Z" },
                "usuario": "Pankaj Anand",
                "usuario_id": 3009
            }
        ],
        "usuario": "ANON",
        "usuario_id": 63
    }
]